import{d as re,aQ as ie,aI as ce,o as de,c as le,u as me,ah as ue}from"./index-gVmBTWk7.js";import{W as he,P as pe,O as fe,S as ge,C as B,T as we,g as _e,ao as H,s as ve,x as y,f as xe,am as be,a as w,al as Me,J as h,B as ye,M as Ee}from"./OrbitControls-BhXoMS-P.js";import{m as Se}from"./BufferGeometryUtils-CKXThuvA.js";const ze=["id"],P=11730/1e3,De=109/1e3,Pe=re({__name:"index",setup(Re){const E=ie();function T(){const _=document.getElementById(E),p=new he({antialias:!0,canvas:_}),C=60,F=2,L=.1,W=100,u=new pe(C,F,L,W);u.position.z=2.5;const c=new fe(u,_);c.enableDamping=!0,c.enablePan=!1,c.minDistance=1.2,c.maxDistance=4,c.update();const d=new ge;d.background=new B("black");{const e=new we().load("three/world.jpg",f);e.colorSpace=_e;const n=new H(1,64,32),o=new ve({map:e});d.add(new y(n,o))}{const n=new xe(16777215,500);n.position.set(-P,0,0),d.add(n);const o=new H(De,64,32),s=new be({emissive:"#F0AE20"}),i=new y(o,s);i.position.set(-P,0,0),d.add(i)}async function q(t){return(await fetch(t)).text()}function G(t){const e=[],n={data:e};let o,s;return t.split(`
`).forEach(i=>{const a=i.trim().split(/\s+/);if(a.length===2)n[a[0]]=parseFloat(a[1]);else if(a.length>2){const l=a.map(m=>{const r=parseFloat(m);if(r!==n.NODATA_value)return o=Math.max(o===void 0?r:o,r),s=Math.min(s===void 0?r:s,r),r});e.push(l)}}),Object.assign(n,{min:s,max:o})}function I(t){const{min:e,max:n,data:o}=t,s=n-e,i=new w;d.add(i);const a=new w;i.add(a);const l=new w;l.position.z=1,a.add(l);const m=new w;m.position.z=.5,l.add(m);const r=new B,j=Math.PI*1.5,k=Math.PI*-(85/90/2),S=[];o.forEach((Q,V)=>{Q.forEach((z,$)=>{if(z===void 0)return;const b=(z-e)/s,K=1,X=1,Y=1,g=new Me(K,X,Y);i.rotation.y=h.degToRad($)+j,a.rotation.x=h.degToRad(V)+k,l.scale.set(.005,.005,h.lerp(.01,.5,b)),m.updateWorldMatrix(!0,!1),g.applyMatrix4(m.matrixWorld);const Z=h.lerp(.7,.3,b),ee=1,te=h.lerp(.4,1,b);r.setHSL(Z,ee,te);const ne=r.toArray().map(R=>R*255),oe=g.getAttribute("position").count,D=3,M=new Uint8Array(D*oe);M.forEach((R,A)=>{M[A]=ne[A%3]});const se=!0,ae=new ye(M,D,se);g.setAttribute("color",ae),S.push(g)})});const U=Se(S,!1),N=new Ee({vertexColors:!0}),J=new y(U,N);d.add(J)}q("three/gpw_v4_basic_demographic_characteristics_rev10_a000_014mt_2010_cntm_1_deg.asc").then(G).then(I).then(f);function O(t){const e=t.domElement,n=e.clientWidth,o=e.clientHeight,s=e.width!==n||e.height!==o;return s&&t.setSize(n,o,!1),s}let v=!1;function f(){if(v=!1,O(p)){const t=p.domElement;u.aspect=t.clientWidth/t.clientHeight,u.updateProjectionMatrix()}c.update(),p.render(d,u)}f();function x(){v||(v=!0,requestAnimationFrame(f))}c.addEventListener("change",x),window.addEventListener("resize",x),ue(()=>{window.removeEventListener("resize",x)})}return ce(()=>{T()}),(_,p)=>(de(),le("canvas",{id:me(E)},null,8,ze))}});export{Pe as default};
