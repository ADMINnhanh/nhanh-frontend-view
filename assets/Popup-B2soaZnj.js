import{J as se,dg as Z,Q as T,dh as ee,di as ce,dj as fe,I as L,aF as de,N as te,bC as ve,cS as pe,dk as c,c7 as ge,cJ as z,G as k,u as C,d as ne,dl as he,h as ye,ao as me,aY as we,b4 as Se,w as H,o as be,aS as Q,a$ as Y,b as K,b2 as Ee,b3 as xe,dm as De,_ as Me}from"./index-B6jRmsKc.js";import{N as Oe}from"./Ellipsis-BKm_vARY.js";function G(e){return ce()?(fe(e),!0):!1}const V=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ke=Object.prototype.toString,oe=e=>ke.call(e)==="[object Object]",Ne=()=>{},j=Ae();function Ae(){var e,n;return V&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function re(...e){if(e.length!==1)return se(...e);const n=e[0];return typeof n=="function"?Z(ee(()=>({get:n,set:Ne}))):T(n)}function Ce(e,n){function t(...a){return new Promise((i,d)=>{Promise.resolve(e(()=>n.apply(this,a),{fn:n,thisArg:this,args:a})).then(i).catch(d)})}return t}const le=e=>e();function _e(e=le,n={}){const{initialState:t="active"}=n,a=re(t==="active");function i(){a.value=!1}function d(){a.value=!0}const p=(...o)=>{a.value&&e(...o)};return{isActive:Z(a),pause:i,resume:d,eventFilter:p}}function W(e){return Array.isArray(e)?e:[e]}function We(e){return ge()}function Te(e,n,t={}){const{eventFilter:a=le,...i}=t;return L(e,Ce(a,n),i)}function Pe(e,n,t={}){const{eventFilter:a,initialState:i="active",...d}=t,{eventFilter:p,pause:o,resume:r,isActive:l}=_e(a,{initialState:i});return{stop:Te(e,n,{...d,eventFilter:p}),pause:o,resume:r,isActive:l}}function $e(e,n={}){if(!ve(e))return pe(e);const t=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const a in e.value)t[a]=ee(()=>({get(){return e.value[a]},set(i){var d;if((d=c(n.replaceRef))!=null?d:!0)if(Array.isArray(e.value)){const o=[...e.value];o[a]=i,e.value=o}else{const o={...e.value,[a]:i};Object.setPrototypeOf(o,Object.getPrototypeOf(e.value)),e.value=o}else e.value[a]=i}}));return t}function Le(e,n=!0,t){We()?de(e,t):n?e():te(e)}function ae(e,n,t){return L(e,n,{...t,immediate:!0})}const J=V?window:void 0;function Ve(e){var n;const t=c(e);return(n=t==null?void 0:t.$el)!=null?n:t}function $(...e){const n=[],t=()=>{n.forEach(o=>o()),n.length=0},a=(o,r,l,s)=>(o.addEventListener(r,l,s),()=>o.removeEventListener(r,l,s)),i=k(()=>{const o=W(c(e[0])).filter(r=>r!=null);return o.every(r=>typeof r!="string")?o:void 0}),d=ae(()=>{var o,r;return[(r=(o=i.value)==null?void 0:o.map(l=>Ve(l)))!=null?r:[J].filter(l=>l!=null),W(c(i.value?e[1]:e[0])),W(C(i.value?e[2]:e[1])),c(i.value?e[3]:e[2])]},([o,r,l,s])=>{if(t(),!(o!=null&&o.length)||!(r!=null&&r.length)||!(l!=null&&l.length))return;const v=oe(s)?{...s}:s;n.push(...o.flatMap(h=>r.flatMap(g=>l.map(w=>a(h,g,w,v)))))},{flush:"post"}),p=()=>{d(),t()};return G(t),p}const R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},I="__vueuse_ssr_handlers__",Fe=Re();function Re(){return I in R||(R[I]=R[I]||{}),R[I]}function Ie(e,n){return Fe[e]||n}function Je(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ze={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},q="vueuse-storage";function Be(e,n,t,a={}){var i;const{flush:d="pre",deep:p=!0,listenToStorageChanges:o=!0,writeDefaults:r=!0,mergeDefaults:l=!1,shallow:s,window:v=J,eventFilter:h,onError:g=u=>{console.error(u)},initOnMounted:w}=a,N=(s?z:T)(typeof n=="function"?n():n),y=k(()=>c(e));if(!t)try{t=Ie("getDefaultStorage",()=>{var u;return(u=J)==null?void 0:u.localStorage})()}catch(u){g(u)}if(!t)return N;const S=c(n),_=Je(S),M=(i=a.serializer)!=null?i:ze[_],{pause:B,resume:F}=Pe(N,u=>O(u),{flush:d,deep:p,eventFilter:h});L(y,()=>A(),{flush:d});let P=!1;const f=u=>{w&&!P||A(u)},E=u=>{w&&!P||ue(u)};v&&o&&(t instanceof Storage?$(v,"storage",f,{passive:!0}):$(v,q,E)),w?Le(()=>{P=!0,A()}):A();function b(u,m){if(v){const D={key:y.value,oldValue:u,newValue:m,storageArea:t};v.dispatchEvent(t instanceof Storage?new StorageEvent("storage",D):new CustomEvent(q,{detail:D}))}}function O(u){try{const m=t.getItem(y.value);if(u==null)b(m,null),t.removeItem(y.value);else{const D=M.write(u);m!==D&&(t.setItem(y.value,D),b(m,D))}}catch(m){g(m)}}function x(u){const m=u?u.newValue:t.getItem(y.value);if(m==null)return r&&S!=null&&t.setItem(y.value,M.write(S)),S;if(!u&&l){const D=M.read(m);return typeof l=="function"?l(D,S):_==="object"&&!Array.isArray(D)?{...S,...D}:D}else return typeof m!="string"?m:M.read(m)}function A(u){if(!(u&&u.storageArea!==t)){if(u&&u.key==null){N.value=S;return}if(!(u&&u.key!==y.value)){B();try{const m=M.write(N.value);(u===void 0||(u==null?void 0:u.newValue)!==m)&&(N.value=x(u))}catch(m){g(m)}finally{u?te(F):F()}}}}function ue(u){A(u.detail)}return N}function He(e,n={}){var t;const{pointerTypes:a,preventDefault:i,stopPropagation:d,exact:p,onMove:o,onEnd:r,onStart:l,initialValue:s,axis:v="both",draggingElement:h=J,containerElement:g,handle:w=e,buttons:N=[0]}=n,y=T((t=c(s))!=null?t:{x:0,y:0}),S=T(),_=f=>a?a.includes(f.pointerType):!0,M=f=>{c(i)&&f.preventDefault(),c(d)&&f.stopPropagation()},B=f=>{var E;if(!c(N).includes(f.button)||c(n.disabled)||!_(f)||c(p)&&f.target!==c(e))return;const b=c(g),O=(E=b==null?void 0:b.getBoundingClientRect)==null?void 0:E.call(b),x=c(e).getBoundingClientRect(),A={x:f.clientX-(b?x.left-O.left+b.scrollLeft:x.left),y:f.clientY-(b?x.top-O.top+b.scrollTop:x.top)};(l==null?void 0:l(A,f))!==!1&&(S.value=A,M(f))},F=f=>{if(c(n.disabled)||!_(f)||!S.value)return;const E=c(g),b=c(e).getBoundingClientRect();let{x:O,y:x}=y.value;(v==="x"||v==="both")&&(O=f.clientX-S.value.x,E&&(O=Math.min(Math.max(0,O),E.scrollWidth-b.width))),(v==="y"||v==="both")&&(x=f.clientY-S.value.y,E&&(x=Math.min(Math.max(0,x),E.scrollHeight-b.height))),y.value={x:O,y:x},o==null||o(y.value,f),M(f)},P=f=>{c(n.disabled)||!_(f)||S.value&&(S.value=void 0,r==null||r(y.value,f),M(f))};if(V){const f=()=>{var E;return{capture:(E=n.capture)!=null?E:!0,passive:!c(i)}};$(w,"pointerdown",B,f),$(h,"pointermove",F,f),$(h,"pointerup",P,f)}return{...$e(y),position:y,isDragging:k(()=>!!S.value),style:k(()=>`left:${y.value.x}px;top:${y.value.y}px;`)}}const Ye=V?window:void 0;function Ke(e){var n;const t=c(e);return(n=t==null?void 0:t.$el)!=null?n:t}function Ue(...e){const n=[],t=()=>{n.forEach(o=>o()),n.length=0},a=(o,r,l,s)=>(o.addEventListener(r,l,s),()=>o.removeEventListener(r,l,s)),i=k(()=>{const o=W(c(e[0])).filter(r=>r!=null);return o.every(r=>typeof r!="string")?o:void 0}),d=ae(()=>{var o,r;return[(r=(o=i.value)==null?void 0:o.map(l=>Ke(l)))!=null?r:[Ye].filter(l=>l!=null),W(c(i.value?e[1]:e[0])),W(C(i.value?e[2]:e[1])),c(i.value?e[3]:e[2])]},([o,r,l,s])=>{if(t(),!(o!=null&&o.length)||!(r!=null&&r.length)||!(l!=null&&l.length))return;const v=oe(s)?{...s}:s;n.push(...o.flatMap(h=>r.flatMap(g=>l.map(w=>a(h,g,w,v)))))},{flush:"post"}),p=()=>{d(),t()};return G(t),p}const Xe=ne({name:"UseDraggable",props:["storageKey","storageType","initialValue","exact","preventDefault","stopPropagation","pointerTypes","as","handle","axis","onStart","onMove","onEnd","disabled","buttons","containerElement","capture"],setup(e,{slots:n}){const t=z(),a=k(()=>{var s;return(s=c(e.handle))!=null?s:t.value}),i=k(()=>{var s;return(s=e.containerElement)!=null?s:void 0}),d=k(()=>!!e.disabled),p=e.storageKey&&Be(e.storageKey,c(e.initialValue)||{x:0,y:0},V?e.storageType==="session"?sessionStorage:localStorage:void 0),o=p||e.initialValue||{x:0,y:0},l=he(He(t,{...e,handle:a,initialValue:o,onEnd:(s,v)=>{var h;(h=e.onEnd)==null||h.call(e,s,v),p&&(p.value.x=s.x,p.value.y=s.y)},disabled:d,containerElement:i}));return()=>{if(n.default)return ye(e.as||"div",{ref:t,style:`touch-action:none;${l.style}`},n.default(l))}}});function U(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function ie(e){const n=window.getComputedStyle(e);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&e.clientWidth<e.scrollWidth||n.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const t=e.parentNode;return!t||t.tagName==="BODY"?!1:ie(t)}}function Ge(e){const n=e||window.event,t=n.target;return ie(t)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}const X=new WeakMap;function Qe(e,n=!1){const t=z(n);let a=null,i="";L(re(e),o=>{const r=U(c(o));if(r){const l=r;if(X.get(l)||X.set(l,l.style.overflow),l.style.overflow!=="hidden"&&(i=l.style.overflow),l.style.overflow==="hidden")return t.value=!0;if(t.value)return l.style.overflow="hidden"}},{immediate:!0});const d=()=>{const o=U(c(e));!o||t.value||(j&&(a=Ue(o,"touchmove",r=>{Ge(r)},{passive:!1})),o.style.overflow="hidden",t.value=!0)},p=()=>{const o=U(c(e));!o||!t.value||(j&&(a==null||a()),o.style.overflow=i,X.delete(o),t.value=!1)};return G(p),k({get(){return t.value},set(o){o?d():p()}})}function je(){let e=!1;const n=z(!1);return(t,a)=>{if(n.value=a.value,e)return;e=!0;const i=Qe(t,a.value);L(n,d=>i.value=d)}}je();const qe=ne({__name:"Popup",props:{componentName:{},width:{},height:{}},emits:["closure"],setup(e,{emit:n}){const t=e,a=n,i=t.componentName+"-draggable",d={x:(window.innerWidth-t.width)/2,y:(window.innerHeight-t.height)/2},p=T(),o=T();let r=!1;function l(){r=!0}function s(){if(r){r=!1;const v=o.value.$el,h=v.getBoundingClientRect();let{x:g,y:w}=h;g=Math.min(Math.max(0,g),window.innerWidth-100),w=Math.min(Math.max(0,w),window.innerHeight-100),(h.x!=g||h.y!=w)&&(v.style.left=g+"px",v.style.top=w+"px",localStorage.setItem(i,JSON.stringify({x:g,y:w})))}}return window.addEventListener("mouseup",s),me(()=>{window.removeEventListener("mouseup",s)}),(v,h)=>{var g;return be(),we(C(Xe),{ref_key:"useDraggableRef",ref:o,"storage-key":i,"storage-type":"local",handle:(g=p.value)==null?void 0:g.triggerRef,"initial-value":d,class:"popup",style:Se({width:t.width+"px",height:t.height+"px"}),onMousedown:l},{default:H(()=>[Q("header",null,[K(C(Oe),{ref_key:"handleRef",ref:p},{default:H(()=>[Y(v.$slots,"header",{},void 0,!0)]),_:3},512),K(C(Ee),null,{default:H(()=>[Y(v.$slots,"tool",{},void 0,!0),Q("div",{class:"clickable",onClick:h[0]||(h[0]=w=>a("closure"))},[K(C(xe),{size:"22",component:C(De)},null,8,["component"])])]),_:3})]),Y(v.$slots,"default",{},void 0,!0)]),_:3},8,["handle","style"])}}}),tt=Me(qe,[["__scopeId","data-v-1ea9ceb9"]]);export{tt as P};
