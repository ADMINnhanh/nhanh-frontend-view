var st=Object.defineProperty;var nt=(l,r,t)=>r in l?st(l,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[r]=t;var u=(l,r,t)=>nt(l,typeof r!="symbol"?r+"":r,t);import{p as B,x as X,s as _,v as $,q as F,d as G,y as U,D as it,L as ot,M as rt,h as O,ba as at,z as Z,bb as ct,m as W,N as lt,P as dt,bc as ht,o as N,c as H,aS as A,bd as ut,be as ft,j as Q,bf as yt,aW as mt,b9 as xt,_ as J,aT as pt,k as gt,I as wt,bg as j,aZ as vt,a as S,w as T,u as b,e as q,B as z,bh as E,aV as D,aU as bt,t as Ct}from"./index-CwBvC0o9.js";import{A as kt}from"./Add-D-34tz6v.js";import{N as St}from"./a--_uekqCo.js";const C="0!important",tt="-1px!important";function R(l){return $(`${l}-type`,[_("& +",[B("button",{},[$(`${l}-type`,[F("border",{borderLeftWidth:C}),F("state-border",{left:tt})])])])])}function V(l){return $(`${l}-type`,[_("& +",[B("button",[$(`${l}-type`,[F("border",{borderTopWidth:C}),F("state-border",{top:tt})])])])])}const $t=B("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[X("vertical",{flexDirection:"row"},[X("rtl",[B("button",[_("&:first-child:not(:last-child)",`
 margin-right: ${C};
 border-top-right-radius: ${C};
 border-bottom-right-radius: ${C};
 `),_("&:last-child:not(:first-child)",`
 margin-left: ${C};
 border-top-left-radius: ${C};
 border-bottom-left-radius: ${C};
 `),_("&:not(:first-child):not(:last-child)",`
 margin-left: ${C};
 margin-right: ${C};
 border-radius: ${C};
 `),R("default"),$("ghost",[R("primary"),R("info"),R("success"),R("warning"),R("error")])])])]),$("vertical",{flexDirection:"column"},[B("button",[_("&:first-child:not(:last-child)",`
 margin-bottom: ${C};
 margin-left: ${C};
 margin-right: ${C};
 border-bottom-left-radius: ${C};
 border-bottom-right-radius: ${C};
 `),_("&:last-child:not(:first-child)",`
 margin-top: ${C};
 margin-left: ${C};
 margin-right: ${C};
 border-top-left-radius: ${C};
 border-top-right-radius: ${C};
 `),_("&:not(:first-child):not(:last-child)",`
 margin: ${C};
 border-radius: ${C};
 `),V("default"),$("ghost",[V("primary"),V("info"),V("success"),V("warning"),V("error")])])])]),At={size:{type:String,default:void 0},vertical:Boolean},Pt=G({name:"ButtonGroup",props:At,setup(l){const{mergedClsPrefixRef:r,mergedRtlRef:t}=U(l);return it("-button-group",$t,r),ot(at,l),{rtlEnabled:rt("ButtonGroup",t,r),mergedClsPrefix:r}},render(){const{mergedClsPrefix:l}=this;return O("div",{class:[`${l}-button-group`,this.rtlEnabled&&`${l}-button-group--rtl`,this.vertical&&`${l}-button-group--vertical`],role:"group"},this.$slots)}}),Mt=B("text",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[$("strong",`
 font-weight: var(--n-font-weight-strong);
 `),$("italic",{fontStyle:"italic"}),$("underline",{textDecoration:"underline"}),$("code",`
 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 `)]),Tt=Object.assign(Object.assign({},Z.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),_t=G({name:"Text",props:Tt,setup(l){const{mergedClsPrefixRef:r,inlineThemeDisabled:t}=U(l),e=Z("Typography","-text",Mt,ct,l,r),n=W(()=>{const{depth:i,type:o}=l,a=o==="default"?i===void 0?"textColor":`textColor${i}Depth`:lt("textColor",o),{common:{fontWeightStrong:c,fontFamilyMono:m,cubicBezierEaseInOut:p},self:{codeTextColor:h,codeBorderRadius:x,codeColor:w,codeBorder:f,[a]:y}}=e.value;return{"--n-bezier":p,"--n-text-color":y,"--n-font-weight-strong":c,"--n-font-famliy-mono":m,"--n-code-border-radius":x,"--n-code-text-color":h,"--n-code-color":w,"--n-code-border":f}}),s=t?dt("text",W(()=>`${l.type[0]}${l.depth||""}`),n,l):void 0;return{mergedClsPrefix:r,compitableTag:ht(l,["as","tag"]),cssVars:t?void 0:n,themeClass:s==null?void 0:s.themeClass,onRender:s==null?void 0:s.onRender}},render(){var l,r,t;const{mergedClsPrefix:e}=this;(l=this.onRender)===null||l===void 0||l.call(this);const n=[`${e}-text`,this.themeClass,{[`${e}-text--code`]:this.code,[`${e}-text--delete`]:this.delete,[`${e}-text--strong`]:this.strong,[`${e}-text--italic`]:this.italic,[`${e}-text--underline`]:this.underline}],s=(t=(r=this.$slots).default)===null||t===void 0?void 0:t.call(r);return this.code?O("code",{class:n,style:this.cssVars},this.delete?O("del",null,s):s):this.delete?O("del",{class:n,style:this.cssVars},s):O(this.compitableTag||"span",{class:n,style:this.cssVars},s)}}),Lt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Rt=A("rect",{x:"48",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Vt=A("rect",{x:"288",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Bt=A("rect",{x:"48",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Gt=A("rect",{x:"288",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),It=[Rt,Vt,Bt,Gt],Ot=G({name:"GridOutline",render:function(r,t){return N(),H("svg",Lt,It)}}),zt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Et=A("path",{d:"M261.56 101.28a8 8 0 0 0-11.06 0L66.4 277.15a8 8 0 0 0-2.47 5.79L63.9 448a32 32 0 0 0 32 32H192a16 16 0 0 0 16-16V328a8 8 0 0 1 8-8h80a8 8 0 0 1 8 8v136a16 16 0 0 0 16 16h96.06a32 32 0 0 0 32-32V282.94a8 8 0 0 0-2.47-5.79z",fill:"currentColor"},null,-1),Dt=A("path",{d:"M490.91 244.15l-74.8-71.56V64a16 16 0 0 0-16-16h-48a16 16 0 0 0-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0 0 43 267.56L250.5 69.28a8 8 0 0 1 11.06 0l207.52 198.28a16 16 0 0 0 22.59-.44c6.14-6.36 5.63-16.86-.76-22.97z",fill:"currentColor"},null,-1),Ft=[Et,Dt],Nt=G({name:"Home",render:function(r,t){return N(),H("svg",zt,Ft)}}),Ht={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jt=A("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),Wt=[jt],Yt=G({name:"Remove",render:function(r,t){return N(),H("svg",Ht,Wt)}});function Xt(l){return ut()?(ft(l),!0):!1}const qt=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Kt=qt?window:void 0;function Ut(l,r={}){const{immediate:t=!0,fpsLimit:e=void 0,window:n=Kt}=r,s=Q(!1),i=e?1e3/e:null;let o=0,a=null;function c(h){if(!s.value||!n)return;o||(o=h);const x=h-o;if(i&&x<i){a=n.requestAnimationFrame(c);return}o=h,l({delta:x,timestamp:h}),a=n.requestAnimationFrame(c)}function m(){!s.value&&n&&(s.value=!0,o=0,a=n.requestAnimationFrame(c))}function p(){s.value=!1,a!=null&&n&&(n.cancelAnimationFrame(a),a=null)}return t&&m(),Xt(p),{isActive:yt(s),pause:p,resume:m}}function Zt(l){var r;const t=Q(0);if(typeof performance>"u")return t;const e=(r=void 0)!=null?r:10;let n=performance.now(),s=0;return Ut(()=>{if(s+=1,s>=e){const i=performance.now(),o=i-n;t.value=Math.round(1e3/(o/s)),n=i,s=0}}),t}class Qt{constructor(r){u(this,"canvas");u(this,"ctx");u(this,"rect");u(this,"offset",{x:0,y:0});u(this,"center",{x:0,y:0});u(this,"defaultCenter",{top:void 0,bottom:void 0,left:void 0,right:void 0});u(this,"scale",1);u(this,"percentage",1);u(this,"gridConfig",{count:2,min:75,max:150,size:75});u(this,"cycle",10);u(this,"delta",.02);u(this,"redrawInNextRenderFrame",!1);u(this,"isAuto",!1);u(this,"drawGrid");u(this,"drawPoint");u(this,"drawLine");u(this,"drawPolygon");const t=document.getElementById(r);if(t instanceof HTMLCanvasElement)if(t.getContext){this.canvas=t,this.ctx=t.getContext("2d"),this.rect=t.getBoundingClientRect();const{clientWidth:e,clientHeight:n}=t;[t.width,t.height]=[e,n]}else console.error("canvas-unsupported code here");else console.error("canvas is not HTMLCanvasElement")}updateCenter(){const{canvas:r,rect:t,offset:e,defaultCenter:n}=this;if(!r)return console.error("canvas is not HTMLCanvasElement");const{width:s,height:i}=t,{top:o,bottom:a,left:c,right:m}=n,p={vertical:(f,y)=>{var d;if(f==1/0||f==-1/0)return;if(typeof f=="number")return f;if(["top","left"].includes(f))return 0;if(["bottom","right"].includes(f))return y;if(["middle","center"].includes(f))return y/2;const g=(d=f.match(/^(\d+)%*$/))==null?void 0:d[1];return(g?y*Number(g)/100:Number(f))||void 0},reverse:(f,y)=>{if(f==1/0||f==-1/0)return;if(typeof f=="number")return y-f;const g=p.vertical(f,y);return g?y-g:void 0}},h=(f,y,g)=>{if(f!==void 0){const d=p.vertical(f,g);if(d!==void 0)return d}if(y!==void 0){const d=p.reverse(y,g);if(d!==void 0)return d}return g/2},x=h(o,a,i),w=h(c,m,s);this.center={x:Math.floor(w+e.x),y:Math.floor(x+e.y)}}updateSize(){const{scale:r,cycle:t,delta:e,gridConfig:n}=this;let s=Math.abs(r-1)%(t*e)/e;s=Math.round(r<1?t-s:s),n.size=s/t*(n.max-n.min)+n.min,this.percentage=this.getAxisPointByValue(n.count,0).x/n.min}setScale(r,t){const{canvas:e,rect:n}=this;if(!e||!n)return console.error("canvas is not HTMLCanvasElement");let s,i;r==="center"?(s=n.left+n.width/2,i=n.top+n.height/2):[s,i]=[r.clientX,r.clientY];const o=this.getMousePositionOnAxis({clientX:s,clientY:i}),a=this.getAxisValueByPoint(o.x,o.y);this.scale+=t,this.updateSize();const c=this.getAxisPointByValue(a.xV,a.yV);this.offset.x+=-(c.x-o.x),this.offset.y+=c.y-o.y}getGridCount(){const{gridConfig:r,scale:t,cycle:e,delta:n}=this;let s=r.count;return t>1?s/=Math.pow(2,Math.floor((t-1)/(e*n))):t<1&&(s*=Math.pow(2,Math.ceil(Math.abs(t-1)/(e*n)))),s}getMousePositionOnAxis(r){const{canvas:t,center:e,rect:n}=this;if(!t)return console.error("canvas is not HTMLCanvasElement");const{clientX:s,clientY:i}=r,{left:o,top:a}=n,c=-(e.x-(s-o)),m=e.y-(i-a);return{x:c,y:m}}getAxisValueByPoint(r,t){const{gridConfig:e}=this,n=this.getGridCount(),s=r/e.size*n,i=t/e.size*n;return{xV:s,yV:i}}getAxisPointByValue(r,t){const{gridConfig:e}=this,n=this.getGridCount(),s=r/n*e.size,i=t/n*e.size;return{x:s,y:i}}destroy(){this.canvas=void 0,this.ctx=void 0}}let Jt=class extends Qt{constructor(t){super(t);u(this,"theme","light");u(this,"style",{light:{background:"#fff",text:{color:"#222",secondary:"#909399",size:12,family:"微软雅黑",bold:!0}},dark:{background:"#000",text:{color:"#aeaeae",secondary:"#8c8c8c",size:12,family:"微软雅黑",bold:!0}}});this.initStyle(),this.clearScreen()}initStyle(){const{canvas:t,ctx:e,theme:n}=this;if(!t||!e)return console.error("ctx is not CanvasRenderingContext2D");t.classList.add("_nhanh_canvas");const s=this.style[n];e.font=`${s.text.bold?"bold":""} ${s.text.size}px ${s.text.family}`}clearScreen(){const{ctx:t,theme:e,rect:n}=this;if(!t)return console.error("ctx is not CanvasRenderingContext2D");const{width:s,height:i}=n;t.fillStyle=this.style[e].background,t.fillRect(0,0,s,i)}addStyle(t){this.style={...this.style,...t},this.initStyle()}};class te extends Jt{constructor(t){super(t);u(this,"resizeObserver");u(this,"startCreationOnGrid");u(this,"startCreationBelowGrid");u(this,"rely",[this.center.x,this.center.y,this.scale].join());u(this,"isRecalculate",!1);u(this,"drawTimes",[]);u(this,"maxHistory",10);u(this,"avgTime",0);this.canvas&&(this.resizeObserver=new ResizeObserver(mt(()=>{this.rect=this.canvas.getBoundingClientRect();const{clientWidth:e,clientHeight:n}=this.canvas;[this.canvas.width,this.canvas.height]=[e,n],this.redrawOnce()},100)),this.resizeObserver.observe(this.canvas))}addFunctionsToZIndexs(t){const e={};return t.forEach(([n,s])=>{e[n]=[...e[n]||[],s]}),e}redraw(){var c,m,p;const{canvas:t,center:e,scale:n,rect:s}=this;if(!t||!s)return console.error("canvas is not HTMLCanvasElement");this.updateCenter();const i=[e.x,e.y,n].join();this.isRecalculate=this.rely!==i,this.rely=i,this.clearScreen(),(c=this.startCreationBelowGrid)==null||c.call(this),(m=this.drawGrid)==null||m.drawAxisAndGrid();const o=this.startCreationOnGrid,a=this.addFunctionsToZIndexs(this.drawPoint.fetchDrawFunctions().concat(this.drawLine.fetchDrawFunctions()).concat(Array.isArray(o)?o:[]));Object.keys(a).sort().forEach(h=>{a[h].forEach(w=>w())}),typeof this.startCreationOnGrid=="function"&&((p=this.startCreationOnGrid)==null||p.call(this)),this.isRecalculate=!1}measureRedrawPerformance(){const t=performance.now();this.redraw();const e=performance.now()-t;this.drawTimes.push(e),this.drawTimes.length>this.maxHistory&&this.drawTimes.shift(),this.avgTime=this.drawTimes.reduce((i,o)=>i+o,0)/this.drawTimes.length||0;const n=e<.4?"#67C23A":e<.8?"#E6A23C":"#F56C6C",s=this.avgTime<.4?"#67C23A":this.avgTime<.8?"#E6A23C":"#F56C6C";console.log(`%c单次耗时：${e.toFixed(2)}ms
%c平均耗时（${this.drawTimes.length}次）：${this.avgTime.toFixed(2)}ms`,`color: ${n}; padding: 2px 0;`,`color: ${s}; padding: 2px 0;`)}redrawOnce(t){this.isAuto&&!t&&(this.isAuto=!1),this.redrawInNextRenderFrame||(this.redrawInNextRenderFrame=!0,requestAnimationFrame(()=>{this.redrawInNextRenderFrame=!1,this.measureRedrawPerformance()}))}drawText(t,e,n,s){const{ctx:i,theme:o}=this;if(!i)return console.error("ctx is not CanvasRenderingContext2D");const a=this.style[o],{background:c}=a;i.font=`${a.text.bold?"bold":""} ${a.text.size}px ${a.text.family}`,i.strokeStyle=c,i.strokeText(t,e,n),i.fillStyle=a.text[s?"secondary":"color"],i.fillText(t,e,n)}toggleGrid(t){const e=(()=>{if(typeof t=="object"){const{grid:n={main:!0,secondary:!0},axis:s=!0,axisText:i=!0}=t;return{grid:n,axis:s,axisText:i}}return typeof t=="boolean"?{grid:{main:t,secondary:t},axis:t,axisText:t}:(t=!(this.drawGrid.show.axis||this.drawGrid.show.axisText||this.drawGrid.show.grid.main||this.drawGrid.show.grid.secondary),{grid:{main:t,secondary:t},axis:t,axisText:t})})();this.drawGrid.show=e,this.redrawOnce()}destroy(){var t;super.destroy(),(t=this.resizeObserver)==null||t.disconnect()}}let ee=class extends te{constructor(t){super(t);u(this,"mouseInCanvas",!1);u(this,"mouseIsDown",!1);u(this,"mouseLastPosition",{x:0,y:0});u(this,"unBind");u(this,"lastPressedKey",{key:"",keyupTime:0,dblclick:!1});this.initEvent()}initEvent(){const{canvas:t}=this;if(!t)return console.error("canvas is not HTMLCanvasElement");const e=[{type:"click",handler:this.click.bind(this)},{type:"contextmenu",handler:this.contextmenu.bind(this)},{type:"mouseenter",handler:this.mouseenter.bind(this)},{type:"mouseleave",handler:this.mouseleave.bind(this)},{type:"keydown",handler:this.keydown.bind(this),target:window},{type:"keyup",handler:this.keyup.bind(this),target:window},{type:"wheel",handler:this.wheel.bind(this)},{type:"mousedown",handler:this.mousedown.bind(this)},{type:"mouseup",handler:this.mouseup.bind(this),target:window},{type:"mousemove",handler:this.mousemove.bind(this),target:window}];e.forEach(({type:n,handler:s,target:i=t})=>{i.addEventListener(n,s)}),this.unBind=()=>{e.forEach(({type:n,handler:s,target:i=t})=>{i.removeEventListener(n,s)})}}click(t){console.log("mouseclick")}contextmenu(t){t.preventDefault(),console.log("mousecontextmenu")}mouseenter(t){this.mouseInCanvas=!0}mouseleave(t){this.mouseInCanvas=!1}getStep(t){const{lastPressedKey:e}=this;return e.dblclick?4:e.key===t&&Date.now()-e.keyupTime<300?(e.dblclick=!0,4):1}keydown(t){const{mouseInCanvas:e,offset:n,delta:s}=this;if(e){const i=t.key,o=this.getStep(i);switch(i){case"ArrowUp":n.y-=o;break;case"ArrowDown":n.y+=o;break;case"ArrowLeft":n.x-=o;break;case"ArrowRight":n.x+=o;break;case"+":this.setScale("center",s);break;case"-":this.setScale("center",-s);break}["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","+","-"].includes(i)&&this.redrawOnce()}}keyup(t){const{mouseInCanvas:e,lastPressedKey:n}=this;if(e){const s=t.key;n.key=s,n.keyupTime=Date.now(),n.dblclick=!1}}wheel(t){const{delta:e}=this;this.setScale(t,t.deltaY<0?e:-e),this.redrawOnce()}mousedown(t){this.mouseIsDown=!0;const{clientX:e,clientY:n}=t;this.mouseLastPosition={x:e,y:n}}mouseup(t){this.mouseIsDown=!1}mousemove(t){const{mouseIsDown:e,offset:n,mouseLastPosition:s}=this;if(e){const{clientX:i,clientY:o}=t;n.x+=i-s.x,n.y+=o-s.y,this.redrawOnce(),this.mouseLastPosition={x:i,y:o}}}destroy(){var t;super.destroy(),(t=this.unBind)==null||t.call(this)}};class se extends ee{reset(){this.isAuto=!0;const r=300,t={offset:{...this.offset},scale:this.scale-1};xt(e=>{!this.isAuto||!this.canvas||(e===1?(this.offset={x:0,y:0},this.scale=1,this.updateSize(),this.isAuto=!1):e>0&&(e=1-e,this.offset={x:t.offset.x*e,y:t.offset.y*e},this.scale=1+t.scale*e,this.updateSize()),this.redrawOnce(!0))},r)}zoom(r){const{canvas:t,rect:e}=this;if(!t||!e)return console.error("canvas is not HTMLCanvasElement");this.setScale("center",r),this.redrawOnce()}zoomIn(){this.zoom(this.delta)}zoomOut(){this.zoom(-this.delta)}setTheme(r){r in this.style&&(this.theme=r),this.redrawOnce()}}let ne=class{constructor(){u(this,"style",{light:{axis:"#222",grid:"#666",innerGrid:"#e5e5e5"},dark:{axis:"#aeaeae",grid:"#666",innerGrid:"#272727"}})}addStyle(r){this.style={...this.style,...r}}};class ie extends ne{constructor(t){super();u(this,"canvas");u(this,"show",{grid:{main:!0,secondary:!0},axis:!0,axisText:!0});this.canvas=t}drawAxisAndGrid(){this.canvas&&((this.show.grid.main||this.show.grid.secondary)&&this.drawGrid(),this.show.axis&&this.drawAxis(),this.show.axisText&&this.drawAxisText())}drawGrid(){const t=this.canvas,{ctx:e,rect:n,center:s,gridConfig:i,theme:o}=t;if(!e)return console.error("ctx is not CanvasRenderingContext2D");const{width:a,height:c}=n,m=this.style[o]||this.style.light,p=i.size,h=p/5,x=(y,g,d)=>{e.lineWidth=1,e.strokeStyle=d,e.beginPath(),e.moveTo(...y),e.lineTo(...g),e.stroke()},w=(y,g)=>{const d=s.x%y>0?s.x%y:y+s.x%y;for(let v=0;v*y+d<=a;v++)x([v*y+d,0],[v*y+d,c],g)},f=(y,g)=>{const d=s.y%y>0?s.y%y:y+s.y%y;for(let v=0;v*y+d<=c;v++)x([0,v*y+d],[a,v*y+d],g)};this.show.grid.secondary&&(w(h,m.innerGrid),f(h,m.innerGrid)),this.show.grid.main&&(w(p,m.grid),f(p,m.grid))}drawAxis(){const t=this.canvas,{ctx:e,rect:n,center:s,theme:i}=t;if(!e)return console.error("ctx is not CanvasRenderingContext2D");const{width:o,height:a}=n,c=this.style[i]||this.style.light,m=(x,w)=>{e.strokeStyle=c.axis,e.lineWidth=2,e.beginPath(),e.moveTo(...x),e.lineTo(...w),e.stroke()},p=()=>{s.y>=0&&s.y<=a&&m([0,s.y],[o,s.y])},h=()=>{s.x>=0&&s.x<=o&&m([s.x,0],[s.x,a])};p(),h()}drawAxisText(){const t=this.canvas,{ctx:e,rect:n,center:s,gridConfig:i,style:o,theme:a}=t;if(!e)return console.error("ctx is not CanvasRenderingContext2D");const{width:c,height:m}=n,p=y=>Math.ceil(e.measureText(y).width),h=4,x=o[a].text.size;{const y=p("0"),g=s.x<h||s.x>c+y+h,d=s.y<-(h+x)||s.y>m+x+h;!g&&!d&&t.drawText("0",s.x-y-h,s.y+x+h)}const w=t.getGridCount(),f=i.size;{let y=s.y+x+h;y=Math.max(Math.min(y,m-h),h+x);const g=s.y>m||s.y<0;let d=s.x>0?s.x%f:s.x<0?f+s.x%f:0,v=t.getAxisValueByPoint(d-s.x,0).xV;for(;d<=c;){const k=p(String(v));v!==0&&t.drawText(String(v),d-k/2,y,g),d+=f,v+=w}}{const y=s.x>c||s.x<0;let g=s.y>0?s.y%f:s.y<0?f+s.y%f:0,d=t.getAxisValueByPoint(0,g-s.y).yV;for(;g<=m;){const v=p(String(d));let k=s.x-v-h;k=Math.max(Math.min(k,c-v-h),h),d!==0&&t.drawText(String(d),k,g+x/2,y),g+=f,d+=w}}}}function Y(l){return Array.isArray(l)&&typeof l[0]=="number"&&typeof l[1]=="number"&&isFinite(l[0])&&isFinite(l[1])}function K(l){return Array.isArray(l)&&l.every(Y)}let oe=class{constructor(){u(this,"style",{light:{radius:4,fill:"#6042a6",width:12,stroke:"#6042a680"},dark:{radius:4,fill:"#5faaff",width:12,stroke:"#5faaff70"}})}addStyle(r){this.style={...this.style,...r}}},re=class extends oe{constructor(t){super();u(this,"canvas");u(this,"show",!0);u(this,"pointMap",new Map);u(this,"angle",2*Math.PI);u(this,"pointCount",0);u(this,"pointSimplifyCount",5e3);u(this,"simplify",!1);this.canvas=t}drawSinglePoint(t,e){const{ctx:n,theme:s}=this.canvas;if(!n)return console.error("ctx is not CanvasRenderingContext2D");const{width:i,stroke:o,fill:a,radius:c}=e||this.style[s]||this.style.light;n.lineWidth=i,this.simplify||(n.strokeStyle=o),n.fillStyle=a,n.beginPath(),n.arc(...t,c,0,this.angle),n.fill(),this.simplify||n.stroke()}drawMultiplePoints(t){this.show&&t.forEach(e=>{const{show:n,dynamicLocation:s,style:i}=e;n&&this.drawSinglePoint(s,i)})}addPoints(t){const e=this.canvas,{center:n,percentage:s}=e;[t].flat().forEach(i=>{let{location:o,value:a,zIndex:c=0,show:m=!0,style:p}=i;const[h,x]=[Y(a),Y(o)];if(!h&&!x)return;if(h&&!x){const d=e.getAxisPointByValue(...a);o=[d.x,d.y]}else if(!h&&x){const d=e.getAxisValueByPoint(...o);a=[d.xV,d.yV]}let[w,f]=o;w=n.x+w*s,f=n.y+f*s;const y=[w,f],g=(this.pointMap.get(c)||[]).concat({location:o,dynamicLocation:y,value:a,zIndex:c,show:m,style:p});this.pointMap.set(c,g)}),this.canvas.redrawOnce()}fetchDrawFunctions(){const{show:t,style:e,canvas:n}=this,{ctx:s,center:i,theme:o,percentage:a,isRecalculate:c,rect:m}=n;return!s||!t?[]:(this.pointCount=0,Array.from(this.pointMap.keys()).map(x=>{const w=this.pointMap.get(x).filter(f=>{const{location:y,show:g}=f;if(!g)return;const{width:d,radius:v}=f.style||e[o]||e.light;let k,P;if(c?([k,P]=y,k=i.x+k*a,P=i.y+P*a,f.dynamicLocation=[k,P]):[k,P]=f.dynamicLocation,!(k>m.width+v+d||k<-v-d||P>m.height+v+d||P<-v-d))return!0});return this.pointCount+=w.length,this.simplify=this.pointCount>this.pointSimplifyCount,[x,()=>this.drawMultiplePoints(w)]}))}clearAllPoints(){this.pointMap.clear()}},ae=class{constructor(){u(this,"style",{light:{color:"#c74440",width:4,dash:!1,dashGap:[5,10],dashOffset:0,cap:"round",join:"round",point:{radius:4,stroke:"#c7444080",width:12,fill:"#c74440"}},dark:{color:"#7751b7",width:4,dash:!1,dashGap:[5,10],dashOffset:0,cap:"round",join:"round",point:{radius:4,stroke:"#7751b780",width:12,fill:"#7751b7"}}})}addStyle(r){this.style={...this.style,...r}}};class ce extends ae{constructor(t){super();u(this,"canvas");u(this,"show",!0);u(this,"lineMap",new Map);this.canvas=t}drawLine(t,e){const{ctx:n,theme:s}=this.canvas;if(!n)return console.error("ctx is not CanvasRenderingContext2D");const{width:i,color:o,dash:a,dashGap:c,dashOffset:m,cap:p,join:h}=e||this.style[s]||this.style.light;n.setLineDash(a?c:[]),n.lineDashOffset=m,n.lineCap=p,n.lineJoin=h,n.lineWidth=i,n.strokeStyle=o,n.beginPath(),t.forEach((x,w)=>{n[w==0?"moveTo":"lineTo"](...x)}),n.stroke()}drawInfiniteStraightLine(t){var g;const{ctx:e,theme:n,rect:s,drawPoint:i}=this.canvas;if(!e||!s)return console.error("Canvas上下文丢失");const{dynamicLocation:o,style:a,value:c}=t;if(!o||!c)return console.error("坐标数据缺失");const[m,p]=o.map(d=>[...d]),h=[p[0]-m[0],p[1]-m[1]];if(h[0]===0&&h[1]===0)return console.error("重合点无法确定方向");const x=(a==null?void 0:a.point)||((g=this.style[n])==null?void 0:g.point)||this.style.light.point;i.drawSinglePoint(m,x),i.drawSinglePoint(p,x);const w=(d,v)=>{const[k,P]=d,[M,et]=v;let L=1/0;if(M!==0){const I=M>0?(s.width-k)/M:-k/M;I>0&&(L=Math.min(L,I))}if(M!==0){const I=M>0?(s.width-k)/M:-k/M;I>0&&(L=Math.min(L,I))}return L===1/0?d:[k+M*L,P+et*L]},f=w(m,[-h[0],-h[1]]),y=w(p,h);this.drawLine([f,y],t.style)}drawLines(t){const{show:e,canvas:n}=this,{ctx:s,center:i,percentage:o,isRecalculate:a}=n;if(!s)return console.error("ctx is not CanvasRenderingContext2D");e&&t.forEach(c=>{const{show:m,infinite:p,location:h}=c;m&&(a&&(c.dynamicLocation=h==null?void 0:h.map(x=>{let[w,f]=x;return w=i.x+w*o,f=i.y+f*o,[w,f]})),p?this.drawInfiniteStraightLine(c):this.drawLine(c.dynamicLocation,c.style))})}addLines(t){const e=this.canvas,{center:n,percentage:s}=e;[t].flat().forEach(i=>{let{location:o,value:a,zIndex:c=0,show:m=!0,style:p,infinite:h}=i;const[x,w]=[K(a),K(o)];if(!x&&!w)return;x&&!w?o=a.map(g=>{const d=e.getAxisPointByValue(...g);return[d.x,d.y]}):!x&&w&&(a=a.map(g=>{const d=e.getAxisValueByPoint(...g);return[d.xV,d.yV]}));const f=o.map(g=>{let[d,v]=g;return d=n.x+d*s,v=n.y+v*s,[d,v]}),y=(this.lineMap.get(c)||[]).concat({location:o,dynamicLocation:f,value:a,zIndex:c,show:m,style:p,infinite:h&&(o==null?void 0:o.length)==2});this.lineMap.set(c,y)}),e.redrawOnce()}fetchDrawFunctions(){const{show:t,canvas:e}=this,{ctx:n,center:s,percentage:i,isRecalculate:o}=e;return!n||!t?[]:Array.from(this.lineMap.keys()).map(c=>[c,()=>this.drawLines(this.lineMap.get(c))])}clearAllLines(){this.lineMap.clear()}}class le{constructor(){u(this,"style",{light:{radius:4,stroke:"#6042a680",width:12,fill:"#6042a6"},dark:{radius:4,stroke:"#5faaff70",width:12,fill:"#5faaff"}})}addStyle(r){this.style={...this.style,...r}}}class de extends le{constructor(t){super();u(this,"canvas");u(this,"show",!0);u(this,"pointMap",new Map);this.canvas=t}drawPoints(t){const e=this.canvas,{ctx:n,center:s,theme:i,percentage:o}=e;if(!n)return console.error("ctx is not CanvasRenderingContext2D");this.show&&t.forEach(a=>{const{location:c,show:m}=a;if(m){const{width:p,stroke:h,fill:x,radius:w}=a.style||this.style[i]||this.style.light,[f,y]=c;n.lineWidth=p,n.strokeStyle=h,n.fillStyle=x,n.beginPath(),n.arc(s.x+f*o,s.y+y*o,w,0,2*Math.PI),n.stroke(),n.fill()}})}isValid(t){return Array.isArray(t)&&typeof t[0]=="number"&&typeof t[1]=="number"&&isFinite(t[0])&&isFinite(t[1])}addPoint(t){const e=this.canvas;[t].flat().forEach(n=>{let{location:s,value:i,zIndex:o=0,show:a=!0,style:c}=n;const[m,p]=[this.isValid(i),this.isValid(s)];if(!m&&!p)return;if(m&&!p){const x=e.getAxisPointByValue(...i);s=[x.x,x.y]}else if(!m&&p){const x=e.getAxisValueByPoint(...s);i=[x.xV,x.yV]}const h=(this.pointMap.get(o)||[]).concat({location:s,value:i,zIndex:o,show:a,style:c});this.pointMap.set(o,h)}),this.canvas.redrawOnce()}fetchDrawFunctions(){return Array.from(this.pointMap.keys()).map(e=>[e,()=>this.drawPoints(this.pointMap.get(e))])}clearPoint(){this.pointMap.clear()}}class he extends se{constructor(r){super(r),this.drawGrid=new ie(this),this.drawPoint=new re(this),this.drawLine=new ce(this),this.drawPolygon=new de(this)}destroy(){super.destroy()}}const ue={};function fe(l,r){return null}const ye=J(ue,[["render",fe]]),me={class:"graphing-equations"},xe=["id"],pe={class:"button-box"},ge=G({__name:"index",setup(l){const r=Zt(),t=pt("canvas-");let e;const n=W(()=>{const i=j.value.theme;return{color:i==="dark"?"#666":"#ededed","text-color":i==="dark"?"#ededed":"#666",style:{"--n-color-hover":i==="dark"?"rgba(126, 126, 126, 1)":"#fff"}}});gt(()=>j.value.theme,i=>e.setTheme(i));const s=new Image(200,300);return s.src="https://fastly.picsum.photos/id/440/200/300.jpg?hmac=3Nx5MHMCVguEcZQ1M3RnSrCpHNn9sabFI5y6aYzvceQ",s.onload=()=>{e==null||e.redrawOnce()},wt(()=>{e=new he(t),e.setTheme(j.value.theme),e.drawPoint.addPoints([{zIndex:1,location:[75,75]},{value:[6,6]},{value:[-6,6]},{value:[-6,-6]},{value:[6,-6]}]),e.drawLine.addLines([{value:[[-2,-2],[2,-6],[-4,-4]]},{value:[[-2,4],[2,-4]],infinite:!0}]),Array.from({length:1e4},(i,o)=>{e.drawPoint.addPoints({value:[Math.random()*100-50,Math.random()*100-50]})}),e.startCreationOnGrid=[[0,()=>{const{ctx:i,center:o,percentage:a}=e;i==null||i.drawImage(s,o.x,o.y,200*a,300*a)}]]}),vt(()=>{e.destroy()}),(i,o)=>(N(),H("div",me,[A("nav",null,[S(b(St),{href:"https://www.desmos.com/calculator?lang=zh-CN",target:"_blank"},{default:T(()=>[q(" 希望达到的目标！ desmos ")]),_:1}),S(ye)]),A("canvas",{id:b(t)},null,8,xe),A("div",pe,[S(b(bt),{vertical:""},{default:T(()=>[S(b(Pt),{vertical:""},{default:T(()=>[S(b(z),E(n.value,{onClick:o[0]||(o[0]=a=>{var c;return(c=b(e))==null?void 0:c.zoomIn()})}),{icon:T(()=>[S(b(D),{component:b(kt)},null,8,["component"])]),_:1},16),S(b(z),E(n.value,{onClick:o[1]||(o[1]=a=>{var c;return(c=b(e))==null?void 0:c.zoomOut()})}),{icon:T(()=>[S(b(D),{component:b(Yt)},null,8,["component"])]),_:1},16)]),_:1}),S(b(z),E(n.value,{onClick:o[2]||(o[2]=a=>{var c;return(c=b(e))==null?void 0:c.reset()})}),{icon:T(()=>[S(b(D),{component:b(Nt)},null,8,["component"])]),_:1},16),S(b(z),E(n.value,{onClick:o[3]||(o[3]=a=>{var c;return(c=b(e))==null?void 0:c.toggleGrid()})}),{icon:T(()=>[S(b(D),{component:b(Ot)},null,8,["component"])]),_:1},16)]),_:1}),S(b(_t),{class:"fps",type:b(r)>60?"success":b(r)>30?"warning":"error"},{default:T(()=>[q(Ct(b(r)),1)]),_:1},8,["type"])])]))}}),Te=J(ge,[["__scopeId","data-v-041b4d0c"]]);export{Te as default};
