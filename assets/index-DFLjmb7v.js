import{aB as $r,aC as Xe,x as k,d as be,aD as Nr,aE as Ke,aF as We,aG as Je,aH as tt,aI as Ve,aJ as dt,aK as rt,C as se,aw as qe,ax as Ue,J as ue,z as _t,i as Fe,au as bt,aL as vt,aM as Yt,aN as Kt,aO as Jt,a2 as Mr,l as fe,j as G,aP as jr,n as ge,m as me,A as Hr,p as it,H as $e,aQ as Mn,s as kt,D as we,E as Qt,f as lr,K as Ft,L as Ct,aR as Wr,aS as er,aT as jn,aU as Hn,aV as Wn,aW as Zn,a1 as Tt,aX as tr,aY as Vn,G as ut,B as Be,aZ as Zr,a_ as vr,k as qn,a$ as Xn,h as Vr,b0 as Se,b1 as Gn,b2 as Yn,Q as nt,b3 as Kn,b4 as qr,b5 as Jn,b6 as Qn,Z as rr,g as ei,a0 as br,b7 as ti,b8 as ri,v as ni,b9 as ii,ba as St,W as ot,bb as Xr,bc as Gr,bd as Yr,be as Kr,bf as oi,av as ai,bg as Jr,F as si,bh as li,bi as wr,bj as ui,bk as ci,bl as di,o as He,c as ct,a3 as Pe,ab as ur,ae as Dt,ag as Qr,a9 as yr,bm as It,an as hi,ad as fi,a as Ae,w as Ie,u as pe,e as Me,as as Ht,aq as pi,bn as gi,bo as mi,ah as Wt,bp as vi,t as Zt,bq as bi,br as wi,_ as yi}from"./index-D24jBNt-.js";import{a as en,N as xi,E as _i,S as ki}from"./Scrollbar-D_fwZeZw.js";import{u as tn}from"./Suffix-B485YR5W.js";import{A as Ci}from"./Add-BfyHXPGv.js";import{N as Si,a as Ri}from"./a-PhEvsNXe.js";function rn(e,p,t){p/=100,t/=100;const u=p*Math.min(t,1-t)+t;return[e,u?(2-2*t/u)*100:0,u*100]}function Lt(e,p,t){p/=100,t/=100;const u=t-t*p/2,s=Math.min(u,1-u);return[e,s?(t-u)/s*100:0,u*100]}function Ge(e,p,t){p/=100,t/=100;let u=(s,n=(s+e/60)%6)=>t-t*p*Math.max(Math.min(n,4-n,1),0);return[u(5)*255,u(3)*255,u(1)*255]}function nr(e,p,t){e/=255,p/=255,t/=255;let u=Math.max(e,p,t),s=u-Math.min(e,p,t),n=s&&(u==e?(p-t)/s:u==p?2+(t-e)/s:4+(e-p)/s);return[60*(n<0?n+6:n),u&&s/u*100,u*100]}function ir(e,p,t){e/=255,p/=255,t/=255;let u=Math.max(e,p,t),s=u-Math.min(e,p,t),n=1-Math.abs(u+u-s-1),o=s&&(u==e?(p-t)/s:u==p?2+(t-e)/s:4+(e-p)/s);return[60*(o<0?o+6:o),n?s/n*100:0,(u+u-s)*50]}function or(e,p,t){p/=100,t/=100;let u=p*Math.min(t,1-t),s=(n,o=(n+e/30)%12)=>t-u*Math.max(Math.min(o-3,9-o,1),-1);return[s(0)*255,s(8)*255,s(4)*255]}function nn(e,p){if(!e)return;const t=document.createElement("a");t.href=e,p!==void 0&&(t.download=p),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function zi(e,p,t,u){for(var s=-1,n=e==null?0:e.length;++s<n;)t=p(t,e[s],s,e);return t}function Ii(e){return function(p){return e==null?void 0:e[p]}}var Ai={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Bi=Ii(Ai),Ei=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oi="\\u0300-\\u036f",Pi="\\ufe20-\\ufe2f",Ti="\\u20d0-\\u20ff",Di=Oi+Pi+Ti,Li="["+Di+"]",Ui=RegExp(Li,"g");function Fi(e){return e=$r(e),e&&e.replace(Ei,Bi).replace(Ui,"")}var $i=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Ni(e){return e.match($i)||[]}var Mi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function ji(e){return Mi.test(e)}var on="\\ud800-\\udfff",Hi="\\u0300-\\u036f",Wi="\\ufe20-\\ufe2f",Zi="\\u20d0-\\u20ff",Vi=Hi+Wi+Zi,an="\\u2700-\\u27bf",sn="a-z\\xdf-\\xf6\\xf8-\\xff",qi="\\xac\\xb1\\xd7\\xf7",Xi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Gi="\\u2000-\\u206f",Yi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ln="A-Z\\xc0-\\xd6\\xd8-\\xde",Ki="\\ufe0e\\ufe0f",un=qi+Xi+Gi+Yi,cn="['’]",xr="["+un+"]",Ji="["+Vi+"]",dn="\\d+",Qi="["+an+"]",hn="["+sn+"]",fn="[^"+on+un+dn+an+sn+ln+"]",eo="\\ud83c[\\udffb-\\udfff]",to="(?:"+Ji+"|"+eo+")",ro="[^"+on+"]",pn="(?:\\ud83c[\\udde6-\\uddff]){2}",gn="[\\ud800-\\udbff][\\udc00-\\udfff]",st="["+ln+"]",no="\\u200d",_r="(?:"+hn+"|"+fn+")",io="(?:"+st+"|"+fn+")",kr="(?:"+cn+"(?:d|ll|m|re|s|t|ve))?",Cr="(?:"+cn+"(?:D|LL|M|RE|S|T|VE))?",mn=to+"?",vn="["+Ki+"]?",oo="(?:"+no+"(?:"+[ro,pn,gn].join("|")+")"+vn+mn+")*",ao="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",so="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lo=vn+mn+oo,uo="(?:"+[Qi,pn,gn].join("|")+")"+lo,co=RegExp([st+"?"+hn+"+"+kr+"(?="+[xr,st,"$"].join("|")+")",io+"+"+Cr+"(?="+[xr,st+_r,"$"].join("|")+")",st+"?"+_r+"+"+kr,st+"+"+Cr,so,ao,dn,uo].join("|"),"g");function ho(e){return e.match(co)||[]}function fo(e,p,t){return e=$r(e),p=p,p===void 0?ji(e)?ho(e):Ni(e):e.match(p)||[]}var po="['’]",go=RegExp(po,"g");function mo(e){return function(p){return zi(fo(Fi(p).replace(go,"")),e,"")}}var vo=mo(function(e,p,t){return e+(t?"-":"")+p.toLowerCase()});const bo=Xe("attach",k("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},k("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},k("g",{fill:"currentColor","fill-rule":"nonzero"},k("path",{d:"M3.25735931,8.70710678 L7.85355339,4.1109127 C8.82986412,3.13460197 10.4127766,3.13460197 11.3890873,4.1109127 C12.365398,5.08722343 12.365398,6.67013588 11.3890873,7.64644661 L6.08578644,12.9497475 C5.69526215,13.3402718 5.06209717,13.3402718 4.67157288,12.9497475 C4.28104858,12.5592232 4.28104858,11.9260582 4.67157288,11.5355339 L9.97487373,6.23223305 C10.1701359,6.0369709 10.1701359,5.72038841 9.97487373,5.52512627 C9.77961159,5.32986412 9.4630291,5.32986412 9.26776695,5.52512627 L3.96446609,10.8284271 C3.18341751,11.6094757 3.18341751,12.8758057 3.96446609,13.6568542 C4.74551468,14.4379028 6.01184464,14.4379028 6.79289322,13.6568542 L12.0961941,8.35355339 C13.4630291,6.98671837 13.4630291,4.77064094 12.0961941,3.40380592 C10.7293591,2.0369709 8.51328163,2.0369709 7.14644661,3.40380592 L2.55025253,8 C2.35499039,8.19526215 2.35499039,8.51184464 2.55025253,8.70710678 C2.74551468,8.90236893 3.06209717,8.90236893 3.25735931,8.70710678 Z"}))))),wo=Xe("trash",k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},k("path",{d:"M432,144,403.33,419.74A32,32,0,0,1,371.55,448H140.46a32,32,0,0,1-31.78-28.26L80,144",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),k("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),k("line",{x1:"312",y1:"240",x2:"200",y2:"352",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),k("line",{x1:"312",y1:"352",x2:"200",y2:"240",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),bn=Xe("download",k("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},k("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},k("g",{fill:"currentColor","fill-rule":"nonzero"},k("path",{d:"M3.5,13 L12.5,13 C12.7761424,13 13,13.2238576 13,13.5 C13,13.7454599 12.8231248,13.9496084 12.5898756,13.9919443 L12.5,14 L3.5,14 C3.22385763,14 3,13.7761424 3,13.5 C3,13.2545401 3.17687516,13.0503916 3.41012437,13.0080557 L3.5,13 L12.5,13 L3.5,13 Z M7.91012437,1.00805567 L8,1 C8.24545989,1 8.44960837,1.17687516 8.49194433,1.41012437 L8.5,1.5 L8.5,10.292 L11.1819805,7.6109127 C11.3555469,7.43734635 11.6249713,7.4180612 11.8198394,7.55305725 L11.8890873,7.6109127 C12.0626536,7.78447906 12.0819388,8.05390346 11.9469427,8.2487716 L11.8890873,8.31801948 L8.35355339,11.8535534 C8.17998704,12.0271197 7.91056264,12.0464049 7.7156945,11.9114088 L7.64644661,11.8535534 L4.1109127,8.31801948 C3.91565056,8.12275734 3.91565056,7.80617485 4.1109127,7.6109127 C4.28447906,7.43734635 4.55390346,7.4180612 4.7487716,7.55305725 L4.81801948,7.6109127 L7.5,10.292 L7.5,1.5 C7.5,1.25454011 7.67687516,1.05039163 7.91012437,1.00805567 L8,1 L7.91012437,1.00805567 Z"}))))),yo=Xe("cancel",k("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},k("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},k("g",{fill:"currentColor","fill-rule":"nonzero"},k("path",{d:"M2.58859116,2.7156945 L2.64644661,2.64644661 C2.82001296,2.47288026 3.08943736,2.45359511 3.2843055,2.58859116 L3.35355339,2.64644661 L8,7.293 L12.6464466,2.64644661 C12.8417088,2.45118446 13.1582912,2.45118446 13.3535534,2.64644661 C13.5488155,2.84170876 13.5488155,3.15829124 13.3535534,3.35355339 L8.707,8 L13.3535534,12.6464466 C13.5271197,12.820013 13.5464049,13.0894374 13.4114088,13.2843055 L13.3535534,13.3535534 C13.179987,13.5271197 12.9105626,13.5464049 12.7156945,13.4114088 L12.6464466,13.3535534 L8,8.707 L3.35355339,13.3535534 C3.15829124,13.5488155 2.84170876,13.5488155 2.64644661,13.3535534 C2.45118446,13.1582912 2.45118446,12.8417088 2.64644661,12.6464466 L7.293,8 L2.64644661,3.35355339 C2.47288026,3.17998704 2.45359511,2.91056264 2.58859116,2.7156945 L2.64644661,2.64644661 L2.58859116,2.7156945 Z"}))))),xo=Xe("retry",k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},k("path",{d:"M320,146s24.36-12-64-12A160,160,0,1,0,416,294",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-miterlimit: 10; stroke-width: 32px;"}),k("polyline",{points:"256 58 336 138 256 218",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),_o=Xe("rotateClockwise",k("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},k("path",{d:"M3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 12.7916 15.3658 15.2026 13 16.3265V14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5V17.5C12 17.7761 12.2239 18 12.5 18H15.5C15.7761 18 16 17.7761 16 17.5C16 17.2239 15.7761 17 15.5 17H13.8758C16.3346 15.6357 18 13.0128 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 10.2761 2.22386 10.5 2.5 10.5C2.77614 10.5 3 10.2761 3 10Z",fill:"currentColor"}),k("path",{d:"M10 12C11.1046 12 12 11.1046 12 10C12 8.89543 11.1046 8 10 8C8.89543 8 8 8.89543 8 10C8 11.1046 8.89543 12 10 12ZM10 11C9.44772 11 9 10.5523 9 10C9 9.44772 9.44772 9 10 9C10.5523 9 11 9.44772 11 10C11 10.5523 10.5523 11 10 11Z",fill:"currentColor"}))),ko=Xe("rotateClockwise",k("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},k("path",{d:"M17 10C17 6.13401 13.866 3 10 3C6.13401 3 3 6.13401 3 10C3 12.7916 4.63419 15.2026 7 16.3265V14.5C7 14.2239 7.22386 14 7.5 14C7.77614 14 8 14.2239 8 14.5V17.5C8 17.7761 7.77614 18 7.5 18H4.5C4.22386 18 4 17.7761 4 17.5C4 17.2239 4.22386 17 4.5 17H6.12422C3.66539 15.6357 2 13.0128 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 10.2761 17.7761 10.5 17.5 10.5C17.2239 10.5 17 10.2761 17 10Z",fill:"currentColor"}),k("path",{d:"M10 12C8.89543 12 8 11.1046 8 10C8 8.89543 8.89543 8 10 8C11.1046 8 12 8.89543 12 10C12 11.1046 11.1046 12 10 12ZM10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10C9 10.5523 9.44772 11 10 11Z",fill:"currentColor"}))),Co=Xe("zoomIn",k("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},k("path",{d:"M11.5 8.5C11.5 8.22386 11.2761 8 11 8H9V6C9 5.72386 8.77614 5.5 8.5 5.5C8.22386 5.5 8 5.72386 8 6V8H6C5.72386 8 5.5 8.22386 5.5 8.5C5.5 8.77614 5.72386 9 6 9H8V11C8 11.2761 8.22386 11.5 8.5 11.5C8.77614 11.5 9 11.2761 9 11V9H11C11.2761 9 11.5 8.77614 11.5 8.5Z",fill:"currentColor"}),k("path",{d:"M8.5 3C11.5376 3 14 5.46243 14 8.5C14 9.83879 13.5217 11.0659 12.7266 12.0196L16.8536 16.1464C17.0488 16.3417 17.0488 16.6583 16.8536 16.8536C16.68 17.0271 16.4106 17.0464 16.2157 16.9114L16.1464 16.8536L12.0196 12.7266C11.0659 13.5217 9.83879 14 8.5 14C5.46243 14 3 11.5376 3 8.5C3 5.46243 5.46243 3 8.5 3ZM8.5 4C6.01472 4 4 6.01472 4 8.5C4 10.9853 6.01472 13 8.5 13C10.9853 13 13 10.9853 13 8.5C13 6.01472 10.9853 4 8.5 4Z",fill:"currentColor"}))),So=Xe("zoomOut",k("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},k("path",{d:"M11 8C11.2761 8 11.5 8.22386 11.5 8.5C11.5 8.77614 11.2761 9 11 9H6C5.72386 9 5.5 8.77614 5.5 8.5C5.5 8.22386 5.72386 8 6 8H11Z",fill:"currentColor"}),k("path",{d:"M14 8.5C14 5.46243 11.5376 3 8.5 3C5.46243 3 3 5.46243 3 8.5C3 11.5376 5.46243 14 8.5 14C9.83879 14 11.0659 13.5217 12.0196 12.7266L16.1464 16.8536L16.2157 16.9114C16.4106 17.0464 16.68 17.0271 16.8536 16.8536C17.0488 16.6583 17.0488 16.3417 16.8536 16.1464L12.7266 12.0196C13.5217 11.0659 14 9.83879 14 8.5ZM4 8.5C4 6.01472 6.01472 4 8.5 4C10.9853 4 13 6.01472 13 8.5C13 10.9853 10.9853 13 8.5 13C6.01472 13 4 10.9853 4 8.5Z",fill:"currentColor"}))),Ro=be({name:"ResizeSmall",render(){return k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},k("g",{fill:"none"},k("path",{d:"M5.5 4A1.5 1.5 0 0 0 4 5.5v1a.5.5 0 0 1-1 0v-1A2.5 2.5 0 0 1 5.5 3h1a.5.5 0 0 1 0 1h-1zM16 5.5A1.5 1.5 0 0 0 14.5 4h-1a.5.5 0 0 1 0-1h1A2.5 2.5 0 0 1 17 5.5v1a.5.5 0 0 1-1 0v-1zm0 9a1.5 1.5 0 0 1-1.5 1.5h-1a.5.5 0 0 0 0 1h1a2.5 2.5 0 0 0 2.5-2.5v-1a.5.5 0 0 0-1 0v1zm-12 0A1.5 1.5 0 0 0 5.5 16h1.25a.5.5 0 0 1 0 1H5.5A2.5 2.5 0 0 1 3 14.5v-1.25a.5.5 0 0 1 1 0v1.25zM8.5 7A1.5 1.5 0 0 0 7 8.5v3A1.5 1.5 0 0 0 8.5 13h3a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 11.5 7h-3zM8 8.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3z",fill:"currentColor"})))}}),zo=Nr&&"loading"in document.createElement("img");function Io(e={}){var p;const{root:t=null}=e;return{hash:`${e.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(e.threshold)?e.threshold.join(","):(p=e.threshold)!==null&&p!==void 0?p:"0"}`,options:Object.assign(Object.assign({},e),{root:(typeof t=="string"?document.querySelector(t):t)||document.documentElement})}}const Vt=new WeakMap,qt=new WeakMap,Xt=new WeakMap,Ao=(e,p,t)=>{if(!e)return()=>{};const u=Io(p),{root:s}=u.options;let n;const o=Vt.get(s);o?n=o:(n=new Map,Vt.set(s,n));let r,a;n.has(u.hash)?(a=n.get(u.hash),a[1].has(e)||(r=a[0],a[1].add(e),r.observe(e))):(r=new IntersectionObserver(m=>{m.forEach(x=>{if(x.isIntersecting){const f=qt.get(x.target),b=Xt.get(x.target);f&&f(),b&&(b.value=!0)}})},u.options),r.observe(e),a=[r,new Set([e])],n.set(u.hash,a));let l=!1;const d=()=>{l||(qt.delete(e),Xt.delete(e),l=!0,a[1].has(e)&&(a[0].unobserve(e),a[1].delete(e)),a[1].size<=0&&n.delete(u.hash),n.size||Vt.delete(s))};return qt.set(e,d),Xt.set(e,t),d};function Bo(e,p){switch(e[0]){case"hex":return p?"#000000FF":"#000000";case"rgb":return p?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return p?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return p?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return"#000000"}function wt(e){return e===null?null:/^ *#/.test(e)?"hex":e.includes("rgb")?"rgb":e.includes("hsl")?"hsl":e.includes("hsv")?"hsv":null}function Eo(e){return e=Math.round(e),e>=360?359:e<0?0:e}function Oo(e){return e=Math.round(e*100)/100,e>1?1:e<0?0:e}const Po={rgb:{hex(e){return Ke(We(e))},hsl(e){const[p,t,u,s]=We(e);return Je([...ir(p,t,u),s])},hsv(e){const[p,t,u,s]=We(e);return tt([...nr(p,t,u),s])}},hex:{rgb(e){return Ve(We(e))},hsl(e){const[p,t,u,s]=We(e);return Je([...ir(p,t,u),s])},hsv(e){const[p,t,u,s]=We(e);return tt([...nr(p,t,u),s])}},hsl:{hex(e){const[p,t,u,s]=dt(e);return Ke([...or(p,t,u),s])},rgb(e){const[p,t,u,s]=dt(e);return Ve([...or(p,t,u),s])},hsv(e){const[p,t,u,s]=dt(e);return tt([...rn(p,t,u),s])}},hsv:{hex(e){const[p,t,u,s]=rt(e);return Ke([...Ge(p,t,u),s])},rgb(e){const[p,t,u,s]=rt(e);return Ve([...Ge(p,t,u),s])},hsl(e){const[p,t,u,s]=rt(e);return Je([...Lt(p,t,u),s])}}};function wn(e,p,t){return t=t||wt(e),t?t===p?e:Po[t][p](e):null}const at="12px",To=12,Qe="6px",Do=6,Lo="linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",Uo=be({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(e){const p=se(null);function t(n){p.value&&(qe("mousemove",document,u),qe("mouseup",document,s),u(n))}function u(n){const{value:o}=p;if(!o)return;const{width:r,left:a}=o.getBoundingClientRect(),l=Eo((n.clientX-a-Do)/(r-To)*360);e.onUpdateHue(l)}function s(){var n;Ue("mousemove",document,u),Ue("mouseup",document,s),(n=e.onComplete)===null||n===void 0||n.call(e)}return{railRef:p,handleMouseDown:t}},render(){const{clsPrefix:e}=this;return k("div",{class:`${e}-color-picker-slider`,style:{height:at,borderRadius:Qe}},k("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:Lo,height:at,borderRadius:Qe,position:"relative"},onMousedown:this.handleMouseDown},k("div",{style:{position:"absolute",left:Qe,right:Qe,top:0,bottom:0}},k("div",{class:`${e}-color-picker-handle`,style:{left:`calc((${this.hue}%) / 359 * 100 - ${Qe})`,borderRadius:Qe,width:at,height:at}},k("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:`hsl(${this.hue}, 100%, 50%)`,borderRadius:Qe,width:at,height:at}})))))}}),mt="12px",Fo=12,et="6px",$o=be({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(e){const p=se(null);function t(n){!p.value||!e.rgba||(qe("mousemove",document,u),qe("mouseup",document,s),u(n))}function u(n){const{value:o}=p;if(!o)return;const{width:r,left:a}=o.getBoundingClientRect(),l=(n.clientX-a)/(r-Fo);e.onUpdateAlpha(Oo(l))}function s(){var n;Ue("mousemove",document,u),Ue("mouseup",document,s),(n=e.onComplete)===null||n===void 0||n.call(e)}return{railRef:p,railBackgroundImage:ue(()=>{const{rgba:n}=e;return n?`linear-gradient(to right, rgba(${n[0]}, ${n[1]}, ${n[2]}, 0) 0%, rgba(${n[0]}, ${n[1]}, ${n[2]}, 1) 100%)`:""}),handleMouseDown:t}},render(){const{clsPrefix:e}=this;return k("div",{class:`${e}-color-picker-slider`,ref:"railRef",style:{height:mt,borderRadius:et},onMousedown:this.handleMouseDown},k("div",{style:{borderRadius:et,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},k("div",{class:`${e}-color-picker-checkboard`}),k("div",{class:`${e}-color-picker-slider__image`,style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&k("div",{style:{position:"absolute",left:et,right:et,top:0,bottom:0}},k("div",{class:`${e}-color-picker-handle`,style:{left:`calc(${this.alpha*100}% - ${et})`,borderRadius:et,width:mt,height:mt}},k("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:Ve(this.rgba),borderRadius:et,width:mt,height:mt}}))))}}),At="12px",Bt="6px",No=be({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(e){const p=se(null);function t(n){p.value&&(qe("mousemove",document,u),qe("mouseup",document,s),u(n))}function u(n){const{value:o}=p;if(!o)return;const{width:r,height:a,left:l,bottom:d}=o.getBoundingClientRect(),m=(d-n.clientY)/a,x=(n.clientX-l)/r,f=100*(x>1?1:x<0?0:x),b=100*(m>1?1:m<0?0:m);e.onUpdateSV(f,b)}function s(){var n;Ue("mousemove",document,u),Ue("mouseup",document,s),(n=e.onComplete)===null||n===void 0||n.call(e)}return{palleteRef:p,handleColor:ue(()=>{const{rgba:n}=e;return n?`rgb(${n[0]}, ${n[1]}, ${n[2]})`:""}),handleMouseDown:t}},render(){const{clsPrefix:e}=this;return k("div",{class:`${e}-color-picker-pallete`,onMousedown:this.handleMouseDown,ref:"palleteRef"},k("div",{class:`${e}-color-picker-pallete__layer`,style:{backgroundImage:`linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`}}),k("div",{class:`${e}-color-picker-pallete__layer ${e}-color-picker-pallete__layer--shadowed`,style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&k("div",{class:`${e}-color-picker-handle`,style:{width:At,height:At,borderRadius:Bt,left:`calc(${this.displayedSv[0]}% - ${Bt})`,bottom:`calc(${this.displayedSv[1]}% - ${Bt})`}},k("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:this.handleColor,borderRadius:Bt,width:At,height:At}})))}}),cr=_t("n-color-picker");function Mo(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),255)):!1}function jo(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),360)):!1}function Ho(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),100)):!1}function Wo(e){const p=e.trim();return/^#[0-9a-fA-F]+$/.test(p)?[4,5,7,9].includes(p.length):!1}function Zo(e){return/^\d{1,3}\.?\d*%$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e)/100,100)):!1}const Vo={paddingSmall:"0 4px"},Sr=be({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(e){const p=se(""),{themeRef:t}=Fe(cr,null);bt(()=>{p.value=u()});function u(){const{value:o}=e;if(o===null)return"";const{label:r}=e;return r==="HEX"?o:r==="A"?`${Math.floor(o*100)}%`:String(Math.floor(o))}function s(o){p.value=o}function n(o){let r,a;switch(e.label){case"HEX":a=Wo(o),a&&e.onUpdateValue(o),p.value=u();break;case"H":r=jo(o),r===!1?p.value=u():e.onUpdateValue(r);break;case"S":case"L":case"V":r=Ho(o),r===!1?p.value=u():e.onUpdateValue(r);break;case"A":r=Zo(o),r===!1?p.value=u():e.onUpdateValue(r);break;case"R":case"G":case"B":r=Mo(o),r===!1?p.value=u():e.onUpdateValue(r);break}}return{mergedTheme:t,inputValue:p,handleInputChange:n,handleInputUpdateValue:s}},render(){const{mergedTheme:e}=this;return k(en,{size:"small",placeholder:this.label,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,builtinThemeOverrides:Vo,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:this.label==="A"?"flex-grow: 1.25;":""})}}),qo=be({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup(e){return{handleUnitUpdateValue(p,t){const{showAlpha:u}=e;if(e.mode==="hex"){e.onUpdateValue((u?Ke:vt)(t));return}let s;switch(e.valueArr===null?s=[0,0,0,0]:s=Array.from(e.valueArr),e.mode){case"hsv":s[p]=t,e.onUpdateValue((u?tt:Jt)(s));break;case"rgb":s[p]=t,e.onUpdateValue((u?Ve:Kt)(s));break;case"hsl":s[p]=t,e.onUpdateValue((u?Je:Yt)(s));break}}}},render(){const{clsPrefix:e,modes:p}=this;return k("div",{class:`${e}-color-picker-input`},k("div",{class:`${e}-color-picker-input__mode`,onClick:this.onUpdateMode,style:{cursor:p.length===1?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),k(xi,null,{default:()=>{const{mode:t,valueArr:u,showAlpha:s}=this;if(t==="hex"){let n=null;try{n=u===null?null:(s?Ke:vt)(u)}catch{}return k(Sr,{label:"HEX",showAlpha:s,value:n,onUpdateValue:o=>{this.handleUnitUpdateValue(0,o)}})}return(t+(s?"a":"")).split("").map((n,o)=>k(Sr,{label:n.toUpperCase(),value:u===null?null:u[o],onUpdateValue:r=>{this.handleUnitUpdateValue(o,r)}}))}}))}}),Xo=be({name:"ColorPickerTrigger",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(e){const{colorPickerSlots:p,renderLabelRef:t}=Fe(cr,null);return()=>{const{hsla:u,value:s,clsPrefix:n,onClick:o,disabled:r}=e,a=p.label||t.value;return k("div",{class:[`${n}-color-picker-trigger`,r&&`${n}-color-picker-trigger--disabled`],onClick:r?void 0:o},k("div",{class:`${n}-color-picker-trigger__fill`},k("div",{class:`${n}-color-picker-checkboard`}),k("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:u?Je(u):""}}),s&&u?k("div",{class:`${n}-color-picker-trigger__value`,style:{color:u[2]>50||u[3]<.5?"black":"white"}},a?a(s):s):null))}}});function Go(e,p){if(p==="hsv"){const[t,u,s,n]=rt(e);return Ve([...Ge(t,u,s),n])}return e}function Yo(e){const p=document.createElement("canvas").getContext("2d");return p?(p.fillStyle=e,p.fillStyle):"#000000"}const Ko=be({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(e){const p=ue(()=>e.swatches.map(n=>{const o=wt(n);return{value:n,mode:o,legalValue:Go(n,o)}}));function t(n){const{mode:o}=e;let{value:r,mode:a}=n;return a||(a="hex",/^[a-zA-Z]+$/.test(r)?r=Yo(r):(Mr("color-picker",`color ${r} in swatches is invalid.`),r="#000000")),a===o?r:wn(r,o,a)}function u(n){e.onUpdateColor(t(n))}function s(n,o){n.key==="Enter"&&u(o)}return{parsedSwatchesRef:p,handleSwatchSelect:u,handleSwatchKeyDown:s}},render(){const{clsPrefix:e}=this;return k("div",{class:`${e}-color-picker-swatches`},this.parsedSwatchesRef.map(p=>k("div",{class:`${e}-color-picker-swatch`,tabindex:0,onClick:()=>{this.handleSwatchSelect(p)},onKeydown:t=>{this.handleSwatchKeyDown(t,p)}},k("div",{class:`${e}-color-picker-swatch__fill`,style:{background:p.legalValue}}))))}}),Jo=be({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:e=>{const p=wt(e);return!!(!e||p&&p!=="hsv")}},onUpdateColor:{type:Function,required:!0}},setup(e){function p(t){var u;const s=t.target.value;(u=e.onUpdateColor)===null||u===void 0||u.call(e,wn(s.toUpperCase(),e.mode,"hex")),t.stopPropagation()}return{handleChange:p}},render(){const{clsPrefix:e}=this;return k("div",{class:`${e}-color-picker-preview__preview`},k("span",{class:`${e}-color-picker-preview__fill`,style:{background:this.color||"#000000"}}),k("input",{class:`${e}-color-picker-preview__input`,type:"color",value:this.color,onChange:this.handleChange}))}}),Qo=fe([G("color-picker",`
 display: inline-block;
 box-sizing: border-box;
 height: var(--n-height);
 font-size: var(--n-font-size);
 width: 100%;
 position: relative;
 `),G("color-picker-panel",`
 margin: 4px 0;
 width: 240px;
 font-size: var(--n-panel-font-size);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition:
 box-shadow .3s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 `,[jr(),G("input",`
 text-align: center;
 `)]),G("color-picker-checkboard",`
 background: white; 
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[fe("&::after",`
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 12px 12px;
 background-position: 0 0, 0 6px, 6px -6px, -6px 0px;
 background-repeat: repeat;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),G("color-picker-slider",`
 margin-bottom: 8px;
 position: relative;
 box-sizing: border-box;
 `,[ge("image",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `),fe("&::after",`
 content: "";
 position: absolute;
 border-radius: inherit;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 pointer-events: none;
 `)]),G("color-picker-handle",`
 z-index: 1;
 box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);
 position: absolute;
 background-color: white;
 overflow: hidden;
 `,[ge("fill",`
 box-sizing: border-box;
 border: 2px solid white;
 `)]),G("color-picker-pallete",`
 height: 180px;
 position: relative;
 margin-bottom: 8px;
 cursor: crosshair;
 `,[ge("layer",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[me("shadowed",`
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 `)])]),G("color-picker-preview",`
 display: flex;
 `,[ge("sliders",`
 flex: 1 0 auto;
 `),ge("preview",`
 position: relative;
 height: 30px;
 width: 30px;
 margin: 0 0 8px 6px;
 border-radius: 50%;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 overflow: hidden;
 `),ge("fill",`
 display: block;
 width: 30px;
 height: 30px;
 `),ge("input",`
 position: absolute;
 top: 0;
 left: 0;
 width: 30px;
 height: 30px;
 opacity: 0;
 z-index: 1;
 `)]),G("color-picker-input",`
 display: flex;
 align-items: center;
 `,[G("input",`
 flex-grow: 1;
 flex-basis: 0;
 `),ge("mode",`
 width: 72px;
 text-align: center;
 `)]),G("color-picker-control",`
 padding: 12px;
 `),G("color-picker-action",`
 display: flex;
 margin-top: -4px;
 border-top: 1px solid var(--n-divider-color);
 padding: 8px 12px;
 justify-content: flex-end;
 `,[G("button","margin-left: 8px;")]),G("color-picker-trigger",`
 border: var(--n-border);
 height: 100%;
 box-sizing: border-box;
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 cursor: pointer;
 `,[ge("value",`
 white-space: nowrap;
 position: relative;
 `),ge("fill",`
 border-radius: var(--n-border-radius);
 position: absolute;
 display: flex;
 align-items: center;
 justify-content: center;
 left: 4px;
 right: 4px;
 top: 4px;
 bottom: 4px;
 `),me("disabled","cursor: not-allowed"),G("color-picker-checkboard",`
 border-radius: var(--n-border-radius);
 `,[fe("&::after",`
 --n-block-size: calc((var(--n-height) - 8px) / 3);
 background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);
 background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; 
 `)])]),G("color-picker-swatches",`
 display: grid;
 grid-gap: 8px;
 flex-wrap: wrap;
 position: relative;
 grid-template-columns: repeat(auto-fill, 18px);
 margin-top: 10px;
 `,[G("color-picker-swatch",`
 width: 18px;
 height: 18px;
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 8px 8px;
 background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;
 background-repeat: repeat;
 `,[ge("fill",`
 position: relative;
 width: 100%;
 height: 100%;
 border-radius: 3px;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 cursor: pointer;
 `),fe("&:focus",`
 outline: none;
 `,[ge("fill",[fe("&::after",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 background: inherit;
 filter: blur(2px);
 content: "";
 `)])])])])]),ea=Object.assign(Object.assign({},$e.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:er.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,onClear:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),ta=be({name:"ColorPicker",props:ea,setup(e,{slots:p}){const t=se(null);let u=null;const s=Hr(e),{mergedSizeRef:n,mergedDisabledRef:o}=s,{localeRef:r}=tn("global"),{mergedClsPrefixRef:a,namespaceRef:l,inlineThemeDisabled:d}=it(e),m=$e("ColorPicker","-color-picker",Qo,Mn,e,a);kt(cr,{themeRef:m,renderLabelRef:we(e,"renderLabel"),colorPickerSlots:p});const x=se(e.defaultShow),f=Qt(we(e,"show"),x);function b(h){const{onUpdateShow:S,"onUpdate:show":$}=e;S&&ut(S,h),$&&ut($,h),x.value=h}const{defaultValue:g}=e,w=se(g===void 0?Bo(e.modes,e.showAlpha):g),v=Qt(we(e,"value"),w),_=se([v.value]),z=se(0),A=ue(()=>wt(v.value)),{modes:R}=e,T=se(wt(v.value)||R[0]||"rgb");function P(){const{modes:h}=e,{value:S}=T,$=h.findIndex(N=>N===S);~$?T.value=h[($+1)%h.length]:T.value="rgb"}let M,I,j,X,C,L,c,F;const J=ue(()=>{const{value:h}=v;if(!h)return null;switch(A.value){case"hsv":return rt(h);case"hsl":return[M,I,j,F]=dt(h),[...rn(M,I,j),F];case"rgb":case"hex":return[C,L,c,F]=We(h),[...nr(C,L,c),F]}}),H=ue(()=>{const{value:h}=v;if(!h)return null;switch(A.value){case"rgb":case"hex":return We(h);case"hsv":return[M,I,X,F]=rt(h),[...Ge(M,I,X),F];case"hsl":return[M,I,j,F]=dt(h),[...or(M,I,j),F]}}),re=ue(()=>{const{value:h}=v;if(!h)return null;switch(A.value){case"hsl":return dt(h);case"hsv":return[M,I,X,F]=rt(h),[...Lt(M,I,X),F];case"rgb":case"hex":return[C,L,c,F]=We(h),[...ir(C,L,c),F]}}),Z=ue(()=>{switch(T.value){case"rgb":case"hex":return H.value;case"hsv":return J.value;case"hsl":return re.value}}),ie=se(0),U=se(1),D=se([0,0]);function ne(h,S){const{value:$}=J,N=ie.value,E=$?$[3]:1;D.value=[h,S];const{showAlpha:W}=e;switch(T.value){case"hsv":oe((W?tt:Jt)([N,h,S,E]),"cursor");break;case"hsl":oe((W?Je:Yt)([...Lt(N,h,S),E]),"cursor");break;case"rgb":oe((W?Ve:Kt)([...Ge(N,h,S),E]),"cursor");break;case"hex":oe((W?Ke:vt)([...Ge(N,h,S),E]),"cursor");break}}function Q(h){ie.value=h;const{value:S}=J;if(!S)return;const[,$,N,E]=S,{showAlpha:W}=e;switch(T.value){case"hsv":oe((W?tt:Jt)([h,$,N,E]),"cursor");break;case"rgb":oe((W?Ve:Kt)([...Ge(h,$,N),E]),"cursor");break;case"hex":oe((W?Ke:vt)([...Ge(h,$,N),E]),"cursor");break;case"hsl":oe((W?Je:Yt)([...Lt(h,$,N),E]),"cursor");break}}function q(h){switch(T.value){case"hsv":[M,I,X]=J.value,oe(tt([M,I,X,h]),"cursor");break;case"rgb":[C,L,c]=H.value,oe(Ve([C,L,c,h]),"cursor");break;case"hex":[C,L,c]=H.value,oe(Ke([C,L,c,h]),"cursor");break;case"hsl":[M,I,j]=re.value,oe(Je([M,I,j,h]),"cursor");break}U.value=h}function oe(h,S){S==="cursor"?u=h:u=null;const{nTriggerFormChange:$,nTriggerFormInput:N}=s,{onUpdateValue:E,"onUpdate:value":W}=e;E&&ut(E,h),W&&ut(W,h),$(),N(),w.value=h}function Ce(h){oe(h,"input"),Zr(ae)}function ae(h=!0){const{value:S}=v;if(S){const{nTriggerFormChange:$,nTriggerFormInput:N}=s,{onComplete:E}=e;E&&E(S);const{value:W}=_,{value:Y}=z;h&&(W.splice(Y+1,W.length,S),z.value=Y+1),$(),N()}}function de(){const{value:h}=z;h-1<0||(oe(_.value[h-1],"input"),ae(!1),z.value=h-1)}function _e(){const{value:h}=z;h<0||h+1>=_.value.length||(oe(_.value[h+1],"input"),ae(!1),z.value=h+1)}function ye(){oe(null,"input");const{onClear:h}=e;h&&h(),b(!1)}function ze(){const{value:h}=v,{onConfirm:S}=e;S&&S(h),b(!1)}const K=ue(()=>z.value>=1),i=ue(()=>{const{value:h}=_;return h.length>1&&z.value<h.length-1});lr(f,h=>{h||(_.value=[v.value],z.value=0)}),bt(()=>{if(!(u&&u===v.value)){const{value:h}=J;h&&(ie.value=h[0],U.value=h[3],D.value=[h[1],h[2]])}u=null});const B=ue(()=>{const{value:h}=n,{common:{cubicBezierEaseInOut:S},self:{textColor:$,color:N,panelFontSize:E,boxShadow:W,border:Y,borderRadius:V,dividerColor:te,[Ft("height",h)]:ve,[Ft("fontSize",h)]:ce}}=m.value;return{"--n-bezier":S,"--n-text-color":$,"--n-color":N,"--n-panel-font-size":E,"--n-font-size":ce,"--n-box-shadow":W,"--n-border":Y,"--n-border-radius":V,"--n-height":ve,"--n-divider-color":te}}),O=d?Ct("color-picker",ue(()=>n.value[0]),B,e):void 0;function y(){var h;const{value:S}=H,{value:$}=ie,{internalActions:N,modes:E,actions:W}=e,{value:Y}=m,{value:V}=a;return k("div",{class:[`${V}-color-picker-panel`,O==null?void 0:O.themeClass.value],onDragstart:te=>{te.preventDefault()},style:d?void 0:B.value},k("div",{class:`${V}-color-picker-control`},k(No,{clsPrefix:V,rgba:S,displayedHue:$,displayedSv:D.value,onUpdateSV:ne,onComplete:ae}),k("div",{class:`${V}-color-picker-preview`},k("div",{class:`${V}-color-picker-preview__sliders`},k(Uo,{clsPrefix:V,hue:$,onUpdateHue:Q,onComplete:ae}),e.showAlpha?k($o,{clsPrefix:V,rgba:S,alpha:U.value,onUpdateAlpha:q,onComplete:ae}):null),e.showPreview?k(Jo,{clsPrefix:V,mode:T.value,color:H.value&&vt(H.value),onUpdateColor:te=>{oe(te,"input")}}):null),k(qo,{clsPrefix:V,showAlpha:e.showAlpha,mode:T.value,modes:E,onUpdateMode:P,value:v.value,valueArr:Z.value,onUpdateValue:Ce}),((h=e.swatches)===null||h===void 0?void 0:h.length)&&k(Ko,{clsPrefix:V,mode:T.value,swatches:e.swatches,onUpdateColor:te=>{oe(te,"input")}})),W!=null&&W.length?k("div",{class:`${V}-color-picker-action`},W.includes("confirm")&&k(Be,{size:"small",onClick:ze,theme:Y.peers.Button,themeOverrides:Y.peerOverrides.Button},{default:()=>r.value.confirm}),W.includes("clear")&&k(Be,{size:"small",onClick:ye,disabled:!v.value,theme:Y.peers.Button,themeOverrides:Y.peerOverrides.Button},{default:()=>r.value.clear})):null,p.action?k("div",{class:`${V}-color-picker-action`},{default:p.action}):N?k("div",{class:`${V}-color-picker-action`},N.includes("undo")&&k(Be,{size:"small",onClick:de,disabled:!K.value,theme:Y.peers.Button,themeOverrides:Y.peerOverrides.Button},{default:()=>r.value.undo}),N.includes("redo")&&k(Be,{size:"small",onClick:_e,disabled:!i.value,theme:Y.peers.Button,themeOverrides:Y.peerOverrides.Button},{default:()=>r.value.redo})):null)}return{mergedClsPrefix:a,namespace:l,selfRef:t,hsla:re,rgba:H,mergedShow:f,mergedDisabled:o,isMounted:Wr(),adjustedTo:er(e),mergedValue:v,handleTriggerClick(){b(!0)},handleClickOutside(h){var S;!((S=t.value)===null||S===void 0)&&S.contains(jn(h))||b(!1)},renderPanel:y,cssVars:d?void 0:B,themeClass:O==null?void 0:O.themeClass,onRender:O==null?void 0:O.onRender}},render(){const{$slots:e,mergedClsPrefix:p,onRender:t}=this;return t==null||t(),k("div",{class:[this.themeClass,`${p}-color-picker`],ref:"selfRef",style:this.cssVars},k(Hn,null,{default:()=>[k(Wn,null,{default:()=>k(Xo,{clsPrefix:p,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick},{label:e.label})}),k(Zn,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===er.tdkey,to:this.adjustedTo},{default:()=>k(Tt,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?tr(this.renderPanel(),[[Vn,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}}),dr=Object.assign(Object.assign({},$e.props),{onPreviewPrev:Function,onPreviewNext:Function,showToolbar:{type:Boolean,default:!0},showToolbarTooltip:Boolean,renderToolbar:Function}),yn=_t("n-image"),ra=k("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},k("path",{d:"M6 5C5.75454 5 5.55039 5.17688 5.50806 5.41012L5.5 5.5V14.5C5.5 14.7761 5.72386 15 6 15C6.24546 15 6.44961 14.8231 6.49194 14.5899L6.5 14.5V5.5C6.5 5.22386 6.27614 5 6 5ZM13.8536 5.14645C13.68 4.97288 13.4106 4.9536 13.2157 5.08859L13.1464 5.14645L8.64645 9.64645C8.47288 9.82001 8.4536 10.0894 8.58859 10.2843L8.64645 10.3536L13.1464 14.8536C13.3417 15.0488 13.6583 15.0488 13.8536 14.8536C14.0271 14.68 14.0464 14.4106 13.9114 14.2157L13.8536 14.1464L9.70711 10L13.8536 5.85355C14.0488 5.65829 14.0488 5.34171 13.8536 5.14645Z",fill:"currentColor"})),na=k("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},k("path",{d:"M13.5 5C13.7455 5 13.9496 5.17688 13.9919 5.41012L14 5.5V14.5C14 14.7761 13.7761 15 13.5 15C13.2545 15 13.0504 14.8231 13.0081 14.5899L13 14.5V5.5C13 5.22386 13.2239 5 13.5 5ZM5.64645 5.14645C5.82001 4.97288 6.08944 4.9536 6.28431 5.08859L6.35355 5.14645L10.8536 9.64645C11.0271 9.82001 11.0464 10.0894 10.9114 10.2843L10.8536 10.3536L6.35355 14.8536C6.15829 15.0488 5.84171 15.0488 5.64645 14.8536C5.47288 14.68 5.4536 14.4106 5.58859 14.2157L5.64645 14.1464L9.79289 10L5.64645 5.85355C5.45118 5.65829 5.45118 5.34171 5.64645 5.14645Z",fill:"currentColor"})),ia=k("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},k("path",{d:"M4.089 4.216l.057-.07a.5.5 0 0 1 .638-.057l.07.057L10 9.293l5.146-5.147a.5.5 0 0 1 .638-.057l.07.057a.5.5 0 0 1 .057.638l-.057.07L10.707 10l5.147 5.146a.5.5 0 0 1 .057.638l-.057.07a.5.5 0 0 1-.638.057l-.07-.057L10 10.707l-5.146 5.147a.5.5 0 0 1-.638.057l-.07-.057a.5.5 0 0 1-.057-.638l.057-.07L9.293 10L4.146 4.854a.5.5 0 0 1-.057-.638l.057-.07l-.057.07z",fill:"currentColor"})),oa=fe([fe("body >",[G("image-container","position: fixed;")]),G("image-preview-container",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 `),G("image-preview-overlay",`
 z-index: -1;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 background: rgba(0, 0, 0, .3);
 `,[vr()]),G("image-preview-toolbar",`
 z-index: 1;
 position: absolute;
 left: 50%;
 transform: translateX(-50%);
 border-radius: var(--n-toolbar-border-radius);
 height: 48px;
 bottom: 40px;
 padding: 0 12px;
 background: var(--n-toolbar-color);
 box-shadow: var(--n-toolbar-box-shadow);
 color: var(--n-toolbar-icon-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 align-items: center;
 `,[G("base-icon",`
 padding: 0 8px;
 font-size: 28px;
 cursor: pointer;
 `),vr()]),G("image-preview-wrapper",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 pointer-events: none;
 `,[jr()]),G("image-preview",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: all;
 margin: auto;
 max-height: calc(100vh - 32px);
 max-width: calc(100vw - 32px);
 transition: transform .3s var(--n-bezier);
 `),G("image",`
 display: inline-flex;
 max-height: 100%;
 max-width: 100%;
 `,[qn("preview-disabled",`
 cursor: pointer;
 `),fe("img",`
 border-radius: inherit;
 `)])]),Et=32,xn=be({name:"ImagePreview",props:Object.assign(Object.assign({},dr),{onNext:Function,onPrev:Function,clsPrefix:{type:String,required:!0}}),setup(e){const p=$e("Image","-image",oa,Xn,e,we(e,"clsPrefix"));let t=null;const u=se(null),s=se(null),n=se(void 0),o=se(!1),r=se(!1),{localeRef:a}=tn("Image");function l(){const{value:K}=s;if(!t||!K)return;const{style:i}=K,B=t.getBoundingClientRect(),O=B.left+B.width/2,y=B.top+B.height/2;i.transformOrigin=`${O}px ${y}px`}function d(K){var i,B;switch(K.key){case" ":K.preventDefault();break;case"ArrowLeft":(i=e.onPrev)===null||i===void 0||i.call(e);break;case"ArrowRight":(B=e.onNext)===null||B===void 0||B.call(e);break;case"Escape":oe();break}}lr(o,K=>{K?qe("keydown",document,d):Ue("keydown",document,d)}),Vr(()=>{Ue("keydown",document,d)});let m=0,x=0,f=0,b=0,g=0,w=0,v=0,_=0,z=!1;function A(K){const{clientX:i,clientY:B}=K;f=i-m,b=B-x,Qn(q)}function R(K){const{mouseUpClientX:i,mouseUpClientY:B,mouseDownClientX:O,mouseDownClientY:y}=K,h=O-i,S=y-B,$=`vertical${S>0?"Top":"Bottom"}`,N=`horizontal${h>0?"Left":"Right"}`;return{moveVerticalDirection:$,moveHorizontalDirection:N,deltaHorizontal:h,deltaVertical:S}}function T(K){const{value:i}=u;if(!i)return{offsetX:0,offsetY:0};const B=i.getBoundingClientRect(),{moveVerticalDirection:O,moveHorizontalDirection:y,deltaHorizontal:h,deltaVertical:S}=K||{};let $=0,N=0;return B.width<=window.innerWidth?$=0:B.left>0?$=(B.width-window.innerWidth)/2:B.right<window.innerWidth?$=-(B.width-window.innerWidth)/2:y==="horizontalRight"?$=Math.min((B.width-window.innerWidth)/2,g-(h??0)):$=Math.max(-((B.width-window.innerWidth)/2),g-(h??0)),B.height<=window.innerHeight?N=0:B.top>0?N=(B.height-window.innerHeight)/2:B.bottom<window.innerHeight?N=-(B.height-window.innerHeight)/2:O==="verticalBottom"?N=Math.min((B.height-window.innerHeight)/2,w-(S??0)):N=Math.max(-((B.height-window.innerHeight)/2),w-(S??0)),{offsetX:$,offsetY:N}}function P(K){Ue("mousemove",document,A),Ue("mouseup",document,P);const{clientX:i,clientY:B}=K;z=!1;const O=R({mouseUpClientX:i,mouseUpClientY:B,mouseDownClientX:v,mouseDownClientY:_}),y=T(O);f=y.offsetX,b=y.offsetY,q()}const M=Fe(yn,null);function I(K){var i,B;if((B=(i=M==null?void 0:M.previewedImgPropsRef.value)===null||i===void 0?void 0:i.onMousedown)===null||B===void 0||B.call(i,K),K.button!==0)return;const{clientX:O,clientY:y}=K;z=!0,m=O-f,x=y-b,g=f,w=b,v=O,_=y,q(),qe("mousemove",document,A),qe("mouseup",document,P)}const j=1.5;let X=0,C=1,L=0;function c(K){var i,B;(B=(i=M==null?void 0:M.previewedImgPropsRef.value)===null||i===void 0?void 0:i.onDblclick)===null||B===void 0||B.call(i,K);const O=U();C=C===O?1:O,q()}function F(){C=1,X=0}function J(){var K;F(),L=0,(K=e.onPrev)===null||K===void 0||K.call(e)}function H(){var K;F(),L=0,(K=e.onNext)===null||K===void 0||K.call(e)}function re(){L-=90,q()}function Z(){L+=90,q()}function ie(){const{value:K}=u;if(!K)return 1;const{innerWidth:i,innerHeight:B}=window,O=Math.max(1,K.naturalHeight/(B-Et)),y=Math.max(1,K.naturalWidth/(i-Et));return Math.max(3,O*2,y*2)}function U(){const{value:K}=u;if(!K)return 1;const{innerWidth:i,innerHeight:B}=window,O=K.naturalHeight/(B-Et),y=K.naturalWidth/(i-Et);return O<1&&y<1?1:Math.max(O,y)}function D(){const K=ie();C<K&&(X+=1,C=Math.min(K,Math.pow(j,X)),q())}function ne(){if(C>.5){const K=C;X-=1,C=Math.max(.5,Math.pow(j,X));const i=K-C;q(!1);const B=T();C+=i,q(!1),C-=i,f=B.offsetX,b=B.offsetY,q()}}function Q(){const K=n.value;K&&nn(K,void 0)}function q(K=!0){var i;const{value:B}=u;if(!B)return;const{style:O}=B,y=qr((i=M==null?void 0:M.previewedImgPropsRef.value)===null||i===void 0?void 0:i.style);let h="";if(typeof y=="string")h=`${y};`;else for(const $ in y)h+=`${vo($)}: ${y[$]};`;const S=`transform-origin: center; transform: translateX(${f}px) translateY(${b}px) rotate(${L}deg) scale(${C});`;z?O.cssText=`${h}cursor: grabbing; transition: none;${S}`:O.cssText=`${h}cursor: grab;${S}${K?"":"transition: none;"}`,K||B.offsetHeight}function oe(){o.value=!o.value,r.value=!0}function Ce(){C=U(),X=Math.ceil(Math.log(C)/Math.log(j)),f=0,b=0,q()}const ae={setPreviewSrc:K=>{n.value=K},setThumbnailEl:K=>{t=K},toggleShow:oe};function de(K,i){if(e.showToolbarTooltip){const{value:B}=p;return k(Jn,{to:!1,theme:B.peers.Tooltip,themeOverrides:B.peerOverrides.Tooltip,keepAliveOnHover:!1},{default:()=>a.value[i],trigger:()=>K})}else return K}const _e=ue(()=>{const{common:{cubicBezierEaseInOut:K},self:{toolbarIconColor:i,toolbarBorderRadius:B,toolbarBoxShadow:O,toolbarColor:y}}=p.value;return{"--n-bezier":K,"--n-toolbar-icon-color":i,"--n-toolbar-color":y,"--n-toolbar-border-radius":B,"--n-toolbar-box-shadow":O}}),{inlineThemeDisabled:ye}=it(),ze=ye?Ct("image-preview",void 0,_e,e):void 0;return Object.assign({previewRef:u,previewWrapperRef:s,previewSrc:n,show:o,appear:Wr(),displayed:r,previewedImgProps:M==null?void 0:M.previewedImgPropsRef,handleWheel(K){K.preventDefault()},handlePreviewMousedown:I,handlePreviewDblclick:c,syncTransformOrigin:l,handleAfterLeave:()=>{F(),L=0,r.value=!1},handleDragStart:K=>{var i,B;(B=(i=M==null?void 0:M.previewedImgPropsRef.value)===null||i===void 0?void 0:i.onDragstart)===null||B===void 0||B.call(i,K),K.preventDefault()},zoomIn:D,zoomOut:ne,handleDownloadClick:Q,rotateCounterclockwise:re,rotateClockwise:Z,handleSwitchPrev:J,handleSwitchNext:H,withTooltip:de,resizeToOrignalImageSize:Ce,cssVars:ye?void 0:_e,themeClass:ze==null?void 0:ze.themeClass,onRender:ze==null?void 0:ze.onRender},ae)},render(){var e,p;const{clsPrefix:t,renderToolbar:u,withTooltip:s}=this,n=s(k(Se,{clsPrefix:t,onClick:this.handleSwitchPrev},{default:()=>ra}),"tipPrevious"),o=s(k(Se,{clsPrefix:t,onClick:this.handleSwitchNext},{default:()=>na}),"tipNext"),r=s(k(Se,{clsPrefix:t,onClick:this.rotateCounterclockwise},{default:()=>k(ko,null)}),"tipCounterclockwise"),a=s(k(Se,{clsPrefix:t,onClick:this.rotateClockwise},{default:()=>k(_o,null)}),"tipClockwise"),l=s(k(Se,{clsPrefix:t,onClick:this.resizeToOrignalImageSize},{default:()=>k(Ro,null)}),"tipOriginalSize"),d=s(k(Se,{clsPrefix:t,onClick:this.zoomOut},{default:()=>k(So,null)}),"tipZoomOut"),m=s(k(Se,{clsPrefix:t,onClick:this.handleDownloadClick},{default:()=>k(bn,null)}),"tipDownload"),x=s(k(Se,{clsPrefix:t,onClick:this.toggleShow},{default:()=>ia}),"tipClose"),f=s(k(Se,{clsPrefix:t,onClick:this.zoomIn},{default:()=>k(Co,null)}),"tipZoomIn");return k(nt,null,(p=(e=this.$slots).default)===null||p===void 0?void 0:p.call(e),k(Gn,{show:this.show},{default:()=>{var b;return this.show||this.displayed?((b=this.onRender)===null||b===void 0||b.call(this),tr(k("div",{class:[`${t}-image-preview-container`,this.themeClass],style:this.cssVars,onWheel:this.handleWheel},k(Tt,{name:"fade-in-transition",appear:this.appear},{default:()=>this.show?k("div",{class:`${t}-image-preview-overlay`,onClick:this.toggleShow}):null}),this.showToolbar?k(Tt,{name:"fade-in-transition",appear:this.appear},{default:()=>this.show?k("div",{class:`${t}-image-preview-toolbar`},u?u({nodes:{prev:n,next:o,rotateCounterclockwise:r,rotateClockwise:a,resizeToOriginalSize:l,zoomOut:d,zoomIn:f,download:m,close:x}}):k(nt,null,this.onPrev?k(nt,null,n,o):null,r,a,l,d,f,m,x)):null}):null,k(Tt,{name:"fade-in-scale-up-transition",onAfterLeave:this.handleAfterLeave,appear:this.appear,onEnter:this.syncTransformOrigin,onBeforeLeave:this.syncTransformOrigin},{default:()=>{const{previewedImgProps:g={}}=this;return tr(k("div",{class:`${t}-image-preview-wrapper`,ref:"previewWrapperRef"},k("img",Object.assign({},g,{draggable:!1,onMousedown:this.handlePreviewMousedown,onDblclick:this.handlePreviewDblclick,class:[`${t}-image-preview`,g.class],key:this.previewSrc,src:this.previewSrc,ref:"previewRef",onDragstart:this.handleDragStart}))),[[Kn,this.show]])}})),[[Yn,{enabled:this.show}]])):null}}))}}),_n=_t("n-image-group"),aa=dr,sa=be({name:"ImageGroup",props:aa,setup(e){let p;const{mergedClsPrefixRef:t}=it(e),u=`c${rr()}`,s=ei(),n=se(null),o=a=>{var l;p=a,(l=n.value)===null||l===void 0||l.setPreviewSrc(a)};function r(a){var l,d;if(!(s!=null&&s.proxy))return;const x=s.proxy.$el.parentElement.querySelectorAll(`[data-group-id=${u}]:not([data-error=true])`);if(!x.length)return;const f=Array.from(x).findIndex(b=>b.dataset.previewSrc===p);~f?o(x[(f+a+x.length)%x.length].dataset.previewSrc):o(x[0].dataset.previewSrc),a===1?(l=e.onPreviewNext)===null||l===void 0||l.call(e):(d=e.onPreviewPrev)===null||d===void 0||d.call(e)}return kt(_n,{mergedClsPrefixRef:t,setPreviewSrc:o,setThumbnailEl:a=>{var l;(l=n.value)===null||l===void 0||l.setThumbnailEl(a)},toggleShow:()=>{var a;(a=n.value)===null||a===void 0||a.toggleShow()},groupId:u,renderToolbarRef:we(e,"renderToolbar")}),{mergedClsPrefix:t,previewInstRef:n,next:()=>{r(1)},prev:()=>{r(-1)}}},render(){return k(xn,{theme:this.theme,themeOverrides:this.themeOverrides,clsPrefix:this.mergedClsPrefix,ref:"previewInstRef",onPrev:this.prev,onNext:this.next,showToolbar:this.showToolbar,showToolbarTooltip:this.showToolbarTooltip,renderToolbar:this.renderToolbar},this.$slots)}}),la=Object.assign({alt:String,height:[String,Number],imgProps:Object,previewedImgProps:Object,lazy:Boolean,intersectionObserverOptions:Object,objectFit:{type:String,default:"fill"},previewSrc:String,fallbackSrc:String,width:[String,Number],src:String,previewDisabled:Boolean,loadDescription:String,onError:Function,onLoad:Function},dr),ua=be({name:"Image",props:la,inheritAttrs:!1,setup(e){const p=se(null),t=se(!1),u=se(null),s=Fe(_n,null),{mergedClsPrefixRef:n}=s||it(e),o={click:()=>{if(e.previewDisabled||t.value)return;const l=e.previewSrc||e.src;if(s){s.setPreviewSrc(l),s.setThumbnailEl(p.value),s.toggleShow();return}const{value:d}=u;d&&(d.setPreviewSrc(l),d.setThumbnailEl(p.value),d.toggleShow())}},r=se(!e.lazy);br(()=>{var l;(l=p.value)===null||l===void 0||l.setAttribute("data-group-id",(s==null?void 0:s.groupId)||"")}),br(()=>{if(e.lazy&&e.intersectionObserverOptions){let l;const d=bt(()=>{l==null||l(),l=void 0,l=Ao(p.value,e.intersectionObserverOptions,r)});Vr(()=>{d(),l==null||l()})}}),bt(()=>{var l;e.src||((l=e.imgProps)===null||l===void 0||l.src),t.value=!1});const a=se(!1);return kt(yn,{previewedImgPropsRef:we(e,"previewedImgProps")}),Object.assign({mergedClsPrefix:n,groupId:s==null?void 0:s.groupId,previewInstRef:u,imageRef:p,showError:t,shouldStartLoading:r,loaded:a,mergedOnClick:l=>{var d,m;o.click(),(m=(d=e.imgProps)===null||d===void 0?void 0:d.onClick)===null||m===void 0||m.call(d,l)},mergedOnError:l=>{if(!r.value)return;t.value=!0;const{onError:d,imgProps:{onError:m}={}}=e;d==null||d(l),m==null||m(l)},mergedOnLoad:l=>{const{onLoad:d,imgProps:{onLoad:m}={}}=e;d==null||d(l),m==null||m(l),a.value=!0}},o)},render(){var e,p;const{mergedClsPrefix:t,imgProps:u={},loaded:s,$attrs:n,lazy:o}=this,r=(p=(e=this.$slots).placeholder)===null||p===void 0?void 0:p.call(e),a=this.src||u.src,l=k("img",Object.assign(Object.assign({},u),{ref:"imageRef",width:this.width||u.width,height:this.height||u.height,src:this.showError?this.fallbackSrc:o&&this.intersectionObserverOptions?this.shouldStartLoading?a:void 0:a,alt:this.alt||u.alt,"aria-label":this.alt||u.alt,onClick:this.mergedOnClick,onError:this.mergedOnError,onLoad:this.mergedOnLoad,loading:zo&&o&&!this.intersectionObserverOptions?"lazy":"eager",style:[u.style||"",r&&!s?{height:"0",width:"0",visibility:"hidden"}:"",{objectFit:this.objectFit}],"data-error":this.showError,"data-preview-src":this.previewSrc||this.src}));return k("div",Object.assign({},n,{role:"none",class:[n.class,`${t}-image`,(this.previewDisabled||this.showError)&&`${t}-image--preview-disabled`]}),this.groupId?l:k(xn,{theme:this.theme,themeOverrides:this.themeOverrides,clsPrefix:t,ref:"previewInstRef",showToolbar:this.showToolbar,showToolbarTooltip:this.showToolbarTooltip,renderToolbar:this.renderToolbar},{default:()=>l,toolbar:()=>{var d,m;return(m=(d=this.$slots).toolbar)===null||m===void 0?void 0:m.call(d)}}),!s&&r)}}),ca=fe([G("list",`
 --n-merged-border-color: var(--n-border-color);
 --n-merged-color: var(--n-color);
 --n-merged-color-hover: var(--n-color-hover);
 margin: 0;
 font-size: var(--n-font-size);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 padding: 0;
 list-style-type: none;
 color: var(--n-text-color);
 background-color: var(--n-merged-color);
 `,[me("show-divider",[G("list-item",[fe("&:not(:last-child)",[ge("divider",`
 background-color: var(--n-merged-border-color);
 `)])])]),me("clickable",[G("list-item",`
 cursor: pointer;
 `)]),me("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `),me("hoverable",[G("list-item",`
 border-radius: var(--n-border-radius);
 `,[fe("&:hover",`
 background-color: var(--n-merged-color-hover);
 `,[ge("divider",`
 background-color: transparent;
 `)])])]),me("bordered, hoverable",[G("list-item",`
 padding: 12px 20px;
 `),ge("header, footer",`
 padding: 12px 20px;
 `)]),ge("header, footer",`
 padding: 12px 0;
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
 `,[fe("&:not(:last-child)",`
 border-bottom: 1px solid var(--n-merged-border-color);
 `)]),G("list-item",`
 position: relative;
 padding: 12px 0; 
 box-sizing: border-box;
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ge("prefix",`
 margin-right: 20px;
 flex: 0;
 `),ge("suffix",`
 margin-left: 20px;
 flex: 0;
 `),ge("main",`
 flex: 1;
 `),ge("divider",`
 height: 1px;
 position: absolute;
 bottom: 0;
 left: 0;
 right: 0;
 background-color: transparent;
 transition: background-color .3s var(--n-bezier);
 pointer-events: none;
 `)])]),ti(G("list",`
 --n-merged-color-hover: var(--n-color-hover-modal);
 --n-merged-color: var(--n-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `)),ri(G("list",`
 --n-merged-color-hover: var(--n-color-hover-popover);
 --n-merged-color: var(--n-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `))]),da=Object.assign(Object.assign({},$e.props),{size:{type:String,default:"medium"},bordered:Boolean,clickable:Boolean,hoverable:Boolean,showDivider:{type:Boolean,default:!0}}),kn=_t("n-list"),ha=be({name:"List",props:da,setup(e){const{mergedClsPrefixRef:p,inlineThemeDisabled:t,mergedRtlRef:u}=it(e),s=ni("List",u,p),n=$e("List","-list",ca,ii,e,p);kt(kn,{showDividerRef:we(e,"showDivider"),mergedClsPrefixRef:p});const o=ue(()=>{const{common:{cubicBezierEaseInOut:a},self:{fontSize:l,textColor:d,color:m,colorModal:x,colorPopover:f,borderColor:b,borderColorModal:g,borderColorPopover:w,borderRadius:v,colorHover:_,colorHoverModal:z,colorHoverPopover:A}}=n.value;return{"--n-font-size":l,"--n-bezier":a,"--n-text-color":d,"--n-color":m,"--n-border-radius":v,"--n-border-color":b,"--n-border-color-modal":g,"--n-border-color-popover":w,"--n-color-modal":x,"--n-color-popover":f,"--n-color-hover":_,"--n-color-hover-modal":z,"--n-color-hover-popover":A}}),r=t?Ct("list",void 0,o,e):void 0;return{mergedClsPrefix:p,rtlEnabled:s,cssVars:t?void 0:o,themeClass:r==null?void 0:r.themeClass,onRender:r==null?void 0:r.onRender}},render(){var e;const{$slots:p,mergedClsPrefix:t,onRender:u}=this;return u==null||u(),k("ul",{class:[`${t}-list`,this.rtlEnabled&&`${t}-list--rtl`,this.bordered&&`${t}-list--bordered`,this.showDivider&&`${t}-list--show-divider`,this.hoverable&&`${t}-list--hoverable`,this.clickable&&`${t}-list--clickable`,this.themeClass],style:this.cssVars},p.header?k("div",{class:`${t}-list__header`},p.header()):null,(e=p.default)===null||e===void 0?void 0:e.call(p),p.footer?k("div",{class:`${t}-list__footer`},p.footer()):null)}}),fa=be({name:"ListItem",setup(){const e=Fe(kn,null);return e||St("list-item","`n-list-item` must be placed in `n-list`."),{showDivider:e.showDividerRef,mergedClsPrefix:e.mergedClsPrefixRef}},render(){const{$slots:e,mergedClsPrefix:p}=this;return k("li",{class:`${p}-list-item`},e.prefix?k("div",{class:`${p}-list-item__prefix`},e.prefix()):null,e.default?k("div",{class:`${p}-list-item__main`},e):null,e.suffix?k("div",{class:`${p}-list-item__suffix`},e.suffix()):null,this.showDivider&&k("div",{class:`${p}-list-item__divider`}))}}),pa=fe([G("progress",{display:"inline-block"},[G("progress-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 `),me("line",`
 width: 100%;
 display: block;
 `,[G("progress-content",`
 display: flex;
 align-items: center;
 `,[G("progress-graph",{flex:1})]),G("progress-custom-content",{marginLeft:"14px"}),G("progress-icon",`
 width: 30px;
 padding-left: 14px;
 height: var(--n-icon-size-line);
 line-height: var(--n-icon-size-line);
 font-size: var(--n-icon-size-line);
 `,[me("as-text",`
 color: var(--n-text-color-line-outer);
 text-align: center;
 width: 40px;
 font-size: var(--n-font-size);
 padding-left: 4px;
 transition: color .3s var(--n-bezier);
 `)])]),me("circle, dashboard",{width:"120px"},[G("progress-custom-content",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `),G("progress-text",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: inherit;
 font-size: var(--n-font-size-circle);
 color: var(--n-text-color-circle);
 font-weight: var(--n-font-weight-circle);
 transition: color .3s var(--n-bezier);
 white-space: nowrap;
 `),G("progress-icon",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: var(--n-icon-color);
 font-size: var(--n-icon-size-circle);
 `)]),me("multiple-circle",`
 width: 200px;
 color: inherit;
 `,[G("progress-text",`
 font-weight: var(--n-font-weight-circle);
 color: var(--n-text-color-circle);
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 transition: color .3s var(--n-bezier);
 `)]),G("progress-content",{position:"relative"}),G("progress-graph",{position:"relative"},[G("progress-graph-circle",[fe("svg",{verticalAlign:"bottom"}),G("progress-graph-circle-fill",`
 stroke: var(--n-fill-color);
 transition:
 opacity .3s var(--n-bezier),
 stroke .3s var(--n-bezier),
 stroke-dasharray .3s var(--n-bezier);
 `,[me("empty",{opacity:0})]),G("progress-graph-circle-rail",`
 transition: stroke .3s var(--n-bezier);
 overflow: hidden;
 stroke: var(--n-rail-color);
 `)]),G("progress-graph-line",[me("indicator-inside",[G("progress-graph-line-rail",`
 height: 16px;
 line-height: 16px;
 border-radius: 10px;
 `,[G("progress-graph-line-fill",`
 height: inherit;
 border-radius: 10px;
 `),G("progress-graph-line-indicator",`
 background: #0000;
 white-space: nowrap;
 text-align: right;
 margin-left: 14px;
 margin-right: 14px;
 height: inherit;
 font-size: 12px;
 color: var(--n-text-color-line-inner);
 transition: color .3s var(--n-bezier);
 `)])]),me("indicator-inside-label",`
 height: 16px;
 display: flex;
 align-items: center;
 `,[G("progress-graph-line-rail",`
 flex: 1;
 transition: background-color .3s var(--n-bezier);
 `),G("progress-graph-line-indicator",`
 background: var(--n-fill-color);
 font-size: 12px;
 transform: translateZ(0);
 display: flex;
 vertical-align: middle;
 height: 16px;
 line-height: 16px;
 padding: 0 10px;
 border-radius: 10px;
 position: absolute;
 white-space: nowrap;
 color: var(--n-text-color-line-inner);
 transition:
 right .2s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `)]),G("progress-graph-line-rail",`
 position: relative;
 overflow: hidden;
 height: var(--n-rail-height);
 border-radius: 5px;
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 `,[G("progress-graph-line-fill",`
 background: var(--n-fill-color);
 position: relative;
 border-radius: 5px;
 height: inherit;
 width: 100%;
 max-width: 0%;
 transition:
 background-color .3s var(--n-bezier),
 max-width .2s var(--n-bezier);
 `,[me("processing",[fe("&::after",`
 content: "";
 background-image: var(--n-line-bg-processing);
 animation: progress-processing-animation 2s var(--n-bezier) infinite;
 `)])])])])])]),fe("@keyframes progress-processing-animation",`
 0% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 100%;
 opacity: 1;
 }
 66% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 100% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 `)]),ga={success:k(Xr,null),error:k(Gr,null),warning:k(Yr,null),info:k(Kr,null)},ma=be({name:"ProgressLine",props:{clsPrefix:{type:String,required:!0},percentage:{type:Number,default:0},railColor:String,railStyle:[String,Object],fillColor:String,status:{type:String,required:!0},indicatorPlacement:{type:String,required:!0},indicatorTextColor:String,unit:{type:String,default:"%"},processing:{type:Boolean,required:!0},showIndicator:{type:Boolean,required:!0},height:[String,Number],railBorderRadius:[String,Number],fillBorderRadius:[String,Number]},setup(e,{slots:p}){const t=ue(()=>ot(e.height)),u=ue(()=>e.railBorderRadius!==void 0?ot(e.railBorderRadius):e.height!==void 0?ot(e.height,{c:.5}):""),s=ue(()=>e.fillBorderRadius!==void 0?ot(e.fillBorderRadius):e.railBorderRadius!==void 0?ot(e.railBorderRadius):e.height!==void 0?ot(e.height,{c:.5}):"");return()=>{const{indicatorPlacement:n,railColor:o,railStyle:r,percentage:a,unit:l,indicatorTextColor:d,status:m,showIndicator:x,fillColor:f,processing:b,clsPrefix:g}=e;return k("div",{class:`${g}-progress-content`,role:"none"},k("div",{class:`${g}-progress-graph`,"aria-hidden":!0},k("div",{class:[`${g}-progress-graph-line`,{[`${g}-progress-graph-line--indicator-${n}`]:!0}]},k("div",{class:`${g}-progress-graph-line-rail`,style:[{backgroundColor:o,height:t.value,borderRadius:u.value},r]},k("div",{class:[`${g}-progress-graph-line-fill`,b&&`${g}-progress-graph-line-fill--processing`],style:{maxWidth:`${e.percentage}%`,backgroundColor:f,height:t.value,lineHeight:t.value,borderRadius:s.value}},n==="inside"?k("div",{class:`${g}-progress-graph-line-indicator`,style:{color:d}},p.default?p.default():`${a}${l}`):null)))),x&&n==="outside"?k("div",null,p.default?k("div",{class:`${g}-progress-custom-content`,style:{color:d},role:"none"},p.default()):m==="default"?k("div",{role:"none",class:`${g}-progress-icon ${g}-progress-icon--as-text`,style:{color:d}},a,l):k("div",{class:`${g}-progress-icon`,"aria-hidden":!0},k(Se,{clsPrefix:g},{default:()=>ga[m]}))):null)}}}),va={success:k(Xr,null),error:k(Gr,null),warning:k(Yr,null),info:k(Kr,null)},ba=be({name:"ProgressCircle",props:{clsPrefix:{type:String,required:!0},status:{type:String,required:!0},strokeWidth:{type:Number,required:!0},fillColor:String,railColor:String,railStyle:[String,Object],percentage:{type:Number,default:0},offsetDegree:{type:Number,default:0},showIndicator:{type:Boolean,required:!0},indicatorTextColor:String,unit:String,viewBoxWidth:{type:Number,required:!0},gapDegree:{type:Number,required:!0},gapOffsetDegree:{type:Number,default:0}},setup(e,{slots:p}){function t(u,s,n){const{gapDegree:o,viewBoxWidth:r,strokeWidth:a}=e,l=50,d=0,m=l,x=0,f=2*l,b=50+a/2,g=`M ${b},${b} m ${d},${m}
      a ${l},${l} 0 1 1 ${x},${-f}
      a ${l},${l} 0 1 1 ${-x},${f}`,w=Math.PI*2*l,v={stroke:n,strokeDasharray:`${u/100*(w-o)}px ${r*8}px`,strokeDashoffset:`-${o/2}px`,transformOrigin:s?"center":void 0,transform:s?`rotate(${s}deg)`:void 0};return{pathString:g,pathStyle:v}}return()=>{const{fillColor:u,railColor:s,strokeWidth:n,offsetDegree:o,status:r,percentage:a,showIndicator:l,indicatorTextColor:d,unit:m,gapOffsetDegree:x,clsPrefix:f}=e,{pathString:b,pathStyle:g}=t(100,0,s),{pathString:w,pathStyle:v}=t(a,o,u),_=100+n;return k("div",{class:`${f}-progress-content`,role:"none"},k("div",{class:`${f}-progress-graph`,"aria-hidden":!0},k("div",{class:`${f}-progress-graph-circle`,style:{transform:x?`rotate(${x}deg)`:void 0}},k("svg",{viewBox:`0 0 ${_} ${_}`},k("g",null,k("path",{class:`${f}-progress-graph-circle-rail`,d:b,"stroke-width":n,"stroke-linecap":"round",fill:"none",style:g})),k("g",null,k("path",{class:[`${f}-progress-graph-circle-fill`,a===0&&`${f}-progress-graph-circle-fill--empty`],d:w,"stroke-width":n,"stroke-linecap":"round",fill:"none",style:v}))))),l?k("div",null,p.default?k("div",{class:`${f}-progress-custom-content`,role:"none"},p.default()):r!=="default"?k("div",{class:`${f}-progress-icon`,"aria-hidden":!0},k(Se,{clsPrefix:f},{default:()=>va[r]})):k("div",{class:`${f}-progress-text`,style:{color:d},role:"none"},k("span",{class:`${f}-progress-text__percentage`},a),k("span",{class:`${f}-progress-text__unit`},m))):null)}}});function Rr(e,p,t=100){return`m ${t/2} ${t/2-e} a ${e} ${e} 0 1 1 0 ${2*e} a ${e} ${e} 0 1 1 0 -${2*e}`}const wa=be({name:"ProgressMultipleCircle",props:{clsPrefix:{type:String,required:!0},viewBoxWidth:{type:Number,required:!0},percentage:{type:Array,default:[0]},strokeWidth:{type:Number,required:!0},circleGap:{type:Number,required:!0},showIndicator:{type:Boolean,required:!0},fillColor:{type:Array,default:()=>[]},railColor:{type:Array,default:()=>[]},railStyle:{type:Array,default:()=>[]}},setup(e,{slots:p}){const t=ue(()=>e.percentage.map((s,n)=>`${Math.PI*s/100*(e.viewBoxWidth/2-e.strokeWidth/2*(1+2*n)-e.circleGap*n)*2}, ${e.viewBoxWidth*8}`));return()=>{const{viewBoxWidth:u,strokeWidth:s,circleGap:n,showIndicator:o,fillColor:r,railColor:a,railStyle:l,percentage:d,clsPrefix:m}=e;return k("div",{class:`${m}-progress-content`,role:"none"},k("div",{class:`${m}-progress-graph`,"aria-hidden":!0},k("div",{class:`${m}-progress-graph-circle`},k("svg",{viewBox:`0 0 ${u} ${u}`},d.map((x,f)=>k("g",{key:f},k("path",{class:`${m}-progress-graph-circle-rail`,d:Rr(u/2-s/2*(1+2*f)-n*f,s,u),"stroke-width":s,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:a[f]},l[f]]}),k("path",{class:[`${m}-progress-graph-circle-fill`,x===0&&`${m}-progress-graph-circle-fill--empty`],d:Rr(u/2-s/2*(1+2*f)-n*f,s,u),"stroke-width":s,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:t.value[f],strokeDashoffset:0,stroke:r[f]}})))))),o&&p.default?k("div",null,k("div",{class:`${m}-progress-text`},p.default())):null)}}}),ya=Object.assign(Object.assign({},$e.props),{processing:Boolean,type:{type:String,default:"line"},gapDegree:Number,gapOffsetDegree:Number,status:{type:String,default:"default"},railColor:[String,Array],railStyle:[String,Array],color:[String,Array],viewBoxWidth:{type:Number,default:100},strokeWidth:{type:Number,default:7},percentage:[Number,Array],unit:{type:String,default:"%"},showIndicator:{type:Boolean,default:!0},indicatorPosition:{type:String,default:"outside"},indicatorPlacement:{type:String,default:"outside"},indicatorTextColor:String,circleGap:{type:Number,default:1},height:Number,borderRadius:[String,Number],fillBorderRadius:[String,Number],offsetDegree:Number}),xa=be({name:"Progress",props:ya,setup(e){const p=ue(()=>e.indicatorPlacement||e.indicatorPosition),t=ue(()=>{if(e.gapDegree||e.gapDegree===0)return e.gapDegree;if(e.type==="dashboard")return 75}),{mergedClsPrefixRef:u,inlineThemeDisabled:s}=it(e),n=$e("Progress","-progress",pa,oi,e,u),o=ue(()=>{const{status:a}=e,{common:{cubicBezierEaseInOut:l},self:{fontSize:d,fontSizeCircle:m,railColor:x,railHeight:f,iconSizeCircle:b,iconSizeLine:g,textColorCircle:w,textColorLineInner:v,textColorLineOuter:_,lineBgProcessing:z,fontWeightCircle:A,[Ft("iconColor",a)]:R,[Ft("fillColor",a)]:T}}=n.value;return{"--n-bezier":l,"--n-fill-color":T,"--n-font-size":d,"--n-font-size-circle":m,"--n-font-weight-circle":A,"--n-icon-color":R,"--n-icon-size-circle":b,"--n-icon-size-line":g,"--n-line-bg-processing":z,"--n-rail-color":x,"--n-rail-height":f,"--n-text-color-circle":w,"--n-text-color-line-inner":v,"--n-text-color-line-outer":_}}),r=s?Ct("progress",ue(()=>e.status[0]),o,e):void 0;return{mergedClsPrefix:u,mergedIndicatorPlacement:p,gapDeg:t,cssVars:s?void 0:o,themeClass:r==null?void 0:r.themeClass,onRender:r==null?void 0:r.onRender}},render(){const{type:e,cssVars:p,indicatorTextColor:t,showIndicator:u,status:s,railColor:n,railStyle:o,color:r,percentage:a,viewBoxWidth:l,strokeWidth:d,mergedIndicatorPlacement:m,unit:x,borderRadius:f,fillBorderRadius:b,height:g,processing:w,circleGap:v,mergedClsPrefix:_,gapDeg:z,gapOffsetDegree:A,themeClass:R,$slots:T,onRender:P}=this;return P==null||P(),k("div",{class:[R,`${_}-progress`,`${_}-progress--${e}`,`${_}-progress--${s}`],style:p,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,role:e==="circle"||e==="line"||e==="dashboard"?"progressbar":"none"},e==="circle"||e==="dashboard"?k(ba,{clsPrefix:_,status:s,showIndicator:u,indicatorTextColor:t,railColor:n,fillColor:r,railStyle:o,offsetDegree:this.offsetDegree,percentage:a,viewBoxWidth:l,strokeWidth:d,gapDegree:z===void 0?e==="dashboard"?75:0:z,gapOffsetDegree:A,unit:x},T):e==="line"?k(ma,{clsPrefix:_,status:s,showIndicator:u,indicatorTextColor:t,railColor:n,fillColor:r,railStyle:o,percentage:a,processing:w,indicatorPlacement:m,unit:x,fillBorderRadius:b,railBorderRadius:f,height:g},T):e==="multiple-circle"?k(wa,{clsPrefix:_,strokeWidth:d,railColor:n,fillColor:r,railStyle:o,viewBoxWidth:l,percentage:a,showIndicator:u,circleGap:v},T):null)}}),ht=_t("n-upload"),Cn="__UPLOAD_DRAGGER__",_a=be({name:"UploadDragger",[Cn]:!0,setup(e,{slots:p}){const t=Fe(ht,null);return t||St("upload-dragger","`n-upload-dragger` must be placed inside `n-upload`."),()=>{const{mergedClsPrefixRef:{value:u},mergedDisabledRef:{value:s},maxReachedRef:{value:n}}=t;return k("div",{class:[`${u}-upload-dragger`,(s||n)&&`${u}-upload-dragger--disabled`]},p)}}});var ar=function(e,p,t,u){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function r(d){try{l(u.next(d))}catch(m){o(m)}}function a(d){try{l(u.throw(d))}catch(m){o(m)}}function l(d){d.done?n(d.value):s(d.value).then(r,a)}l((u=u.apply(e,p||[])).next())})};function Sn(e){return e.includes("image/")}function zr(e=""){const p=e.split("/"),u=p[p.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(u)||[""])[0]}const Ir=/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i,Rn=e=>{if(e.type)return Sn(e.type);const p=zr(e.name||"");if(Ir.test(p))return!0;const t=e.thumbnailUrl||e.url||"",u=zr(t);return!!(/^data:image\//.test(t)||Ir.test(u))};function ka(e){return ar(this,void 0,void 0,function*(){return yield new Promise(p=>{if(!e.type||!Sn(e.type)){p("");return}p(window.URL.createObjectURL(e))})})}const Ca=Nr&&window.FileReader&&window.File;function Sa(e){return e.isDirectory}function Ra(e){return e.isFile}function za(e,p){return ar(this,void 0,void 0,function*(){const t=[];function u(s){return ar(this,void 0,void 0,function*(){for(const n of s)if(n){if(p&&Sa(n)){const o=n.createReader();try{const r=yield new Promise((a,l)=>{o.readEntries(a,l)});yield u(r)}catch{}}else if(Ra(n))try{const o=yield new Promise((r,a)=>{n.file(r,a)});t.push({file:o,entry:n,source:"dnd"})}catch{}}})}return yield u(e),t})}function yt(e){const{id:p,name:t,percentage:u,status:s,url:n,file:o,thumbnailUrl:r,type:a,fullPath:l,batchId:d}=e;return{id:p,name:t,percentage:u??null,status:s,url:n??null,file:o??null,thumbnailUrl:r??null,type:a??null,fullPath:l??null,batchId:d??null}}function Ia(e,p,t){return e=e.toLowerCase(),p=p.toLocaleLowerCase(),t=t.toLocaleLowerCase(),t.split(",").map(s=>s.trim()).filter(Boolean).some(s=>{if(s.startsWith(".")){if(e.endsWith(s))return!0}else if(s.includes("/")){const[n,o]=p.split("/"),[r,a]=s.split("/");if((r==="*"||n&&r&&r===n)&&(a==="*"||o&&a&&a===o))return!0}else return!0;return!1})}const zn=be({name:"UploadTrigger",props:{abstract:Boolean},setup(e,{slots:p}){const t=Fe(ht,null);t||St("upload-trigger","`n-upload-trigger` must be placed inside `n-upload`.");const{mergedClsPrefixRef:u,mergedDisabledRef:s,maxReachedRef:n,listTypeRef:o,dragOverRef:r,openOpenFileDialog:a,draggerInsideRef:l,handleFileAddition:d,mergedDirectoryDndRef:m,triggerClassRef:x,triggerStyleRef:f}=t,b=ue(()=>o.value==="image-card");function g(){s.value||n.value||a()}function w(A){A.preventDefault(),r.value=!0}function v(A){A.preventDefault(),r.value=!0}function _(A){A.preventDefault(),r.value=!1}function z(A){var R;if(A.preventDefault(),!l.value||s.value||n.value){r.value=!1;return}const T=(R=A.dataTransfer)===null||R===void 0?void 0:R.items;T!=null&&T.length?za(Array.from(T).map(P=>P.webkitGetAsEntry()),m.value).then(P=>{d(P)}).finally(()=>{r.value=!1}):r.value=!1}return()=>{var A;const{value:R}=u;return e.abstract?(A=p.default)===null||A===void 0?void 0:A.call(p,{handleClick:g,handleDrop:z,handleDragOver:w,handleDragEnter:v,handleDragLeave:_}):k("div",{class:[`${R}-upload-trigger`,(s.value||n.value)&&`${R}-upload-trigger--disabled`,b.value&&`${R}-upload-trigger--image-card`,x.value],style:f.value,onClick:g,onDrop:z,onDragover:w,onDragenter:v,onDragleave:_},b.value?k(_a,null,{default:()=>ai(p.default,()=>[k(Se,{clsPrefix:R},{default:()=>k(Ci,null)})])}):p)}}}),Aa=be({name:"UploadProgress",props:{show:Boolean,percentage:{type:Number,required:!0},status:{type:String,required:!0}},setup(){return{mergedTheme:Fe(ht).mergedThemeRef}},render(){return k(Jr,null,{default:()=>this.show?k(xa,{type:"line",showIndicator:!1,percentage:this.percentage,status:this.status,height:2,theme:this.mergedTheme.peers.Progress,themeOverrides:this.mergedTheme.peerOverrides.Progress}):null})}}),Ba=k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},k("g",{fill:"none"},k("path",{d:"M21.75 3A3.25 3.25 0 0 1 25 6.25v15.5A3.25 3.25 0 0 1 21.75 25H6.25A3.25 3.25 0 0 1 3 21.75V6.25A3.25 3.25 0 0 1 6.25 3h15.5zm.583 20.4l-7.807-7.68a.75.75 0 0 0-.968-.07l-.084.07l-7.808 7.68c.183.065.38.1.584.1h15.5c.204 0 .4-.035.583-.1l-7.807-7.68l7.807 7.68zM21.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v15.5c0 .208.036.408.103.593l7.82-7.692a2.25 2.25 0 0 1 3.026-.117l.129.117l7.82 7.692c.066-.185.102-.385.102-.593V6.25a1.75 1.75 0 0 0-1.75-1.75zm-3.25 3a2.5 2.5 0 1 1 0 5a2.5 2.5 0 0 1 0-5zm0 1.5a1 1 0 1 0 0 2a1 1 0 0 0 0-2z",fill:"currentColor"}))),Ea=k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},k("g",{fill:"none"},k("path",{d:"M6.4 2A2.4 2.4 0 0 0 4 4.4v19.2A2.4 2.4 0 0 0 6.4 26h15.2a2.4 2.4 0 0 0 2.4-2.4V11.578c0-.729-.29-1.428-.805-1.944l-6.931-6.931A2.4 2.4 0 0 0 14.567 2H6.4zm-.9 2.4a.9.9 0 0 1 .9-.9H14V10a2 2 0 0 0 2 2h6.5v11.6a.9.9 0 0 1-.9.9H6.4a.9.9 0 0 1-.9-.9V4.4zm16.44 6.1H16a.5.5 0 0 1-.5-.5V4.06l6.44 6.44z",fill:"currentColor"})));var Oa=function(e,p,t,u){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function r(d){try{l(u.next(d))}catch(m){o(m)}}function a(d){try{l(u.throw(d))}catch(m){o(m)}}function l(d){d.done?n(d.value):s(d.value).then(r,a)}l((u=u.apply(e,p||[])).next())})};const Ot={paddingMedium:"0 3px",heightMedium:"24px",iconSizeMedium:"18px"},Pa=be({name:"UploadFile",props:{clsPrefix:{type:String,required:!0},file:{type:Object,required:!0},listType:{type:String,required:!0},index:{type:Number,required:!0}},setup(e){const p=Fe(ht),t=se(null),u=se(""),s=ue(()=>{const{file:R}=e;return R.status==="finished"?"success":R.status==="error"?"error":"info"}),n=ue(()=>{const{file:R}=e;if(R.status==="error")return"error"}),o=ue(()=>{const{file:R}=e;return R.status==="uploading"}),r=ue(()=>{if(!p.showCancelButtonRef.value)return!1;const{file:R}=e;return["uploading","pending","error"].includes(R.status)}),a=ue(()=>{if(!p.showRemoveButtonRef.value)return!1;const{file:R}=e;return["finished"].includes(R.status)}),l=ue(()=>{if(!p.showDownloadButtonRef.value)return!1;const{file:R}=e;return["finished"].includes(R.status)}),d=ue(()=>{if(!p.showRetryButtonRef.value)return!1;const{file:R}=e;return["error"].includes(R.status)}),m=si(()=>u.value||e.file.thumbnailUrl||e.file.url),x=ue(()=>{if(!p.showPreviewButtonRef.value)return!1;const{file:{status:R},listType:T}=e;return["finished"].includes(R)&&m.value&&T==="image-card"});function f(){p.submit(e.file.id)}function b(R){R.preventDefault();const{file:T}=e;["finished","pending","error"].includes(T.status)?w(T):["uploading"].includes(T.status)?_(T):Mr("upload","The button clicked type is unknown.")}function g(R){R.preventDefault(),v(e.file)}function w(R){const{xhrMap:T,doChange:P,onRemoveRef:{value:M},mergedFileListRef:{value:I}}=p;Promise.resolve(M?M({file:Object.assign({},R),fileList:I,index:e.index}):!0).then(j=>{if(j===!1)return;const X=Object.assign({},R,{status:"removed"});T.delete(R.id),P(X,void 0,{remove:!0})})}function v(R){const{onDownloadRef:{value:T}}=p;Promise.resolve(T?T(Object.assign({},R)):!0).then(P=>{P!==!1&&nn(R.url,R.name)})}function _(R){const{xhrMap:T}=p,P=T.get(R.id);P==null||P.abort(),w(Object.assign({},R))}function z(R){const{onPreviewRef:{value:T}}=p;if(T)T(e.file,{event:R});else if(e.listType==="image-card"){const{value:P}=t;if(!P)return;P.click()}}const A=()=>Oa(this,void 0,void 0,function*(){const{listType:R}=e;R!=="image"&&R!=="image-card"||p.shouldUseThumbnailUrlRef.value(e.file)&&(u.value=yield p.getFileThumbnailUrlResolver(e.file))});return bt(()=>{A()}),{mergedTheme:p.mergedThemeRef,progressStatus:s,buttonType:n,showProgress:o,disabled:p.mergedDisabledRef,showCancelButton:r,showRemoveButton:a,showDownloadButton:l,showRetryButton:d,showPreviewButton:x,mergedThumbnailUrl:m,shouldUseThumbnailUrl:p.shouldUseThumbnailUrlRef,renderIcon:p.renderIconRef,imageRef:t,handleRemoveOrCancelClick:b,handleDownloadClick:g,handleRetryClick:f,handlePreviewClick:z}},render(){const{clsPrefix:e,mergedTheme:p,listType:t,file:u,renderIcon:s}=this;let n;const o=t==="image";o||t==="image-card"?n=!this.shouldUseThumbnailUrl(u)||!this.mergedThumbnailUrl?k("span",{class:`${e}-upload-file-info__thumbnail`},s?s(u):Rn(u)?k(Se,{clsPrefix:e},{default:()=>Ba}):k(Se,{clsPrefix:e},{default:()=>Ea})):k("a",{rel:"noopener noreferer",target:"_blank",href:u.url||void 0,class:`${e}-upload-file-info__thumbnail`,onClick:this.handlePreviewClick},t==="image-card"?k(ua,{src:this.mergedThumbnailUrl||void 0,previewSrc:u.url||void 0,alt:u.name,ref:"imageRef"}):k("img",{src:this.mergedThumbnailUrl||void 0,alt:u.name})):n=k("span",{class:`${e}-upload-file-info__thumbnail`},s?s(u):k(Se,{clsPrefix:e},{default:()=>k(bo,null)}));const a=k(Aa,{show:this.showProgress,percentage:u.percentage||0,status:this.progressStatus}),l=t==="text"||t==="image";return k("div",{class:[`${e}-upload-file`,`${e}-upload-file--${this.progressStatus}-status`,u.url&&u.status!=="error"&&t!=="image-card"&&`${e}-upload-file--with-url`,`${e}-upload-file--${t}-type`]},k("div",{class:`${e}-upload-file-info`},n,k("div",{class:`${e}-upload-file-info__name`},l&&(u.url&&u.status!=="error"?k("a",{rel:"noopener noreferer",target:"_blank",href:u.url||void 0,onClick:this.handlePreviewClick},u.name):k("span",{onClick:this.handlePreviewClick},u.name)),o&&a),k("div",{class:[`${e}-upload-file-info__action`,`${e}-upload-file-info__action--${t}-type`]},this.showPreviewButton?k(Be,{key:"preview",quaternary:!0,type:this.buttonType,onClick:this.handlePreviewClick,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,builtinThemeOverrides:Ot},{icon:()=>k(Se,{clsPrefix:e},{default:()=>k(_i,null)})}):null,(this.showRemoveButton||this.showCancelButton)&&!this.disabled&&k(Be,{key:"cancelOrTrash",theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,quaternary:!0,builtinThemeOverrides:Ot,type:this.buttonType,onClick:this.handleRemoveOrCancelClick},{icon:()=>k(li,null,{default:()=>this.showRemoveButton?k(Se,{clsPrefix:e,key:"trash"},{default:()=>k(wo,null)}):k(Se,{clsPrefix:e,key:"cancel"},{default:()=>k(yo,null)})})}),this.showRetryButton&&!this.disabled&&k(Be,{key:"retry",quaternary:!0,type:this.buttonType,onClick:this.handleRetryClick,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,builtinThemeOverrides:Ot},{icon:()=>k(Se,{clsPrefix:e},{default:()=>k(xo,null)})}),this.showDownloadButton?k(Be,{key:"download",quaternary:!0,type:this.buttonType,onClick:this.handleDownloadClick,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,builtinThemeOverrides:Ot},{icon:()=>k(Se,{clsPrefix:e},{default:()=>k(bn,null)})}):null)),!o&&a)}}),Ta=be({name:"UploadFileList",setup(e,{slots:p}){const t=Fe(ht,null);t||St("upload-file-list","`n-upload-file-list` must be placed inside `n-upload`.");const{abstractRef:u,mergedClsPrefixRef:s,listTypeRef:n,mergedFileListRef:o,fileListClassRef:r,fileListStyleRef:a,cssVarsRef:l,themeClassRef:d,maxReachedRef:m,showTriggerRef:x,imageGroupPropsRef:f}=t,b=ue(()=>n.value==="image-card"),g=()=>o.value.map((v,_)=>k(Pa,{clsPrefix:s.value,key:v.id,file:v,index:_,listType:n.value})),w=()=>b.value?k(sa,Object.assign({},f.value),{default:g}):k(Jr,{group:!0},{default:g});return()=>{const{value:v}=s,{value:_}=u;return k("div",{class:[`${v}-upload-file-list`,b.value&&`${v}-upload-file-list--grid`,_?d==null?void 0:d.value:void 0,r.value],style:[_&&l?l.value:"",a.value]},w(),x.value&&!m.value&&b.value&&k(zn,null,p))}}}),Da=fe([G("upload","width: 100%;",[me("dragger-inside",[G("upload-trigger",`
 display: block;
 `)]),me("drag-over",[G("upload-dragger",`
 border: var(--n-dragger-border-hover);
 `)])]),G("upload-dragger",`
 cursor: pointer;
 box-sizing: border-box;
 width: 100%;
 text-align: center;
 border-radius: var(--n-border-radius);
 padding: 24px;
 opacity: 1;
 transition:
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-dragger-color);
 border: var(--n-dragger-border);
 `,[fe("&:hover",`
 border: var(--n-dragger-border-hover);
 `),me("disabled",`
 cursor: not-allowed;
 `)]),G("upload-trigger",`
 display: inline-block;
 box-sizing: border-box;
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[fe("+",[G("upload-file-list","margin-top: 8px;")]),me("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `),me("image-card",`
 width: 96px;
 height: 96px;
 `,[G("base-icon",`
 font-size: 24px;
 `),G("upload-dragger",`
 padding: 0;
 height: 100%;
 width: 100%;
 display: flex;
 align-items: center;
 justify-content: center;
 `)])]),G("upload-file-list",`
 line-height: var(--n-line-height);
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[fe("a, img","outline: none;"),me("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `,[G("upload-file","cursor: not-allowed;")]),me("grid",`
 display: grid;
 grid-template-columns: repeat(auto-fill, 96px);
 grid-gap: 8px;
 margin-top: 0;
 `),G("upload-file",`
 display: block;
 box-sizing: border-box;
 cursor: default;
 padding: 0px 12px 0 6px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `,[wr(),G("progress",[wr({foldPadding:!0})]),fe("&:hover",`
 background-color: var(--n-item-color-hover);
 `,[G("upload-file-info",[ge("action",`
 opacity: 1;
 `)])]),me("image-type",`
 border-radius: var(--n-border-radius);
 text-decoration: underline;
 text-decoration-color: #0000;
 `,[G("upload-file-info",`
 padding-top: 0px;
 padding-bottom: 0px;
 width: 100%;
 height: 100%;
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 6px 0;
 `,[G("progress",`
 padding: 2px 0;
 margin-bottom: 0;
 `),ge("name",`
 padding: 0 8px;
 `),ge("thumbnail",`
 width: 32px;
 height: 32px;
 font-size: 28px;
 display: flex;
 justify-content: center;
 align-items: center;
 `,[fe("img",`
 width: 100%;
 `)])])]),me("text-type",[G("progress",`
 box-sizing: border-box;
 padding-bottom: 6px;
 margin-bottom: 6px;
 `)]),me("image-card-type",`
 position: relative;
 width: 96px;
 height: 96px;
 border: var(--n-item-border-image-card);
 border-radius: var(--n-border-radius);
 padding: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: border-color .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 overflow: hidden;
 `,[G("progress",`
 position: absolute;
 left: 8px;
 bottom: 8px;
 right: 8px;
 width: unset;
 `),G("upload-file-info",`
 padding: 0;
 width: 100%;
 height: 100%;
 `,[ge("thumbnail",`
 width: 100%;
 height: 100%;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 font-size: 36px;
 `,[fe("img",`
 width: 100%;
 `)])]),fe("&::before",`
 position: absolute;
 z-index: 1;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 opacity: 0;
 transition: opacity .2s var(--n-bezier);
 content: "";
 `),fe("&:hover",[fe("&::before","opacity: 1;"),G("upload-file-info",[ge("thumbnail","opacity: .12;")])])]),me("error-status",[fe("&:hover",`
 background-color: var(--n-item-color-hover-error);
 `),G("upload-file-info",[ge("name","color: var(--n-item-text-color-error);"),ge("thumbnail","color: var(--n-item-text-color-error);")]),me("image-card-type",`
 border: var(--n-item-border-image-card-error);
 `)]),me("with-url",`
 cursor: pointer;
 `,[G("upload-file-info",[ge("name",`
 color: var(--n-item-text-color-success);
 text-decoration-color: var(--n-item-text-color-success);
 `,[fe("a",`
 text-decoration: underline;
 `)])])]),G("upload-file-info",`
 position: relative;
 padding-top: 6px;
 padding-bottom: 6px;
 display: flex;
 flex-wrap: nowrap;
 `,[ge("thumbnail",`
 font-size: 18px;
 opacity: 1;
 transition: opacity .2s var(--n-bezier);
 color: var(--n-item-icon-color);
 `,[G("base-icon",`
 margin-right: 2px;
 vertical-align: middle;
 transition: color .3s var(--n-bezier);
 `)]),ge("action",`
 padding-top: inherit;
 padding-bottom: inherit;
 position: absolute;
 right: 0;
 top: 0;
 bottom: 0;
 width: 80px;
 display: flex;
 align-items: center;
 transition: opacity .2s var(--n-bezier);
 justify-content: flex-end;
 opacity: 0;
 `,[G("button",[fe("&:not(:last-child)",{marginRight:"4px"}),G("base-icon",[fe("svg",[ui()])])]),me("image-type",`
 position: relative;
 max-width: 80px;
 width: auto;
 `),me("image-card-type",`
 z-index: 2;
 position: absolute;
 width: 100%;
 height: 100%;
 left: 0;
 right: 0;
 bottom: 0;
 top: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 `)]),ge("name",`
 color: var(--n-item-text-color);
 flex: 1;
 display: flex;
 justify-content: center;
 text-overflow: ellipsis;
 overflow: hidden;
 flex-direction: column;
 text-decoration-color: #0000;
 font-size: var(--n-font-size);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier); 
 `,[fe("a",`
 color: inherit;
 text-decoration: underline;
 `)])])])]),G("upload-file-input",`
 display: none;
 width: 0;
 height: 0;
 opacity: 0;
 `)]);var Ar=function(e,p,t,u){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function r(d){try{l(u.next(d))}catch(m){o(m)}}function a(d){try{l(u.throw(d))}catch(m){o(m)}}function l(d){d.done?n(d.value):s(d.value).then(r,a)}l((u=u.apply(e,p||[])).next())})};function La(e,p,t){const{doChange:u,xhrMap:s}=e;let n=0;function o(a){var l;let d=Object.assign({},p,{status:"error",percentage:n});s.delete(p.id),d=yt(((l=e.onError)===null||l===void 0?void 0:l.call(e,{file:d,event:a}))||d),u(d,a)}function r(a){var l;if(e.isErrorState){if(e.isErrorState(t)){o(a);return}}else if(t.status<200||t.status>=300){o(a);return}let d=Object.assign({},p,{status:"finished",percentage:n});s.delete(p.id),d=yt(((l=e.onFinish)===null||l===void 0?void 0:l.call(e,{file:d,event:a}))||d),u(d,a)}return{handleXHRLoad:r,handleXHRError:o,handleXHRAbort(a){const l=Object.assign({},p,{status:"removed",file:null,percentage:n});s.delete(p.id),u(l,a)},handleXHRProgress(a){const l=Object.assign({},p,{status:"uploading"});if(a.lengthComputable){const d=Math.ceil(a.loaded/a.total*100);l.percentage=d,n=d}u(l,a)}}}function Ua(e){const{inst:p,file:t,data:u,headers:s,withCredentials:n,action:o,customRequest:r}=e,{doChange:a}=e.inst;let l=0;r({file:t,data:u,headers:s,withCredentials:n,action:o,onProgress(d){const m=Object.assign({},t,{status:"uploading"}),x=d.percent;m.percentage=x,l=x,a(m)},onFinish(){var d;let m=Object.assign({},t,{status:"finished",percentage:l});m=yt(((d=p.onFinish)===null||d===void 0?void 0:d.call(p,{file:m}))||m),a(m)},onError(){var d;let m=Object.assign({},t,{status:"error",percentage:l});m=yt(((d=p.onError)===null||d===void 0?void 0:d.call(p,{file:m}))||m),a(m)}})}function Fa(e,p,t){const u=La(e,p,t);t.onabort=u.handleXHRAbort,t.onerror=u.handleXHRError,t.onload=u.handleXHRLoad,t.upload&&(t.upload.onprogress=u.handleXHRProgress)}function In(e,p){return typeof e=="function"?e({file:p}):e||{}}function $a(e,p,t){const u=In(p,t);u&&Object.keys(u).forEach(s=>{e.setRequestHeader(s,u[s])})}function Na(e,p,t){const u=In(p,t);u&&Object.keys(u).forEach(s=>{e.append(s,u[s])})}function Ma(e,p,t,{method:u,action:s,withCredentials:n,responseType:o,headers:r,data:a}){const l=new XMLHttpRequest;l.responseType=o,e.xhrMap.set(t.id,l),l.withCredentials=n;const d=new FormData;if(Na(d,a,t),t.file!==null&&d.append(p,t.file),Fa(e,t,l),s!==void 0){l.open(u.toUpperCase(),s),$a(l,r,t),l.send(d);const m=Object.assign({},t,{status:"uploading"});e.doChange(m)}}const ja=Object.assign(Object.assign({},$e.props),{name:{type:String,default:"file"},accept:String,action:String,customRequest:Function,directory:Boolean,directoryDnd:{type:Boolean,default:void 0},method:{type:String,default:"POST"},multiple:Boolean,showFileList:{type:Boolean,default:!0},data:[Object,Function],headers:[Object,Function],withCredentials:Boolean,responseType:{type:String,default:""},disabled:{type:Boolean,default:void 0},onChange:Function,onRemove:Function,onFinish:Function,onError:Function,onBeforeUpload:Function,isErrorState:Function,onDownload:Function,defaultUpload:{type:Boolean,default:!0},fileList:Array,"onUpdate:fileList":[Function,Array],onUpdateFileList:[Function,Array],fileListClass:String,fileListStyle:[String,Object],defaultFileList:{type:Array,default:()=>[]},showCancelButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showDownloadButton:Boolean,showRetryButton:{type:Boolean,default:!0},showPreviewButton:{type:Boolean,default:!0},listType:{type:String,default:"text"},onPreview:Function,shouldUseThumbnailUrl:{type:Function,default:e=>Ca?Rn(e):!1},createThumbnailUrl:Function,abstract:Boolean,max:Number,showTrigger:{type:Boolean,default:!0},imageGroupProps:Object,inputProps:Object,triggerClass:String,triggerStyle:[String,Object],renderIcon:Function}),Ha=be({name:"Upload",props:ja,setup(e){e.abstract&&e.listType==="image-card"&&St("upload","when the list-type is image-card, abstract is not supported.");const{mergedClsPrefixRef:p,inlineThemeDisabled:t}=it(e),u=$e("Upload","-upload",Da,ci,e,p),s=Hr(e),n=se(e.defaultFileList),o=we(e,"fileList"),r=se(null),a={value:!1},l=se(!1),d=new Map,m=Qt(o,n),x=ue(()=>m.value.map(yt)),f=ue(()=>{const{max:I}=e;return I!==void 0?x.value.length>=I:!1});function b(){var I;(I=r.value)===null||I===void 0||I.click()}function g(I){const j=I.target;z(j.files?Array.from(j.files).map(X=>({file:X,entry:null,source:"input"})):null,I),j.value=""}function w(I){const{"onUpdate:fileList":j,onUpdateFileList:X}=e;j&&ut(j,I),X&&ut(X,I),n.value=I}const v=ue(()=>e.multiple||e.directory),_=(I,j,X={append:!1,remove:!1})=>{const{append:C,remove:L}=X,c=Array.from(x.value),F=c.findIndex(J=>J.id===I.id);if(C||L||~F){C?c.push(I):L?c.splice(F,1):c.splice(F,1,I);const{onChange:J}=e;J&&J({file:I,fileList:c,event:j}),w(c)}};function z(I,j){if(!I||I.length===0)return;const{onBeforeUpload:X}=e;I=v.value?I:[I[0]];const{max:C,accept:L}=e;I=I.filter(({file:F,source:J})=>J==="dnd"&&(L!=null&&L.trim())?Ia(F.name,F.type,L):!0),C&&(I=I.slice(0,C-x.value.length));const c=rr();Promise.all(I.map(F=>Ar(this,[F],void 0,function*({file:J,entry:H}){var re;const Z={id:rr(),batchId:c,name:J.name,status:"pending",percentage:0,file:J,url:null,type:J.type,thumbnailUrl:null,fullPath:(re=H==null?void 0:H.fullPath)!==null&&re!==void 0?re:`/${J.webkitRelativePath||J.name}`};return!X||(yield X({file:Z,fileList:x.value}))!==!1?Z:null}))).then(F=>Ar(this,void 0,void 0,function*(){let J=Promise.resolve();F.forEach(H=>{J=J.then(Zr).then(()=>{H&&_(H,j,{append:!0})})}),yield J})).then(()=>{e.defaultUpload&&A()})}function A(I){const{method:j,action:X,withCredentials:C,headers:L,data:c,name:F}=e,J=I!==void 0?x.value.filter(re=>re.id===I):x.value,H=I!==void 0;J.forEach(re=>{const{status:Z}=re;(Z==="pending"||Z==="error"&&H)&&(e.customRequest?Ua({inst:{doChange:_,xhrMap:d,onFinish:e.onFinish,onError:e.onError},file:re,action:X,withCredentials:C,headers:L,data:c,customRequest:e.customRequest}):Ma({doChange:_,xhrMap:d,onFinish:e.onFinish,onError:e.onError,isErrorState:e.isErrorState},F,re,{method:j,action:X,withCredentials:C,responseType:e.responseType,headers:L,data:c}))})}function R(I){var j;if(I.thumbnailUrl)return I.thumbnailUrl;const{createThumbnailUrl:X}=e;return X?(j=X(I.file,I))!==null&&j!==void 0?j:I.url||"":I.url?I.url:I.file?ka(I.file):""}const T=ue(()=>{const{common:{cubicBezierEaseInOut:I},self:{draggerColor:j,draggerBorder:X,draggerBorderHover:C,itemColorHover:L,itemColorHoverError:c,itemTextColorError:F,itemTextColorSuccess:J,itemTextColor:H,itemIconColor:re,itemDisabledOpacity:Z,lineHeight:ie,borderRadius:U,fontSize:D,itemBorderImageCardError:ne,itemBorderImageCard:Q}}=u.value;return{"--n-bezier":I,"--n-border-radius":U,"--n-dragger-border":X,"--n-dragger-border-hover":C,"--n-dragger-color":j,"--n-font-size":D,"--n-item-color-hover":L,"--n-item-color-hover-error":c,"--n-item-disabled-opacity":Z,"--n-item-icon-color":re,"--n-item-text-color":H,"--n-item-text-color-error":F,"--n-item-text-color-success":J,"--n-line-height":ie,"--n-item-border-image-card-error":ne,"--n-item-border-image-card":Q}}),P=t?Ct("upload",void 0,T,e):void 0;kt(ht,{mergedClsPrefixRef:p,mergedThemeRef:u,showCancelButtonRef:we(e,"showCancelButton"),showDownloadButtonRef:we(e,"showDownloadButton"),showRemoveButtonRef:we(e,"showRemoveButton"),showRetryButtonRef:we(e,"showRetryButton"),onRemoveRef:we(e,"onRemove"),onDownloadRef:we(e,"onDownload"),mergedFileListRef:x,triggerClassRef:we(e,"triggerClass"),triggerStyleRef:we(e,"triggerStyle"),shouldUseThumbnailUrlRef:we(e,"shouldUseThumbnailUrl"),renderIconRef:we(e,"renderIcon"),xhrMap:d,submit:A,doChange:_,showPreviewButtonRef:we(e,"showPreviewButton"),onPreviewRef:we(e,"onPreview"),getFileThumbnailUrlResolver:R,listTypeRef:we(e,"listType"),dragOverRef:l,openOpenFileDialog:b,draggerInsideRef:a,handleFileAddition:z,mergedDisabledRef:s.mergedDisabledRef,maxReachedRef:f,fileListClassRef:we(e,"fileListClass"),fileListStyleRef:we(e,"fileListStyle"),abstractRef:we(e,"abstract"),acceptRef:we(e,"accept"),cssVarsRef:t?void 0:T,themeClassRef:P==null?void 0:P.themeClass,onRender:P==null?void 0:P.onRender,showTriggerRef:we(e,"showTrigger"),imageGroupPropsRef:we(e,"imageGroupProps"),mergedDirectoryDndRef:ue(()=>{var I;return(I=e.directoryDnd)!==null&&I!==void 0?I:e.directory})});const M={clear:()=>{n.value=[]},submit:A,openOpenFileDialog:b};return Object.assign({mergedClsPrefix:p,draggerInsideRef:a,inputElRef:r,mergedTheme:u,dragOver:l,mergedMultiple:v,cssVars:t?void 0:T,themeClass:P==null?void 0:P.themeClass,onRender:P==null?void 0:P.onRender,handleFileInputChange:g},M)},render(){var e,p;const{draggerInsideRef:t,mergedClsPrefix:u,$slots:s,directory:n,onRender:o}=this;if(s.default&&!this.abstract){const a=s.default()[0];!((e=a==null?void 0:a.type)===null||e===void 0)&&e[Cn]&&(t.value=!0)}const r=k("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:"file",class:`${u}-upload-file-input`,accept:this.accept,multiple:this.mergedMultiple,onChange:this.handleFileInputChange,webkitdirectory:n||void 0,directory:n||void 0}));return this.abstract?k(nt,null,(p=s.default)===null||p===void 0?void 0:p.call(s),k(di,{to:"body"},r)):(o==null||o(),k("div",{class:[`${u}-upload`,t.value&&`${u}-upload--dragger-inside`,this.dragOver&&`${u}-upload--drag-over`,this.themeClass],style:this.cssVars},r,this.showTrigger&&this.listType!=="image-card"&&k(zn,null,s),this.showFileList&&k(Ta,null,s)))}}),Wa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Za=Pe("path",{d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Va=Pe("path",{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z",fill:"currentColor"},null,-1),qa=Pe("path",{d:"M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z",fill:"currentColor"},null,-1),Xa=[Za,Va,qa],Ga=be({name:"CreateOutline",render:function(p,t){return He(),ct("svg",Wa,Xa)}}),Ya={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ka=Pe("path",{d:"M432 144l-28.67 275.74A32 32 0 0 1 371.55 448H140.46a32 32 0 0 1-31.78-28.26L80 144",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ja=Pe("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Qa=Pe("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M312 240L200 352"},null,-1),es=Pe("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M312 352L200 240"},null,-1),ts=[Ka,Ja,Qa,es],rs=be({name:"TrashBinOutline",render:function(p,t){return He(),ct("svg",Ya,ts)}});function xt(e,p){let t=!1;const{x:u,y:s}=e,n=p.length;for(let o=0,r=n-1;o<n;r=o++){const a=p[o].x,l=p[o].y,d=p[r].x,m=p[r].y;l>s!=m>s&&u<(d-a)*(s-l)/(m-l)+a&&(t=!t)}return t}const An=se(),Re={x:0,y:0};let Oe=1,lt=.1,Br=4,Er=lt,Bn=.4;const Ye=se([{name:"头盔",color:"#18a058"},{name:"口罩",color:"#f0a020"},{name:"飞机",color:"#2080f0"}]);let Ze=[];const le=se(),Ut=se(!1);let ee,je=7;const En=se();function hr(){const e=Ze.map(p=>({name:p.name,...p.points}));ee&&e.push({name:ee.name,...ee.points}),En.value=e}let xe;const $t=new Image;function On(e,p){const{naturalWidth:t,naturalHeight:u}=$t,s=t/u,o=e/p<=s,r=o?e:p*s,a=o?e/s:p,l=o?0:(e-r)/2,d=o?(p-a)/2:0;return{width:Oe*r,height:Oe*a,left:Oe*l+Re.x,top:Oe*d+Re.y}}function sr(e,p,t,u){const{ctx:s,left:n,top:o,width:r,height:a}=xe,l=18*Oe,d=5*Oe;s.font=l+"px serif";let m=s.measureText(t);s.fillStyle=u,s.fillRect(n+e*r,o+p*a-(l+2*d),m.width+2*d,l+2*d),s.fillStyle="white",s.textBaseline="bottom",s.fillText(t,n+e*r+d,o+p*a-d)}function ns(){const{ctx:e,left:p,top:t,width:u,height:s}=xe;function n(o,r,a,l,d){e.fillStyle=d+(255*Bn).toString(16).split(".")[0],e.fillRect(o,r,a,l),e.strokeStyle=d,e.strokeRect(o,r,a,l)}if(Ze.forEach(o=>{n(p+o.points.x*u,t+o.points.y*s,o.points.w*u,o.points.h*s,o.color),sr(o.points.x,o.points.y,o.name,o.color)}),le.value&&le.value.points.length>1){const o=Math.min(le.value.points[0].x,le.value.points[1].x),r=Math.min(le.value.points[0].y,le.value.points[1].y),a=Math.max(le.value.points[0].x,le.value.points[1].x)-o,l=Math.max(le.value.points[0].y,le.value.points[1].y)-r;n(p+o*u,t+r*s,a*u,l*s,le.value.color),sr(o,r,le.value.name,le.value.color)}}function Nt(){ee&&(Ze.push(ee),ee=void 0)}function Pn(){if(!ee)return;const{left:e,top:p,width:t,height:u}=xe,{x:s,y:n,w:o,h:r}=ee.points;return[{x:s,y:n,type:"left-top"},{x:s+o/2,y:n,type:"center-top"},{x:s+o,y:n,type:"right-top"},{x:s+o,y:n+r/2,type:"right-center"},{x:s+o,y:n+r,type:"right-bottom"},{x:s+o/2,y:n+r,type:"center-bottom"},{x:s,y:n+r,type:"left-bottom"},{x:s,y:n+r/2,type:"left-center"}].map(({x:l,y:d,type:m})=>({x:l*t+e,y:d*u+p,type:m}))}function Tn(e,p){const t=Pn();if(!t)return;const{dom:u}=xe,{x:s,y:n}=u.getBoundingClientRect();function o(r){const a=r.x+s,l=r.y+n;return[{x:a-je,y:l-je},{x:a+je,y:l-je},{x:a+je,y:l+je},{x:a-je,y:l+je}]}return t.find(r=>xt({x:e,y:p},o(r)))}function is(){if(!ee)return;const{ctx:e,left:p,top:t,width:u,height:s}=xe,{points:n,color:o}=ee,r=p+n.x*u,a=t+n.y*s,l=n.w*u,d=n.h*s;e.fillStyle=o+(255*Bn).toString(16).split(".")[0],e.fillRect(r,a,l,d),e.strokeStyle="white",e.strokeRect(r,a,l,d),sr(n.x,n.y,ee.name,ee.color);const m=Pn();m==null||m.forEach(({x,y:f})=>{e.strokeStyle=o,e.beginPath(),e.arc(x,f,je,0,2*Math.PI),e.stroke(),e.fillStyle="white",e.fill()})}function os(){const{clientWidth:e,clientHeight:p,ctx:t}=xe,{left:u,top:s,width:n,height:o}=On(e,p);t.drawImage($t,u,s,n,o)}function Te(){const e=An.value,p=e.getContext("2d");if(!e||!p)return;const{clientWidth:t,clientHeight:u}=e;e.width=t,e.height=u;const{x:s,y:n}=e.getBoundingClientRect(),{left:o,top:r,width:a,height:l}=On(t,u);p.clearRect(Re.x,Re.y,t+Re.x,u+Re.y),xe={dom:e,ctx:p,clientWidth:t,clientHeight:u,x:s,y:n,left:o,top:r,width:a,height:l},os(),ns(),is()}let fr=!1,pr=!1,he,Le={};function Dn(e){if(!xe)return;const{clientX:p,clientY:t}=e,{left:u,top:s,width:n,height:o,x:r,y:a}=xe;return{x:(p-(r+u))/n,y:(t-(a+s))/o}}function Mt(e){const{left:p,top:t,width:u,height:s}=xe,n=p+e.points.x*u,o=t+e.points.y*s,r=e.points.w*u,a=e.points.h*s;return[{x:n,y:o},{x:n+r,y:o},{x:n+r,y:o+a},{x:n,y:o+a}]}const Or=function(){const e=yr(()=>window.$message.warning(`放大到最大值了！ ${Br} 倍`),200),p=yr(()=>window.$message.warning(`缩小到最小值了！ ${Er} 倍`),200);return function(t){if(!xe)return;const{x:u,y:s}=xe,{deltaY:n,clientX:o,clientY:r}=t;function a(){const d=u+Re.x,m=s+Re.y,x=o-d,f=r-m,b=n>0?-lt:lt,g=Oe-b,w=x/g*b,v=f/g*b;o<d?Re.x+=w:o>d&&(Re.x-=w),r<m?Re.y+=v:r>m&&(Re.y-=v),Te()}function l(){var d;if(n<0&&Oe>=Br)e();else if(n>0&&Oe<=Er)p();else{const m=((d=lt.toString().split(".")[1])==null?void 0:d.length)||0,x=n>0?-lt:lt;Oe=Number((Oe+x).toFixed(m)),a()}}l()}}();function Pr(e){const{clientX:p,clientY:t}=e;if(!(!xe||fr)){if(le.value){const u=Dn(e);if(u===void 0)return;if(le.value.points.length===0)le.value.points[0]=u;else{const s=Math.min(le.value.points[0].x,u.x),n=Math.min(le.value.points[0].y,u.y),o=Math.max(le.value.points[0].x,u.x)-s,r=Math.max(le.value.points[0].y,u.y)-n;if(Ze.push({id:ur(),name:le.value.name,color:le.value.color,points:{x:s,y:n,w:o,h:r}}),hr(),Ut.value){const a=le.value;le.value={name:a.name,color:a.color,points:[]}}else le.value=void 0}Te()}else if(!he){const{x:u,y:s}=xe;if(ee&&xt({x:p-u,y:t-s},Mt(ee)))Nt(),Te();else{const o=[...Ze];o.sort((a,l)=>a.points.w*a.points.h-l.points.w*l.points.h);const r=o.find(a=>xt({x:p-u,y:t-s},Mt(a)));Nt(),r&&(Ze=Ze.filter(a=>a.id!==r.id),ee=r),Te()}}}}function Tr(e){const{clientX:p,clientY:t}=e;if(!xe)return;const{x:u,y:s,dom:n}=xe;if(ee){const o=Tn(p,t),r=ee&&xt({x:p-u,y:t-s},Mt(ee));(o||r)&&(he=o?o.type:"box",Le={x:p,y:t},r&&!o&&(n.style.cursor="move"))}else le.value||(pr=!0)}function Dr(){if(Le={},pr=!1,requestAnimationFrame(()=>{he=void 0,fr=!1}),!xe)return;const{dom:e}=xe;e.style.cursor="inherit"}const Ln={"left-top":"nwse-resize","center-top":"ns-resize","right-top":"nesw-resize","right-center":"ew-resize","right-bottom":"nwse-resize","center-bottom":"ns-resize","left-bottom":"nesw-resize","left-center":"ew-resize"};function as(e,p){if(!he)return;const{x:t,y:u}=Le;if(t===void 0||u===void 0||!ee)return;const{width:s,height:n,dom:o}=xe,r={x:(e-t)/s,y:(p-u)/n};if(Le={x:e,y:p},he=="left-top"){ee.points.x+=r.x,ee.points.y+=r.y,ee.points.w+=-r.x,ee.points.h+=-r.y;const a=ee.points.w<0,l=ee.points.h<0;a&&l?he="right-bottom":a?he="right-top":l&&(he="left-bottom")}else if(he=="center-top")ee.points.y+=r.y,ee.points.h+=-r.y,ee.points.h<0&&(he="center-bottom");else if(he=="right-top"){ee.points.y+=r.y,ee.points.w+=r.x,ee.points.h+=-r.y;const a=ee.points.w<0,l=ee.points.h<0;a&&l?he="left-bottom":a?he="left-top":l&&(he="right-bottom")}else if(he=="right-center")ee.points.w+=r.x,ee.points.w<0&&(he="left-center");else if(he=="right-bottom"){ee.points.w+=r.x,ee.points.h+=r.y;const a=ee.points.w<0,l=ee.points.h<0;a&&l?he="left-top":a?he="left-bottom":l&&(he="right-top")}else if(he=="center-bottom")ee.points.h+=r.y,ee.points.h<0&&(he="center-top");else if(he=="left-bottom"){ee.points.x+=r.x,ee.points.w+=-r.x,ee.points.h+=r.y;const a=ee.points.w<0,l=ee.points.h<0;a&&l?he="right-top":a?he="right-bottom":l&&(he="left-top")}else he=="left-center"?(ee.points.x+=r.x,ee.points.w+=-r.x,ee.points.w<0&&(he="right-center")):he=="box"&&(ee.points.x+=r.x,ee.points.y+=r.y);he!="box"&&(o.style.cursor=Ln[he]),ee.points.w<0&&(ee.points.x+=ee.points.w,ee.points.w=-ee.points.w),ee.points.h<0&&(ee.points.y+=ee.points.h,ee.points.h=-ee.points.h),hr(),Te()}function Lr(e){const{clientX:p,clientY:t}=e;if(xe){if(pr)Le.x!==void 0&&Le.y!==void 0&&(fr=!0,Re.x+=p-Le.x,Re.y+=t-Le.y,Te()),Le.x=p,Le.y=t;else if(le.value!==void 0&&le.value.points.length>0){const u=Dn(e);if(u===void 0)return;le.value.points[1]=u,Te()}else if(ee)if(he)as(p,t);else{const{x:u,y:s,dom:n}=xe,o=Tn(p,t),r=xt({x:p-u,y:t-s},Mt(ee));o||r?n.style.cursor=o?Ln[o.type]:"move":n.style.cursor="inherit"}}}function Ur(e){if(xe&&e.key==="Delete"){const p=!!le.value,t=!!ee;le.value=void 0,ee=void 0,t&&hr(),(p||t)&&Te()}}function Fr(e){if(xe)if(e.preventDefault(),le.value){const p=le.value.points.length>0;le.value=void 0,p&&Te()}else ee&&(Nt(),Te())}function ss(e){const p=Ye.value[e];!xe||!p||(le.value={...p,points:[]},ee&&Nt())}function Gt(e){if(Ze=[],ee=void 0,le.value=void 0,e){const{src:p}=e;$t.src=p,Ze=e.boxList.map(t=>{const u=Ye.value.find(n=>n.name===t.name);if(!u)return;const s={...t};return delete s.name,{id:ur(),name:t.name,color:u.color,points:s}}).filter(Boolean),$t.onload=function(){Oe=1,Re.x=0,Re.y=0,Te()}}else if(xe){const{ctx:p,clientWidth:t,clientHeight:u}=xe;p.clearRect(Re.x,Re.y,t+Re.x,u+Re.y)}}function ls(){const e="0123456789ABCDEF";let p="#";for(let t=0;t<6;t++)p+=e[Math.floor(Math.random()*16)];return p}function us(e){return()=>k(Qr,null,{default:()=>k(e)})}function cs(){const e=se(ls()),p=se("你好啊你好");window.$dialog.create({icon:us(Ga),title:"添加方框类别",content:()=>k(Dt,{vertical:!0},()=>[k(en,{label:"类别名称",value:p.value,onUpdateValue:t=>p.value=t}),k(ta,{modes:["hex"],"show-alpha":!1,label:"类别颜色",value:e.value,onUpdateValue:t=>e.value=t})]),positiveText:"添加",negativeText:"取消",onPositiveClick:()=>{Ye.value.push({name:p.value,color:e.value})}})}const ds=""+new URL("1-D6MQjZe8.avif",import.meta.url).href,hs=""+new URL("2-BR1XFc7x.avif",import.meta.url).href;function Pt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Un={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,p){(function(t){e.exports=t()})(function(){return function t(u,s,n){function o(l,d){if(!s[l]){if(!u[l]){var m=typeof Pt=="function"&&Pt;if(!d&&m)return m(l,!0);if(r)return r(l,!0);var x=new Error("Cannot find module '"+l+"'");throw x.code="MODULE_NOT_FOUND",x}var f=s[l]={exports:{}};u[l][0].call(f.exports,function(b){var g=u[l][1][b];return o(g||b)},f,f.exports,t,u,s,n)}return s[l].exports}for(var r=typeof Pt=="function"&&Pt,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,u,s){var n=t("./utils"),o=t("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(a){for(var l,d,m,x,f,b,g,w=[],v=0,_=a.length,z=_,A=n.getTypeOf(a)!=="string";v<a.length;)z=_-v,m=A?(l=a[v++],d=v<_?a[v++]:0,v<_?a[v++]:0):(l=a.charCodeAt(v++),d=v<_?a.charCodeAt(v++):0,v<_?a.charCodeAt(v++):0),x=l>>2,f=(3&l)<<4|d>>4,b=1<z?(15&d)<<2|m>>6:64,g=2<z?63&m:64,w.push(r.charAt(x)+r.charAt(f)+r.charAt(b)+r.charAt(g));return w.join("")},s.decode=function(a){var l,d,m,x,f,b,g=0,w=0,v="data:";if(a.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var _,z=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===r.charAt(64)&&z--,a.charAt(a.length-2)===r.charAt(64)&&z--,z%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=o.uint8array?new Uint8Array(0|z):new Array(0|z);g<a.length;)l=r.indexOf(a.charAt(g++))<<2|(x=r.indexOf(a.charAt(g++)))>>4,d=(15&x)<<4|(f=r.indexOf(a.charAt(g++)))>>2,m=(3&f)<<6|(b=r.indexOf(a.charAt(g++))),_[w++]=l,f!==64&&(_[w++]=d),b!==64&&(_[w++]=m);return _}},{"./support":30,"./utils":32}],2:[function(t,u,s){var n=t("./external"),o=t("./stream/DataWorker"),r=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function l(d,m,x,f,b){this.compressedSize=d,this.uncompressedSize=m,this.crc32=x,this.compression=f,this.compressedContent=b}l.prototype={getContentWorker:function(){var d=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(d,m,x){return d.pipe(new r).pipe(new a("uncompressedSize")).pipe(m.compressWorker(x)).pipe(new a("compressedSize")).withStreamInfo("compression",m)},u.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,u,s){var n=t("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},s.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,u,s){var n=t("./utils"),o=function(){for(var r,a=[],l=0;l<256;l++){r=l;for(var d=0;d<8;d++)r=1&r?3988292384^r>>>1:r>>>1;a[l]=r}return a}();u.exports=function(r,a){return r!==void 0&&r.length?n.getTypeOf(r)!=="string"?function(l,d,m,x){var f=o,b=x+m;l^=-1;for(var g=x;g<b;g++)l=l>>>8^f[255&(l^d[g])];return-1^l}(0|a,r,r.length,0):function(l,d,m,x){var f=o,b=x+m;l^=-1;for(var g=x;g<b;g++)l=l>>>8^f[255&(l^d.charCodeAt(g))];return-1^l}(0|a,r,r.length,0):0}},{"./utils":32}],5:[function(t,u,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(t,u,s){var n=null;n=typeof Promise<"u"?Promise:t("lie"),u.exports={Promise:n}},{lie:37}],7:[function(t,u,s){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),r=t("./utils"),a=t("./stream/GenericWorker"),l=n?"uint8array":"array";function d(m,x){a.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=x,this.meta={}}s.magic="\b\0",r.inherits(d,a),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(l,m.data),!1)},d.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(x){m.push({data:x,meta:m.meta})}},s.compressWorker=function(m){return new d("Deflate",m)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,u,s){function n(f,b){var g,w="";for(g=0;g<b;g++)w+=String.fromCharCode(255&f),f>>>=8;return w}function o(f,b,g,w,v,_){var z,A,R=f.file,T=f.compression,P=_!==l.utf8encode,M=r.transformTo("string",_(R.name)),I=r.transformTo("string",l.utf8encode(R.name)),j=R.comment,X=r.transformTo("string",_(j)),C=r.transformTo("string",l.utf8encode(j)),L=I.length!==R.name.length,c=C.length!==j.length,F="",J="",H="",re=R.dir,Z=R.date,ie={crc32:0,compressedSize:0,uncompressedSize:0};b&&!g||(ie.crc32=f.crc32,ie.compressedSize=f.compressedSize,ie.uncompressedSize=f.uncompressedSize);var U=0;b&&(U|=8),P||!L&&!c||(U|=2048);var D=0,ne=0;re&&(D|=16),v==="UNIX"?(ne=798,D|=function(q,oe){var Ce=q;return q||(Ce=oe?16893:33204),(65535&Ce)<<16}(R.unixPermissions,re)):(ne=20,D|=function(q){return 63&(q||0)}(R.dosPermissions)),z=Z.getUTCHours(),z<<=6,z|=Z.getUTCMinutes(),z<<=5,z|=Z.getUTCSeconds()/2,A=Z.getUTCFullYear()-1980,A<<=4,A|=Z.getUTCMonth()+1,A<<=5,A|=Z.getUTCDate(),L&&(J=n(1,1)+n(d(M),4)+I,F+="up"+n(J.length,2)+J),c&&(H=n(1,1)+n(d(X),4)+C,F+="uc"+n(H.length,2)+H);var Q="";return Q+=`
\0`,Q+=n(U,2),Q+=T.magic,Q+=n(z,2),Q+=n(A,2),Q+=n(ie.crc32,4),Q+=n(ie.compressedSize,4),Q+=n(ie.uncompressedSize,4),Q+=n(M.length,2),Q+=n(F.length,2),{fileRecord:m.LOCAL_FILE_HEADER+Q+M+F,dirRecord:m.CENTRAL_FILE_HEADER+n(ne,2)+Q+n(X.length,2)+"\0\0\0\0"+n(D,4)+n(w,4)+M+F+X}}var r=t("../utils"),a=t("../stream/GenericWorker"),l=t("../utf8"),d=t("../crc32"),m=t("../signature");function x(f,b,g,w){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=g,this.encodeFileName=w,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(x,a),x.prototype.push=function(f){var b=f.meta.percent||0,g=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,a.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:g?(b+100*(g-w-1))/g:100}}))},x.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var b=this.streamFiles&&!f.file.dir;if(b){var g=o(f,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(f){this.accumulate=!1;var b=this.streamFiles&&!f.file.dir,g=o(f,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),b)this.push({data:function(w){return m.DATA_DESCRIPTOR+n(w.crc32,4)+n(w.compressedSize,4)+n(w.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var f=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var g=this.bytesWritten-f,w=function(v,_,z,A,R){var T=r.transformTo("string",R(A));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(v,2)+n(v,2)+n(_,4)+n(z,4)+n(T.length,2)+T}(this.dirRecords.length,g,f,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(f){this._sources.push(f);var b=this;return f.on("data",function(g){b.processChunk(g)}),f.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),f.on("error",function(g){b.error(g)}),this},x.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(f){var b=this._sources;if(!a.prototype.error.call(this,f))return!1;for(var g=0;g<b.length;g++)try{b[g].error(f)}catch{}return!0},x.prototype.lock=function(){a.prototype.lock.call(this);for(var f=this._sources,b=0;b<f.length;b++)f[b].lock()},u.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,u,s){var n=t("../compressions"),o=t("./ZipFileWorker");s.generateWorker=function(r,a,l){var d=new o(a.streamFiles,l,a.platform,a.encodeFileName),m=0;try{r.forEach(function(x,f){m++;var b=function(_,z){var A=_||z,R=n[A];if(!R)throw new Error(A+" is not a valid compression method !");return R}(f.options.compression,a.compression),g=f.options.compressionOptions||a.compressionOptions||{},w=f.dir,v=f.date;f._compressWorker(b,g).withStreamInfo("file",{name:x,dir:w,date:v,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(x){d.error(x)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,u,s){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new n;for(var r in this)typeof this[r]!="function"&&(o[r]=this[r]);return o}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(o,r){return new n().loadAsync(o,r)},n.external=t("./external"),u.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,u,s){var n=t("./utils"),o=t("./external"),r=t("./utf8"),a=t("./zipEntries"),l=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function m(x){return new o.Promise(function(f,b){var g=x.decompressed.getContentWorker().pipe(new l);g.on("error",function(w){b(w)}).on("end",function(){g.streamInfo.crc32!==x.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}u.exports=function(x,f){var b=this;return f=n.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),d.isNode&&d.isStream(x)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",x,!0,f.optimizedBinaryString,f.base64).then(function(g){var w=new a(f);return w.load(g),w}).then(function(g){var w=[o.Promise.resolve(g)],v=g.files;if(f.checkCRC32)for(var _=0;_<v.length;_++)w.push(m(v[_]));return o.Promise.all(w)}).then(function(g){for(var w=g.shift(),v=w.files,_=0;_<v.length;_++){var z=v[_],A=z.fileNameStr,R=n.resolve(z.fileNameStr);b.file(R,z.decompressed,{binary:!0,optimizedBinaryString:!0,date:z.date,dir:z.dir,comment:z.fileCommentStr.length?z.fileCommentStr:null,unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions,createFolders:f.createFolders}),z.dir||(b.file(R).unsafeOriginalName=A)}return w.zipComment.length&&(b.comment=w.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,u,s){var n=t("../utils"),o=t("../stream/GenericWorker");function r(a,l){o.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(l)}n.inherits(r,o),r.prototype._bindStream=function(a){var l=this;(this._stream=a).pause(),a.on("data",function(d){l.push({data:d,meta:{percent:0}})}).on("error",function(d){l.isPaused?this.generatedError=d:l.error(d)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},r.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},u.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,u,s){var n=t("readable-stream").Readable;function o(r,a,l){n.call(this,a),this._helper=r;var d=this;r.on("data",function(m,x){d.push(m)||d._helper.pause(),l&&l(x)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}t("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},u.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,u,s){u.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,o);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,o)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var o=new Buffer(n);return o.fill(0),o},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,u,s){function n(R,T,P){var M,I=r.getTypeOf(T),j=r.extend(P||{},d);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(R=v(R)),j.createFolders&&(M=w(R))&&_.call(this,M,!0);var X=I==="string"&&j.binary===!1&&j.base64===!1;P&&P.binary!==void 0||(j.binary=!X),(T instanceof m&&T.uncompressedSize===0||j.dir||!T||T.length===0)&&(j.base64=!1,j.binary=!0,T="",j.compression="STORE",I="string");var C=null;C=T instanceof m||T instanceof a?T:b.isNode&&b.isStream(T)?new g(R,T):r.prepareContent(R,T,j.binary,j.optimizedBinaryString,j.base64);var L=new x(R,C,j);this.files[R]=L}var o=t("./utf8"),r=t("./utils"),a=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),d=t("./defaults"),m=t("./compressedObject"),x=t("./zipObject"),f=t("./generate"),b=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),w=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var T=R.lastIndexOf("/");return 0<T?R.substring(0,T):""},v=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},_=function(R,T){return T=T!==void 0?T:d.createFolders,R=v(R),this.files[R]||n.call(this,R,null,{dir:!0,createFolders:T}),this.files[R]};function z(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var T,P,M;for(T in this.files)M=this.files[T],(P=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&R(P,M)},filter:function(R){var T=[];return this.forEach(function(P,M){R(P,M)&&T.push(M)}),T},file:function(R,T,P){if(arguments.length!==1)return R=this.root+R,n.call(this,R,T,P),this;if(z(R)){var M=R;return this.filter(function(j,X){return!X.dir&&M.test(j)})}var I=this.files[this.root+R];return I&&!I.dir?I:null},folder:function(R){if(!R)return this;if(z(R))return this.filter(function(I,j){return j.dir&&R.test(I)});var T=this.root+R,P=_.call(this,T),M=this.clone();return M.root=P.name,M},remove:function(R){R=this.root+R;var T=this.files[R];if(T||(R.slice(-1)!=="/"&&(R+="/"),T=this.files[R]),T&&!T.dir)delete this.files[R];else for(var P=this.filter(function(I,j){return j.name.slice(0,R.length)===R}),M=0;M<P.length;M++)delete this.files[P[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var T,P={};try{if((P=r.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");r.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var M=P.comment||this.comment||"";T=f.generateWorker(this,P,M)}catch(I){(T=new a("error")).error(I)}return new l(T,P.type||"string",P.mimeType)},generateAsync:function(R,T){return this.generateInternalStream(R).accumulate(T)},generateNodeStream:function(R,T){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(T)}};u.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,u,s){u.exports=t("stream")},{stream:void 0}],17:[function(t,u,s){var n=t("./DataReader");function o(r){n.call(this,r);for(var a=0;a<this.data.length;a++)r[a]=255&r[a]}t("../utils").inherits(o,n),o.prototype.byteAt=function(r){return this.data[this.zero+r]},o.prototype.lastIndexOfSignature=function(r){for(var a=r.charCodeAt(0),l=r.charCodeAt(1),d=r.charCodeAt(2),m=r.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===a&&this.data[x+1]===l&&this.data[x+2]===d&&this.data[x+3]===m)return x-this.zero;return-1},o.prototype.readAndCheckSignature=function(r){var a=r.charCodeAt(0),l=r.charCodeAt(1),d=r.charCodeAt(2),m=r.charCodeAt(3),x=this.readData(4);return a===x[0]&&l===x[1]&&d===x[2]&&m===x[3]},o.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,a},u.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,u,s){var n=t("../utils");function o(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var a,l=0;for(this.checkOffset(r),a=this.index+r-1;a>=this.index;a--)l=(l<<8)+this.byteAt(a);return this.index+=r,l},readString:function(r){return n.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},u.exports=o},{"../utils":32}],19:[function(t,u,s){var n=t("./Uint8ArrayReader");function o(r){n.call(this,r)}t("../utils").inherits(o,n),o.prototype.readData=function(r){this.checkOffset(r);var a=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,a},u.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,u,s){var n=t("./DataReader");function o(r){n.call(this,r)}t("../utils").inherits(o,n),o.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},o.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},o.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},o.prototype.readData=function(r){this.checkOffset(r);var a=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,a},u.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,u,s){var n=t("./ArrayReader");function o(r){n.call(this,r)}t("../utils").inherits(o,n),o.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,a},u.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,u,s){var n=t("../utils"),o=t("../support"),r=t("./ArrayReader"),a=t("./StringReader"),l=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");u.exports=function(m){var x=n.getTypeOf(m);return n.checkSupport(x),x!=="string"||o.uint8array?x==="nodebuffer"?new l(m):o.uint8array?new d(n.transformTo("uint8array",m)):new r(n.transformTo("array",m)):new a(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,u,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,u,s){var n=t("./GenericWorker"),o=t("../utils");function r(a){n.call(this,"ConvertWorker to "+a),this.destType=a}o.inherits(r,n),r.prototype.processChunk=function(a){this.push({data:o.transformTo(this.destType,a.data),meta:a.meta})},u.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(t,u,s){var n=t("./GenericWorker"),o=t("../crc32");function r(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(r,n),r.prototype.processChunk=function(a){this.streamInfo.crc32=o(a.data,this.streamInfo.crc32||0),this.push(a)},u.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,u,s){var n=t("../utils"),o=t("./GenericWorker");function r(a){o.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}n.inherits(r,o),r.prototype.processChunk=function(a){if(a){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+a.data.length}o.prototype.processChunk.call(this,a)},u.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(t,u,s){var n=t("../utils"),o=t("./GenericWorker");function r(a){o.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(d){l.dataIsReady=!0,l.data=d,l.max=d&&d.length||0,l.type=n.getTypeOf(d),l.isPaused||l._tickAndRepeat()},function(d){l.error(d)})}n.inherits(r,o),r.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,l);break;case"uint8array":a=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":a=this.data.slice(this.index,l)}return this.index=l,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},u.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(t,u,s){function n(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,r){return this._listeners[o].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,r){if(this._listeners[o])for(var a=0;a<this._listeners[o].length;a++)this._listeners[o][a].call(this,r)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var r=this;return o.on("data",function(a){r.processChunk(a)}),o.on("end",function(){r.end()}),o.on("error",function(a){r.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,r){return this.extraStreamInfo[o]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},u.exports=n},{}],29:[function(t,u,s){var n=t("../utils"),o=t("./ConvertWorker"),r=t("./GenericWorker"),a=t("../base64"),l=t("../support"),d=t("../external"),m=null;if(l.nodestream)try{m=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function x(b,g){return new d.Promise(function(w,v){var _=[],z=b._internalType,A=b._outputType,R=b._mimeType;b.on("data",function(T,P){_.push(T),g&&g(P)}).on("error",function(T){_=[],v(T)}).on("end",function(){try{var T=function(P,M,I){switch(P){case"blob":return n.newBlob(n.transformTo("arraybuffer",M),I);case"base64":return a.encode(M);default:return n.transformTo(P,M)}}(A,function(P,M){var I,j=0,X=null,C=0;for(I=0;I<M.length;I++)C+=M[I].length;switch(P){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(X=new Uint8Array(C),I=0;I<M.length;I++)X.set(M[I],j),j+=M[I].length;return X;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+P+"'")}}(z,_),R);w(T)}catch(P){v(P)}_=[]}).resume()})}function f(b,g,w){var v=g;switch(g){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=g,this._mimeType=w,n.checkSupport(v),this._worker=b.pipe(new o(v)),b.lock()}catch(_){this._worker=new r("error"),this._worker.error(_)}}f.prototype={accumulate:function(b){return x(this,b)},on:function(b,g){var w=this;return b==="data"?this._worker.on(b,function(v){g.call(w,v.data,v.meta)}):this._worker.on(b,function(){n.delay(g,arguments,w)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},b)}},u.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,u,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var n=new ArrayBuffer(0);try{s.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(n),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!t("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(t,u,s){for(var n=t("./utils"),o=t("./support"),r=t("./nodejsUtils"),a=t("./stream/GenericWorker"),l=new Array(256),d=0;d<256;d++)l[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;l[254]=l[254]=1;function m(){a.call(this,"utf-8 decode"),this.leftOver=null}function x(){a.call(this,"utf-8 encode")}s.utf8encode=function(f){return o.nodebuffer?r.newBufferFrom(f,"utf-8"):function(b){var g,w,v,_,z,A=b.length,R=0;for(_=0;_<A;_++)(64512&(w=b.charCodeAt(_)))==55296&&_+1<A&&(64512&(v=b.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(v-56320),_++),R+=w<128?1:w<2048?2:w<65536?3:4;for(g=o.uint8array?new Uint8Array(R):new Array(R),_=z=0;z<R;_++)(64512&(w=b.charCodeAt(_)))==55296&&_+1<A&&(64512&(v=b.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(v-56320),_++),w<128?g[z++]=w:(w<2048?g[z++]=192|w>>>6:(w<65536?g[z++]=224|w>>>12:(g[z++]=240|w>>>18,g[z++]=128|w>>>12&63),g[z++]=128|w>>>6&63),g[z++]=128|63&w);return g}(f)},s.utf8decode=function(f){return o.nodebuffer?n.transformTo("nodebuffer",f).toString("utf-8"):function(b){var g,w,v,_,z=b.length,A=new Array(2*z);for(g=w=0;g<z;)if((v=b[g++])<128)A[w++]=v;else if(4<(_=l[v]))A[w++]=65533,g+=_-1;else{for(v&=_===2?31:_===3?15:7;1<_&&g<z;)v=v<<6|63&b[g++],_--;1<_?A[w++]=65533:v<65536?A[w++]=v:(v-=65536,A[w++]=55296|v>>10&1023,A[w++]=56320|1023&v)}return A.length!==w&&(A.subarray?A=A.subarray(0,w):A.length=w),n.applyFromCharCode(A)}(f=n.transformTo(o.uint8array?"uint8array":"array",f))},n.inherits(m,a),m.prototype.processChunk=function(f){var b=n.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=b;(b=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),b.set(g,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var w=function(_,z){var A;for((z=z||_.length)>_.length&&(z=_.length),A=z-1;0<=A&&(192&_[A])==128;)A--;return A<0||A===0?z:A+l[_[A]]>z?A:z}(b),v=b;w!==b.length&&(o.uint8array?(v=b.subarray(0,w),this.leftOver=b.subarray(w,b.length)):(v=b.slice(0,w),this.leftOver=b.slice(w,b.length))),this.push({data:s.utf8decode(v),meta:f.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,n.inherits(x,a),x.prototype.processChunk=function(f){this.push({data:s.utf8encode(f.data),meta:f.meta})},s.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,u,s){var n=t("./support"),o=t("./base64"),r=t("./nodejsUtils"),a=t("./external");function l(g){return g}function d(g,w){for(var v=0;v<g.length;++v)w[v]=255&g.charCodeAt(v);return w}t("setimmediate"),s.newBlob=function(g,w){s.checkSupport("blob");try{return new Blob([g],{type:w})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(g),v.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(g,w,v){var _=[],z=0,A=g.length;if(A<=v)return String.fromCharCode.apply(null,g);for(;z<A;)w==="array"||w==="nodebuffer"?_.push(String.fromCharCode.apply(null,g.slice(z,Math.min(z+v,A)))):_.push(String.fromCharCode.apply(null,g.subarray(z,Math.min(z+v,A)))),z+=v;return _.join("")},stringifyByChar:function(g){for(var w="",v=0;v<g.length;v++)w+=String.fromCharCode(g[v]);return w},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function x(g){var w=65536,v=s.getTypeOf(g),_=!0;if(v==="uint8array"?_=m.applyCanBeUsed.uint8array:v==="nodebuffer"&&(_=m.applyCanBeUsed.nodebuffer),_)for(;1<w;)try{return m.stringifyByChunk(g,v,w)}catch{w=Math.floor(w/2)}return m.stringifyByChar(g)}function f(g,w){for(var v=0;v<g.length;v++)w[v]=g[v];return w}s.applyFromCharCode=x;var b={};b.string={string:l,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return b.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,r.allocBuffer(g.length))}},b.array={string:x,array:l,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return r.newBufferFrom(g)}},b.arraybuffer={string:function(g){return x(new Uint8Array(g))},array:function(g){return f(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:l,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return r.newBufferFrom(new Uint8Array(g))}},b.uint8array={string:x,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:l,nodebuffer:function(g){return r.newBufferFrom(g)}},b.nodebuffer={string:x,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return b.nodebuffer.uint8array(g).buffer},uint8array:function(g){return f(g,new Uint8Array(g.length))},nodebuffer:l},s.transformTo=function(g,w){if(w=w||"",!g)return w;s.checkSupport(g);var v=s.getTypeOf(w);return b[v][g](w)},s.resolve=function(g){for(var w=g.split("/"),v=[],_=0;_<w.length;_++){var z=w[_];z==="."||z===""&&_!==0&&_!==w.length-1||(z===".."?v.pop():v.push(z))}return v.join("/")},s.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":n.nodebuffer&&r.isBuffer(g)?"nodebuffer":n.uint8array&&g instanceof Uint8Array?"uint8array":n.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(g){if(!n[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(g){var w,v,_="";for(v=0;v<(g||"").length;v++)_+="\\x"+((w=g.charCodeAt(v))<16?"0":"")+w.toString(16).toUpperCase();return _},s.delay=function(g,w,v){setImmediate(function(){g.apply(v||null,w||[])})},s.inherits=function(g,w){function v(){}v.prototype=w.prototype,g.prototype=new v},s.extend=function(){var g,w,v={};for(g=0;g<arguments.length;g++)for(w in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],w)&&v[w]===void 0&&(v[w]=arguments[g][w]);return v},s.prepareContent=function(g,w,v,_,z){return a.Promise.resolve(w).then(function(A){return n.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new a.Promise(function(R,T){var P=new FileReader;P.onload=function(M){R(M.target.result)},P.onerror=function(M){T(M.target.error)},P.readAsArrayBuffer(A)}):A}).then(function(A){var R=s.getTypeOf(A);return R?(R==="arraybuffer"?A=s.transformTo("uint8array",A):R==="string"&&(z?A=o.decode(A):v&&_!==!0&&(A=function(T){return d(T,n.uint8array?new Uint8Array(T.length):new Array(T.length))}(A))),A):a.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,u,s){var n=t("./reader/readerFor"),o=t("./utils"),r=t("./signature"),a=t("./zipEntry"),l=t("./support");function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(x)+", expected "+o.pretty(m)+")")}},isSignature:function(m,x){var f=this.reader.index;this.reader.setIndex(m);var b=this.reader.readString(4)===x;return this.reader.setIndex(f),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),x=l.uint8array?"uint8array":"array",f=o.transformTo(x,m);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,x,f,b=this.zip64EndOfCentralSize-44;0<b;)m=this.reader.readInt(2),x=this.reader.readInt(4),f=this.reader.readData(x),this.zip64ExtensibleData[m]={id:m,length:x,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,x;for(m=0;m<this.files.length;m++)x=this.files[m],this.reader.setIndex(x.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(m=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var x=m;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var b=x-f;if(0<b)this.isSignature(x,r.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(m){this.reader=n(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},u.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,u,s){var n=t("./reader/readerFor"),o=t("./utils"),r=t("./compressedObject"),a=t("./crc32"),l=t("./utf8"),d=t("./compressions"),m=t("./support");function x(f,b){this.options=f,this.loadOptions=b}x.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var b,g;if(f.skip(22),this.fileNameLength=f.readInt(2),g=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(w){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===w)return d[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,b,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var b=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(b),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var b,g,w,v=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<v;)b=f.readInt(2),g=f.readInt(2),w=f.readData(g),this.extraFields[b]={id:b,length:g,value:w};f.setIndex(v)},handleUTF8:function(){var f=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var g=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var v=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var b=n(f.value);return b.readInt(1)!==1||a(this.fileName)!==b.readInt(4)?null:l.utf8decode(b.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var b=n(f.value);return b.readInt(1)!==1||a(this.fileComment)!==b.readInt(4)?null:l.utf8decode(b.readData(f.length-5))}return null}},u.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,u,s){function n(b,g,w){this.name=b,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=g,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var o=t("./stream/StreamHelper"),r=t("./stream/DataWorker"),a=t("./utf8"),l=t("./compressedObject"),d=t("./stream/GenericWorker");n.prototype={internalStream:function(b){var g=null,w="string";try{if(!b)throw new Error("No output type specified.");var v=(w=b.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),g=this._decompressWorker();var _=!this._dataBinary;_&&!v&&(g=g.pipe(new a.Utf8EncodeWorker)),!_&&v&&(g=g.pipe(new a.Utf8DecodeWorker))}catch(z){(g=new d("error")).error(z)}return new o(g,w,"")},async:function(b,g){return this.internalStream(b).accumulate(g)},nodeStream:function(b,g){return this.internalStream(b||"nodebuffer").toNodejsStream(g)},_compressWorker:function(b,g){if(this._data instanceof l&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new a.Utf8EncodeWorker)),l.createWorkerFrom(w,b,g)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof d?this._data:new r(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<m.length;f++)n.prototype[m[f]]=x;u.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,u,s){(function(n){var o,r,a=n.MutationObserver||n.WebKitMutationObserver;if(a){var l=0,d=new a(b),m=n.document.createTextNode("");d.observe(m,{characterData:!0}),o=function(){m.data=l=++l%2}}else if(n.setImmediate||n.MessageChannel===void 0)o="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var g=n.document.createElement("script");g.onreadystatechange=function(){b(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},n.document.documentElement.appendChild(g)}:function(){setTimeout(b,0)};else{var x=new n.MessageChannel;x.port1.onmessage=b,o=function(){x.port2.postMessage(0)}}var f=[];function b(){var g,w;r=!0;for(var v=f.length;v;){for(w=f,f=[],g=-1;++g<v;)w[g]();v=f.length}r=!1}u.exports=function(g){f.push(g)!==1||r||o()}}).call(this,typeof It<"u"?It:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,u,s){var n=t("immediate");function o(){}var r={},a=["REJECTED"],l=["FULFILLED"],d=["PENDING"];function m(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==o&&g(this,v)}function x(v,_,z){this.promise=v,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}function f(v,_,z){n(function(){var A;try{A=_(z)}catch(R){return r.reject(v,R)}A===v?r.reject(v,new TypeError("Cannot resolve promise with itself")):r.resolve(v,A)})}function b(v){var _=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof _=="function")return function(){_.apply(v,arguments)}}function g(v,_){var z=!1;function A(P){z||(z=!0,r.reject(v,P))}function R(P){z||(z=!0,r.resolve(v,P))}var T=w(function(){_(R,A)});T.status==="error"&&A(T.value)}function w(v,_){var z={};try{z.value=v(_),z.status="success"}catch(A){z.status="error",z.value=A}return z}(u.exports=m).prototype.finally=function(v){if(typeof v!="function")return this;var _=this.constructor;return this.then(function(z){return _.resolve(v()).then(function(){return z})},function(z){return _.resolve(v()).then(function(){throw z})})},m.prototype.catch=function(v){return this.then(null,v)},m.prototype.then=function(v,_){if(typeof v!="function"&&this.state===l||typeof _!="function"&&this.state===a)return this;var z=new this.constructor(o);return this.state!==d?f(z,this.state===l?v:_,this.outcome):this.queue.push(new x(z,v,_)),z},x.prototype.callFulfilled=function(v){r.resolve(this.promise,v)},x.prototype.otherCallFulfilled=function(v){f(this.promise,this.onFulfilled,v)},x.prototype.callRejected=function(v){r.reject(this.promise,v)},x.prototype.otherCallRejected=function(v){f(this.promise,this.onRejected,v)},r.resolve=function(v,_){var z=w(b,_);if(z.status==="error")return r.reject(v,z.value);var A=z.value;if(A)g(v,A);else{v.state=l,v.outcome=_;for(var R=-1,T=v.queue.length;++R<T;)v.queue[R].callFulfilled(_)}return v},r.reject=function(v,_){v.state=a,v.outcome=_;for(var z=-1,A=v.queue.length;++z<A;)v.queue[z].callRejected(_);return v},m.resolve=function(v){return v instanceof this?v:r.resolve(new this(o),v)},m.reject=function(v){var _=new this(o);return r.reject(_,v)},m.all=function(v){var _=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=v.length,A=!1;if(!z)return this.resolve([]);for(var R=new Array(z),T=0,P=-1,M=new this(o);++P<z;)I(v[P],P);return M;function I(j,X){_.resolve(j).then(function(C){R[X]=C,++T!==z||A||(A=!0,r.resolve(M,R))},function(C){A||(A=!0,r.reject(M,C))})}},m.race=function(v){var _=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=v.length,A=!1;if(!z)return this.resolve([]);for(var R=-1,T=new this(o);++R<z;)P=v[R],_.resolve(P).then(function(M){A||(A=!0,r.resolve(T,M))},function(M){A||(A=!0,r.reject(T,M))});var P;return T}},{immediate:36}],38:[function(t,u,s){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),u.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,u,s){var n=t("./zlib/deflate"),o=t("./utils/common"),r=t("./utils/strings"),a=t("./zlib/messages"),l=t("./zlib/zstream"),d=Object.prototype.toString,m=0,x=-1,f=0,b=8;function g(v){if(!(this instanceof g))return new g(v);this.options=o.assign({level:x,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},v||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var z=n.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(z!==m)throw new Error(a[z]);if(_.header&&n.deflateSetHeader(this.strm,_.header),_.dictionary){var A;if(A=typeof _.dictionary=="string"?r.string2buf(_.dictionary):d.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(z=n.deflateSetDictionary(this.strm,A))!==m)throw new Error(a[z]);this._dict_set=!0}}function w(v,_){var z=new g(_);if(z.push(v,!0),z.err)throw z.msg||a[z.err];return z.result}g.prototype.push=function(v,_){var z,A,R=this.strm,T=this.options.chunkSize;if(this.ended)return!1;A=_===~~_?_:_===!0?4:0,typeof v=="string"?R.input=r.string2buf(v):d.call(v)==="[object ArrayBuffer]"?R.input=new Uint8Array(v):R.input=v,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(T),R.next_out=0,R.avail_out=T),(z=n.deflate(R,A))!==1&&z!==m)return this.onEnd(z),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(o.shrinkBuf(R.output,R.next_out))):this.onData(o.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&z!==1);return A===4?(z=n.deflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===m):A!==2||(this.onEnd(m),!(R.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=g,s.deflate=w,s.deflateRaw=function(v,_){return(_=_||{}).raw=!0,w(v,_)},s.gzip=function(v,_){return(_=_||{}).gzip=!0,w(v,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,u,s){var n=t("./zlib/inflate"),o=t("./utils/common"),r=t("./utils/strings"),a=t("./zlib/constants"),l=t("./zlib/messages"),d=t("./zlib/zstream"),m=t("./zlib/gzheader"),x=Object.prototype.toString;function f(g){if(!(this instanceof f))return new f(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||g&&g.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=n.inflateInit2(this.strm,w.windowBits);if(v!==a.Z_OK)throw new Error(l[v]);this.header=new m,n.inflateGetHeader(this.strm,this.header)}function b(g,w){var v=new f(w);if(v.push(g,!0),v.err)throw v.msg||l[v.err];return v.result}f.prototype.push=function(g,w){var v,_,z,A,R,T,P=this.strm,M=this.options.chunkSize,I=this.options.dictionary,j=!1;if(this.ended)return!1;_=w===~~w?w:w===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof g=="string"?P.input=r.binstring2buf(g):x.call(g)==="[object ArrayBuffer]"?P.input=new Uint8Array(g):P.input=g,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new o.Buf8(M),P.next_out=0,P.avail_out=M),(v=n.inflate(P,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&I&&(T=typeof I=="string"?r.string2buf(I):x.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,v=n.inflateSetDictionary(this.strm,T)),v===a.Z_BUF_ERROR&&j===!0&&(v=a.Z_OK,j=!1),v!==a.Z_STREAM_END&&v!==a.Z_OK)return this.onEnd(v),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&v!==a.Z_STREAM_END&&(P.avail_in!==0||_!==a.Z_FINISH&&_!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(z=r.utf8border(P.output,P.next_out),A=P.next_out-z,R=r.buf2string(P.output,z),P.next_out=A,P.avail_out=M-A,A&&o.arraySet(P.output,P.output,z,A,0),this.onData(R)):this.onData(o.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(j=!0)}while((0<P.avail_in||P.avail_out===0)&&v!==a.Z_STREAM_END);return v===a.Z_STREAM_END&&(_=a.Z_FINISH),_===a.Z_FINISH?(v=n.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===a.Z_OK):_!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(P.avail_out=0))},f.prototype.onData=function(g){this.chunks.push(g)},f.prototype.onEnd=function(g){g===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Inflate=f,s.inflate=b,s.inflateRaw=function(g,w){return(w=w||{}).raw=!0,b(g,w)},s.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,u,s){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(a){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var d=l.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)d.hasOwnProperty(m)&&(a[m]=d[m])}}return a},s.shrinkBuf=function(a,l){return a.length===l?a:a.subarray?a.subarray(0,l):(a.length=l,a)};var o={arraySet:function(a,l,d,m,x){if(l.subarray&&a.subarray)a.set(l.subarray(d,d+m),x);else for(var f=0;f<m;f++)a[x+f]=l[d+f]},flattenChunks:function(a){var l,d,m,x,f,b;for(l=m=0,d=a.length;l<d;l++)m+=a[l].length;for(b=new Uint8Array(m),l=x=0,d=a.length;l<d;l++)f=a[l],b.set(f,x),x+=f.length;return b}},r={arraySet:function(a,l,d,m,x){for(var f=0;f<m;f++)a[x+f]=l[d+f]},flattenChunks:function(a){return[].concat.apply([],a)}};s.setTyped=function(a){a?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,r))},s.setTyped(n)},{}],42:[function(t,u,s){var n=t("./common"),o=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var a=new n.Buf8(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function d(m,x){if(x<65537&&(m.subarray&&r||!m.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(m,x));for(var f="",b=0;b<x;b++)f+=String.fromCharCode(m[b]);return f}a[254]=a[254]=1,s.string2buf=function(m){var x,f,b,g,w,v=m.length,_=0;for(g=0;g<v;g++)(64512&(f=m.charCodeAt(g)))==55296&&g+1<v&&(64512&(b=m.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(b-56320),g++),_+=f<128?1:f<2048?2:f<65536?3:4;for(x=new n.Buf8(_),g=w=0;w<_;g++)(64512&(f=m.charCodeAt(g)))==55296&&g+1<v&&(64512&(b=m.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(b-56320),g++),f<128?x[w++]=f:(f<2048?x[w++]=192|f>>>6:(f<65536?x[w++]=224|f>>>12:(x[w++]=240|f>>>18,x[w++]=128|f>>>12&63),x[w++]=128|f>>>6&63),x[w++]=128|63&f);return x},s.buf2binstring=function(m){return d(m,m.length)},s.binstring2buf=function(m){for(var x=new n.Buf8(m.length),f=0,b=x.length;f<b;f++)x[f]=m.charCodeAt(f);return x},s.buf2string=function(m,x){var f,b,g,w,v=x||m.length,_=new Array(2*v);for(f=b=0;f<v;)if((g=m[f++])<128)_[b++]=g;else if(4<(w=a[g]))_[b++]=65533,f+=w-1;else{for(g&=w===2?31:w===3?15:7;1<w&&f<v;)g=g<<6|63&m[f++],w--;1<w?_[b++]=65533:g<65536?_[b++]=g:(g-=65536,_[b++]=55296|g>>10&1023,_[b++]=56320|1023&g)}return d(_,b)},s.utf8border=function(m,x){var f;for((x=x||m.length)>m.length&&(x=m.length),f=x-1;0<=f&&(192&m[f])==128;)f--;return f<0||f===0?x:f+a[m[f]]>x?f:x}},{"./common":41}],43:[function(t,u,s){u.exports=function(n,o,r,a){for(var l=65535&n|0,d=n>>>16&65535|0,m=0;r!==0;){for(r-=m=2e3<r?2e3:r;d=d+(l=l+o[a++]|0)|0,--m;);l%=65521,d%=65521}return l|d<<16|0}},{}],44:[function(t,u,s){u.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,u,s){var n=function(){for(var o,r=[],a=0;a<256;a++){o=a;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;r[a]=o}return r}();u.exports=function(o,r,a,l){var d=n,m=l+a;o^=-1;for(var x=l;x<m;x++)o=o>>>8^d[255&(o^r[x])];return-1^o}},{}],46:[function(t,u,s){var n,o=t("../utils/common"),r=t("./trees"),a=t("./adler32"),l=t("./crc32"),d=t("./messages"),m=0,x=4,f=0,b=-2,g=-1,w=4,v=2,_=8,z=9,A=286,R=30,T=19,P=2*A+1,M=15,I=3,j=258,X=j+I+1,C=42,L=113,c=1,F=2,J=3,H=4;function re(i,B){return i.msg=d[B],B}function Z(i){return(i<<1)-(4<i?9:0)}function ie(i){for(var B=i.length;0<=--B;)i[B]=0}function U(i){var B=i.state,O=B.pending;O>i.avail_out&&(O=i.avail_out),O!==0&&(o.arraySet(i.output,B.pending_buf,B.pending_out,O,i.next_out),i.next_out+=O,B.pending_out+=O,i.total_out+=O,i.avail_out-=O,B.pending-=O,B.pending===0&&(B.pending_out=0))}function D(i,B){r._tr_flush_block(i,0<=i.block_start?i.block_start:-1,i.strstart-i.block_start,B),i.block_start=i.strstart,U(i.strm)}function ne(i,B){i.pending_buf[i.pending++]=B}function Q(i,B){i.pending_buf[i.pending++]=B>>>8&255,i.pending_buf[i.pending++]=255&B}function q(i,B){var O,y,h=i.max_chain_length,S=i.strstart,$=i.prev_length,N=i.nice_match,E=i.strstart>i.w_size-X?i.strstart-(i.w_size-X):0,W=i.window,Y=i.w_mask,V=i.prev,te=i.strstart+j,ve=W[S+$-1],ce=W[S+$];i.prev_length>=i.good_match&&(h>>=2),N>i.lookahead&&(N=i.lookahead);do if(W[(O=B)+$]===ce&&W[O+$-1]===ve&&W[O]===W[S]&&W[++O]===W[S+1]){S+=2,O++;do;while(W[++S]===W[++O]&&W[++S]===W[++O]&&W[++S]===W[++O]&&W[++S]===W[++O]&&W[++S]===W[++O]&&W[++S]===W[++O]&&W[++S]===W[++O]&&W[++S]===W[++O]&&S<te);if(y=j-(te-S),S=te-j,$<y){if(i.match_start=B,N<=($=y))break;ve=W[S+$-1],ce=W[S+$]}}while((B=V[B&Y])>E&&--h!=0);return $<=i.lookahead?$:i.lookahead}function oe(i){var B,O,y,h,S,$,N,E,W,Y,V=i.w_size;do{if(h=i.window_size-i.lookahead-i.strstart,i.strstart>=V+(V-X)){for(o.arraySet(i.window,i.window,V,V,0),i.match_start-=V,i.strstart-=V,i.block_start-=V,B=O=i.hash_size;y=i.head[--B],i.head[B]=V<=y?y-V:0,--O;);for(B=O=V;y=i.prev[--B],i.prev[B]=V<=y?y-V:0,--O;);h+=V}if(i.strm.avail_in===0)break;if($=i.strm,N=i.window,E=i.strstart+i.lookahead,W=h,Y=void 0,Y=$.avail_in,W<Y&&(Y=W),O=Y===0?0:($.avail_in-=Y,o.arraySet(N,$.input,$.next_in,Y,E),$.state.wrap===1?$.adler=a($.adler,N,Y,E):$.state.wrap===2&&($.adler=l($.adler,N,Y,E)),$.next_in+=Y,$.total_in+=Y,Y),i.lookahead+=O,i.lookahead+i.insert>=I)for(S=i.strstart-i.insert,i.ins_h=i.window[S],i.ins_h=(i.ins_h<<i.hash_shift^i.window[S+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[S+I-1])&i.hash_mask,i.prev[S&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=S,S++,i.insert--,!(i.lookahead+i.insert<I)););}while(i.lookahead<X&&i.strm.avail_in!==0)}function Ce(i,B){for(var O,y;;){if(i.lookahead<X){if(oe(i),i.lookahead<X&&B===m)return c;if(i.lookahead===0)break}if(O=0,i.lookahead>=I&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+I-1])&i.hash_mask,O=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),O!==0&&i.strstart-O<=i.w_size-X&&(i.match_length=q(i,O)),i.match_length>=I)if(y=r._tr_tally(i,i.strstart-i.match_start,i.match_length-I),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=I){for(i.match_length--;i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+I-1])&i.hash_mask,O=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart,--i.match_length!=0;);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else y=r._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(y&&(D(i,!1),i.strm.avail_out===0))return c}return i.insert=i.strstart<I-1?i.strstart:I-1,B===x?(D(i,!0),i.strm.avail_out===0?J:H):i.last_lit&&(D(i,!1),i.strm.avail_out===0)?c:F}function ae(i,B){for(var O,y,h;;){if(i.lookahead<X){if(oe(i),i.lookahead<X&&B===m)return c;if(i.lookahead===0)break}if(O=0,i.lookahead>=I&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+I-1])&i.hash_mask,O=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=I-1,O!==0&&i.prev_length<i.max_lazy_match&&i.strstart-O<=i.w_size-X&&(i.match_length=q(i,O),i.match_length<=5&&(i.strategy===1||i.match_length===I&&4096<i.strstart-i.match_start)&&(i.match_length=I-1)),i.prev_length>=I&&i.match_length<=i.prev_length){for(h=i.strstart+i.lookahead-I,y=r._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-I),i.lookahead-=i.prev_length-1,i.prev_length-=2;++i.strstart<=h&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+I-1])&i.hash_mask,O=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),--i.prev_length!=0;);if(i.match_available=0,i.match_length=I-1,i.strstart++,y&&(D(i,!1),i.strm.avail_out===0))return c}else if(i.match_available){if((y=r._tr_tally(i,0,i.window[i.strstart-1]))&&D(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return c}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(y=r._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<I-1?i.strstart:I-1,B===x?(D(i,!0),i.strm.avail_out===0?J:H):i.last_lit&&(D(i,!1),i.strm.avail_out===0)?c:F}function de(i,B,O,y,h){this.good_length=i,this.max_lazy=B,this.nice_length=O,this.max_chain=y,this.func=h}function _e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*P),this.dyn_dtree=new o.Buf16(2*(2*R+1)),this.bl_tree=new o.Buf16(2*(2*T+1)),ie(this.dyn_ltree),ie(this.dyn_dtree),ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(M+1),this.heap=new o.Buf16(2*A+1),ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*A+1),ie(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ye(i){var B;return i&&i.state?(i.total_in=i.total_out=0,i.data_type=v,(B=i.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?C:L,i.adler=B.wrap===2?0:1,B.last_flush=m,r._tr_init(B),f):re(i,b)}function ze(i){var B=ye(i);return B===f&&function(O){O.window_size=2*O.w_size,ie(O.head),O.max_lazy_match=n[O.level].max_lazy,O.good_match=n[O.level].good_length,O.nice_match=n[O.level].nice_length,O.max_chain_length=n[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=I-1,O.match_available=0,O.ins_h=0}(i.state),B}function K(i,B,O,y,h,S){if(!i)return b;var $=1;if(B===g&&(B=6),y<0?($=0,y=-y):15<y&&($=2,y-=16),h<1||z<h||O!==_||y<8||15<y||B<0||9<B||S<0||w<S)return re(i,b);y===8&&(y=9);var N=new _e;return(i.state=N).strm=i,N.wrap=$,N.gzhead=null,N.w_bits=y,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=h+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+I-1)/I),N.window=new o.Buf8(2*N.w_size),N.head=new o.Buf16(N.hash_size),N.prev=new o.Buf16(N.w_size),N.lit_bufsize=1<<h+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new o.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=B,N.strategy=S,N.method=O,ze(i)}n=[new de(0,0,0,0,function(i,B){var O=65535;for(O>i.pending_buf_size-5&&(O=i.pending_buf_size-5);;){if(i.lookahead<=1){if(oe(i),i.lookahead===0&&B===m)return c;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var y=i.block_start+O;if((i.strstart===0||i.strstart>=y)&&(i.lookahead=i.strstart-y,i.strstart=y,D(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-X&&(D(i,!1),i.strm.avail_out===0))return c}return i.insert=0,B===x?(D(i,!0),i.strm.avail_out===0?J:H):(i.strstart>i.block_start&&(D(i,!1),i.strm.avail_out),c)}),new de(4,4,8,4,Ce),new de(4,5,16,8,Ce),new de(4,6,32,32,Ce),new de(4,4,16,16,ae),new de(8,16,32,32,ae),new de(8,16,128,128,ae),new de(8,32,128,256,ae),new de(32,128,258,1024,ae),new de(32,258,258,4096,ae)],s.deflateInit=function(i,B){return K(i,B,_,15,8,0)},s.deflateInit2=K,s.deflateReset=ze,s.deflateResetKeep=ye,s.deflateSetHeader=function(i,B){return i&&i.state?i.state.wrap!==2?b:(i.state.gzhead=B,f):b},s.deflate=function(i,B){var O,y,h,S;if(!i||!i.state||5<B||B<0)return i?re(i,b):b;if(y=i.state,!i.output||!i.input&&i.avail_in!==0||y.status===666&&B!==x)return re(i,i.avail_out===0?-5:b);if(y.strm=i,O=y.last_flush,y.last_flush=B,y.status===C)if(y.wrap===2)i.adler=0,ne(y,31),ne(y,139),ne(y,8),y.gzhead?(ne(y,(y.gzhead.text?1:0)+(y.gzhead.hcrc?2:0)+(y.gzhead.extra?4:0)+(y.gzhead.name?8:0)+(y.gzhead.comment?16:0)),ne(y,255&y.gzhead.time),ne(y,y.gzhead.time>>8&255),ne(y,y.gzhead.time>>16&255),ne(y,y.gzhead.time>>24&255),ne(y,y.level===9?2:2<=y.strategy||y.level<2?4:0),ne(y,255&y.gzhead.os),y.gzhead.extra&&y.gzhead.extra.length&&(ne(y,255&y.gzhead.extra.length),ne(y,y.gzhead.extra.length>>8&255)),y.gzhead.hcrc&&(i.adler=l(i.adler,y.pending_buf,y.pending,0)),y.gzindex=0,y.status=69):(ne(y,0),ne(y,0),ne(y,0),ne(y,0),ne(y,0),ne(y,y.level===9?2:2<=y.strategy||y.level<2?4:0),ne(y,3),y.status=L);else{var $=_+(y.w_bits-8<<4)<<8;$|=(2<=y.strategy||y.level<2?0:y.level<6?1:y.level===6?2:3)<<6,y.strstart!==0&&($|=32),$+=31-$%31,y.status=L,Q(y,$),y.strstart!==0&&(Q(y,i.adler>>>16),Q(y,65535&i.adler)),i.adler=1}if(y.status===69)if(y.gzhead.extra){for(h=y.pending;y.gzindex<(65535&y.gzhead.extra.length)&&(y.pending!==y.pending_buf_size||(y.gzhead.hcrc&&y.pending>h&&(i.adler=l(i.adler,y.pending_buf,y.pending-h,h)),U(i),h=y.pending,y.pending!==y.pending_buf_size));)ne(y,255&y.gzhead.extra[y.gzindex]),y.gzindex++;y.gzhead.hcrc&&y.pending>h&&(i.adler=l(i.adler,y.pending_buf,y.pending-h,h)),y.gzindex===y.gzhead.extra.length&&(y.gzindex=0,y.status=73)}else y.status=73;if(y.status===73)if(y.gzhead.name){h=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>h&&(i.adler=l(i.adler,y.pending_buf,y.pending-h,h)),U(i),h=y.pending,y.pending===y.pending_buf_size)){S=1;break}S=y.gzindex<y.gzhead.name.length?255&y.gzhead.name.charCodeAt(y.gzindex++):0,ne(y,S)}while(S!==0);y.gzhead.hcrc&&y.pending>h&&(i.adler=l(i.adler,y.pending_buf,y.pending-h,h)),S===0&&(y.gzindex=0,y.status=91)}else y.status=91;if(y.status===91)if(y.gzhead.comment){h=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>h&&(i.adler=l(i.adler,y.pending_buf,y.pending-h,h)),U(i),h=y.pending,y.pending===y.pending_buf_size)){S=1;break}S=y.gzindex<y.gzhead.comment.length?255&y.gzhead.comment.charCodeAt(y.gzindex++):0,ne(y,S)}while(S!==0);y.gzhead.hcrc&&y.pending>h&&(i.adler=l(i.adler,y.pending_buf,y.pending-h,h)),S===0&&(y.status=103)}else y.status=103;if(y.status===103&&(y.gzhead.hcrc?(y.pending+2>y.pending_buf_size&&U(i),y.pending+2<=y.pending_buf_size&&(ne(y,255&i.adler),ne(y,i.adler>>8&255),i.adler=0,y.status=L)):y.status=L),y.pending!==0){if(U(i),i.avail_out===0)return y.last_flush=-1,f}else if(i.avail_in===0&&Z(B)<=Z(O)&&B!==x)return re(i,-5);if(y.status===666&&i.avail_in!==0)return re(i,-5);if(i.avail_in!==0||y.lookahead!==0||B!==m&&y.status!==666){var N=y.strategy===2?function(E,W){for(var Y;;){if(E.lookahead===0&&(oe(E),E.lookahead===0)){if(W===m)return c;break}if(E.match_length=0,Y=r._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++,Y&&(D(E,!1),E.strm.avail_out===0))return c}return E.insert=0,W===x?(D(E,!0),E.strm.avail_out===0?J:H):E.last_lit&&(D(E,!1),E.strm.avail_out===0)?c:F}(y,B):y.strategy===3?function(E,W){for(var Y,V,te,ve,ce=E.window;;){if(E.lookahead<=j){if(oe(E),E.lookahead<=j&&W===m)return c;if(E.lookahead===0)break}if(E.match_length=0,E.lookahead>=I&&0<E.strstart&&(V=ce[te=E.strstart-1])===ce[++te]&&V===ce[++te]&&V===ce[++te]){ve=E.strstart+j;do;while(V===ce[++te]&&V===ce[++te]&&V===ce[++te]&&V===ce[++te]&&V===ce[++te]&&V===ce[++te]&&V===ce[++te]&&V===ce[++te]&&te<ve);E.match_length=j-(ve-te),E.match_length>E.lookahead&&(E.match_length=E.lookahead)}if(E.match_length>=I?(Y=r._tr_tally(E,1,E.match_length-I),E.lookahead-=E.match_length,E.strstart+=E.match_length,E.match_length=0):(Y=r._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++),Y&&(D(E,!1),E.strm.avail_out===0))return c}return E.insert=0,W===x?(D(E,!0),E.strm.avail_out===0?J:H):E.last_lit&&(D(E,!1),E.strm.avail_out===0)?c:F}(y,B):n[y.level].func(y,B);if(N!==J&&N!==H||(y.status=666),N===c||N===J)return i.avail_out===0&&(y.last_flush=-1),f;if(N===F&&(B===1?r._tr_align(y):B!==5&&(r._tr_stored_block(y,0,0,!1),B===3&&(ie(y.head),y.lookahead===0&&(y.strstart=0,y.block_start=0,y.insert=0))),U(i),i.avail_out===0))return y.last_flush=-1,f}return B!==x?f:y.wrap<=0?1:(y.wrap===2?(ne(y,255&i.adler),ne(y,i.adler>>8&255),ne(y,i.adler>>16&255),ne(y,i.adler>>24&255),ne(y,255&i.total_in),ne(y,i.total_in>>8&255),ne(y,i.total_in>>16&255),ne(y,i.total_in>>24&255)):(Q(y,i.adler>>>16),Q(y,65535&i.adler)),U(i),0<y.wrap&&(y.wrap=-y.wrap),y.pending!==0?f:1)},s.deflateEnd=function(i){var B;return i&&i.state?(B=i.state.status)!==C&&B!==69&&B!==73&&B!==91&&B!==103&&B!==L&&B!==666?re(i,b):(i.state=null,B===L?re(i,-3):f):b},s.deflateSetDictionary=function(i,B){var O,y,h,S,$,N,E,W,Y=B.length;if(!i||!i.state||(S=(O=i.state).wrap)===2||S===1&&O.status!==C||O.lookahead)return b;for(S===1&&(i.adler=a(i.adler,B,Y,0)),O.wrap=0,Y>=O.w_size&&(S===0&&(ie(O.head),O.strstart=0,O.block_start=0,O.insert=0),W=new o.Buf8(O.w_size),o.arraySet(W,B,Y-O.w_size,O.w_size,0),B=W,Y=O.w_size),$=i.avail_in,N=i.next_in,E=i.input,i.avail_in=Y,i.next_in=0,i.input=B,oe(O);O.lookahead>=I;){for(y=O.strstart,h=O.lookahead-(I-1);O.ins_h=(O.ins_h<<O.hash_shift^O.window[y+I-1])&O.hash_mask,O.prev[y&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=y,y++,--h;);O.strstart=y,O.lookahead=I-1,oe(O)}return O.strstart+=O.lookahead,O.block_start=O.strstart,O.insert=O.lookahead,O.lookahead=0,O.match_length=O.prev_length=I-1,O.match_available=0,i.next_in=N,i.input=E,i.avail_in=$,O.wrap=S,f},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,u,s){u.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,u,s){u.exports=function(n,o){var r,a,l,d,m,x,f,b,g,w,v,_,z,A,R,T,P,M,I,j,X,C,L,c,F;r=n.state,a=n.next_in,c=n.input,l=a+(n.avail_in-5),d=n.next_out,F=n.output,m=d-(o-n.avail_out),x=d+(n.avail_out-257),f=r.dmax,b=r.wsize,g=r.whave,w=r.wnext,v=r.window,_=r.hold,z=r.bits,A=r.lencode,R=r.distcode,T=(1<<r.lenbits)-1,P=(1<<r.distbits)-1;e:do{z<15&&(_+=c[a++]<<z,z+=8,_+=c[a++]<<z,z+=8),M=A[_&T];t:for(;;){if(_>>>=I=M>>>24,z-=I,(I=M>>>16&255)===0)F[d++]=65535&M;else{if(!(16&I)){if(!(64&I)){M=A[(65535&M)+(_&(1<<I)-1)];continue t}if(32&I){r.mode=12;break e}n.msg="invalid literal/length code",r.mode=30;break e}j=65535&M,(I&=15)&&(z<I&&(_+=c[a++]<<z,z+=8),j+=_&(1<<I)-1,_>>>=I,z-=I),z<15&&(_+=c[a++]<<z,z+=8,_+=c[a++]<<z,z+=8),M=R[_&P];r:for(;;){if(_>>>=I=M>>>24,z-=I,!(16&(I=M>>>16&255))){if(!(64&I)){M=R[(65535&M)+(_&(1<<I)-1)];continue r}n.msg="invalid distance code",r.mode=30;break e}if(X=65535&M,z<(I&=15)&&(_+=c[a++]<<z,(z+=8)<I&&(_+=c[a++]<<z,z+=8)),f<(X+=_&(1<<I)-1)){n.msg="invalid distance too far back",r.mode=30;break e}if(_>>>=I,z-=I,(I=d-m)<X){if(g<(I=X-I)&&r.sane){n.msg="invalid distance too far back",r.mode=30;break e}if(L=v,(C=0)===w){if(C+=b-I,I<j){for(j-=I;F[d++]=v[C++],--I;);C=d-X,L=F}}else if(w<I){if(C+=b+w-I,(I-=w)<j){for(j-=I;F[d++]=v[C++],--I;);if(C=0,w<j){for(j-=I=w;F[d++]=v[C++],--I;);C=d-X,L=F}}}else if(C+=w-I,I<j){for(j-=I;F[d++]=v[C++],--I;);C=d-X,L=F}for(;2<j;)F[d++]=L[C++],F[d++]=L[C++],F[d++]=L[C++],j-=3;j&&(F[d++]=L[C++],1<j&&(F[d++]=L[C++]))}else{for(C=d-X;F[d++]=F[C++],F[d++]=F[C++],F[d++]=F[C++],2<(j-=3););j&&(F[d++]=F[C++],1<j&&(F[d++]=F[C++]))}break}}break}}while(a<l&&d<x);a-=j=z>>3,_&=(1<<(z-=j<<3))-1,n.next_in=a,n.next_out=d,n.avail_in=a<l?l-a+5:5-(a-l),n.avail_out=d<x?x-d+257:257-(d-x),r.hold=_,r.bits=z}},{}],49:[function(t,u,s){var n=t("../utils/common"),o=t("./adler32"),r=t("./crc32"),a=t("./inffast"),l=t("./inftrees"),d=1,m=2,x=0,f=-2,b=1,g=852,w=592;function v(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z(C){var L;return C&&C.state?(L=C.state,C.total_in=C.total_out=L.total=0,C.msg="",L.wrap&&(C.adler=1&L.wrap),L.mode=b,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new n.Buf32(g),L.distcode=L.distdyn=new n.Buf32(w),L.sane=1,L.back=-1,x):f}function A(C){var L;return C&&C.state?((L=C.state).wsize=0,L.whave=0,L.wnext=0,z(C)):f}function R(C,L){var c,F;return C&&C.state?(F=C.state,L<0?(c=0,L=-L):(c=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?f:(F.window!==null&&F.wbits!==L&&(F.window=null),F.wrap=c,F.wbits=L,A(C))):f}function T(C,L){var c,F;return C?(F=new _,(C.state=F).window=null,(c=R(C,L))!==x&&(C.state=null),c):f}var P,M,I=!0;function j(C){if(I){var L;for(P=new n.Buf32(512),M=new n.Buf32(32),L=0;L<144;)C.lens[L++]=8;for(;L<256;)C.lens[L++]=9;for(;L<280;)C.lens[L++]=7;for(;L<288;)C.lens[L++]=8;for(l(d,C.lens,0,288,P,0,C.work,{bits:9}),L=0;L<32;)C.lens[L++]=5;l(m,C.lens,0,32,M,0,C.work,{bits:5}),I=!1}C.lencode=P,C.lenbits=9,C.distcode=M,C.distbits=5}function X(C,L,c,F){var J,H=C.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new n.Buf8(H.wsize)),F>=H.wsize?(n.arraySet(H.window,L,c-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(F<(J=H.wsize-H.wnext)&&(J=F),n.arraySet(H.window,L,c-F,J,H.wnext),(F-=J)?(n.arraySet(H.window,L,c-F,F,0),H.wnext=F,H.whave=H.wsize):(H.wnext+=J,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=J))),0}s.inflateReset=A,s.inflateReset2=R,s.inflateResetKeep=z,s.inflateInit=function(C){return T(C,15)},s.inflateInit2=T,s.inflate=function(C,L){var c,F,J,H,re,Z,ie,U,D,ne,Q,q,oe,Ce,ae,de,_e,ye,ze,K,i,B,O,y,h=0,S=new n.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return f;(c=C.state).mode===12&&(c.mode=13),re=C.next_out,J=C.output,ie=C.avail_out,H=C.next_in,F=C.input,Z=C.avail_in,U=c.hold,D=c.bits,ne=Z,Q=ie,B=x;e:for(;;)switch(c.mode){case b:if(c.wrap===0){c.mode=13;break}for(;D<16;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}if(2&c.wrap&&U===35615){S[c.check=0]=255&U,S[1]=U>>>8&255,c.check=r(c.check,S,2,0),D=U=0,c.mode=2;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&U)<<8)+(U>>8))%31){C.msg="incorrect header check",c.mode=30;break}if((15&U)!=8){C.msg="unknown compression method",c.mode=30;break}if(D-=4,i=8+(15&(U>>>=4)),c.wbits===0)c.wbits=i;else if(i>c.wbits){C.msg="invalid window size",c.mode=30;break}c.dmax=1<<i,C.adler=c.check=1,c.mode=512&U?10:12,D=U=0;break;case 2:for(;D<16;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}if(c.flags=U,(255&c.flags)!=8){C.msg="unknown compression method",c.mode=30;break}if(57344&c.flags){C.msg="unknown header flags set",c.mode=30;break}c.head&&(c.head.text=U>>8&1),512&c.flags&&(S[0]=255&U,S[1]=U>>>8&255,c.check=r(c.check,S,2,0)),D=U=0,c.mode=3;case 3:for(;D<32;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}c.head&&(c.head.time=U),512&c.flags&&(S[0]=255&U,S[1]=U>>>8&255,S[2]=U>>>16&255,S[3]=U>>>24&255,c.check=r(c.check,S,4,0)),D=U=0,c.mode=4;case 4:for(;D<16;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}c.head&&(c.head.xflags=255&U,c.head.os=U>>8),512&c.flags&&(S[0]=255&U,S[1]=U>>>8&255,c.check=r(c.check,S,2,0)),D=U=0,c.mode=5;case 5:if(1024&c.flags){for(;D<16;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}c.length=U,c.head&&(c.head.extra_len=U),512&c.flags&&(S[0]=255&U,S[1]=U>>>8&255,c.check=r(c.check,S,2,0)),D=U=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(1024&c.flags&&(Z<(q=c.length)&&(q=Z),q&&(c.head&&(i=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),n.arraySet(c.head.extra,F,H,q,i)),512&c.flags&&(c.check=r(c.check,F,q,H)),Z-=q,H+=q,c.length-=q),c.length))break e;c.length=0,c.mode=7;case 7:if(2048&c.flags){if(Z===0)break e;for(q=0;i=F[H+q++],c.head&&i&&c.length<65536&&(c.head.name+=String.fromCharCode(i)),i&&q<Z;);if(512&c.flags&&(c.check=r(c.check,F,q,H)),Z-=q,H+=q,i)break e}else c.head&&(c.head.name=null);c.length=0,c.mode=8;case 8:if(4096&c.flags){if(Z===0)break e;for(q=0;i=F[H+q++],c.head&&i&&c.length<65536&&(c.head.comment+=String.fromCharCode(i)),i&&q<Z;);if(512&c.flags&&(c.check=r(c.check,F,q,H)),Z-=q,H+=q,i)break e}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(512&c.flags){for(;D<16;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}if(U!==(65535&c.check)){C.msg="header crc mismatch",c.mode=30;break}D=U=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),C.adler=c.check=0,c.mode=12;break;case 10:for(;D<32;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}C.adler=c.check=v(U),D=U=0,c.mode=11;case 11:if(c.havedict===0)return C.next_out=re,C.avail_out=ie,C.next_in=H,C.avail_in=Z,c.hold=U,c.bits=D,2;C.adler=c.check=1,c.mode=12;case 12:if(L===5||L===6)break e;case 13:if(c.last){U>>>=7&D,D-=7&D,c.mode=27;break}for(;D<3;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}switch(c.last=1&U,D-=1,3&(U>>>=1)){case 0:c.mode=14;break;case 1:if(j(c),c.mode=20,L!==6)break;U>>>=2,D-=2;break e;case 2:c.mode=17;break;case 3:C.msg="invalid block type",c.mode=30}U>>>=2,D-=2;break;case 14:for(U>>>=7&D,D-=7&D;D<32;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}if((65535&U)!=(U>>>16^65535)){C.msg="invalid stored block lengths",c.mode=30;break}if(c.length=65535&U,D=U=0,c.mode=15,L===6)break e;case 15:c.mode=16;case 16:if(q=c.length){if(Z<q&&(q=Z),ie<q&&(q=ie),q===0)break e;n.arraySet(J,F,H,q,re),Z-=q,H+=q,ie-=q,re+=q,c.length-=q;break}c.mode=12;break;case 17:for(;D<14;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}if(c.nlen=257+(31&U),U>>>=5,D-=5,c.ndist=1+(31&U),U>>>=5,D-=5,c.ncode=4+(15&U),U>>>=4,D-=4,286<c.nlen||30<c.ndist){C.msg="too many length or distance symbols",c.mode=30;break}c.have=0,c.mode=18;case 18:for(;c.have<c.ncode;){for(;D<3;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}c.lens[$[c.have++]]=7&U,U>>>=3,D-=3}for(;c.have<19;)c.lens[$[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,O={bits:c.lenbits},B=l(0,c.lens,0,19,c.lencode,0,c.work,O),c.lenbits=O.bits,B){C.msg="invalid code lengths set",c.mode=30;break}c.have=0,c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;de=(h=c.lencode[U&(1<<c.lenbits)-1])>>>16&255,_e=65535&h,!((ae=h>>>24)<=D);){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}if(_e<16)U>>>=ae,D-=ae,c.lens[c.have++]=_e;else{if(_e===16){for(y=ae+2;D<y;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}if(U>>>=ae,D-=ae,c.have===0){C.msg="invalid bit length repeat",c.mode=30;break}i=c.lens[c.have-1],q=3+(3&U),U>>>=2,D-=2}else if(_e===17){for(y=ae+3;D<y;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}D-=ae,i=0,q=3+(7&(U>>>=ae)),U>>>=3,D-=3}else{for(y=ae+7;D<y;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}D-=ae,i=0,q=11+(127&(U>>>=ae)),U>>>=7,D-=7}if(c.have+q>c.nlen+c.ndist){C.msg="invalid bit length repeat",c.mode=30;break}for(;q--;)c.lens[c.have++]=i}}if(c.mode===30)break;if(c.lens[256]===0){C.msg="invalid code -- missing end-of-block",c.mode=30;break}if(c.lenbits=9,O={bits:c.lenbits},B=l(d,c.lens,0,c.nlen,c.lencode,0,c.work,O),c.lenbits=O.bits,B){C.msg="invalid literal/lengths set",c.mode=30;break}if(c.distbits=6,c.distcode=c.distdyn,O={bits:c.distbits},B=l(m,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,O),c.distbits=O.bits,B){C.msg="invalid distances set",c.mode=30;break}if(c.mode=20,L===6)break e;case 20:c.mode=21;case 21:if(6<=Z&&258<=ie){C.next_out=re,C.avail_out=ie,C.next_in=H,C.avail_in=Z,c.hold=U,c.bits=D,a(C,Q),re=C.next_out,J=C.output,ie=C.avail_out,H=C.next_in,F=C.input,Z=C.avail_in,U=c.hold,D=c.bits,c.mode===12&&(c.back=-1);break}for(c.back=0;de=(h=c.lencode[U&(1<<c.lenbits)-1])>>>16&255,_e=65535&h,!((ae=h>>>24)<=D);){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}if(de&&!(240&de)){for(ye=ae,ze=de,K=_e;de=(h=c.lencode[K+((U&(1<<ye+ze)-1)>>ye)])>>>16&255,_e=65535&h,!(ye+(ae=h>>>24)<=D);){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}U>>>=ye,D-=ye,c.back+=ye}if(U>>>=ae,D-=ae,c.back+=ae,c.length=_e,de===0){c.mode=26;break}if(32&de){c.back=-1,c.mode=12;break}if(64&de){C.msg="invalid literal/length code",c.mode=30;break}c.extra=15&de,c.mode=22;case 22:if(c.extra){for(y=c.extra;D<y;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}c.length+=U&(1<<c.extra)-1,U>>>=c.extra,D-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=23;case 23:for(;de=(h=c.distcode[U&(1<<c.distbits)-1])>>>16&255,_e=65535&h,!((ae=h>>>24)<=D);){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}if(!(240&de)){for(ye=ae,ze=de,K=_e;de=(h=c.distcode[K+((U&(1<<ye+ze)-1)>>ye)])>>>16&255,_e=65535&h,!(ye+(ae=h>>>24)<=D);){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}U>>>=ye,D-=ye,c.back+=ye}if(U>>>=ae,D-=ae,c.back+=ae,64&de){C.msg="invalid distance code",c.mode=30;break}c.offset=_e,c.extra=15&de,c.mode=24;case 24:if(c.extra){for(y=c.extra;D<y;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}c.offset+=U&(1<<c.extra)-1,U>>>=c.extra,D-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){C.msg="invalid distance too far back",c.mode=30;break}c.mode=25;case 25:if(ie===0)break e;if(q=Q-ie,c.offset>q){if((q=c.offset-q)>c.whave&&c.sane){C.msg="invalid distance too far back",c.mode=30;break}oe=q>c.wnext?(q-=c.wnext,c.wsize-q):c.wnext-q,q>c.length&&(q=c.length),Ce=c.window}else Ce=J,oe=re-c.offset,q=c.length;for(ie<q&&(q=ie),ie-=q,c.length-=q;J[re++]=Ce[oe++],--q;);c.length===0&&(c.mode=21);break;case 26:if(ie===0)break e;J[re++]=c.length,ie--,c.mode=21;break;case 27:if(c.wrap){for(;D<32;){if(Z===0)break e;Z--,U|=F[H++]<<D,D+=8}if(Q-=ie,C.total_out+=Q,c.total+=Q,Q&&(C.adler=c.check=c.flags?r(c.check,J,Q,re-Q):o(c.check,J,Q,re-Q)),Q=ie,(c.flags?U:v(U))!==c.check){C.msg="incorrect data check",c.mode=30;break}D=U=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;D<32;){if(Z===0)break e;Z--,U+=F[H++]<<D,D+=8}if(U!==(4294967295&c.total)){C.msg="incorrect length check",c.mode=30;break}D=U=0}c.mode=29;case 29:B=1;break e;case 30:B=-3;break e;case 31:return-4;case 32:default:return f}return C.next_out=re,C.avail_out=ie,C.next_in=H,C.avail_in=Z,c.hold=U,c.bits=D,(c.wsize||Q!==C.avail_out&&c.mode<30&&(c.mode<27||L!==4))&&X(C,C.output,C.next_out,Q-C.avail_out)?(c.mode=31,-4):(ne-=C.avail_in,Q-=C.avail_out,C.total_in+=ne,C.total_out+=Q,c.total+=Q,c.wrap&&Q&&(C.adler=c.check=c.flags?r(c.check,J,Q,C.next_out-Q):o(c.check,J,Q,C.next_out-Q)),C.data_type=c.bits+(c.last?64:0)+(c.mode===12?128:0)+(c.mode===20||c.mode===15?256:0),(ne==0&&Q===0||L===4)&&B===x&&(B=-5),B)},s.inflateEnd=function(C){if(!C||!C.state)return f;var L=C.state;return L.window&&(L.window=null),C.state=null,x},s.inflateGetHeader=function(C,L){var c;return C&&C.state&&2&(c=C.state).wrap?((c.head=L).done=!1,x):f},s.inflateSetDictionary=function(C,L){var c,F=L.length;return C&&C.state?(c=C.state).wrap!==0&&c.mode!==11?f:c.mode===11&&o(1,L,F,0)!==c.check?-3:X(C,L,F,F)?(c.mode=31,-4):(c.havedict=1,x):f},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,u,s){var n=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];u.exports=function(d,m,x,f,b,g,w,v){var _,z,A,R,T,P,M,I,j,X=v.bits,C=0,L=0,c=0,F=0,J=0,H=0,re=0,Z=0,ie=0,U=0,D=null,ne=0,Q=new n.Buf16(16),q=new n.Buf16(16),oe=null,Ce=0;for(C=0;C<=15;C++)Q[C]=0;for(L=0;L<f;L++)Q[m[x+L]]++;for(J=X,F=15;1<=F&&Q[F]===0;F--);if(F<J&&(J=F),F===0)return b[g++]=20971520,b[g++]=20971520,v.bits=1,0;for(c=1;c<F&&Q[c]===0;c++);for(J<c&&(J=c),C=Z=1;C<=15;C++)if(Z<<=1,(Z-=Q[C])<0)return-1;if(0<Z&&(d===0||F!==1))return-1;for(q[1]=0,C=1;C<15;C++)q[C+1]=q[C]+Q[C];for(L=0;L<f;L++)m[x+L]!==0&&(w[q[m[x+L]]++]=L);if(P=d===0?(D=oe=w,19):d===1?(D=o,ne-=257,oe=r,Ce-=257,256):(D=a,oe=l,-1),C=c,T=g,re=L=U=0,A=-1,R=(ie=1<<(H=J))-1,d===1&&852<ie||d===2&&592<ie)return 1;for(;;){for(M=C-re,j=w[L]<P?(I=0,w[L]):w[L]>P?(I=oe[Ce+w[L]],D[ne+w[L]]):(I=96,0),_=1<<C-re,c=z=1<<H;b[T+(U>>re)+(z-=_)]=M<<24|I<<16|j|0,z!==0;);for(_=1<<C-1;U&_;)_>>=1;if(_!==0?(U&=_-1,U+=_):U=0,L++,--Q[C]==0){if(C===F)break;C=m[x+w[L]]}if(J<C&&(U&R)!==A){for(re===0&&(re=J),T+=c,Z=1<<(H=C-re);H+re<F&&!((Z-=Q[H+re])<=0);)H++,Z<<=1;if(ie+=1<<H,d===1&&852<ie||d===2&&592<ie)return 1;b[A=U&R]=J<<24|H<<16|T-g|0}}return U!==0&&(b[T+U]=C-re<<24|64<<16|0),v.bits=J,0}},{"../utils/common":41}],51:[function(t,u,s){u.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,u,s){var n=t("../utils/common"),o=0,r=1;function a(h){for(var S=h.length;0<=--S;)h[S]=0}var l=0,d=29,m=256,x=m+1+d,f=30,b=19,g=2*x+1,w=15,v=16,_=7,z=256,A=16,R=17,T=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(x+2));a(X);var C=new Array(2*f);a(C);var L=new Array(512);a(L);var c=new Array(256);a(c);var F=new Array(d);a(F);var J,H,re,Z=new Array(f);function ie(h,S,$,N,E){this.static_tree=h,this.extra_bits=S,this.extra_base=$,this.elems=N,this.max_length=E,this.has_stree=h&&h.length}function U(h,S){this.dyn_tree=h,this.max_code=0,this.stat_desc=S}function D(h){return h<256?L[h]:L[256+(h>>>7)]}function ne(h,S){h.pending_buf[h.pending++]=255&S,h.pending_buf[h.pending++]=S>>>8&255}function Q(h,S,$){h.bi_valid>v-$?(h.bi_buf|=S<<h.bi_valid&65535,ne(h,h.bi_buf),h.bi_buf=S>>v-h.bi_valid,h.bi_valid+=$-v):(h.bi_buf|=S<<h.bi_valid&65535,h.bi_valid+=$)}function q(h,S,$){Q(h,$[2*S],$[2*S+1])}function oe(h,S){for(var $=0;$|=1&h,h>>>=1,$<<=1,0<--S;);return $>>>1}function Ce(h,S,$){var N,E,W=new Array(w+1),Y=0;for(N=1;N<=w;N++)W[N]=Y=Y+$[N-1]<<1;for(E=0;E<=S;E++){var V=h[2*E+1];V!==0&&(h[2*E]=oe(W[V]++,V))}}function ae(h){var S;for(S=0;S<x;S++)h.dyn_ltree[2*S]=0;for(S=0;S<f;S++)h.dyn_dtree[2*S]=0;for(S=0;S<b;S++)h.bl_tree[2*S]=0;h.dyn_ltree[2*z]=1,h.opt_len=h.static_len=0,h.last_lit=h.matches=0}function de(h){8<h.bi_valid?ne(h,h.bi_buf):0<h.bi_valid&&(h.pending_buf[h.pending++]=h.bi_buf),h.bi_buf=0,h.bi_valid=0}function _e(h,S,$,N){var E=2*S,W=2*$;return h[E]<h[W]||h[E]===h[W]&&N[S]<=N[$]}function ye(h,S,$){for(var N=h.heap[$],E=$<<1;E<=h.heap_len&&(E<h.heap_len&&_e(S,h.heap[E+1],h.heap[E],h.depth)&&E++,!_e(S,N,h.heap[E],h.depth));)h.heap[$]=h.heap[E],$=E,E<<=1;h.heap[$]=N}function ze(h,S,$){var N,E,W,Y,V=0;if(h.last_lit!==0)for(;N=h.pending_buf[h.d_buf+2*V]<<8|h.pending_buf[h.d_buf+2*V+1],E=h.pending_buf[h.l_buf+V],V++,N===0?q(h,E,S):(q(h,(W=c[E])+m+1,S),(Y=P[W])!==0&&Q(h,E-=F[W],Y),q(h,W=D(--N),$),(Y=M[W])!==0&&Q(h,N-=Z[W],Y)),V<h.last_lit;);q(h,z,S)}function K(h,S){var $,N,E,W=S.dyn_tree,Y=S.stat_desc.static_tree,V=S.stat_desc.has_stree,te=S.stat_desc.elems,ve=-1;for(h.heap_len=0,h.heap_max=g,$=0;$<te;$++)W[2*$]!==0?(h.heap[++h.heap_len]=ve=$,h.depth[$]=0):W[2*$+1]=0;for(;h.heap_len<2;)W[2*(E=h.heap[++h.heap_len]=ve<2?++ve:0)]=1,h.depth[E]=0,h.opt_len--,V&&(h.static_len-=Y[2*E+1]);for(S.max_code=ve,$=h.heap_len>>1;1<=$;$--)ye(h,W,$);for(E=te;$=h.heap[1],h.heap[1]=h.heap[h.heap_len--],ye(h,W,1),N=h.heap[1],h.heap[--h.heap_max]=$,h.heap[--h.heap_max]=N,W[2*E]=W[2*$]+W[2*N],h.depth[E]=(h.depth[$]>=h.depth[N]?h.depth[$]:h.depth[N])+1,W[2*$+1]=W[2*N+1]=E,h.heap[1]=E++,ye(h,W,1),2<=h.heap_len;);h.heap[--h.heap_max]=h.heap[1],function(ce,Ee){var ft,De,pt,ke,Rt,jt,Ne=Ee.dyn_tree,gr=Ee.max_code,Fn=Ee.stat_desc.static_tree,$n=Ee.stat_desc.has_stree,Nn=Ee.stat_desc.extra_bits,mr=Ee.stat_desc.extra_base,gt=Ee.stat_desc.max_length,zt=0;for(ke=0;ke<=w;ke++)ce.bl_count[ke]=0;for(Ne[2*ce.heap[ce.heap_max]+1]=0,ft=ce.heap_max+1;ft<g;ft++)gt<(ke=Ne[2*Ne[2*(De=ce.heap[ft])+1]+1]+1)&&(ke=gt,zt++),Ne[2*De+1]=ke,gr<De||(ce.bl_count[ke]++,Rt=0,mr<=De&&(Rt=Nn[De-mr]),jt=Ne[2*De],ce.opt_len+=jt*(ke+Rt),$n&&(ce.static_len+=jt*(Fn[2*De+1]+Rt)));if(zt!==0){do{for(ke=gt-1;ce.bl_count[ke]===0;)ke--;ce.bl_count[ke]--,ce.bl_count[ke+1]+=2,ce.bl_count[gt]--,zt-=2}while(0<zt);for(ke=gt;ke!==0;ke--)for(De=ce.bl_count[ke];De!==0;)gr<(pt=ce.heap[--ft])||(Ne[2*pt+1]!==ke&&(ce.opt_len+=(ke-Ne[2*pt+1])*Ne[2*pt],Ne[2*pt+1]=ke),De--)}}(h,S),Ce(W,ve,h.bl_count)}function i(h,S,$){var N,E,W=-1,Y=S[1],V=0,te=7,ve=4;for(Y===0&&(te=138,ve=3),S[2*($+1)+1]=65535,N=0;N<=$;N++)E=Y,Y=S[2*(N+1)+1],++V<te&&E===Y||(V<ve?h.bl_tree[2*E]+=V:E!==0?(E!==W&&h.bl_tree[2*E]++,h.bl_tree[2*A]++):V<=10?h.bl_tree[2*R]++:h.bl_tree[2*T]++,W=E,ve=(V=0)===Y?(te=138,3):E===Y?(te=6,3):(te=7,4))}function B(h,S,$){var N,E,W=-1,Y=S[1],V=0,te=7,ve=4;for(Y===0&&(te=138,ve=3),N=0;N<=$;N++)if(E=Y,Y=S[2*(N+1)+1],!(++V<te&&E===Y)){if(V<ve)for(;q(h,E,h.bl_tree),--V!=0;);else E!==0?(E!==W&&(q(h,E,h.bl_tree),V--),q(h,A,h.bl_tree),Q(h,V-3,2)):V<=10?(q(h,R,h.bl_tree),Q(h,V-3,3)):(q(h,T,h.bl_tree),Q(h,V-11,7));W=E,ve=(V=0)===Y?(te=138,3):E===Y?(te=6,3):(te=7,4)}}a(Z);var O=!1;function y(h,S,$,N){Q(h,(l<<1)+(N?1:0),3),function(E,W,Y,V){de(E),ne(E,Y),ne(E,~Y),n.arraySet(E.pending_buf,E.window,W,Y,E.pending),E.pending+=Y}(h,S,$)}s._tr_init=function(h){O||(function(){var S,$,N,E,W,Y=new Array(w+1);for(E=N=0;E<d-1;E++)for(F[E]=N,S=0;S<1<<P[E];S++)c[N++]=E;for(c[N-1]=E,E=W=0;E<16;E++)for(Z[E]=W,S=0;S<1<<M[E];S++)L[W++]=E;for(W>>=7;E<f;E++)for(Z[E]=W<<7,S=0;S<1<<M[E]-7;S++)L[256+W++]=E;for($=0;$<=w;$++)Y[$]=0;for(S=0;S<=143;)X[2*S+1]=8,S++,Y[8]++;for(;S<=255;)X[2*S+1]=9,S++,Y[9]++;for(;S<=279;)X[2*S+1]=7,S++,Y[7]++;for(;S<=287;)X[2*S+1]=8,S++,Y[8]++;for(Ce(X,x+1,Y),S=0;S<f;S++)C[2*S+1]=5,C[2*S]=oe(S,5);J=new ie(X,P,m+1,x,w),H=new ie(C,M,0,f,w),re=new ie(new Array(0),I,0,b,_)}(),O=!0),h.l_desc=new U(h.dyn_ltree,J),h.d_desc=new U(h.dyn_dtree,H),h.bl_desc=new U(h.bl_tree,re),h.bi_buf=0,h.bi_valid=0,ae(h)},s._tr_stored_block=y,s._tr_flush_block=function(h,S,$,N){var E,W,Y=0;0<h.level?(h.strm.data_type===2&&(h.strm.data_type=function(V){var te,ve=4093624447;for(te=0;te<=31;te++,ve>>>=1)if(1&ve&&V.dyn_ltree[2*te]!==0)return o;if(V.dyn_ltree[18]!==0||V.dyn_ltree[20]!==0||V.dyn_ltree[26]!==0)return r;for(te=32;te<m;te++)if(V.dyn_ltree[2*te]!==0)return r;return o}(h)),K(h,h.l_desc),K(h,h.d_desc),Y=function(V){var te;for(i(V,V.dyn_ltree,V.l_desc.max_code),i(V,V.dyn_dtree,V.d_desc.max_code),K(V,V.bl_desc),te=b-1;3<=te&&V.bl_tree[2*j[te]+1]===0;te--);return V.opt_len+=3*(te+1)+5+5+4,te}(h),E=h.opt_len+3+7>>>3,(W=h.static_len+3+7>>>3)<=E&&(E=W)):E=W=$+5,$+4<=E&&S!==-1?y(h,S,$,N):h.strategy===4||W===E?(Q(h,2+(N?1:0),3),ze(h,X,C)):(Q(h,4+(N?1:0),3),function(V,te,ve,ce){var Ee;for(Q(V,te-257,5),Q(V,ve-1,5),Q(V,ce-4,4),Ee=0;Ee<ce;Ee++)Q(V,V.bl_tree[2*j[Ee]+1],3);B(V,V.dyn_ltree,te-1),B(V,V.dyn_dtree,ve-1)}(h,h.l_desc.max_code+1,h.d_desc.max_code+1,Y+1),ze(h,h.dyn_ltree,h.dyn_dtree)),ae(h),N&&de(h)},s._tr_tally=function(h,S,$){return h.pending_buf[h.d_buf+2*h.last_lit]=S>>>8&255,h.pending_buf[h.d_buf+2*h.last_lit+1]=255&S,h.pending_buf[h.l_buf+h.last_lit]=255&$,h.last_lit++,S===0?h.dyn_ltree[2*$]++:(h.matches++,S--,h.dyn_ltree[2*(c[$]+m+1)]++,h.dyn_dtree[2*D(S)]++),h.last_lit===h.lit_bufsize-1},s._tr_align=function(h){Q(h,2,3),q(h,z,X),function(S){S.bi_valid===16?(ne(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):8<=S.bi_valid&&(S.pending_buf[S.pending++]=255&S.bi_buf,S.bi_buf>>=8,S.bi_valid-=8)}(h)}},{"../utils/common":41}],53:[function(t,u,s){u.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,u,s){(function(n){(function(o,r){if(!o.setImmediate){var a,l,d,m,x=1,f={},b=!1,g=o.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(o);w=w&&w.setTimeout?w:o,a={}.toString.call(o.process)==="[object process]"?function(A){process.nextTick(function(){_(A)})}:function(){if(o.postMessage&&!o.importScripts){var A=!0,R=o.onmessage;return o.onmessage=function(){A=!1},o.postMessage("","*"),o.onmessage=R,A}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",z,!1):o.attachEvent("onmessage",z),function(A){o.postMessage(m+A,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(A){_(A.data)},function(A){d.port2.postMessage(A)}):g&&"onreadystatechange"in g.createElement("script")?(l=g.documentElement,function(A){var R=g.createElement("script");R.onreadystatechange=function(){_(A),R.onreadystatechange=null,l.removeChild(R),R=null},l.appendChild(R)}):function(A){setTimeout(_,0,A)},w.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var R=new Array(arguments.length-1),T=0;T<R.length;T++)R[T]=arguments[T+1];var P={callback:A,args:R};return f[x]=P,a(x),x++},w.clearImmediate=v}function v(A){delete f[A]}function _(A){if(b)setTimeout(_,0,A);else{var R=f[A];if(R){b=!0;try{(function(T){var P=T.callback,M=T.args;switch(M.length){case 0:P();break;case 1:P(M[0]);break;case 2:P(M[0],M[1]);break;case 3:P(M[0],M[1],M[2]);break;default:P.apply(r,M)}})(R)}finally{v(A),b=!1}}}}function z(A){A.source===o&&typeof A.data=="string"&&A.data.indexOf(m)===0&&_(+A.data.slice(m.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof It<"u"?It:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Un);var fs=Un.exports;const ps=hi(fs),gs={class:"content"},ms={class:"info"},vs=["src"],bs=be({__name:"index",setup(e){const p=se([{src:ds,boxList:[{name:"头盔",x:.15,y:.15,w:.15,h:.15},{name:"口罩",x:.35,y:.45,w:.25,h:.25}]},{src:hs,boxList:[]}]),t=se(0);lr(En,a=>{p.value.length>=t.value&&(p.value[t.value].boxList=a)});function u(a){a!==t.value&&(a!==void 0&&(t.value=a),requestAnimationFrame(()=>Gt(p.value[t.value])))}u();function s(a){const l=a[0];if(!l||!l.file)return;const d=URL.createObjectURL(l.file);p.value.push({src:d,boxList:[]})}function n(a){p.value.splice(a,1),p.value.length==0?(t.value=0,Gt()):a==t.value&&(t.value=Math.max(0,t.value-1),Gt(p.value[t.value]))}function o(a){Ye.value=Ye.value.filter(l=>l.name!==a),p.value.forEach(l=>{l.boxList=l.boxList.filter(d=>d.name!==a)}),u()}async function r(){const a="yolo8FormatAnnotator";if(gi(a,"导出中..."),p.value.length==0)return window.$message.warning("没有图片可导出~");const l=new ps,d=l.folder("images"),m=l.folder("annotations");if(!d||!m)return window.$message.warning("图片导出失败~");const x=Ye.value.map(f=>f.name);l.file("names.txt",`names: ["${x.join('", "')}"]`);for(const f of p.value)try{const g=await(await fetch(f.src)).blob(),w=ur();d.file(w+"."+g.type.split("/")[1],g);const v=f.boxList.map(_=>{const{name:z,x:A,y:R,w:T,h:P}=_;return`${x.findIndex(M=>M===z)} ${A} ${R} ${T} ${P}`}).join(`
`);m.file(w+".txt",v)}catch(b){console.error(`Error fetching image at ${f.src}: ${b}`)}l.generateAsync({type:"blob"}).then(function(f){const b=URL.createObjectURL(f),g=document.createElement("a");g.href=b,g.download="yolo8FormatAnnotator.zip",document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(b)}).finally(()=>mi(a))}return window.addEventListener("mousemove",Lr),window.addEventListener("mouseup",Dr),window.addEventListener("keydown",Ur),fi(()=>{window.removeEventListener("mousemove",Lr),window.removeEventListener("mouseup",Dr),window.removeEventListener("keydown",Ur)}),(a,l)=>(He(),ct("div",gs,[Pe("div",ms,[Ae(pe(Si),{href:"https://github.com/ultralytics/ultralytics",target:"_blank"},{default:Ie(()=>[Me(" ultralytics YOLO Vision ")]),_:1}),Ae(pe(Be),{onClick:pe(cs)},{default:Ie(()=>[Me("添加标签")]),_:1},8,["onClick"]),Ae(pe(Dt),null,{default:Ie(()=>[(He(!0),ct(nt,null,Ht(pe(Ye),d=>(He(),Wt(pe(vi),{key:d.name,closable:"",bordered:!1,class:"box-tag",color:{color:d.color,textColor:"#fff"},onClose:m=>o(d.name)},{default:Ie(()=>[Me(Zt(d.name),1)]),_:2},1032,["color","onClose"]))),128))]),_:1}),Ae(pe(Dt),null,{default:Ie(()=>[Ae(pe(Ha),{multiple:"",accept:"image/*","show-file-list":!1,"file-list":[],"onUpdate:fileList":s},{default:Ie(()=>[Ae(pe(Be),null,{default:Ie(()=>[Me("添加图片")]),_:1})]),_:1}),Ae(pe(Be),{onClick:r},{default:Ie(()=>[Me("导出")]),_:1})]),_:1}),Ae(pe(ki),{class:"file-list"},{default:Ie(()=>[Ae(pe(ha),{hoverable:"",clickable:""},{default:Ie(()=>[(He(!0),ct(nt,null,Ht(p.value,(d,m)=>(He(),Wt(pe(fa),{key:d.src,class:bi([m==t.value&&"active"]),onClick:x=>u(m)},{default:Ie(()=>[Pe("img",{src:d.src,alt:""},null,8,vs),Me(" 标注个数："+Zt(d.boxList.length)+" ",1),Ae(pe(Be),{onClick:wi(x=>n(m),["stop"])},{default:Ie(()=>[Ae(pe(Qr),{size:"20",component:pe(rs)},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),Pe("div",{class:"canvas-box",style:qr({"pointer-events":p.value.length>0?"auto":"none"})},[Pe("canvas",{ref_key:"canvas",ref:An,onWheel:l[0]||(l[0]=(...d)=>pe(Or)&&pe(Or)(...d)),onMousedown:l[1]||(l[1]=(...d)=>pe(Tr)&&pe(Tr)(...d)),onContextmenu:l[2]||(l[2]=(...d)=>pe(Fr)&&pe(Fr)(...d)),onClick:l[3]||(l[3]=(...d)=>pe(Pr)&&pe(Pr)(...d))},null,544),Ae(pe(Dt),null,{default:Ie(()=>[Ae(pe(Ri),{value:pe(Ut),"onUpdate:value":l[4]||(l[4]=d=>pi(Ut)?Ut.value=d:null),size:"large"},{checked:Ie(()=>[Me(" 连续创建")]),unchecked:Ie(()=>[Me(" 单个创建 ")]),_:1},8,["value"]),(He(!0),ct(nt,null,Ht(pe(Ye),(d,m)=>{var x;return He(),Wt(pe(Be),{key:d.color,onClick:f=>pe(ss)(m),color:d.color,secondary:((x=pe(le))==null?void 0:x.name)!==d.name},{default:Ie(()=>[Me(Zt(d.name),1)]),_:2},1032,["onClick","color","secondary"])}),128))]),_:1})],4)]))}}),Cs=yi(bs,[["__scopeId","data-v-e1d7303e"]]);export{Cs as default};
