var nt=Object.defineProperty;var st=(h,s,t)=>s in h?nt(h,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[s]=t;var f=(h,s,t)=>st(h,typeof s!="symbol"?s+"":s,t);import{f as V,g as U,h as _,i as P,j,d as T,k as Z,l as it,p as ot,m as rt,n as F,q as at,s as J,v as ct,x as W,y as lt,z as dt,A as ht,o as Y,c as X,C as S,D as ut,E as ft,F as K,G as yt,H as gt,Y as mt,I as pt,$ as xt,_ as tt,J as wt,K as vt,L as kt,S as H,M as Ct,a as b,w as A,u as w,e as Q,B as z,N as B,O as I,P as bt,Q as St,t as Mt}from"./index-9JAOTP29.js";import{N as Rt}from"./a-BACmzvtJ.js";import{A as Lt}from"./Add-CW-ZYpU1.js";const k="0!important",et="-1px!important";function O(h){return P(`${h}-type`,[_("& +",[V("button",{},[P(`${h}-type`,[j("border",{borderLeftWidth:k}),j("state-border",{left:et})])])])])}function D(h){return P(`${h}-type`,[_("& +",[V("button",[P(`${h}-type`,[j("border",{borderTopWidth:k}),j("state-border",{top:et})])])])])}const Pt=V("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[U("vertical",{flexDirection:"row"},[U("rtl",[V("button",[_("&:first-child:not(:last-child)",`
 margin-right: ${k};
 border-top-right-radius: ${k};
 border-bottom-right-radius: ${k};
 `),_("&:last-child:not(:first-child)",`
 margin-left: ${k};
 border-top-left-radius: ${k};
 border-bottom-left-radius: ${k};
 `),_("&:not(:first-child):not(:last-child)",`
 margin-left: ${k};
 margin-right: ${k};
 border-radius: ${k};
 `),O("default"),P("ghost",[O("primary"),O("info"),O("success"),O("warning"),O("error")])])])]),P("vertical",{flexDirection:"column"},[V("button",[_("&:first-child:not(:last-child)",`
 margin-bottom: ${k};
 margin-left: ${k};
 margin-right: ${k};
 border-bottom-left-radius: ${k};
 border-bottom-right-radius: ${k};
 `),_("&:last-child:not(:first-child)",`
 margin-top: ${k};
 margin-left: ${k};
 margin-right: ${k};
 border-top-left-radius: ${k};
 border-top-right-radius: ${k};
 `),_("&:not(:first-child):not(:last-child)",`
 margin: ${k};
 border-radius: ${k};
 `),D("default"),P("ghost",[D("primary"),D("info"),D("success"),D("warning"),D("error")])])])]),$t={size:{type:String,default:void 0},vertical:Boolean},At=T({name:"ButtonGroup",props:$t,setup(h){const{mergedClsPrefixRef:s,mergedRtlRef:t}=Z(h);return it("-button-group",Pt,s),ot(at,h),{rtlEnabled:rt("ButtonGroup",t,s),mergedClsPrefix:s}},render(){const{mergedClsPrefix:h}=this;return F("div",{class:[`${h}-button-group`,this.rtlEnabled&&`${h}-button-group--rtl`,this.vertical&&`${h}-button-group--vertical`],role:"group"},this.$slots)}}),_t=V("text",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[P("strong",`
 font-weight: var(--n-font-weight-strong);
 `),P("italic",{fontStyle:"italic"}),P("underline",{textDecoration:"underline"}),P("code",`
 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 `)]),Tt=Object.assign(Object.assign({},J.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),Ot=T({name:"Text",props:Tt,setup(h){const{mergedClsPrefixRef:s,inlineThemeDisabled:t}=Z(h),n=J("Typography","-text",_t,ct,h,s),e=W(()=>{const{depth:r,type:c}=h,o=c==="default"?r===void 0?"textColor":`textColor${r}Depth`:lt("textColor",c),{common:{fontWeightStrong:a,fontFamilyMono:l,cubicBezierEaseInOut:d},self:{codeTextColor:y,codeBorderRadius:m,codeColor:p,codeBorder:u,[o]:g}}=n.value;return{"--n-bezier":d,"--n-text-color":g,"--n-font-weight-strong":a,"--n-font-famliy-mono":l,"--n-code-border-radius":m,"--n-code-text-color":y,"--n-code-color":p,"--n-code-border":u}}),i=t?dt("text",W(()=>`${h.type[0]}${h.depth||""}`),e,h):void 0;return{mergedClsPrefix:s,compitableTag:ht(h,["as","tag"]),cssVars:t?void 0:e,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){var h,s,t;const{mergedClsPrefix:n}=this;(h=this.onRender)===null||h===void 0||h.call(this);const e=[`${n}-text`,this.themeClass,{[`${n}-text--code`]:this.code,[`${n}-text--delete`]:this.delete,[`${n}-text--strong`]:this.strong,[`${n}-text--italic`]:this.italic,[`${n}-text--underline`]:this.underline}],i=(t=(s=this.$slots).default)===null||t===void 0?void 0:t.call(s);return this.code?F("code",{class:e,style:this.cssVars},this.delete?F("del",null,i):i):this.delete?F("del",{class:e,style:this.cssVars},i):F(this.compitableTag||"span",{class:e,style:this.cssVars},i)}}),Dt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Vt=S("rect",{x:"48",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Et=S("rect",{x:"288",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Gt=S("rect",{x:"48",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),zt=S("rect",{x:"288",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Bt=[Vt,Et,Gt,zt],It=T({name:"GridOutline",render:function(s,t){return Y(),X("svg",Dt,Bt)}}),Ft={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Yt=S("path",{d:"M261.56 101.28a8 8 0 0 0-11.06 0L66.4 277.15a8 8 0 0 0-2.47 5.79L63.9 448a32 32 0 0 0 32 32H192a16 16 0 0 0 16-16V328a8 8 0 0 1 8-8h80a8 8 0 0 1 8 8v136a16 16 0 0 0 16 16h96.06a32 32 0 0 0 32-32V282.94a8 8 0 0 0-2.47-5.79z",fill:"currentColor"},null,-1),Xt=S("path",{d:"M490.91 244.15l-74.8-71.56V64a16 16 0 0 0-16-16h-48a16 16 0 0 0-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0 0 43 267.56L250.5 69.28a8 8 0 0 1 11.06 0l207.52 198.28a16 16 0 0 0 22.59-.44c6.14-6.36 5.63-16.86-.76-22.97z",fill:"currentColor"},null,-1),jt=[Yt,Xt],Nt=T({name:"Home",render:function(s,t){return Y(),X("svg",Ft,jt)}}),Ht={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Wt=S("path",{d:"M336 208v-95a80 80 0 0 0-160 0v95",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Kt=S("rect",{x:"96",y:"208",width:"320",height:"272",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),qt=[Wt,Kt],Ut=T({name:"LockClosedOutline",render:function(s,t){return Y(),X("svg",Ht,qt)}}),Qt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Zt=S("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),Jt=[Zt],te=T({name:"Remove",render:function(s,t){return Y(),X("svg",Qt,Jt)}});function ee(h){return ut()?(ft(h),!0):!1}const ne=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const se=ne?window:void 0;function ie(h,s={}){const{immediate:t=!0,fpsLimit:n=void 0,window:e=se}=s,i=K(!1),r=n?1e3/n:null;let c=0,o=null;function a(y){if(!i.value||!e)return;c||(c=y);const m=y-c;if(r&&m<r){o=e.requestAnimationFrame(a);return}c=y,h({delta:m,timestamp:y}),o=e.requestAnimationFrame(a)}function l(){!i.value&&e&&(i.value=!0,c=0,o=e.requestAnimationFrame(a))}function d(){i.value=!1,o!=null&&e&&(e.cancelAnimationFrame(o),o=null)}return t&&l(),ee(d),{isActive:yt(i),pause:d,resume:l}}function oe(h){var s;const t=K(0);if(typeof performance>"u")return t;const n=(s=void 0)!=null?s:10;let e=performance.now(),i=0;return ie(()=>{if(i+=1,i>=n){const r=performance.now(),c=r-e;t.value=Math.round(1e3/(c/i)),e=r,i=0}}),t}class re{constructor(s){f(this,"canvas");f(this,"ctx");f(this,"rect");f(this,"offset",{x:0,y:0});f(this,"center",{x:0,y:0});f(this,"defaultCenter",{top:void 0,bottom:void 0,left:void 0,right:void 0});f(this,"lockDragAndResize",!1);f(this,"scale",1);f(this,"percentage",1);f(this,"gridConfig",{count:2,min:100,max:200,size:100});f(this,"cycle",10);f(this,"delta",.02);f(this,"redrawInNextRenderFrame",!1);f(this,"isAuto",!1);f(this,"drawGrid");f(this,"drawPoint");f(this,"drawLine");f(this,"drawPolygon");const t=document.getElementById(s);if(t instanceof HTMLCanvasElement)if(t.getContext){this.canvas=t,this.ctx=t.getContext("2d"),this.rect=t.getBoundingClientRect();const{clientWidth:n,clientHeight:e}=t;[t.width,t.height]=[n,e]}else console.error("canvas-unsupported code here");else console.error("canvas is not HTMLCanvasElement")}updateCenter(){const{canvas:s,rect:t,offset:n,defaultCenter:e}=this;if(!s)return console.error("canvas is not HTMLCanvasElement");const{width:i,height:r}=t,{top:c,bottom:o,left:a,right:l}=e,d={vertical:(u,g)=>{var v;if(u==1/0||u==-1/0)return;if(typeof u=="number")return u;if(["top","left"].includes(u))return 0;if(["bottom","right"].includes(u))return g;if(["middle","center"].includes(u))return g/2;const x=(v=u.match(/^(\d+)%*$/))==null?void 0:v[1];return(x?g*Number(x)/100:Number(u))||void 0},reverse:(u,g)=>{if(u==1/0||u==-1/0)return;if(typeof u=="number")return g-u;const x=d.vertical(u,g);return x?g-x:void 0}},y=(u,g,x)=>{if(u!==void 0){const v=d.vertical(u,x);if(v!==void 0)return v}if(g!==void 0){const v=d.reverse(g,x);if(v!==void 0)return v}return x/2},m=y(c,o,r),p=y(a,l,i);this.center={x:Math.floor(p+n.x),y:Math.floor(m+n.y)}}updateSize(){const{scale:s,cycle:t,delta:n,gridConfig:e}=this;let i=Math.abs(s-1)%(t*n)/n;i=Math.round(s<1?t-i:i),e.size=i/t*(e.max-e.min)+e.min,this.percentage=this.getAxisPointByValue(e.count,0).x/e.min}setScale(s,t){const{canvas:n,rect:e,lockDragAndResize:i}=this;if(i)return;if(!n||!e)return console.error("canvas is not HTMLCanvasElement");let r,c;s==="center"?(r=e.left+e.width/2,c=e.top+e.height/2):[r,c]=[s.clientX,s.clientY];const o=this.getMousePositionOnAxis({clientX:r,clientY:c}),a=this.getAxisValueByPoint(o.x,o.y);this.scale+=t,this.updateSize();const l=this.getAxisPointByValue(a.xV,a.yV);this.offset.x-=l.x-o.x,this.offset.y-=l.y-o.y}getGridCount(){const{gridConfig:s,scale:t,cycle:n,delta:e}=this;let i=s.count;return t>1?i/=Math.pow(2,Math.floor((t-1)/(n*e))):t<1&&(i*=Math.pow(2,Math.ceil(Math.abs(t-1)/(n*e)))),i}getMousePositionOnAxis(s){const{canvas:t,center:n,rect:e}=this;if(!t)return console.error("canvas is not HTMLCanvasElement");const{clientX:i,clientY:r}=s,{left:c,top:o}=e,a=i-c-n.x,l=r-o-n.y;return{x:a,y:l}}getAxisValueByPoint(s,t){const{gridConfig:n}=this,e=this.getGridCount(),i=s/n.size*e,r=t/n.size*e;return{xV:i,yV:r}}getAxisPointByValue(s,t){const{gridConfig:n}=this,e=this.getGridCount(),i=s/e*n.size,r=t/e*n.size;return{x:i,y:r}}getMaxMinValue(s){s=s||this.rect;const{x:t,y:n}=this.getMousePositionOnAxis({clientX:s.left,clientY:s.top}),{xV:e,yV:i}=this.getAxisValueByPoint(t,n),{x:r,y:c}=this.getMousePositionOnAxis({clientX:s.right,clientY:s.bottom}),{xV:o,yV:a}=this.getAxisValueByPoint(r,c);return{minXV:e,minYV:i,maxXV:o,maxYV:a}}destroy(){this.canvas=void 0,this.ctx=void 0}}class ae extends re{constructor(t){super(t);f(this,"theme","light");f(this,"style",{light:{background:"#fff",text:{color:"#222",secondary:"#909399",size:12,family:"微软雅黑",bold:!0},grid:{axis:"#222",grid:"#666",innerGrid:"#e5e5e5"},point:{radius:4,fill:"#d03050",width:12,stroke:"#d0305080"},line:{color:"#f0a020",width:4,dash:!1,dashGap:[5,10],dashOffset:0,cap:"round",join:"round",point:{radius:4,stroke:"#f0a02080",width:12,fill:"#f0a020"}},polygon:{fill:"#18a05830",stroke:"#18a058",width:1,dash:!1,dashGap:[5,10],dashOffset:0}},dark:{background:"#000",text:{color:"#aeaeae",secondary:"#8c8c8c",size:12,family:"微软雅黑",bold:!0},grid:{axis:"#aeaeae",grid:"#666",innerGrid:"#454545"},point:{radius:4,fill:"#e88080",width:12,stroke:"#e8808070"},line:{color:"#f2c97d",width:4,dash:!1,dashGap:[5,10],dashOffset:0,cap:"round",join:"round",point:{radius:4,stroke:"#f2c97d80",width:12,fill:"#f2c97d"}},polygon:{fill:"#63e2b730",stroke:"#63e2b7",width:1,dash:!1,dashGap:[5,10],dashOffset:0}}});this.initStyle(),this.clearScreen()}initStyle(){const{canvas:t,ctx:n,theme:e}=this;if(!t||!n)return console.error("ctx is not CanvasRenderingContext2D");t.classList.add("_nhanh_canvas");const i=this.style[e];n.font=`${i.text.bold?"bold":""} ${i.text.size}px ${i.text.family}`}clearScreen(){const{ctx:t,theme:n,rect:e}=this;if(!t)return console.error("ctx is not CanvasRenderingContext2D");const{width:i,height:r}=e;t.fillStyle=this.style[n].background,t.fillRect(0,0,i,r)}setStyle(t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const e=gt(this.style[n]||this.style[this.theme]);mt(e,t[n]),this.style[n]=e}this.initStyle()}setTheme(t){t in this.style&&(this.theme=t)}}class ce extends ae{constructor(t){super(t);f(this,"resizeObserver");f(this,"startCreationOnGrid");f(this,"startCreationBelowGrid");f(this,"rely",[this.center.x,this.center.y,this.scale].join());f(this,"isRecalculate",!1);f(this,"measureRedrawPerformance",pe(()=>this.redraw(),[[1,"#F56C6C"],[.5,"#E6A23C"],[0,"#67C23A"]]));this.canvas&&(this.resizeObserver=new ResizeObserver(pt(()=>{this.rect=this.canvas.getBoundingClientRect();const{clientWidth:n,clientHeight:e}=this.canvas;[this.canvas.width,this.canvas.height]=[n,e],this.redrawOnce()},200)),this.resizeObserver.observe(this.canvas))}addFunctionsToZIndexs(t){const n={};return t.forEach(([e,i])=>{n[e]=[...n[e]||[],i]}),n}redraw(){var a,l,d;const{canvas:t,center:n,scale:e,rect:i}=this;if(!t||!i)return console.error("canvas is not HTMLCanvasElement");this.updateCenter();const r=[n.x,n.y,e].join();this.isRecalculate=this.rely!==r,this.rely=r,this.clearScreen(),(a=this.startCreationBelowGrid)==null||a.call(this),(l=this.drawGrid)==null||l.drawAxisAndGrid();const c=this.startCreationOnGrid,o=this.addFunctionsToZIndexs(this.drawPoint.fetchDrawFunctions().concat(this.drawLine.fetchDrawFunctions()).concat(this.drawPolygon.fetchDrawFunctions()).concat(Array.isArray(c)?c:[]));Object.keys(o).sort().forEach(y=>{o[y].forEach(p=>p())}),typeof this.startCreationOnGrid=="function"&&((d=this.startCreationOnGrid)==null||d.call(this)),this.isRecalculate=!1}redrawOnce(t){this.isAuto&&!t&&(this.isAuto=!1),this.redrawInNextRenderFrame||(this.redrawInNextRenderFrame=!0,requestAnimationFrame(()=>{this.redrawInNextRenderFrame=!1,this.measureRedrawPerformance()}))}drawText(t,n,e,i){const{ctx:r,theme:c}=this;if(!r)return console.error("ctx is not CanvasRenderingContext2D");const o=this.style[c],{background:a}=o;r.font=`${o.text.bold?"bold":""} ${o.text.size}px ${o.text.family}`,r.strokeStyle=a,r.strokeText(t,n,e),r.fillStyle=o.text[i?"secondary":"color"],r.fillText(t,n,e)}destroy(){var t;super.destroy(),(t=this.resizeObserver)==null||t.disconnect()}}let le=class extends ce{constructor(t){super(t);f(this,"mouseInCanvas",!1);f(this,"mouseIsDown",!1);f(this,"mouseLastPosition",{x:0,y:0});f(this,"unBind");f(this,"lastPressedKey",{key:"",keyupTime:0,dblclick:!1});this.initEvent()}initEvent(){const{canvas:t}=this;if(!t)return console.error("canvas is not HTMLCanvasElement");const n=[{type:"click",handler:this.click.bind(this)},{type:"contextmenu",handler:this.contextmenu.bind(this)},{type:"mouseenter",handler:this.mouseenter.bind(this)},{type:"mouseleave",handler:this.mouseleave.bind(this)},{type:"keydown",handler:this.keydown.bind(this),target:window},{type:"keyup",handler:this.keyup.bind(this),target:window},{type:"wheel",handler:this.wheel.bind(this)},{type:"mousedown",handler:this.mousedown.bind(this)},{type:"mouseup",handler:this.mouseup.bind(this),target:window},{type:"mousemove",handler:this.mousemove.bind(this),target:window}];n.forEach(({type:e,handler:i,target:r=t})=>{r.addEventListener(e,i)}),this.unBind=()=>{n.forEach(({type:e,handler:i,target:r=t})=>{r.removeEventListener(e,i)})}}click(t){console.log("mouseclick")}contextmenu(t){t.preventDefault(),console.log("mousecontextmenu")}mouseenter(t){this.mouseInCanvas=!0}mouseleave(t){this.mouseInCanvas=!1}getStep(t){const{lastPressedKey:n}=this;return n.dblclick?4:n.key===t&&Date.now()-n.keyupTime<300?(n.dblclick=!0,4):1}keydown(t){const{mouseInCanvas:n,offset:e,delta:i,lockDragAndResize:r}=this;if(n&&!r){const c=t.key,o=this.getStep(c);switch(c){case"ArrowUp":e.y-=o;break;case"ArrowDown":e.y+=o;break;case"ArrowLeft":e.x-=o;break;case"ArrowRight":e.x+=o;break;case"+":this.setScale("center",i);break;case"-":this.setScale("center",-i);break}["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","+","-"].includes(c)&&this.redrawOnce()}}keyup(t){const{mouseInCanvas:n,lastPressedKey:e}=this;if(n){const i=t.key;e.key=i,e.keyupTime=Date.now(),e.dblclick=!1}}wheel(t){const{delta:n,lockDragAndResize:e}=this;e||(this.setScale(t,t.deltaY<0?n:-n),this.redrawOnce())}mousedown(t){this.mouseIsDown=!0;const{clientX:n,clientY:e}=t;this.mouseLastPosition={x:n,y:e}}mouseup(t){this.mouseIsDown=!1}mousemove(t){const{mouseIsDown:n,offset:e,mouseLastPosition:i,lockDragAndResize:r}=this;if(n&&!r){const{clientX:c,clientY:o}=t;e.x+=c-i.x,e.y+=o-i.y,this.redrawOnce(),this.mouseLastPosition={x:c,y:o}}}destroy(){var t;super.destroy(),(t=this.unBind)==null||t.call(this)}};class de extends le{reset(){if(this.lockDragAndResize)return;this.isAuto=!0;const s=300,t={offset:{...this.offset},scale:this.scale-1};xt(n=>{!this.isAuto||!this.canvas||this.lockDragAndResize||(n===1?(this.offset={x:0,y:0},this.scale=1,this.updateSize(),this.isAuto=!1):n>0&&(n=1-n,this.offset={x:t.offset.x*n,y:t.offset.y*n},this.scale=1+t.scale*n,this.updateSize()),this.redrawOnce(!0))},s)}zoom(s){const{canvas:t,rect:n}=this;if(!t||!n)return console.error("canvas is not HTMLCanvasElement");this.setScale("center",s)}zoomIn(){this.zoom(this.delta)}zoomOut(){this.zoom(-this.delta)}setStyle(s){super.setStyle(s),this.redrawOnce()}setTheme(s){super.setTheme(s),this.redrawOnce()}toggleGrid(s){const t=(()=>{if(typeof s=="object"){const{grid:n={main:!0,secondary:!0},axis:e=!0,axisText:i=!0}=s;return{grid:n,axis:e,axisText:i}}return typeof s=="boolean"?{grid:{main:s,secondary:s},axis:s,axisText:s}:(s=!(this.drawGrid.show.axis||this.drawGrid.show.axisText||this.drawGrid.show.grid.main||this.drawGrid.show.grid.secondary),{grid:{main:s,secondary:s},axis:s,axisText:s})})();this.drawGrid.show=t,this.redrawOnce()}toggleLock(s){return this.lockDragAndResize=typeof s=="bigint"?s:!this.lockDragAndResize,this.redrawOnce(),this.lockDragAndResize}}class he{constructor(s){f(this,"canvas");f(this,"show",{grid:{main:!0,secondary:!0},axis:!0,axisText:!0});this.canvas=s}drawAxisAndGrid(){this.canvas&&((this.show.grid.main||this.show.grid.secondary)&&this.drawGrid(),this.show.axis&&this.drawAxis(),this.show.axisText&&this.drawAxisText())}color(){const{theme:s,style:t}=this.canvas;return(t[s]||t.light).grid}drawGrid(){const s=this.canvas,{ctx:t,rect:n,center:e,gridConfig:i}=s;if(!t)return console.error("ctx is not CanvasRenderingContext2D");const{width:r,height:c}=n,o=this.color(),a=i.size,l=a/5;t.lineWidth=1;const d=(m,p)=>{const u=e.x%m>0?e.x%m:m+e.x%m;t.strokeStyle=p,t.beginPath();for(let g=0;g*m+u<=r;g++)t.moveTo(g*m+u,0),t.lineTo(g*m+u,c);t.stroke()},y=(m,p)=>{const u=e.y%m>0?e.y%m:m+e.y%m;t.strokeStyle=p,t.beginPath();for(let g=0;g*m+u<=c;g++)t.moveTo(0,g*m+u),t.lineTo(r,g*m+u);t.stroke()};this.show.grid.secondary&&(d(l,o.innerGrid),y(l,o.innerGrid)),this.show.grid.main&&(d(a,o.grid),y(a,o.grid))}drawAxis(){const s=this.canvas,{ctx:t,rect:n,center:e}=s;if(!t)return console.error("ctx is not CanvasRenderingContext2D");const{width:i,height:r}=n,c=this.color();t.lineWidth=2,t.strokeStyle=c.axis;const o=()=>{e.y>=0&&e.y<=r&&(t.beginPath(),t.moveTo(0,e.y),t.lineTo(i,e.y),t.stroke())},a=()=>{e.x>=0&&e.x<=i&&(t.beginPath(),t.moveTo(e.x,0),t.lineTo(e.x,r),t.stroke())};o(),a()}drawAxisText(){const s=this.canvas,{ctx:t,rect:n,center:e,gridConfig:i,style:r,theme:c}=s;if(!t)return console.error("ctx is not CanvasRenderingContext2D");const{width:o,height:a}=n,l=u=>Math.ceil(t.measureText(u).width),d=4,y=r[c].text.size;{const u=l("0"),g=e.x<d||e.x>o+u+d,x=e.y<-(d+y)||e.y>a+y+d;!g&&!x&&s.drawText("0",e.x-u-d,e.y+y+d)}const m=s.getGridCount(),p=i.size;{let u=e.y+y+d;u=Math.max(Math.min(u,a-d),d+y);const g=e.y>a||e.y<0;let x=e.x>0?e.x%p:e.x<0?p+e.x%p:0,v=s.getAxisValueByPoint(x-e.x,0).xV;for(;x<=o;){const C=l(String(v));v!==0&&s.drawText(String(v),x-C/2,u,g),x+=p,v+=m}}{const u=e.x>o||e.x<0;let g=e.y>0?e.y%p:e.y<0?p+e.y%p:0,x=s.getAxisValueByPoint(0,g-e.y).yV;for(;g<=a;){const v=l(String(x));let C=e.x-v-d;C=Math.max(Math.min(C,o-v-d),d),x!==0&&s.drawText(String(x),C,g+y/2,u),g+=p,x+=m}}}}const ue=new URL(""+new URL("worker-gicaClkm.js",import.meta.url).href,import.meta.url);function q(h,s){const t=new Worker(ue);t.postMessage(h),t.onmessage=n=>s(n.data)}class fe{constructor(s){f(this,"canvas");f(this,"show",!0);f(this,"pointMap",new Map);f(this,"angle",2*Math.PI);f(this,"maxRadius",16);f(this,"pointCount",0);f(this,"pointSimplifyCount",5e3);f(this,"simplify",!1);f(this,"defaultStyle");f(this,"pointList",[]);this.canvas=s;const{theme:t,style:n}=this.canvas;this.defaultStyle=(n[t]||n.light).point}drawSinglePoint(s,t){const n=this.canvas.ctx;if(!n)return console.error("ctx is not CanvasRenderingContext2D");const{width:e=this.defaultStyle.width,stroke:i=this.defaultStyle.stroke,fill:r=this.defaultStyle.fill,radius:c=this.defaultStyle.radius}=t||{};n.lineWidth=e,this.simplify||(n.strokeStyle=i),n.fillStyle=r,n.beginPath(),n.arc(s[0],s[1],c,0,this.angle),n.fill(),this.simplify||n.stroke()}drawMultiplePoints(s){if(this.show)for(let t=0;t<s.length;t++){const{show:n,dynamicLocation:e,style:i}=s[t];n&&this.drawSinglePoint(e,i)}}addPoints(s){const t=this.canvas;this.pointList.length==0&&Promise.resolve().then(()=>{const{center:n,percentage:e,gridConfig:i}=t,r=this.maxRadius,c=[],o=2e4;for(let a=0;a<this.pointList.length;a+=o)c.push(this.pointList.slice(a,a+o));c.forEach(a=>{q({type:"point",list:a,config:{maxRadius:r,gridConfig:i,percentage:e,center:n}},l=>{if(l){const{pointMap:d,maxRadius:y}=l;this.maxRadius=Math.max(this.maxRadius,y),d.forEach((m,p)=>{if(this.pointMap.has(p)){const u=this.pointMap.get(p);m.forEach((g,x)=>{if(u.has(x)){const v=u.get(x);g.forEach((C,$)=>{if(v.has($)){const M=v.get($);v.set($,M.concat(C))}else v.set($,C)})}else u.set(x,g)})}else this.pointMap.set(p,m)}),t.redrawOnce()}})}),this.pointList=[]}),this.pointList=this.pointList.concat(s)}fetchDrawFunctions(){const s=this.canvas,{ctx:t,center:n,percentage:e,isRecalculate:i,rect:r,gridConfig:c,theme:o,style:a}=s;if(!t||!this.show)return[];this.defaultStyle=(a[o]||a.light).point;const l=c.count;this.pointCount=0,this.maxRadius=Math.max(this.defaultStyle.radius+this.defaultStyle.width,this.maxRadius);const d={left:r.left-this.maxRadius,right:r.right+this.maxRadius,top:r.top-this.maxRadius,bottom:r.bottom+this.maxRadius},y=s.getMaxMinValue(d);y.minXV=Math.floor(y.minXV/l)*l,y.minYV=Math.floor(y.minYV/l)*l,y.maxXV=Math.ceil(y.maxXV/l)*l,y.maxYV=Math.ceil(y.maxYV/l)*l;const m=[];return this.pointMap.forEach((p,u)=>{const g=[];p.forEach((x,v)=>{v<y.minXV||v+l>y.maxXV||x.forEach((C,$)=>{$<y.minYV||$+l>y.maxYV||C.forEach(M=>{const{location:N,show:R}=M;if(R){if(i){let[E,L]=N;E=n.x+E*e,L=n.y+L*e,M.dynamicLocation=[E,L]}g.push(M)}})})}),this.pointCount+=g.length,m.push([u,()=>this.drawMultiplePoints(g)])}),this.simplify=this.pointCount>this.pointSimplifyCount,console.log(`%c本次需要绘制点位数量：${this.pointCount}
%c本次是否简化绘制：${this.simplify}`,"color:"+(this.pointCount>5e4?"#F56C6C":this.pointCount>1e4?"#E6A23C":"#67C23A"),"color:"+(this.simplify?"#F56C6C":"#67C23A")),m}clearAllPoints(){this.pointMap.clear()}}class ye{constructor(s){f(this,"canvas");f(this,"show",!0);f(this,"lineMap",new Map);f(this,"defaultStyle");f(this,"lineList",[]);this.canvas=s;const{theme:t,style:n}=this.canvas;this.defaultStyle=(n[t]||n.light).line}drawLine(s,t){var d;const n=(d=this.canvas)==null?void 0:d.ctx;if(!n)return console.error("ctx is not CanvasRenderingContext2D");const{width:e=this.defaultStyle.width,color:i=this.defaultStyle.color,dash:r=this.defaultStyle.dash,dashGap:c=this.defaultStyle.dashGap,dashOffset:o=this.defaultStyle.dashOffset,cap:a=this.defaultStyle.cap,join:l=this.defaultStyle.join}=t||{};n.setLineDash(r?c:[]),n.lineDashOffset=o,n.lineCap=a,n.lineJoin=l,n.lineWidth=e,n.strokeStyle=i,n.beginPath(),s.forEach((y,m)=>{n[m==0?"moveTo":"lineTo"](y[0],y[1])}),n.stroke()}drawInfiniteStraightLine(s){const{ctx:t,rect:n,drawPoint:e}=this.canvas;if(!t||!n)return console.error("Canvas上下文丢失");const{dynamicLocation:i,style:r,value:c}=s;if(!i||!c)return console.error("坐标数据缺失");const[o,a]=i.map(C=>[C[0],C[1]]),l=[a[0]-o[0],a[1]-o[1]];if(l[0]===0&&l[1]===0)return console.error("重合点无法确定方向");const d=this.defaultStyle.point,{radius:y=d.radius,stroke:m=d.stroke,width:p=d.width,fill:u=d.fill}=(r==null?void 0:r.point)||{};e.drawSinglePoint(o,{radius:y,stroke:m,width:p,fill:u}),e.drawSinglePoint(a,{radius:y,stroke:m,width:p,fill:u});const g=(C,$)=>{const[M,N]=C,[R,E]=$;let L=1/0;if(R!==0){const G=R>0?(n.width-M)/R:-M/R;G>0&&(L=Math.min(L,G))}if(R!==0){const G=R>0?(n.width-M)/R:-M/R;G>0&&(L=Math.min(L,G))}return L===1/0?C:[M+R*L,N+E*L]},x=g(o,[-l[0],-l[1]]),v=g(a,l);this.drawLine([x,v],s.style)}drawLines(s){const{show:t,canvas:n}=this,{ctx:e,center:i,percentage:r,isRecalculate:c}=n;if(!e)return console.error("ctx is not CanvasRenderingContext2D");if(t)for(let o=0;o<s.length;o++){const a=s[o],{show:l,infinite:d,location:y}=a;l&&(c&&(a.dynamicLocation=y==null?void 0:y.map(m=>{let[p,u]=m;return p=i.x+p*r,u=i.y+u*r,[p,u]})),d?this.drawInfiniteStraightLine(a):this.drawLine(a.dynamicLocation,a.style))}}addLines(s){const t=this.canvas;this.lineList.length==0&&Promise.resolve().then(()=>{const{center:n,percentage:e,gridConfig:i}=t,r=[],c=1e3;for(let o=0;o<this.lineList.length;o+=c)r.push(this.lineList.slice(o,o+c));r.forEach(o=>{q({type:"line",list:o,config:{gridConfig:i,percentage:e,center:n}},a=>{a&&(a.forEach((l,d)=>{this.lineMap.has(d)?this.lineMap.set(d,this.lineMap.get(d).concat(l)):this.lineMap.set(d,l)}),t.redrawOnce())})}),this.lineList=[]}),this.lineList=this.lineList.concat(s)}fetchDrawFunctions(){const{show:s,canvas:t}=this,{ctx:n,theme:e,style:i}=t;return!n||!s?[]:(this.defaultStyle=(i[e]||i.light).line,Array.from(this.lineMap.keys()).map(c=>[c,()=>this.drawLines(this.lineMap.get(c))]))}clearAllLines(){this.lineMap.clear()}}class ge{constructor(s){f(this,"canvas");f(this,"show",!0);f(this,"polygonMap",new Map);f(this,"defaultStyle");f(this,"polygonList",[]);this.canvas=s;const{theme:t,style:n}=this.canvas;this.defaultStyle=(n[t]||n.light).polygon}setStyle(s,t){const{width:n=this.defaultStyle.width,stroke:e=this.defaultStyle.stroke,dash:i=this.defaultStyle.dash,dashGap:r=this.defaultStyle.dashGap,dashOffset:c=this.defaultStyle.dashOffset,fill:o=this.defaultStyle.fill}=t||{};s.setLineDash(i?r:[]),s.lineDashOffset=c,s.lineWidth=n,s.strokeStyle=e,s.fillStyle=o}drawRect(s,t,n){const{ctx:e}=this.canvas;if(!e)return console.error("ctx is not CanvasRenderingContext2D");this.setStyle(e,n),e.beginPath(),e.rect(s[0],s[1],t[0],t[1]),e.stroke(),e.fill()}drawPolygon(s,t){var e;const n=(e=this.canvas)==null?void 0:e.ctx;if(!n)return console.error("ctx is not CanvasRenderingContext2D");this.setStyle(n,t),n.beginPath(),s.forEach((i,r)=>{n[r==0?"moveTo":"lineTo"](i[0],i[1])}),n.closePath(),n.stroke(),n.fill()}drawPolygons(s){const{show:t,canvas:n}=this,{ctx:e,center:i,percentage:r,isRecalculate:c}=n;if(!e)return console.error("ctx is not CanvasRenderingContext2D");if(t)for(let o=0;o<s.length;o++){const a=s[o],{show:l,location:d,style:y}=a;if(!l)continue;c&&(a.dynamicLocation=d==null?void 0:d.map(u=>{let[g,x]=u;return g=i.x+g*r,x=i.y+x*r,[g,x]}),a.size&&(a.dynamicSize=[a.size[0]*r,a.size[1]*r]));const{dynamicLocation:m,dynamicSize:p}=a;a.size?this.drawRect(m[0],p,y):this.drawPolygon(m,y)}}addPolygons(s){const t=this.canvas;this.polygonList.length==0&&Promise.resolve().then(()=>{const{center:n,percentage:e,gridConfig:i}=t,r=[],c=1e3;for(let o=0;o<this.polygonList.length;o+=c)r.push(this.polygonList.slice(o,o+c));r.forEach(o=>{q({type:"polygon",list:o,config:{gridConfig:i,percentage:e,center:n}},a=>{a&&(a.forEach((l,d)=>{this.polygonMap.has(d)?this.polygonMap.set(d,this.polygonMap.get(d).concat(l)):this.polygonMap.set(d,l)}),t.redrawOnce())})}),this.polygonList=[]}),this.polygonList=this.polygonList.concat(s)}fetchDrawFunctions(){const{show:s,canvas:t}=this,{ctx:n,theme:e,style:i}=t;return!n||!s?[]:(this.defaultStyle=(i[e]||i.light).polygon,Array.from(this.polygonMap.keys()).map(c=>[c,()=>this.drawPolygons(this.polygonMap.get(c))]))}clearAllLines(){this.polygonMap.clear()}}class me extends de{constructor(s){super(s),this.drawGrid=new he(this),this.drawPoint=new fe(this),this.drawLine=new ye(this),this.drawPolygon=new ge(this),this.updateCenter()}destroy(){super.destroy()}}function pe(h,s){if(typeof h!="function")throw new Error("The first argument must be a function.");if(!Array.isArray(s))throw new Error("The second argument must be an array.");let t=[],n=100,e=0;const i=(r,c)=>{for(const[o,a]of c)if(r>=o)return a;return"black"};return function(...r){const c=performance.now(),o=h(...r),a=performance.now()-c;t.push(a),t.length>n&&t.shift(),e=t.reduce((y,m)=>y+m,0)/t.length||0;const l=i(a,s),d=i(e,s);return console.log(`%c单次耗时：${a.toFixed(2)}ms
%c平均耗时（${t.length}次）：${e.toFixed(2)}ms`,`color: ${l}; padding: 2px 0;`,`color: ${d}; padding: 2px 0;`),o}}const xe={};function we(h,s){return null}const ve=tt(xe,[["render",we]]),ke={class:"graphing-equations"},Ce=["id"],be={class:"button-box"},Se=T({__name:"index",setup(h){const s=oe(),t=wt("canvas-"),n=K(!1);let e;const i=W(()=>{const c=H.value.theme;return{color:c==="dark"?"#666":"#ededed","text-color":c==="dark"?"#ededed":"#666",style:{"--n-color-hover":c==="dark"?"rgba(126, 126, 126, 1)":"#fff"}}});vt(()=>H.value.theme,c=>e.setTheme(c));const r=new Image(200,300);return r.src="https://fastly.picsum.photos/id/440/200/300.jpg?hmac=3Nx5MHMCVguEcZQ1M3RnSrCpHNn9sabFI5y6aYzvceQ",r.onload=()=>{e==null||e.redrawOnce()},kt(()=>{e=new me(t),e.setTheme(H.value.theme),e.drawPoint.addPoints([{zIndex:1,location:[75,75]},{value:[6,6]},{value:[-6,6]},{value:[-6,-6]},{value:[6,-6]}]),e.drawLine.addLines([{location:[[-75*2,75*2],[75*2,75*2],[75*2,0*2]]},{value:[[-2,-2],[-2,-6],[-4,-4]]},{value:[[-2,0],[0,-2]],infinite:!0},{value:[[2,0],[0,2]],infinite:!0}]),e.drawPolygon.addPolygons([{value:[[4,-4],[2,-6],[0,-4]]},{value:[[2,2]],size:[200,200]}])}),Ct(()=>{e==null||e.destroy()}),(c,o)=>(Y(),X("div",ke,[S("nav",null,[b(w(Rt),{href:"https://www.desmos.com/calculator?lang=zh-CN",target:"_blank"},{default:A(()=>[Q(" 希望达到的目标！ desmos ")]),_:1}),b(ve)]),S("canvas",{id:w(t)},null,8,Ce),S("div",be,[b(w(St),{vertical:""},{default:A(()=>[b(w(At),{vertical:""},{default:A(()=>[b(w(z),B(i.value,{onClick:o[0]||(o[0]=a=>{var l;return(l=w(e))==null?void 0:l.zoomIn()})}),{icon:A(()=>[b(w(I),{component:w(Lt)},null,8,["component"])]),_:1},16),b(w(z),B(i.value,{onClick:o[1]||(o[1]=a=>{var l;return(l=w(e))==null?void 0:l.zoomOut()})}),{icon:A(()=>[b(w(I),{component:w(te)},null,8,["component"])]),_:1},16)]),_:1}),b(w(z),B(i.value,{onClick:o[2]||(o[2]=a=>w(e).reset())}),{icon:A(()=>[b(w(I),{component:w(Nt)},null,8,["component"])]),_:1},16),b(w(z),B(i.value,{onClick:o[3]||(o[3]=a=>w(e).toggleGrid())}),{icon:A(()=>[b(w(I),{component:w(It)},null,8,["component"])]),_:1},16),b(w(z),B(i.value,{onClick:o[4]||(o[4]=a=>n.value=w(e).toggleLock())}),{icon:A(()=>[b(w(I),{component:n.value?w(Ut):w(bt)("LockOpenOutline")},null,8,["component"])]),_:1},16)]),_:1}),b(w(Ot),{class:"fps",type:w(s)>60?"success":w(s)>30?"warning":"error"},{default:A(()=>[Q(Mt(w(s)),1)]),_:1},8,["type"])])]))}}),Ae=tt(Se,[["__scopeId","data-v-6635acc1"]]);export{Ae as default};
