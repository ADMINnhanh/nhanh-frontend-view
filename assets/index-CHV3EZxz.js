import{m as It,k as U,bq as Ve,br as Me,bs as qe,bt as Ye,bu as He,bv as nt,bw as Je,d as ke,J as pe,a9 as it,a8 as ot,z as fe,n as qt,q as Ge,V as Gt,bx as ht,by as Pt,bz as Lt,bA as Nt,aj as xr,Q as ge,p as ne,an as Xr,ap as ce,R as ye,ax as kr,v as Xt,x as at,bB as Kr,K as Kt,E as ve,U as jt,C as Cr,X as or,F as Yt,aA as Yr,a0 as Mt,aH as Jr,aB as Qr,aC as en,aD as tn,au as rn,aE as nn,aF as on,I as tt,B as Ee,D as Sr,aq as an,ar as sn,W as ln,bC as un,aw as gt,bo as dn,Y as cn,$ as Le,bD as hn,bE as Rr,ag as fn,ad as pn,bF as ar,ao as mn,bG as gn,bH as vn,Z as Ct,at as sr,o as je,c as rt,aM as Te,aQ as Jt,aY as St,aZ as zr,bI as lr,bJ as yt,av as bn,ah as yn,b as ze,w as Se,u as de,a_ as wn,e as Pe,aT as Dt,bK as _n,bL as xn,bM as kn,aS as Ot,aW as Cn,t as Ut,bN as Sn,bO as Rn,_ as zn}from"./index-Bas7IHTD.js";import{N as Er,E as En}from"./Input-CPN1ofuP.js";import{N as An}from"./InputGroup-No2fq5S8.js";import{u as Bn}from"./use-locale-D-nnFvm4.js";import{N as In}from"./Progress-KmbKm5i2.js";import{N as Tn,D as Dn,a as On}from"./Image-Bsw9ZjZz.js";import{d as Un}from"./download-C2161hUv.js";import{S as Fn}from"./Scrollbar-CHFo7GRL.js";import{N as Pn}from"./Switch-CRv01swy.js";import{N as Ln}from"./a-W6aaNBZe.js";import"./Suffix-D2ps6rD6.js";function Ar(e,g,r){g/=100,r/=100;const d=g*Math.min(r,1-r)+r;return[e,d?(2-2*r/d)*100:0,d*100]}function Rt(e,g,r){g/=100,r/=100;const d=r-r*g/2,l=Math.min(d,1-d);return[e,l?(r-d)/l*100:0,d*100]}function We(e,g,r){g/=100,r/=100;let d=(l,n=(l+e/60)%6)=>r-r*g*Math.max(Math.min(n,4-n,1),0);return[d(5)*255,d(3)*255,d(1)*255]}function $t(e,g,r){e/=255,g/=255,r/=255;let d=Math.max(e,g,r),l=d-Math.min(e,g,r),n=l&&(d==e?(g-r)/l:d==g?2+(r-e)/l:4+(e-g)/l);return[60*(n<0?n+6:n),d&&l/d*100,d*100]}function Ht(e,g,r){e/=255,g/=255,r/=255;let d=Math.max(e,g,r),l=d-Math.min(e,g,r),n=1-Math.abs(d+d-l-1),o=l&&(d==e?(g-r)/l:d==g?2+(r-e)/l:4+(e-g)/l);return[60*(o<0?o+6:o),n?l/n*100:0,(d+d-l)*50]}function Wt(e,g,r){g/=100,r/=100;let d=g*Math.min(r,1-r),l=(n,o=(n+e/30)%12)=>r-d*Math.max(Math.min(o-3,9-o,1),-1);return[l(0)*255,l(8)*255,l(4)*255]}const Nn=It("attach",U("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},U("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},U("g",{fill:"currentColor","fill-rule":"nonzero"},U("path",{d:"M3.25735931,8.70710678 L7.85355339,4.1109127 C8.82986412,3.13460197 10.4127766,3.13460197 11.3890873,4.1109127 C12.365398,5.08722343 12.365398,6.67013588 11.3890873,7.64644661 L6.08578644,12.9497475 C5.69526215,13.3402718 5.06209717,13.3402718 4.67157288,12.9497475 C4.28104858,12.5592232 4.28104858,11.9260582 4.67157288,11.5355339 L9.97487373,6.23223305 C10.1701359,6.0369709 10.1701359,5.72038841 9.97487373,5.52512627 C9.77961159,5.32986412 9.4630291,5.32986412 9.26776695,5.52512627 L3.96446609,10.8284271 C3.18341751,11.6094757 3.18341751,12.8758057 3.96446609,13.6568542 C4.74551468,14.4379028 6.01184464,14.4379028 6.79289322,13.6568542 L12.0961941,8.35355339 C13.4630291,6.98671837 13.4630291,4.77064094 12.0961941,3.40380592 C10.7293591,2.0369709 8.51328163,2.0369709 7.14644661,3.40380592 L2.55025253,8 C2.35499039,8.19526215 2.35499039,8.51184464 2.55025253,8.70710678 C2.74551468,8.90236893 3.06209717,8.90236893 3.25735931,8.70710678 Z"}))))),jn=It("trash",U("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},U("path",{d:"M432,144,403.33,419.74A32,32,0,0,1,371.55,448H140.46a32,32,0,0,1-31.78-28.26L80,144",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),U("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),U("line",{x1:"312",y1:"240",x2:"200",y2:"352",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),U("line",{x1:"312",y1:"352",x2:"200",y2:"240",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),Mn=It("cancel",U("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},U("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},U("g",{fill:"currentColor","fill-rule":"nonzero"},U("path",{d:"M2.58859116,2.7156945 L2.64644661,2.64644661 C2.82001296,2.47288026 3.08943736,2.45359511 3.2843055,2.58859116 L3.35355339,2.64644661 L8,7.293 L12.6464466,2.64644661 C12.8417088,2.45118446 13.1582912,2.45118446 13.3535534,2.64644661 C13.5488155,2.84170876 13.5488155,3.15829124 13.3535534,3.35355339 L8.707,8 L13.3535534,12.6464466 C13.5271197,12.820013 13.5464049,13.0894374 13.4114088,13.2843055 L13.3535534,13.3535534 C13.179987,13.5271197 12.9105626,13.5464049 12.7156945,13.4114088 L12.6464466,13.3535534 L8,8.707 L3.35355339,13.3535534 C3.15829124,13.5488155 2.84170876,13.5488155 2.64644661,13.3535534 C2.45118446,13.1582912 2.45118446,12.8417088 2.64644661,12.6464466 L7.293,8 L2.64644661,3.35355339 C2.47288026,3.17998704 2.45359511,2.91056264 2.58859116,2.7156945 L2.64644661,2.64644661 L2.58859116,2.7156945 Z"}))))),$n=It("retry",U("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},U("path",{d:"M320,146s24.36-12-64-12A160,160,0,1,0,416,294",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-miterlimit: 10; stroke-width: 32px;"}),U("polyline",{points:"256 58 336 138 256 218",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"})));function Hn(e,g){switch(e[0]){case"hex":return g?"#000000FF":"#000000";case"rgb":return g?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return g?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return g?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return"#000000"}function ft(e){return e===null?null:/^ *#/.test(e)?"hex":e.includes("rgb")?"rgb":e.includes("hsl")?"hsl":e.includes("hsv")?"hsv":null}function Wn(e){return e=Math.round(e),e>=360?359:e<0?0:e}function Zn(e){return e=Math.round(e*100)/100,e>1?1:e<0?0:e}const Vn={rgb:{hex(e){return Ve(Me(e))},hsl(e){const[g,r,d,l]=Me(e);return qe([...Ht(g,r,d),l])},hsv(e){const[g,r,d,l]=Me(e);return Ye([...$t(g,r,d),l])}},hex:{rgb(e){return He(Me(e))},hsl(e){const[g,r,d,l]=Me(e);return qe([...Ht(g,r,d),l])},hsv(e){const[g,r,d,l]=Me(e);return Ye([...$t(g,r,d),l])}},hsl:{hex(e){const[g,r,d,l]=nt(e);return Ve([...Wt(g,r,d),l])},rgb(e){const[g,r,d,l]=nt(e);return He([...Wt(g,r,d),l])},hsv(e){const[g,r,d,l]=nt(e);return Ye([...Ar(g,r,d),l])}},hsv:{hex(e){const[g,r,d,l]=Je(e);return Ve([...We(g,r,d),l])},rgb(e){const[g,r,d,l]=Je(e);return He([...We(g,r,d),l])},hsl(e){const[g,r,d,l]=Je(e);return qe([...Rt(g,r,d),l])}}};function Br(e,g,r){return r=r||ft(e),r?r===g?e:Vn[r][g](e):null}const Qe="12px",qn=12,Xe="6px",Gn=6,Xn="linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",Kn=ke({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(e){const g=pe(null);function r(n){g.value&&(it("mousemove",document,d),it("mouseup",document,l),d(n))}function d(n){const{value:o}=g;if(!o)return;const{width:t,left:a}=o.getBoundingClientRect(),c=Wn((n.clientX-a-Gn)/(t-qn)*360);e.onUpdateHue(c)}function l(){var n;ot("mousemove",document,d),ot("mouseup",document,l),(n=e.onComplete)===null||n===void 0||n.call(e)}return{railRef:g,handleMouseDown:r}},render(){const{clsPrefix:e}=this;return U("div",{class:`${e}-color-picker-slider`,style:{height:Qe,borderRadius:Xe}},U("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:Xn,height:Qe,borderRadius:Xe,position:"relative"},onMousedown:this.handleMouseDown},U("div",{style:{position:"absolute",left:Xe,right:Xe,top:0,bottom:0}},U("div",{class:`${e}-color-picker-handle`,style:{left:`calc((${this.hue}%) / 359 * 100 - ${Xe})`,borderRadius:Xe,width:Qe,height:Qe}},U("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:`hsl(${this.hue}, 100%, 50%)`,borderRadius:Xe,width:Qe,height:Qe}})))))}}),ct="12px",Yn=12,Ke="6px",Jn=ke({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(e){const g=pe(null);function r(n){!g.value||!e.rgba||(it("mousemove",document,d),it("mouseup",document,l),d(n))}function d(n){const{value:o}=g;if(!o)return;const{width:t,left:a}=o.getBoundingClientRect(),c=(n.clientX-a)/(t-Yn);e.onUpdateAlpha(Zn(c))}function l(){var n;ot("mousemove",document,d),ot("mouseup",document,l),(n=e.onComplete)===null||n===void 0||n.call(e)}return{railRef:g,railBackgroundImage:fe(()=>{const{rgba:n}=e;return n?`linear-gradient(to right, rgba(${n[0]}, ${n[1]}, ${n[2]}, 0) 0%, rgba(${n[0]}, ${n[1]}, ${n[2]}, 1) 100%)`:""}),handleMouseDown:r}},render(){const{clsPrefix:e}=this;return U("div",{class:`${e}-color-picker-slider`,ref:"railRef",style:{height:ct,borderRadius:Ke},onMousedown:this.handleMouseDown},U("div",{style:{borderRadius:Ke,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},U("div",{class:`${e}-color-picker-checkboard`}),U("div",{class:`${e}-color-picker-slider__image`,style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&U("div",{style:{position:"absolute",left:Ke,right:Ke,top:0,bottom:0}},U("div",{class:`${e}-color-picker-handle`,style:{left:`calc(${this.alpha*100}% - ${Ke})`,borderRadius:Ke,width:ct,height:ct}},U("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:He(this.rgba),borderRadius:Ke,width:ct,height:ct}}))))}}),wt="12px",_t="6px",Qn=ke({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(e){const g=pe(null);function r(n){g.value&&(it("mousemove",document,d),it("mouseup",document,l),d(n))}function d(n){const{value:o}=g;if(!o)return;const{width:t,height:a,left:c,bottom:p}=o.getBoundingClientRect(),v=(p-n.clientY)/a,x=(n.clientX-c)/t,f=100*(x>1?1:x<0?0:x),y=100*(v>1?1:v<0?0:v);e.onUpdateSV(f,y)}function l(){var n;ot("mousemove",document,d),ot("mouseup",document,l),(n=e.onComplete)===null||n===void 0||n.call(e)}return{palleteRef:g,handleColor:fe(()=>{const{rgba:n}=e;return n?`rgb(${n[0]}, ${n[1]}, ${n[2]})`:""}),handleMouseDown:r}},render(){const{clsPrefix:e}=this;return U("div",{class:`${e}-color-picker-pallete`,onMousedown:this.handleMouseDown,ref:"palleteRef"},U("div",{class:`${e}-color-picker-pallete__layer`,style:{backgroundImage:`linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`}}),U("div",{class:`${e}-color-picker-pallete__layer ${e}-color-picker-pallete__layer--shadowed`,style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&U("div",{class:`${e}-color-picker-handle`,style:{width:wt,height:wt,borderRadius:_t,left:`calc(${this.displayedSv[0]}% - ${_t})`,bottom:`calc(${this.displayedSv[1]}% - ${_t})`}},U("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:this.handleColor,borderRadius:_t,width:wt,height:wt}})))}}),Qt=qt("n-color-picker");function ei(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),255)):!1}function ti(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),360)):!1}function ri(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),100)):!1}function ni(e){const g=e.trim();return/^#[0-9a-fA-F]+$/.test(g)?[4,5,7,9].includes(g.length):!1}function ii(e){return/^\d{1,3}\.?\d*%$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e)/100,100)):!1}const oi={paddingSmall:"0 4px"},ur=ke({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(e){const g=pe(""),{themeRef:r}=Ge(Qt,null);Gt(()=>{g.value=d()});function d(){const{value:o}=e;if(o===null)return"";const{label:t}=e;return t==="HEX"?o:t==="A"?`${Math.floor(o*100)}%`:String(Math.floor(o))}function l(o){g.value=o}function n(o){let t,a;switch(e.label){case"HEX":a=ni(o),a&&e.onUpdateValue(o),g.value=d();break;case"H":t=ti(o),t===!1?g.value=d():e.onUpdateValue(t);break;case"S":case"L":case"V":t=ri(o),t===!1?g.value=d():e.onUpdateValue(t);break;case"A":t=ii(o),t===!1?g.value=d():e.onUpdateValue(t);break;case"R":case"G":case"B":t=ei(o),t===!1?g.value=d():e.onUpdateValue(t);break}}return{mergedTheme:r,inputValue:g,handleInputChange:n,handleInputUpdateValue:l}},render(){const{mergedTheme:e}=this;return U(Er,{size:"small",placeholder:this.label,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,builtinThemeOverrides:oi,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:this.label==="A"?"flex-grow: 1.25;":""})}}),ai=ke({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup(e){return{handleUnitUpdateValue(g,r){const{showAlpha:d}=e;if(e.mode==="hex"){e.onUpdateValue((d?Ve:ht)(r));return}let l;switch(e.valueArr===null?l=[0,0,0,0]:l=Array.from(e.valueArr),e.mode){case"hsv":l[g]=r,e.onUpdateValue((d?Ye:Nt)(l));break;case"rgb":l[g]=r,e.onUpdateValue((d?He:Lt)(l));break;case"hsl":l[g]=r,e.onUpdateValue((d?qe:Pt)(l));break}}}},render(){const{clsPrefix:e,modes:g}=this;return U("div",{class:`${e}-color-picker-input`},U("div",{class:`${e}-color-picker-input__mode`,onClick:this.onUpdateMode,style:{cursor:g.length===1?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),U(An,null,{default:()=>{const{mode:r,valueArr:d,showAlpha:l}=this;if(r==="hex"){let n=null;try{n=d===null?null:(l?Ve:ht)(d)}catch{}return U(ur,{label:"HEX",showAlpha:l,value:n,onUpdateValue:o=>{this.handleUnitUpdateValue(0,o)}})}return(r+(l?"a":"")).split("").map((n,o)=>U(ur,{label:n.toUpperCase(),value:d===null?null:d[o],onUpdateValue:t=>{this.handleUnitUpdateValue(o,t)}}))}}))}}),si=ke({name:"ColorPickerTrigger",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(e){const{colorPickerSlots:g,renderLabelRef:r}=Ge(Qt,null);return()=>{const{hsla:d,value:l,clsPrefix:n,onClick:o,disabled:t}=e,a=g.label||r.value;return U("div",{class:[`${n}-color-picker-trigger`,t&&`${n}-color-picker-trigger--disabled`],onClick:t?void 0:o},U("div",{class:`${n}-color-picker-trigger__fill`},U("div",{class:`${n}-color-picker-checkboard`}),U("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:d?qe(d):""}}),l&&d?U("div",{class:`${n}-color-picker-trigger__value`,style:{color:d[2]>50||d[3]<.5?"black":"white"}},a?a(l):l):null))}}});function li(e,g){if(g==="hsv"){const[r,d,l,n]=Je(e);return He([...We(r,d,l),n])}return e}function ui(e){const g=document.createElement("canvas").getContext("2d");return g?(g.fillStyle=e,g.fillStyle):"#000000"}const di=ke({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(e){const g=fe(()=>e.swatches.map(n=>{const o=ft(n);return{value:n,mode:o,legalValue:li(n,o)}}));function r(n){const{mode:o}=e;let{value:t,mode:a}=n;return a||(a="hex",/^[a-zA-Z]+$/.test(t)?t=ui(t):(xr("color-picker",`color ${t} in swatches is invalid.`),t="#000000")),a===o?t:Br(t,o,a)}function d(n){e.onUpdateColor(r(n))}function l(n,o){n.key==="Enter"&&d(o)}return{parsedSwatchesRef:g,handleSwatchSelect:d,handleSwatchKeyDown:l}},render(){const{clsPrefix:e}=this;return U("div",{class:`${e}-color-picker-swatches`},this.parsedSwatchesRef.map(g=>U("div",{class:`${e}-color-picker-swatch`,tabindex:0,onClick:()=>{this.handleSwatchSelect(g)},onKeydown:r=>{this.handleSwatchKeyDown(r,g)}},U("div",{class:`${e}-color-picker-swatch__fill`,style:{background:g.legalValue}}))))}}),ci=ke({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:e=>{const g=ft(e);return!!(!e||g&&g!=="hsv")}},onUpdateColor:{type:Function,required:!0}},setup(e){function g(r){var d;const l=r.target.value;(d=e.onUpdateColor)===null||d===void 0||d.call(e,Br(l.toUpperCase(),e.mode,"hex")),r.stopPropagation()}return{handleChange:g}},render(){const{clsPrefix:e}=this;return U("div",{class:`${e}-color-picker-preview__preview`},U("span",{class:`${e}-color-picker-preview__fill`,style:{background:this.color||"#000000"}}),U("input",{class:`${e}-color-picker-preview__input`,type:"color",value:this.color,onChange:this.handleChange}))}}),hi=ge([ne("color-picker",`
 display: inline-block;
 box-sizing: border-box;
 height: var(--n-height);
 font-size: var(--n-font-size);
 width: 100%;
 position: relative;
 `),ne("color-picker-panel",`
 margin: 4px 0;
 width: 240px;
 font-size: var(--n-panel-font-size);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition:
 box-shadow .3s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 `,[Xr(),ne("input",`
 text-align: center;
 `)]),ne("color-picker-checkboard",`
 background: white; 
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[ge("&::after",`
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 12px 12px;
 background-position: 0 0, 0 6px, 6px -6px, -6px 0px;
 background-repeat: repeat;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),ne("color-picker-slider",`
 margin-bottom: 8px;
 position: relative;
 box-sizing: border-box;
 `,[ce("image",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `),ge("&::after",`
 content: "";
 position: absolute;
 border-radius: inherit;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 pointer-events: none;
 `)]),ne("color-picker-handle",`
 z-index: 1;
 box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);
 position: absolute;
 background-color: white;
 overflow: hidden;
 `,[ce("fill",`
 box-sizing: border-box;
 border: 2px solid white;
 `)]),ne("color-picker-pallete",`
 height: 180px;
 position: relative;
 margin-bottom: 8px;
 cursor: crosshair;
 `,[ce("layer",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[ye("shadowed",`
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 `)])]),ne("color-picker-preview",`
 display: flex;
 `,[ce("sliders",`
 flex: 1 0 auto;
 `),ce("preview",`
 position: relative;
 height: 30px;
 width: 30px;
 margin: 0 0 8px 6px;
 border-radius: 50%;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 overflow: hidden;
 `),ce("fill",`
 display: block;
 width: 30px;
 height: 30px;
 `),ce("input",`
 position: absolute;
 top: 0;
 left: 0;
 width: 30px;
 height: 30px;
 opacity: 0;
 z-index: 1;
 `)]),ne("color-picker-input",`
 display: flex;
 align-items: center;
 `,[ne("input",`
 flex-grow: 1;
 flex-basis: 0;
 `),ce("mode",`
 width: 72px;
 text-align: center;
 `)]),ne("color-picker-control",`
 padding: 12px;
 `),ne("color-picker-action",`
 display: flex;
 margin-top: -4px;
 border-top: 1px solid var(--n-divider-color);
 padding: 8px 12px;
 justify-content: flex-end;
 `,[ne("button","margin-left: 8px;")]),ne("color-picker-trigger",`
 border: var(--n-border);
 height: 100%;
 box-sizing: border-box;
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 cursor: pointer;
 `,[ce("value",`
 white-space: nowrap;
 position: relative;
 `),ce("fill",`
 border-radius: var(--n-border-radius);
 position: absolute;
 display: flex;
 align-items: center;
 justify-content: center;
 left: 4px;
 right: 4px;
 top: 4px;
 bottom: 4px;
 `),ye("disabled","cursor: not-allowed"),ne("color-picker-checkboard",`
 border-radius: var(--n-border-radius);
 `,[ge("&::after",`
 --n-block-size: calc((var(--n-height) - 8px) / 3);
 background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);
 background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; 
 `)])]),ne("color-picker-swatches",`
 display: grid;
 grid-gap: 8px;
 flex-wrap: wrap;
 position: relative;
 grid-template-columns: repeat(auto-fill, 18px);
 margin-top: 10px;
 `,[ne("color-picker-swatch",`
 width: 18px;
 height: 18px;
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 8px 8px;
 background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;
 background-repeat: repeat;
 `,[ce("fill",`
 position: relative;
 width: 100%;
 height: 100%;
 border-radius: 3px;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 cursor: pointer;
 `),ge("&:focus",`
 outline: none;
 `,[ce("fill",[ge("&::after",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 background: inherit;
 filter: blur(2px);
 content: "";
 `)])])])])]),fi=Object.assign(Object.assign({},at.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:Mt.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,onClear:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),pi=ke({name:"ColorPicker",props:fi,setup(e,{slots:g}){const r=pe(null);let d=null;const l=kr(e),{mergedSizeRef:n,mergedDisabledRef:o}=l,{localeRef:t}=Bn("global"),{mergedClsPrefixRef:a,namespaceRef:c,inlineThemeDisabled:p}=Xt(e),v=at("ColorPicker","-color-picker",hi,Kr,e,a);Kt(Qt,{themeRef:v,renderLabelRef:ve(e,"renderLabel"),colorPickerSlots:g});const x=pe(e.defaultShow),f=jt(ve(e,"show"),x);function y(u){const{onUpdateShow:S,"onUpdate:show":L}=e;S&&tt(S,u),L&&tt(L,u),x.value=u}const{defaultValue:h}=e,b=pe(h===void 0?Hn(e.modes,e.showAlpha):h),m=jt(ve(e,"value"),b),w=pe([m.value]),R=pe(0),E=fe(()=>ft(m.value)),{modes:C}=e,T=pe(ft(m.value)||C[0]||"rgb");function B(){const{modes:u}=e,{value:S}=T,L=u.findIndex(N=>N===S);~L?T.value=u[(L+1)%u.length]:T.value="rgb"}let H,z,M,X,k,F,s,P;const K=fe(()=>{const{value:u}=m;if(!u)return null;switch(E.value){case"hsv":return Je(u);case"hsl":return[H,z,M,P]=nt(u),[...Ar(H,z,M),P];case"rgb":case"hex":return[k,F,s,P]=Me(u),[...$t(k,F,s),P]}}),$=fe(()=>{const{value:u}=m;if(!u)return null;switch(E.value){case"rgb":case"hex":return Me(u);case"hsv":return[H,z,X,P]=Je(u),[...We(H,z,X),P];case"hsl":return[H,z,M,P]=nt(u),[...Wt(H,z,M),P]}}),ee=fe(()=>{const{value:u}=m;if(!u)return null;switch(E.value){case"hsl":return nt(u);case"hsv":return[H,z,X,P]=Je(u),[...Rt(H,z,X),P];case"rgb":case"hex":return[k,F,s,P]=Me(u),[...Ht(k,F,s),P]}}),V=fe(()=>{switch(T.value){case"rgb":case"hex":return $.value;case"hsv":return K.value;case"hsl":return ee.value}}),re=pe(0),O=pe(1),I=pe([0,0]);function te(u,S){const{value:L}=K,N=re.value,A=L?L[3]:1;I.value=[u,S];const{showAlpha:W}=e;switch(T.value){case"hsv":oe((W?Ye:Nt)([N,u,S,A]),"cursor");break;case"hsl":oe((W?qe:Pt)([...Rt(N,u,S),A]),"cursor");break;case"rgb":oe((W?He:Lt)([...We(N,u,S),A]),"cursor");break;case"hex":oe((W?Ve:ht)([...We(N,u,S),A]),"cursor");break}}function Y(u){re.value=u;const{value:S}=K;if(!S)return;const[,L,N,A]=S,{showAlpha:W}=e;switch(T.value){case"hsv":oe((W?Ye:Nt)([u,L,N,A]),"cursor");break;case"rgb":oe((W?He:Lt)([...We(u,L,N),A]),"cursor");break;case"hex":oe((W?Ve:ht)([...We(u,L,N),A]),"cursor");break;case"hsl":oe((W?qe:Pt)([...Rt(u,L,N),A]),"cursor");break}}function G(u){switch(T.value){case"hsv":[H,z,X]=K.value,oe(Ye([H,z,X,u]),"cursor");break;case"rgb":[k,F,s]=$.value,oe(He([k,F,s,u]),"cursor");break;case"hex":[k,F,s]=$.value,oe(Ve([k,F,s,u]),"cursor");break;case"hsl":[H,z,M]=ee.value,oe(qe([H,z,M,u]),"cursor");break}O.value=u}function oe(u,S){S==="cursor"?d=u:d=null;const{nTriggerFormChange:L,nTriggerFormInput:N}=l,{onUpdateValue:A,"onUpdate:value":W}=e;A&&tt(A,u),W&&tt(W,u),L(),N(),b.value=u}function Ce(u){oe(u,"input"),Sr(ie)}function ie(u=!0){const{value:S}=m;if(S){const{nTriggerFormChange:L,nTriggerFormInput:N}=l,{onComplete:A}=e;A&&A(S);const{value:W}=w,{value:q}=R;u&&(W.splice(q+1,W.length,S),R.value=q+1),L(),N()}}function le(){const{value:u}=R;u-1<0||(oe(w.value[u-1],"input"),ie(!1),R.value=u-1)}function _e(){const{value:u}=R;u<0||u+1>=w.value.length||(oe(w.value[u+1],"input"),ie(!1),R.value=u+1)}function be(){oe(null,"input");const{onClear:u}=e;u&&u(),y(!1)}function Ae(){const{value:u}=m,{onConfirm:S}=e;S&&S(u),y(!1)}const Re=fe(()=>R.value>=1),i=fe(()=>{const{value:u}=w;return u.length>1&&R.value<u.length-1});Cr(f,u=>{u||(w.value=[m.value],R.value=0)}),Gt(()=>{if(!(d&&d===m.value)){const{value:u}=K;u&&(re.value=u[0],O.value=u[3],I.value=[u[1],u[2]])}d=null});const j=fe(()=>{const{value:u}=n,{common:{cubicBezierEaseInOut:S},self:{textColor:L,color:N,panelFontSize:A,boxShadow:W,border:q,borderRadius:Z,dividerColor:Q,[or("height",u)]:he,[or("fontSize",u)]:se}}=v.value;return{"--n-bezier":S,"--n-text-color":L,"--n-color":N,"--n-panel-font-size":A,"--n-font-size":se,"--n-box-shadow":W,"--n-border":q,"--n-border-radius":Z,"--n-height":he,"--n-divider-color":Q}}),D=p?Yt("color-picker",fe(()=>n.value[0]),j,e):void 0;function _(){var u;const{value:S}=$,{value:L}=re,{internalActions:N,modes:A,actions:W}=e,{value:q}=v,{value:Z}=a;return U("div",{class:[`${Z}-color-picker-panel`,D==null?void 0:D.themeClass.value],onDragstart:Q=>{Q.preventDefault()},style:p?void 0:j.value},U("div",{class:`${Z}-color-picker-control`},U(Qn,{clsPrefix:Z,rgba:S,displayedHue:L,displayedSv:I.value,onUpdateSV:te,onComplete:ie}),U("div",{class:`${Z}-color-picker-preview`},U("div",{class:`${Z}-color-picker-preview__sliders`},U(Kn,{clsPrefix:Z,hue:L,onUpdateHue:Y,onComplete:ie}),e.showAlpha?U(Jn,{clsPrefix:Z,rgba:S,alpha:O.value,onUpdateAlpha:G,onComplete:ie}):null),e.showPreview?U(ci,{clsPrefix:Z,mode:T.value,color:$.value&&ht($.value),onUpdateColor:Q=>{oe(Q,"input")}}):null),U(ai,{clsPrefix:Z,showAlpha:e.showAlpha,mode:T.value,modes:A,onUpdateMode:B,value:m.value,valueArr:V.value,onUpdateValue:Ce}),((u=e.swatches)===null||u===void 0?void 0:u.length)&&U(di,{clsPrefix:Z,mode:T.value,swatches:e.swatches,onUpdateColor:Q=>{oe(Q,"input")}})),W!=null&&W.length?U("div",{class:`${Z}-color-picker-action`},W.includes("confirm")&&U(Ee,{size:"small",onClick:Ae,theme:q.peers.Button,themeOverrides:q.peerOverrides.Button},{default:()=>t.value.confirm}),W.includes("clear")&&U(Ee,{size:"small",onClick:be,disabled:!m.value,theme:q.peers.Button,themeOverrides:q.peerOverrides.Button},{default:()=>t.value.clear})):null,g.action?U("div",{class:`${Z}-color-picker-action`},{default:g.action}):N?U("div",{class:`${Z}-color-picker-action`},N.includes("undo")&&U(Ee,{size:"small",onClick:le,disabled:!Re.value,theme:q.peers.Button,themeOverrides:q.peerOverrides.Button},{default:()=>t.value.undo}),N.includes("redo")&&U(Ee,{size:"small",onClick:_e,disabled:!i.value,theme:q.peers.Button,themeOverrides:q.peerOverrides.Button},{default:()=>t.value.redo})):null)}return{mergedClsPrefix:a,namespace:c,selfRef:r,hsla:ee,rgba:$,mergedShow:f,mergedDisabled:o,isMounted:Yr(),adjustedTo:Mt(e),mergedValue:m,handleTriggerClick(){y(!0)},handleClickOutside(u){var S;!((S=r.value)===null||S===void 0)&&S.contains(Jr(u))||y(!1)},renderPanel:_,cssVars:p?void 0:j,themeClass:D==null?void 0:D.themeClass,onRender:D==null?void 0:D.onRender}},render(){const{$slots:e,mergedClsPrefix:g,onRender:r}=this;return r==null||r(),U("div",{class:[this.themeClass,`${g}-color-picker`],ref:"selfRef",style:this.cssVars},U(Qr,null,{default:()=>[U(en,null,{default:()=>U(si,{clsPrefix:g,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick},{label:e.label})}),U(tn,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===Mt.tdkey,to:this.adjustedTo},{default:()=>U(rn,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?nn(this.renderPanel(),[[on,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}}),mi=ge([ne("list",`
 --n-merged-border-color: var(--n-border-color);
 --n-merged-color: var(--n-color);
 --n-merged-color-hover: var(--n-color-hover);
 margin: 0;
 font-size: var(--n-font-size);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 padding: 0;
 list-style-type: none;
 color: var(--n-text-color);
 background-color: var(--n-merged-color);
 `,[ye("show-divider",[ne("list-item",[ge("&:not(:last-child)",[ce("divider",`
 background-color: var(--n-merged-border-color);
 `)])])]),ye("clickable",[ne("list-item",`
 cursor: pointer;
 `)]),ye("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `),ye("hoverable",[ne("list-item",`
 border-radius: var(--n-border-radius);
 `,[ge("&:hover",`
 background-color: var(--n-merged-color-hover);
 `,[ce("divider",`
 background-color: transparent;
 `)])])]),ye("bordered, hoverable",[ne("list-item",`
 padding: 12px 20px;
 `),ce("header, footer",`
 padding: 12px 20px;
 `)]),ce("header, footer",`
 padding: 12px 0;
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
 `,[ge("&:not(:last-child)",`
 border-bottom: 1px solid var(--n-merged-border-color);
 `)]),ne("list-item",`
 position: relative;
 padding: 12px 0; 
 box-sizing: border-box;
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ce("prefix",`
 margin-right: 20px;
 flex: 0;
 `),ce("suffix",`
 margin-left: 20px;
 flex: 0;
 `),ce("main",`
 flex: 1;
 `),ce("divider",`
 height: 1px;
 position: absolute;
 bottom: 0;
 left: 0;
 right: 0;
 background-color: transparent;
 transition: background-color .3s var(--n-bezier);
 pointer-events: none;
 `)])]),an(ne("list",`
 --n-merged-color-hover: var(--n-color-hover-modal);
 --n-merged-color: var(--n-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `)),sn(ne("list",`
 --n-merged-color-hover: var(--n-color-hover-popover);
 --n-merged-color: var(--n-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `))]),gi=Object.assign(Object.assign({},at.props),{size:{type:String,default:"medium"},bordered:Boolean,clickable:Boolean,hoverable:Boolean,showDivider:{type:Boolean,default:!0}}),Ir=qt("n-list"),vi=ke({name:"List",props:gi,setup(e){const{mergedClsPrefixRef:g,inlineThemeDisabled:r,mergedRtlRef:d}=Xt(e),l=ln("List",d,g),n=at("List","-list",mi,un,e,g);Kt(Ir,{showDividerRef:ve(e,"showDivider"),mergedClsPrefixRef:g});const o=fe(()=>{const{common:{cubicBezierEaseInOut:a},self:{fontSize:c,textColor:p,color:v,colorModal:x,colorPopover:f,borderColor:y,borderColorModal:h,borderColorPopover:b,borderRadius:m,colorHover:w,colorHoverModal:R,colorHoverPopover:E}}=n.value;return{"--n-font-size":c,"--n-bezier":a,"--n-text-color":p,"--n-color":v,"--n-border-radius":m,"--n-border-color":y,"--n-border-color-modal":h,"--n-border-color-popover":b,"--n-color-modal":x,"--n-color-popover":f,"--n-color-hover":w,"--n-color-hover-modal":R,"--n-color-hover-popover":E}}),t=r?Yt("list",void 0,o,e):void 0;return{mergedClsPrefix:g,rtlEnabled:l,cssVars:r?void 0:o,themeClass:t==null?void 0:t.themeClass,onRender:t==null?void 0:t.onRender}},render(){var e;const{$slots:g,mergedClsPrefix:r,onRender:d}=this;return d==null||d(),U("ul",{class:[`${r}-list`,this.rtlEnabled&&`${r}-list--rtl`,this.bordered&&`${r}-list--bordered`,this.showDivider&&`${r}-list--show-divider`,this.hoverable&&`${r}-list--hoverable`,this.clickable&&`${r}-list--clickable`,this.themeClass],style:this.cssVars},g.header?U("div",{class:`${r}-list__header`},g.header()):null,(e=g.default)===null||e===void 0?void 0:e.call(g),g.footer?U("div",{class:`${r}-list__footer`},g.footer()):null)}}),bi=ke({name:"ListItem",setup(){const e=Ge(Ir,null);return e||gt("list-item","`n-list-item` must be placed in `n-list`."),{showDivider:e.showDividerRef,mergedClsPrefix:e.mergedClsPrefixRef}},render(){const{$slots:e,mergedClsPrefix:g}=this;return U("li",{class:`${g}-list-item`},e.prefix?U("div",{class:`${g}-list-item__prefix`},e.prefix()):null,e.default?U("div",{class:`${g}-list-item__main`},e):null,e.suffix?U("div",{class:`${g}-list-item__suffix`},e.suffix()):null,this.showDivider&&U("div",{class:`${g}-list-item__divider`}))}}),st=qt("n-upload"),Tr="__UPLOAD_DRAGGER__",yi=ke({name:"UploadDragger",[Tr]:!0,setup(e,{slots:g}){const r=Ge(st,null);return r||gt("upload-dragger","`n-upload-dragger` must be placed inside `n-upload`."),()=>{const{mergedClsPrefixRef:{value:d},mergedDisabledRef:{value:l},maxReachedRef:{value:n}}=r;return U("div",{class:[`${d}-upload-dragger`,(l||n)&&`${d}-upload-dragger--disabled`]},g)}}});var Zt=function(e,g,r,d){function l(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function t(p){try{c(d.next(p))}catch(v){o(v)}}function a(p){try{c(d.throw(p))}catch(v){o(v)}}function c(p){p.done?n(p.value):l(p.value).then(t,a)}c((d=d.apply(e,g||[])).next())})};function Dr(e){return e.includes("image/")}function dr(e=""){const g=e.split("/"),d=g[g.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(d)||[""])[0]}const cr=/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i,Or=e=>{if(e.type)return Dr(e.type);const g=dr(e.name||"");if(cr.test(g))return!0;const r=e.thumbnailUrl||e.url||"",d=dr(r);return!!(/^data:image\//.test(r)||cr.test(d))};function wi(e){return Zt(this,void 0,void 0,function*(){return yield new Promise(g=>{if(!e.type||!Dr(e.type)){g("");return}g(window.URL.createObjectURL(e))})})}const _i=dn&&window.FileReader&&window.File;function xi(e){return e.isDirectory}function ki(e){return e.isFile}function Ci(e,g){return Zt(this,void 0,void 0,function*(){const r=[];function d(l){return Zt(this,void 0,void 0,function*(){for(const n of l)if(n){if(g&&xi(n)){const o=n.createReader();try{const t=yield new Promise((a,c)=>{o.readEntries(a,c)});yield d(t)}catch{}}else if(ki(n))try{const o=yield new Promise((t,a)=>{n.file(t,a)});r.push({file:o,entry:n,source:"dnd"})}catch{}}})}return yield d(e),r})}function pt(e){const{id:g,name:r,percentage:d,status:l,url:n,file:o,thumbnailUrl:t,type:a,fullPath:c,batchId:p}=e;return{id:g,name:r,percentage:d??null,status:l,url:n??null,file:o??null,thumbnailUrl:t??null,type:a??null,fullPath:c??null,batchId:p??null}}function Si(e,g,r){return e=e.toLowerCase(),g=g.toLocaleLowerCase(),r=r.toLocaleLowerCase(),r.split(",").map(l=>l.trim()).filter(Boolean).some(l=>{if(l.startsWith(".")){if(e.endsWith(l))return!0}else if(l.includes("/")){const[n,o]=g.split("/"),[t,a]=l.split("/");if((t==="*"||n&&t&&t===n)&&(a==="*"||o&&a&&a===o))return!0}else return!0;return!1})}const Ur=ke({name:"UploadTrigger",props:{abstract:Boolean},setup(e,{slots:g}){const r=Ge(st,null);r||gt("upload-trigger","`n-upload-trigger` must be placed inside `n-upload`.");const{mergedClsPrefixRef:d,mergedDisabledRef:l,maxReachedRef:n,listTypeRef:o,dragOverRef:t,openOpenFileDialog:a,draggerInsideRef:c,handleFileAddition:p,mergedDirectoryDndRef:v,triggerClassRef:x,triggerStyleRef:f}=r,y=fe(()=>o.value==="image-card");function h(){l.value||n.value||a()}function b(E){E.preventDefault(),t.value=!0}function m(E){E.preventDefault(),t.value=!0}function w(E){E.preventDefault(),t.value=!1}function R(E){var C;if(E.preventDefault(),!c.value||l.value||n.value){t.value=!1;return}const T=(C=E.dataTransfer)===null||C===void 0?void 0:C.items;T!=null&&T.length?Ci(Array.from(T).map(B=>B.webkitGetAsEntry()),v.value).then(B=>{p(B)}).finally(()=>{t.value=!1}):t.value=!1}return()=>{var E;const{value:C}=d;return e.abstract?(E=g.default)===null||E===void 0?void 0:E.call(g,{handleClick:h,handleDrop:R,handleDragOver:b,handleDragEnter:m,handleDragLeave:w}):U("div",{class:[`${C}-upload-trigger`,(l.value||n.value)&&`${C}-upload-trigger--disabled`,y.value&&`${C}-upload-trigger--image-card`,x.value],style:f.value,onClick:h,onDrop:R,onDragover:b,onDragenter:m,onDragleave:w},y.value?U(yi,null,{default:()=>cn(g.default,()=>[U(Le,{clsPrefix:C},{default:()=>U(hn,null)})])}):g)}}}),Ri=ke({name:"UploadProgress",props:{show:Boolean,percentage:{type:Number,required:!0},status:{type:String,required:!0}},setup(){return{mergedTheme:Ge(st).mergedThemeRef}},render(){return U(Rr,null,{default:()=>this.show?U(In,{type:"line",showIndicator:!1,percentage:this.percentage,status:this.status,height:2,theme:this.mergedTheme.peers.Progress,themeOverrides:this.mergedTheme.peerOverrides.Progress}):null})}}),zi=U("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},U("g",{fill:"none"},U("path",{d:"M21.75 3A3.25 3.25 0 0 1 25 6.25v15.5A3.25 3.25 0 0 1 21.75 25H6.25A3.25 3.25 0 0 1 3 21.75V6.25A3.25 3.25 0 0 1 6.25 3h15.5zm.583 20.4l-7.807-7.68a.75.75 0 0 0-.968-.07l-.084.07l-7.808 7.68c.183.065.38.1.584.1h15.5c.204 0 .4-.035.583-.1l-7.807-7.68l7.807 7.68zM21.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v15.5c0 .208.036.408.103.593l7.82-7.692a2.25 2.25 0 0 1 3.026-.117l.129.117l7.82 7.692c.066-.185.102-.385.102-.593V6.25a1.75 1.75 0 0 0-1.75-1.75zm-3.25 3a2.5 2.5 0 1 1 0 5a2.5 2.5 0 0 1 0-5zm0 1.5a1 1 0 1 0 0 2a1 1 0 0 0 0-2z",fill:"currentColor"}))),Ei=U("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},U("g",{fill:"none"},U("path",{d:"M6.4 2A2.4 2.4 0 0 0 4 4.4v19.2A2.4 2.4 0 0 0 6.4 26h15.2a2.4 2.4 0 0 0 2.4-2.4V11.578c0-.729-.29-1.428-.805-1.944l-6.931-6.931A2.4 2.4 0 0 0 14.567 2H6.4zm-.9 2.4a.9.9 0 0 1 .9-.9H14V10a2 2 0 0 0 2 2h6.5v11.6a.9.9 0 0 1-.9.9H6.4a.9.9 0 0 1-.9-.9V4.4zm16.44 6.1H16a.5.5 0 0 1-.5-.5V4.06l6.44 6.44z",fill:"currentColor"})));var Ai=function(e,g,r,d){function l(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function t(p){try{c(d.next(p))}catch(v){o(v)}}function a(p){try{c(d.throw(p))}catch(v){o(v)}}function c(p){p.done?n(p.value):l(p.value).then(t,a)}c((d=d.apply(e,g||[])).next())})};const xt={paddingMedium:"0 3px",heightMedium:"24px",iconSizeMedium:"18px"},Bi=ke({name:"UploadFile",props:{clsPrefix:{type:String,required:!0},file:{type:Object,required:!0},listType:{type:String,required:!0},index:{type:Number,required:!0}},setup(e){const g=Ge(st),r=pe(null),d=pe(""),l=fe(()=>{const{file:C}=e;return C.status==="finished"?"success":C.status==="error"?"error":"info"}),n=fe(()=>{const{file:C}=e;if(C.status==="error")return"error"}),o=fe(()=>{const{file:C}=e;return C.status==="uploading"}),t=fe(()=>{if(!g.showCancelButtonRef.value)return!1;const{file:C}=e;return["uploading","pending","error"].includes(C.status)}),a=fe(()=>{if(!g.showRemoveButtonRef.value)return!1;const{file:C}=e;return["finished"].includes(C.status)}),c=fe(()=>{if(!g.showDownloadButtonRef.value)return!1;const{file:C}=e;return["finished"].includes(C.status)}),p=fe(()=>{if(!g.showRetryButtonRef.value)return!1;const{file:C}=e;return["error"].includes(C.status)}),v=fn(()=>d.value||e.file.thumbnailUrl||e.file.url),x=fe(()=>{if(!g.showPreviewButtonRef.value)return!1;const{file:{status:C},listType:T}=e;return["finished"].includes(C)&&v.value&&T==="image-card"});function f(){g.submit(e.file.id)}function y(C){C.preventDefault();const{file:T}=e;["finished","pending","error"].includes(T.status)?b(T):["uploading"].includes(T.status)?w(T):xr("upload","The button clicked type is unknown.")}function h(C){C.preventDefault(),m(e.file)}function b(C){const{xhrMap:T,doChange:B,onRemoveRef:{value:H},mergedFileListRef:{value:z}}=g;Promise.resolve(H?H({file:Object.assign({},C),fileList:z,index:e.index}):!0).then(M=>{if(M===!1)return;const X=Object.assign({},C,{status:"removed"});T.delete(C.id),B(X,void 0,{remove:!0})})}function m(C){const{onDownloadRef:{value:T}}=g;Promise.resolve(T?T(Object.assign({},C)):!0).then(B=>{B!==!1&&Un(C.url,C.name)})}function w(C){const{xhrMap:T}=g,B=T.get(C.id);B==null||B.abort(),b(Object.assign({},C))}function R(C){const{onPreviewRef:{value:T}}=g;if(T)T(e.file,{event:C});else if(e.listType==="image-card"){const{value:B}=r;if(!B)return;B.click()}}const E=()=>Ai(this,void 0,void 0,function*(){const{listType:C}=e;C!=="image"&&C!=="image-card"||g.shouldUseThumbnailUrlRef.value(e.file)&&(d.value=yield g.getFileThumbnailUrlResolver(e.file))});return Gt(()=>{E()}),{mergedTheme:g.mergedThemeRef,progressStatus:l,buttonType:n,showProgress:o,disabled:g.mergedDisabledRef,showCancelButton:t,showRemoveButton:a,showDownloadButton:c,showRetryButton:p,showPreviewButton:x,mergedThumbnailUrl:v,shouldUseThumbnailUrl:g.shouldUseThumbnailUrlRef,renderIcon:g.renderIconRef,imageRef:r,handleRemoveOrCancelClick:y,handleDownloadClick:h,handleRetryClick:f,handlePreviewClick:R}},render(){const{clsPrefix:e,mergedTheme:g,listType:r,file:d,renderIcon:l}=this;let n;const o=r==="image";o||r==="image-card"?n=!this.shouldUseThumbnailUrl(d)||!this.mergedThumbnailUrl?U("span",{class:`${e}-upload-file-info__thumbnail`},l?l(d):Or(d)?U(Le,{clsPrefix:e},{default:()=>zi}):U(Le,{clsPrefix:e},{default:()=>Ei})):U("a",{rel:"noopener noreferer",target:"_blank",href:d.url||void 0,class:`${e}-upload-file-info__thumbnail`,onClick:this.handlePreviewClick},r==="image-card"?U(Tn,{src:this.mergedThumbnailUrl||void 0,previewSrc:d.url||void 0,alt:d.name,ref:"imageRef"}):U("img",{src:this.mergedThumbnailUrl||void 0,alt:d.name})):n=U("span",{class:`${e}-upload-file-info__thumbnail`},l?l(d):U(Le,{clsPrefix:e},{default:()=>U(Nn,null)}));const a=U(Ri,{show:this.showProgress,percentage:d.percentage||0,status:this.progressStatus}),c=r==="text"||r==="image";return U("div",{class:[`${e}-upload-file`,`${e}-upload-file--${this.progressStatus}-status`,d.url&&d.status!=="error"&&r!=="image-card"&&`${e}-upload-file--with-url`,`${e}-upload-file--${r}-type`]},U("div",{class:`${e}-upload-file-info`},n,U("div",{class:`${e}-upload-file-info__name`},c&&(d.url&&d.status!=="error"?U("a",{rel:"noopener noreferer",target:"_blank",href:d.url||void 0,onClick:this.handlePreviewClick},d.name):U("span",{onClick:this.handlePreviewClick},d.name)),o&&a),U("div",{class:[`${e}-upload-file-info__action`,`${e}-upload-file-info__action--${r}-type`]},this.showPreviewButton?U(Ee,{key:"preview",quaternary:!0,type:this.buttonType,onClick:this.handlePreviewClick,theme:g.peers.Button,themeOverrides:g.peerOverrides.Button,builtinThemeOverrides:xt},{icon:()=>U(Le,{clsPrefix:e},{default:()=>U(En,null)})}):null,(this.showRemoveButton||this.showCancelButton)&&!this.disabled&&U(Ee,{key:"cancelOrTrash",theme:g.peers.Button,themeOverrides:g.peerOverrides.Button,quaternary:!0,builtinThemeOverrides:xt,type:this.buttonType,onClick:this.handleRemoveOrCancelClick},{icon:()=>U(pn,null,{default:()=>this.showRemoveButton?U(Le,{clsPrefix:e,key:"trash"},{default:()=>U(jn,null)}):U(Le,{clsPrefix:e,key:"cancel"},{default:()=>U(Mn,null)})})}),this.showRetryButton&&!this.disabled&&U(Ee,{key:"retry",quaternary:!0,type:this.buttonType,onClick:this.handleRetryClick,theme:g.peers.Button,themeOverrides:g.peerOverrides.Button,builtinThemeOverrides:xt},{icon:()=>U(Le,{clsPrefix:e},{default:()=>U($n,null)})}),this.showDownloadButton?U(Ee,{key:"download",quaternary:!0,type:this.buttonType,onClick:this.handleDownloadClick,theme:g.peers.Button,themeOverrides:g.peerOverrides.Button,builtinThemeOverrides:xt},{icon:()=>U(Le,{clsPrefix:e},{default:()=>U(Dn,null)})}):null)),!o&&a)}}),Ii=ke({name:"UploadFileList",setup(e,{slots:g}){const r=Ge(st,null);r||gt("upload-file-list","`n-upload-file-list` must be placed inside `n-upload`.");const{abstractRef:d,mergedClsPrefixRef:l,listTypeRef:n,mergedFileListRef:o,fileListClassRef:t,fileListStyleRef:a,cssVarsRef:c,themeClassRef:p,maxReachedRef:v,showTriggerRef:x,imageGroupPropsRef:f}=r,y=fe(()=>n.value==="image-card"),h=()=>o.value.map((m,w)=>U(Bi,{clsPrefix:l.value,key:m.id,file:m,index:w,listType:n.value})),b=()=>y.value?U(On,Object.assign({},f.value),{default:h}):U(Rr,{group:!0},{default:h});return()=>{const{value:m}=l,{value:w}=d;return U("div",{class:[`${m}-upload-file-list`,y.value&&`${m}-upload-file-list--grid`,w?p==null?void 0:p.value:void 0,t.value],style:[w&&c?c.value:"",a.value]},b(),x.value&&!v.value&&y.value&&U(Ur,null,g))}}}),Ti=ge([ne("upload","width: 100%;",[ye("dragger-inside",[ne("upload-trigger",`
 display: block;
 `)]),ye("drag-over",[ne("upload-dragger",`
 border: var(--n-dragger-border-hover);
 `)])]),ne("upload-dragger",`
 cursor: pointer;
 box-sizing: border-box;
 width: 100%;
 text-align: center;
 border-radius: var(--n-border-radius);
 padding: 24px;
 opacity: 1;
 transition:
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-dragger-color);
 border: var(--n-dragger-border);
 `,[ge("&:hover",`
 border: var(--n-dragger-border-hover);
 `),ye("disabled",`
 cursor: not-allowed;
 `)]),ne("upload-trigger",`
 display: inline-block;
 box-sizing: border-box;
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[ge("+",[ne("upload-file-list","margin-top: 8px;")]),ye("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `),ye("image-card",`
 width: 96px;
 height: 96px;
 `,[ne("base-icon",`
 font-size: 24px;
 `),ne("upload-dragger",`
 padding: 0;
 height: 100%;
 width: 100%;
 display: flex;
 align-items: center;
 justify-content: center;
 `)])]),ne("upload-file-list",`
 line-height: var(--n-line-height);
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[ge("a, img","outline: none;"),ye("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `,[ne("upload-file","cursor: not-allowed;")]),ye("grid",`
 display: grid;
 grid-template-columns: repeat(auto-fill, 96px);
 grid-gap: 8px;
 margin-top: 0;
 `),ne("upload-file",`
 display: block;
 box-sizing: border-box;
 cursor: default;
 padding: 0px 12px 0 6px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `,[ar(),ne("progress",[ar({foldPadding:!0})]),ge("&:hover",`
 background-color: var(--n-item-color-hover);
 `,[ne("upload-file-info",[ce("action",`
 opacity: 1;
 `)])]),ye("image-type",`
 border-radius: var(--n-border-radius);
 text-decoration: underline;
 text-decoration-color: #0000;
 `,[ne("upload-file-info",`
 padding-top: 0px;
 padding-bottom: 0px;
 width: 100%;
 height: 100%;
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 6px 0;
 `,[ne("progress",`
 padding: 2px 0;
 margin-bottom: 0;
 `),ce("name",`
 padding: 0 8px;
 `),ce("thumbnail",`
 width: 32px;
 height: 32px;
 font-size: 28px;
 display: flex;
 justify-content: center;
 align-items: center;
 `,[ge("img",`
 width: 100%;
 `)])])]),ye("text-type",[ne("progress",`
 box-sizing: border-box;
 padding-bottom: 6px;
 margin-bottom: 6px;
 `)]),ye("image-card-type",`
 position: relative;
 width: 96px;
 height: 96px;
 border: var(--n-item-border-image-card);
 border-radius: var(--n-border-radius);
 padding: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: border-color .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 overflow: hidden;
 `,[ne("progress",`
 position: absolute;
 left: 8px;
 bottom: 8px;
 right: 8px;
 width: unset;
 `),ne("upload-file-info",`
 padding: 0;
 width: 100%;
 height: 100%;
 `,[ce("thumbnail",`
 width: 100%;
 height: 100%;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 font-size: 36px;
 `,[ge("img",`
 width: 100%;
 `)])]),ge("&::before",`
 position: absolute;
 z-index: 1;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 opacity: 0;
 transition: opacity .2s var(--n-bezier);
 content: "";
 `),ge("&:hover",[ge("&::before","opacity: 1;"),ne("upload-file-info",[ce("thumbnail","opacity: .12;")])])]),ye("error-status",[ge("&:hover",`
 background-color: var(--n-item-color-hover-error);
 `),ne("upload-file-info",[ce("name","color: var(--n-item-text-color-error);"),ce("thumbnail","color: var(--n-item-text-color-error);")]),ye("image-card-type",`
 border: var(--n-item-border-image-card-error);
 `)]),ye("with-url",`
 cursor: pointer;
 `,[ne("upload-file-info",[ce("name",`
 color: var(--n-item-text-color-success);
 text-decoration-color: var(--n-item-text-color-success);
 `,[ge("a",`
 text-decoration: underline;
 `)])])]),ne("upload-file-info",`
 position: relative;
 padding-top: 6px;
 padding-bottom: 6px;
 display: flex;
 flex-wrap: nowrap;
 `,[ce("thumbnail",`
 font-size: 18px;
 opacity: 1;
 transition: opacity .2s var(--n-bezier);
 color: var(--n-item-icon-color);
 `,[ne("base-icon",`
 margin-right: 2px;
 vertical-align: middle;
 transition: color .3s var(--n-bezier);
 `)]),ce("action",`
 padding-top: inherit;
 padding-bottom: inherit;
 position: absolute;
 right: 0;
 top: 0;
 bottom: 0;
 width: 80px;
 display: flex;
 align-items: center;
 transition: opacity .2s var(--n-bezier);
 justify-content: flex-end;
 opacity: 0;
 `,[ne("button",[ge("&:not(:last-child)",{marginRight:"4px"}),ne("base-icon",[ge("svg",[mn()])])]),ye("image-type",`
 position: relative;
 max-width: 80px;
 width: auto;
 `),ye("image-card-type",`
 z-index: 2;
 position: absolute;
 width: 100%;
 height: 100%;
 left: 0;
 right: 0;
 bottom: 0;
 top: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 `)]),ce("name",`
 color: var(--n-item-text-color);
 flex: 1;
 display: flex;
 justify-content: center;
 text-overflow: ellipsis;
 overflow: hidden;
 flex-direction: column;
 text-decoration-color: #0000;
 font-size: var(--n-font-size);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier); 
 `,[ge("a",`
 color: inherit;
 text-decoration: underline;
 `)])])])]),ne("upload-file-input",`
 display: none;
 width: 0;
 height: 0;
 opacity: 0;
 `)]);var hr=function(e,g,r,d){function l(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function t(p){try{c(d.next(p))}catch(v){o(v)}}function a(p){try{c(d.throw(p))}catch(v){o(v)}}function c(p){p.done?n(p.value):l(p.value).then(t,a)}c((d=d.apply(e,g||[])).next())})};function Di(e,g,r){const{doChange:d,xhrMap:l}=e;let n=0;function o(a){var c;let p=Object.assign({},g,{status:"error",percentage:n});l.delete(g.id),p=pt(((c=e.onError)===null||c===void 0?void 0:c.call(e,{file:p,event:a}))||p),d(p,a)}function t(a){var c;if(e.isErrorState){if(e.isErrorState(r)){o(a);return}}else if(r.status<200||r.status>=300){o(a);return}let p=Object.assign({},g,{status:"finished",percentage:n});l.delete(g.id),p=pt(((c=e.onFinish)===null||c===void 0?void 0:c.call(e,{file:p,event:a}))||p),d(p,a)}return{handleXHRLoad:t,handleXHRError:o,handleXHRAbort(a){const c=Object.assign({},g,{status:"removed",file:null,percentage:n});l.delete(g.id),d(c,a)},handleXHRProgress(a){const c=Object.assign({},g,{status:"uploading"});if(a.lengthComputable){const p=Math.ceil(a.loaded/a.total*100);c.percentage=p,n=p}d(c,a)}}}function Oi(e){const{inst:g,file:r,data:d,headers:l,withCredentials:n,action:o,customRequest:t}=e,{doChange:a}=e.inst;let c=0;t({file:r,data:d,headers:l,withCredentials:n,action:o,onProgress(p){const v=Object.assign({},r,{status:"uploading"}),x=p.percent;v.percentage=x,c=x,a(v)},onFinish(){var p;let v=Object.assign({},r,{status:"finished",percentage:c});v=pt(((p=g.onFinish)===null||p===void 0?void 0:p.call(g,{file:v}))||v),a(v)},onError(){var p;let v=Object.assign({},r,{status:"error",percentage:c});v=pt(((p=g.onError)===null||p===void 0?void 0:p.call(g,{file:v}))||v),a(v)}})}function Ui(e,g,r){const d=Di(e,g,r);r.onabort=d.handleXHRAbort,r.onerror=d.handleXHRError,r.onload=d.handleXHRLoad,r.upload&&(r.upload.onprogress=d.handleXHRProgress)}function Fr(e,g){return typeof e=="function"?e({file:g}):e||{}}function Fi(e,g,r){const d=Fr(g,r);d&&Object.keys(d).forEach(l=>{e.setRequestHeader(l,d[l])})}function Pi(e,g,r){const d=Fr(g,r);d&&Object.keys(d).forEach(l=>{e.append(l,d[l])})}function Li(e,g,r,{method:d,action:l,withCredentials:n,responseType:o,headers:t,data:a}){const c=new XMLHttpRequest;c.responseType=o,e.xhrMap.set(r.id,c),c.withCredentials=n;const p=new FormData;if(Pi(p,a,r),r.file!==null&&p.append(g,r.file),Ui(e,r,c),l!==void 0){c.open(d.toUpperCase(),l),Fi(c,t,r),c.send(p);const v=Object.assign({},r,{status:"uploading"});e.doChange(v)}}const Ni=Object.assign(Object.assign({},at.props),{name:{type:String,default:"file"},accept:String,action:String,customRequest:Function,directory:Boolean,directoryDnd:{type:Boolean,default:void 0},method:{type:String,default:"POST"},multiple:Boolean,showFileList:{type:Boolean,default:!0},data:[Object,Function],headers:[Object,Function],withCredentials:Boolean,responseType:{type:String,default:""},disabled:{type:Boolean,default:void 0},onChange:Function,onRemove:Function,onFinish:Function,onError:Function,onBeforeUpload:Function,isErrorState:Function,onDownload:Function,defaultUpload:{type:Boolean,default:!0},fileList:Array,"onUpdate:fileList":[Function,Array],onUpdateFileList:[Function,Array],fileListClass:String,fileListStyle:[String,Object],defaultFileList:{type:Array,default:()=>[]},showCancelButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showDownloadButton:Boolean,showRetryButton:{type:Boolean,default:!0},showPreviewButton:{type:Boolean,default:!0},listType:{type:String,default:"text"},onPreview:Function,shouldUseThumbnailUrl:{type:Function,default:e=>_i?Or(e):!1},createThumbnailUrl:Function,abstract:Boolean,max:Number,showTrigger:{type:Boolean,default:!0},imageGroupProps:Object,inputProps:Object,triggerClass:String,triggerStyle:[String,Object],renderIcon:Function}),ji=ke({name:"Upload",props:Ni,setup(e){e.abstract&&e.listType==="image-card"&&gt("upload","when the list-type is image-card, abstract is not supported.");const{mergedClsPrefixRef:g,inlineThemeDisabled:r}=Xt(e),d=at("Upload","-upload",Ti,gn,e,g),l=kr(e),n=pe(e.defaultFileList),o=ve(e,"fileList"),t=pe(null),a={value:!1},c=pe(!1),p=new Map,v=jt(o,n),x=fe(()=>v.value.map(pt)),f=fe(()=>{const{max:z}=e;return z!==void 0?x.value.length>=z:!1});function y(){var z;(z=t.value)===null||z===void 0||z.click()}function h(z){const M=z.target;R(M.files?Array.from(M.files).map(X=>({file:X,entry:null,source:"input"})):null,z),M.value=""}function b(z){const{"onUpdate:fileList":M,onUpdateFileList:X}=e;M&&tt(M,z),X&&tt(X,z),n.value=z}const m=fe(()=>e.multiple||e.directory),w=(z,M,X={append:!1,remove:!1})=>{const{append:k,remove:F}=X,s=Array.from(x.value),P=s.findIndex(K=>K.id===z.id);if(k||F||~P){k?s.push(z):F?s.splice(P,1):s.splice(P,1,z);const{onChange:K}=e;K&&K({file:z,fileList:s,event:M}),b(s)}};function R(z,M){if(!z||z.length===0)return;const{onBeforeUpload:X}=e;z=m.value?z:[z[0]];const{max:k,accept:F}=e;z=z.filter(({file:P,source:K})=>K==="dnd"&&(F!=null&&F.trim())?Si(P.name,P.type,F):!0),k&&(z=z.slice(0,k-x.value.length));const s=sr();Promise.all(z.map(P=>hr(this,[P],void 0,function*({file:K,entry:$}){var ee;const V={id:sr(),batchId:s,name:K.name,status:"pending",percentage:0,file:K,url:null,type:K.type,thumbnailUrl:null,fullPath:(ee=$==null?void 0:$.fullPath)!==null&&ee!==void 0?ee:`/${K.webkitRelativePath||K.name}`};return!X||(yield X({file:V,fileList:x.value}))!==!1?V:null}))).then(P=>hr(this,void 0,void 0,function*(){let K=Promise.resolve();P.forEach($=>{K=K.then(Sr).then(()=>{$&&w($,M,{append:!0})})}),yield K})).then(()=>{e.defaultUpload&&E()})}function E(z){const{method:M,action:X,withCredentials:k,headers:F,data:s,name:P}=e,K=z!==void 0?x.value.filter(ee=>ee.id===z):x.value,$=z!==void 0;K.forEach(ee=>{const{status:V}=ee;(V==="pending"||V==="error"&&$)&&(e.customRequest?Oi({inst:{doChange:w,xhrMap:p,onFinish:e.onFinish,onError:e.onError},file:ee,action:X,withCredentials:k,headers:F,data:s,customRequest:e.customRequest}):Li({doChange:w,xhrMap:p,onFinish:e.onFinish,onError:e.onError,isErrorState:e.isErrorState},P,ee,{method:M,action:X,withCredentials:k,responseType:e.responseType,headers:F,data:s}))})}function C(z){var M;if(z.thumbnailUrl)return z.thumbnailUrl;const{createThumbnailUrl:X}=e;return X?(M=X(z.file,z))!==null&&M!==void 0?M:z.url||"":z.url?z.url:z.file?wi(z.file):""}const T=fe(()=>{const{common:{cubicBezierEaseInOut:z},self:{draggerColor:M,draggerBorder:X,draggerBorderHover:k,itemColorHover:F,itemColorHoverError:s,itemTextColorError:P,itemTextColorSuccess:K,itemTextColor:$,itemIconColor:ee,itemDisabledOpacity:V,lineHeight:re,borderRadius:O,fontSize:I,itemBorderImageCardError:te,itemBorderImageCard:Y}}=d.value;return{"--n-bezier":z,"--n-border-radius":O,"--n-dragger-border":X,"--n-dragger-border-hover":k,"--n-dragger-color":M,"--n-font-size":I,"--n-item-color-hover":F,"--n-item-color-hover-error":s,"--n-item-disabled-opacity":V,"--n-item-icon-color":ee,"--n-item-text-color":$,"--n-item-text-color-error":P,"--n-item-text-color-success":K,"--n-line-height":re,"--n-item-border-image-card-error":te,"--n-item-border-image-card":Y}}),B=r?Yt("upload",void 0,T,e):void 0;Kt(st,{mergedClsPrefixRef:g,mergedThemeRef:d,showCancelButtonRef:ve(e,"showCancelButton"),showDownloadButtonRef:ve(e,"showDownloadButton"),showRemoveButtonRef:ve(e,"showRemoveButton"),showRetryButtonRef:ve(e,"showRetryButton"),onRemoveRef:ve(e,"onRemove"),onDownloadRef:ve(e,"onDownload"),mergedFileListRef:x,triggerClassRef:ve(e,"triggerClass"),triggerStyleRef:ve(e,"triggerStyle"),shouldUseThumbnailUrlRef:ve(e,"shouldUseThumbnailUrl"),renderIconRef:ve(e,"renderIcon"),xhrMap:p,submit:E,doChange:w,showPreviewButtonRef:ve(e,"showPreviewButton"),onPreviewRef:ve(e,"onPreview"),getFileThumbnailUrlResolver:C,listTypeRef:ve(e,"listType"),dragOverRef:c,openOpenFileDialog:y,draggerInsideRef:a,handleFileAddition:R,mergedDisabledRef:l.mergedDisabledRef,maxReachedRef:f,fileListClassRef:ve(e,"fileListClass"),fileListStyleRef:ve(e,"fileListStyle"),abstractRef:ve(e,"abstract"),acceptRef:ve(e,"accept"),cssVarsRef:r?void 0:T,themeClassRef:B==null?void 0:B.themeClass,onRender:B==null?void 0:B.onRender,showTriggerRef:ve(e,"showTrigger"),imageGroupPropsRef:ve(e,"imageGroupProps"),mergedDirectoryDndRef:fe(()=>{var z;return(z=e.directoryDnd)!==null&&z!==void 0?z:e.directory})});const H={clear:()=>{n.value=[]},submit:E,openOpenFileDialog:y};return Object.assign({mergedClsPrefix:g,draggerInsideRef:a,inputElRef:t,mergedTheme:d,dragOver:c,mergedMultiple:m,cssVars:r?void 0:T,themeClass:B==null?void 0:B.themeClass,onRender:B==null?void 0:B.onRender,handleFileInputChange:h},H)},render(){var e,g;const{draggerInsideRef:r,mergedClsPrefix:d,$slots:l,directory:n,onRender:o}=this;if(l.default&&!this.abstract){const a=l.default()[0];!((e=a==null?void 0:a.type)===null||e===void 0)&&e[Tr]&&(r.value=!0)}const t=U("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:"file",class:`${d}-upload-file-input`,accept:this.accept,multiple:this.mergedMultiple,onChange:this.handleFileInputChange,webkitdirectory:n||void 0,directory:n||void 0}));return this.abstract?U(Ct,null,(g=l.default)===null||g===void 0?void 0:g.call(l),U(vn,{to:"body"},t)):(o==null||o(),U("div",{class:[`${d}-upload`,r.value&&`${d}-upload--dragger-inside`,this.dragOver&&`${d}-upload--drag-over`,this.themeClass],style:this.cssVars},t,this.showTrigger&&this.listType!=="image-card"&&U(Ur,null,l),this.showFileList&&U(Ii,null,l)))}}),Mi={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},$i=Te("path",{d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Hi=Te("path",{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z",fill:"currentColor"},null,-1),Wi=Te("path",{d:"M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z",fill:"currentColor"},null,-1),Zi=[$i,Hi,Wi],Vi=ke({name:"CreateOutline",render:function(g,r){return je(),rt("svg",Mi,Zi)}}),qi={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Gi=Te("path",{d:"M432 144l-28.67 275.74A32 32 0 0 1 371.55 448H140.46a32 32 0 0 1-31.78-28.26L80 144",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Xi=Te("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ki=Te("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M312 240L200 352"},null,-1),Yi=Te("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M312 352L200 240"},null,-1),Ji=[Gi,Xi,Ki,Yi],Qi=ke({name:"TrashBinOutline",render:function(g,r){return je(),rt("svg",qi,Ji)}});function mt(e,g){let r=!1;const{x:d,y:l}=e,n=g.length;for(let o=0,t=n-1;o<n;t=o++){const a=g[o].x,c=g[o].y,p=g[t].x,v=g[t].y;c>l!=v>l&&d<(p-a)*(l-c)/(v-c)+a&&(r=!r)}return r}const Pr=pe(),xe={x:0,y:0};let Ie=1,et=.1,fr=4,pr=et,Lr=.4;const Ze=pe([{name:"头盔",color:"#18a058"},{name:"口罩",color:"#f0a020"},{name:"飞机",color:"#2080f0"}]);let $e=[];const ae=pe(),zt=pe(!1);let J,Ne=7;const Nr=pe();function er(){const e=$e.map(g=>({name:g.name,...g.points}));J&&e.push({name:J.name,...J.points}),Nr.value=e}let me;const Et=new Image;function jr(e,g){const{naturalWidth:r,naturalHeight:d}=Et,l=r/d,o=e/g<=l,t=o?e:g*l,a=o?e/l:g,c=o?0:(e-t)/2,p=o?(g-a)/2:0;return{width:Ie*t,height:Ie*a,left:Ie*c+xe.x,top:Ie*p+xe.y}}function Vt(e,g,r,d){const{ctx:l,left:n,top:o,width:t,height:a}=me,c=18*Ie,p=5*Ie;l.font=c+"px serif";let v=l.measureText(r);l.fillStyle=d,l.fillRect(n+e*t,o+g*a-(c+2*p),v.width+2*p,c+2*p),l.fillStyle="white",l.textBaseline="bottom",l.fillText(r,n+e*t+p,o+g*a-p)}function eo(){const{ctx:e,left:g,top:r,width:d,height:l}=me;function n(o,t,a,c,p){e.fillStyle=p+(255*Lr).toString(16).split(".")[0],e.fillRect(o,t,a,c),e.strokeStyle=p,e.strokeRect(o,t,a,c)}if($e.forEach(o=>{n(g+o.points.x*d,r+o.points.y*l,o.points.w*d,o.points.h*l,o.color),Vt(o.points.x,o.points.y,o.name,o.color)}),ae.value&&ae.value.points.length>1){const o=Math.min(ae.value.points[0].x,ae.value.points[1].x),t=Math.min(ae.value.points[0].y,ae.value.points[1].y),a=Math.max(ae.value.points[0].x,ae.value.points[1].x)-o,c=Math.max(ae.value.points[0].y,ae.value.points[1].y)-t;n(g+o*d,r+t*l,a*d,c*l,ae.value.color),Vt(o,t,ae.value.name,ae.value.color)}}function At(){J&&($e.push(J),J=void 0)}function Mr(){if(!J)return;const{left:e,top:g,width:r,height:d}=me,{x:l,y:n,w:o,h:t}=J.points;return[{x:l,y:n,type:"left-top"},{x:l+o/2,y:n,type:"center-top"},{x:l+o,y:n,type:"right-top"},{x:l+o,y:n+t/2,type:"right-center"},{x:l+o,y:n+t,type:"right-bottom"},{x:l+o/2,y:n+t,type:"center-bottom"},{x:l,y:n+t,type:"left-bottom"},{x:l,y:n+t/2,type:"left-center"}].map(({x:c,y:p,type:v})=>({x:c*r+e,y:p*d+g,type:v}))}function $r(e,g){const r=Mr();if(!r)return;const{dom:d}=me,{x:l,y:n}=d.getBoundingClientRect();function o(t){const a=t.x+l,c=t.y+n;return[{x:a-Ne,y:c-Ne},{x:a+Ne,y:c-Ne},{x:a+Ne,y:c+Ne},{x:a-Ne,y:c+Ne}]}return r.find(t=>mt({x:e,y:g},o(t)))}function to(){if(!J)return;const{ctx:e,left:g,top:r,width:d,height:l}=me,{points:n,color:o}=J,t=g+n.x*d,a=r+n.y*l,c=n.w*d,p=n.h*l;e.fillStyle=o+(255*Lr).toString(16).split(".")[0],e.fillRect(t,a,c,p),e.strokeStyle="white",e.strokeRect(t,a,c,p),Vt(n.x,n.y,J.name,J.color);const v=Mr();v==null||v.forEach(({x,y:f})=>{e.strokeStyle=o,e.beginPath(),e.arc(x,f,Ne,0,2*Math.PI),e.stroke(),e.fillStyle="white",e.fill()})}function ro(){const{clientWidth:e,clientHeight:g,ctx:r}=me,{left:d,top:l,width:n,height:o}=jr(e,g);r.drawImage(Et,d,l,n,o)}function De(){const e=Pr.value,g=e.getContext("2d");if(!e||!g)return;const{clientWidth:r,clientHeight:d}=e;e.width=r,e.height=d;const{x:l,y:n}=e.getBoundingClientRect(),{left:o,top:t,width:a,height:c}=jr(r,d);g.clearRect(xe.x,xe.y,r+xe.x,d+xe.y),me={dom:e,ctx:g,clientWidth:r,clientHeight:d,x:l,y:n,left:o,top:t,width:a,height:c},ro(),eo(),to()}let tr=!1,rr=!1,ue,Ue={};function Hr(e){if(!me)return;const{clientX:g,clientY:r}=e,{left:d,top:l,width:n,height:o,x:t,y:a}=me;return{x:(g-(t+d))/n,y:(r-(a+l))/o}}function Bt(e){const{left:g,top:r,width:d,height:l}=me,n=g+e.points.x*d,o=r+e.points.y*l,t=e.points.w*d,a=e.points.h*l;return[{x:n,y:o},{x:n+t,y:o},{x:n+t,y:o+a},{x:n,y:o+a}]}const mr=function(){const e=lr(()=>window.$message.warning(`放大到最大值了！ ${fr} 倍`),200),g=lr(()=>window.$message.warning(`缩小到最小值了！ ${pr} 倍`),200);return function(r){if(!me)return;const{x:d,y:l}=me,{deltaY:n,clientX:o,clientY:t}=r;function a(){const p=d+xe.x,v=l+xe.y,x=o-p,f=t-v,y=n>0?-et:et,h=Ie-y,b=x/h*y,m=f/h*y;o<p?xe.x+=b:o>p&&(xe.x-=b),t<v?xe.y+=m:t>v&&(xe.y-=m),De()}function c(){var p;if(n<0&&Ie>=fr)e();else if(n>0&&Ie<=pr)g();else{const v=((p=et.toString().split(".")[1])==null?void 0:p.length)||0,x=n>0?-et:et;Ie=Number((Ie+x).toFixed(v)),a()}}c()}}();function gr(e){const{clientX:g,clientY:r}=e;if(!(!me||tr)){if(ae.value){const d=Hr(e);if(d===void 0)return;if(ae.value.points.length===0)ae.value.points[0]=d;else{const l=Math.min(ae.value.points[0].x,d.x),n=Math.min(ae.value.points[0].y,d.y),o=Math.max(ae.value.points[0].x,d.x)-l,t=Math.max(ae.value.points[0].y,d.y)-n;if($e.push({id:Jt(),name:ae.value.name,color:ae.value.color,points:{x:l,y:n,w:o,h:t}}),er(),zt.value){const a=ae.value;ae.value={name:a.name,color:a.color,points:[]}}else ae.value=void 0}De()}else if(!ue){const{x:d,y:l}=me;if(J&&mt({x:g-d,y:r-l},Bt(J)))At(),De();else{const o=[...$e];o.sort((a,c)=>a.points.w*a.points.h-c.points.w*c.points.h);const t=o.find(a=>mt({x:g-d,y:r-l},Bt(a)));At(),t&&($e=$e.filter(a=>a.id!==t.id),J=t),De()}}}}function vr(e){const{clientX:g,clientY:r}=e;if(!me)return;const{x:d,y:l,dom:n}=me;if(J){const o=$r(g,r),t=J&&mt({x:g-d,y:r-l},Bt(J));(o||t)&&(ue=o?o.type:"box",Ue={x:g,y:r},t&&!o&&(n.style.cursor="move"))}else ae.value||(rr=!0)}function br(){if(Ue={},rr=!1,requestAnimationFrame(()=>{ue=void 0,tr=!1}),!me)return;const{dom:e}=me;e.style.cursor="inherit"}const Wr={"left-top":"nwse-resize","center-top":"ns-resize","right-top":"nesw-resize","right-center":"ew-resize","right-bottom":"nwse-resize","center-bottom":"ns-resize","left-bottom":"nesw-resize","left-center":"ew-resize"};function no(e,g){if(!ue)return;const{x:r,y:d}=Ue;if(r===void 0||d===void 0||!J)return;const{width:l,height:n,dom:o}=me,t={x:(e-r)/l,y:(g-d)/n};if(Ue={x:e,y:g},ue=="left-top"){J.points.x+=t.x,J.points.y+=t.y,J.points.w+=-t.x,J.points.h+=-t.y;const a=J.points.w<0,c=J.points.h<0;a&&c?ue="right-bottom":a?ue="right-top":c&&(ue="left-bottom")}else if(ue=="center-top")J.points.y+=t.y,J.points.h+=-t.y,J.points.h<0&&(ue="center-bottom");else if(ue=="right-top"){J.points.y+=t.y,J.points.w+=t.x,J.points.h+=-t.y;const a=J.points.w<0,c=J.points.h<0;a&&c?ue="left-bottom":a?ue="left-top":c&&(ue="right-bottom")}else if(ue=="right-center")J.points.w+=t.x,J.points.w<0&&(ue="left-center");else if(ue=="right-bottom"){J.points.w+=t.x,J.points.h+=t.y;const a=J.points.w<0,c=J.points.h<0;a&&c?ue="left-top":a?ue="left-bottom":c&&(ue="right-top")}else if(ue=="center-bottom")J.points.h+=t.y,J.points.h<0&&(ue="center-top");else if(ue=="left-bottom"){J.points.x+=t.x,J.points.w+=-t.x,J.points.h+=t.y;const a=J.points.w<0,c=J.points.h<0;a&&c?ue="right-top":a?ue="right-bottom":c&&(ue="left-top")}else ue=="left-center"?(J.points.x+=t.x,J.points.w+=-t.x,J.points.w<0&&(ue="right-center")):ue=="box"&&(J.points.x+=t.x,J.points.y+=t.y);ue!="box"&&(o.style.cursor=Wr[ue]),J.points.w<0&&(J.points.x+=J.points.w,J.points.w=-J.points.w),J.points.h<0&&(J.points.y+=J.points.h,J.points.h=-J.points.h),er(),De()}function yr(e){const{clientX:g,clientY:r}=e;if(me){if(rr)Ue.x!==void 0&&Ue.y!==void 0&&(tr=!0,xe.x+=g-Ue.x,xe.y+=r-Ue.y,De()),Ue.x=g,Ue.y=r;else if(ae.value!==void 0&&ae.value.points.length>0){const d=Hr(e);if(d===void 0)return;ae.value.points[1]=d,De()}else if(J)if(ue)no(g,r);else{const{x:d,y:l,dom:n}=me,o=$r(g,r),t=mt({x:g-d,y:r-l},Bt(J));o||t?n.style.cursor=o?Wr[o.type]:"move":n.style.cursor="inherit"}}}function wr(e){if(me&&e.key==="Delete"){const g=!!ae.value,r=!!J;ae.value=void 0,J=void 0,r&&er(),(g||r)&&De()}}function _r(e){if(me)if(e.preventDefault(),ae.value){const g=ae.value.points.length>0;ae.value=void 0,g&&De()}else J&&(At(),De())}function io(e){const g=Ze.value[e];!me||!g||(ae.value={...g,points:[]},J&&At())}function Ft(e){if($e=[],J=void 0,ae.value=void 0,e){const{src:g}=e;Et.src=g,$e=e.boxList.map(r=>{const d=Ze.value.find(n=>n.name===r.name);if(!d)return;const l={...r};return delete l.name,{id:Jt(),name:r.name,color:d.color,points:l}}).filter(Boolean),Et.onload=function(){Ie=1,xe.x=0,xe.y=0,De()}}else if(me){const{ctx:g,clientWidth:r,clientHeight:d}=me;g.clearRect(xe.x,xe.y,r+xe.x,d+xe.y)}}function oo(){const e="0123456789ABCDEF";let g="#";for(let r=0;r<6;r++)g+=e[Math.floor(Math.random()*16)];return g}function ao(e){return()=>U(zr,null,{default:()=>U(e)})}function so(){const e=pe(oo()),g=pe("你好啊你好");window.$dialog.create({icon:ao(Vi),title:"添加方框类别",content:()=>U(St,{vertical:!0},()=>[U(Er,{label:"类别名称",value:g.value,onUpdateValue:r=>g.value=r}),U(pi,{modes:["hex"],"show-alpha":!1,label:"类别颜色",value:e.value,onUpdateValue:r=>e.value=r})]),positiveText:"添加",negativeText:"取消",onPositiveClick:()=>{Ze.value.push({name:g.value,color:e.value})}})}const lo=""+new URL("1-D6MQjZe8.avif",import.meta.url).href,uo=""+new URL("2-BR1XFc7x.avif",import.meta.url).href;function kt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,g){(function(r){e.exports=r()})(function(){return function r(d,l,n){function o(c,p){if(!l[c]){if(!d[c]){var v=typeof kt=="function"&&kt;if(!p&&v)return v(c,!0);if(t)return t(c,!0);var x=new Error("Cannot find module '"+c+"'");throw x.code="MODULE_NOT_FOUND",x}var f=l[c]={exports:{}};d[c][0].call(f.exports,function(y){var h=d[c][1][y];return o(h||y)},f,f.exports,r,d,l,n)}return l[c].exports}for(var t=typeof kt=="function"&&kt,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(r,d,l){var n=r("./utils"),o=r("./support"),t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l.encode=function(a){for(var c,p,v,x,f,y,h,b=[],m=0,w=a.length,R=w,E=n.getTypeOf(a)!=="string";m<a.length;)R=w-m,v=E?(c=a[m++],p=m<w?a[m++]:0,m<w?a[m++]:0):(c=a.charCodeAt(m++),p=m<w?a.charCodeAt(m++):0,m<w?a.charCodeAt(m++):0),x=c>>2,f=(3&c)<<4|p>>4,y=1<R?(15&p)<<2|v>>6:64,h=2<R?63&v:64,b.push(t.charAt(x)+t.charAt(f)+t.charAt(y)+t.charAt(h));return b.join("")},l.decode=function(a){var c,p,v,x,f,y,h=0,b=0,m="data:";if(a.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var w,R=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===t.charAt(64)&&R--,a.charAt(a.length-2)===t.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=o.uint8array?new Uint8Array(0|R):new Array(0|R);h<a.length;)c=t.indexOf(a.charAt(h++))<<2|(x=t.indexOf(a.charAt(h++)))>>4,p=(15&x)<<4|(f=t.indexOf(a.charAt(h++)))>>2,v=(3&f)<<6|(y=t.indexOf(a.charAt(h++))),w[b++]=c,f!==64&&(w[b++]=p),y!==64&&(w[b++]=v);return w}},{"./support":30,"./utils":32}],2:[function(r,d,l){var n=r("./external"),o=r("./stream/DataWorker"),t=r("./stream/Crc32Probe"),a=r("./stream/DataLengthProbe");function c(p,v,x,f,y){this.compressedSize=p,this.uncompressedSize=v,this.crc32=x,this.compression=f,this.compressedContent=y}c.prototype={getContentWorker:function(){var p=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),v=this;return p.on("end",function(){if(this.streamInfo.data_length!==v.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(p,v,x){return p.pipe(new t).pipe(new a("uncompressedSize")).pipe(v.compressWorker(x)).pipe(new a("compressedSize")).withStreamInfo("compression",v)},d.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,d,l){var n=r("./stream/GenericWorker");l.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},l.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,d,l){var n=r("./utils"),o=function(){for(var t,a=[],c=0;c<256;c++){t=c;for(var p=0;p<8;p++)t=1&t?3988292384^t>>>1:t>>>1;a[c]=t}return a}();d.exports=function(t,a){return t!==void 0&&t.length?n.getTypeOf(t)!=="string"?function(c,p,v,x){var f=o,y=x+v;c^=-1;for(var h=x;h<y;h++)c=c>>>8^f[255&(c^p[h])];return-1^c}(0|a,t,t.length,0):function(c,p,v,x){var f=o,y=x+v;c^=-1;for(var h=x;h<y;h++)c=c>>>8^f[255&(c^p.charCodeAt(h))];return-1^c}(0|a,t,t.length,0):0}},{"./utils":32}],5:[function(r,d,l){l.base64=!1,l.binary=!1,l.dir=!1,l.createFolders=!0,l.date=null,l.compression=null,l.compressionOptions=null,l.comment=null,l.unixPermissions=null,l.dosPermissions=null},{}],6:[function(r,d,l){var n=null;n=typeof Promise<"u"?Promise:r("lie"),d.exports={Promise:n}},{lie:37}],7:[function(r,d,l){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),t=r("./utils"),a=r("./stream/GenericWorker"),c=n?"uint8array":"array";function p(v,x){a.call(this,"FlateWorker/"+v),this._pako=null,this._pakoAction=v,this._pakoOptions=x,this.meta={}}l.magic="\b\0",t.inherits(p,a),p.prototype.processChunk=function(v){this.meta=v.meta,this._pako===null&&this._createPako(),this._pako.push(t.transformTo(c,v.data),!1)},p.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var v=this;this._pako.onData=function(x){v.push({data:x,meta:v.meta})}},l.compressWorker=function(v){return new p("Deflate",v)},l.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,d,l){function n(f,y){var h,b="";for(h=0;h<y;h++)b+=String.fromCharCode(255&f),f>>>=8;return b}function o(f,y,h,b,m,w){var R,E,C=f.file,T=f.compression,B=w!==c.utf8encode,H=t.transformTo("string",w(C.name)),z=t.transformTo("string",c.utf8encode(C.name)),M=C.comment,X=t.transformTo("string",w(M)),k=t.transformTo("string",c.utf8encode(M)),F=z.length!==C.name.length,s=k.length!==M.length,P="",K="",$="",ee=C.dir,V=C.date,re={crc32:0,compressedSize:0,uncompressedSize:0};y&&!h||(re.crc32=f.crc32,re.compressedSize=f.compressedSize,re.uncompressedSize=f.uncompressedSize);var O=0;y&&(O|=8),B||!F&&!s||(O|=2048);var I=0,te=0;ee&&(I|=16),m==="UNIX"?(te=798,I|=function(G,oe){var Ce=G;return G||(Ce=oe?16893:33204),(65535&Ce)<<16}(C.unixPermissions,ee)):(te=20,I|=function(G){return 63&(G||0)}(C.dosPermissions)),R=V.getUTCHours(),R<<=6,R|=V.getUTCMinutes(),R<<=5,R|=V.getUTCSeconds()/2,E=V.getUTCFullYear()-1980,E<<=4,E|=V.getUTCMonth()+1,E<<=5,E|=V.getUTCDate(),F&&(K=n(1,1)+n(p(H),4)+z,P+="up"+n(K.length,2)+K),s&&($=n(1,1)+n(p(X),4)+k,P+="uc"+n($.length,2)+$);var Y="";return Y+=`
\0`,Y+=n(O,2),Y+=T.magic,Y+=n(R,2),Y+=n(E,2),Y+=n(re.crc32,4),Y+=n(re.compressedSize,4),Y+=n(re.uncompressedSize,4),Y+=n(H.length,2),Y+=n(P.length,2),{fileRecord:v.LOCAL_FILE_HEADER+Y+H+P,dirRecord:v.CENTRAL_FILE_HEADER+n(te,2)+Y+n(X.length,2)+"\0\0\0\0"+n(I,4)+n(b,4)+H+P+X}}var t=r("../utils"),a=r("../stream/GenericWorker"),c=r("../utf8"),p=r("../crc32"),v=r("../signature");function x(f,y,h,b){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=h,this.encodeFileName=b,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}t.inherits(x,a),x.prototype.push=function(f){var y=f.meta.percent||0,h=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,a.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:h?(y+100*(h-b-1))/h:100}}))},x.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var y=this.streamFiles&&!f.file.dir;if(y){var h=o(f,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(f){this.accumulate=!1;var y=this.streamFiles&&!f.file.dir,h=o(f,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),y)this.push({data:function(b){return v.DATA_DESCRIPTOR+n(b.crc32,4)+n(b.compressedSize,4)+n(b.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var f=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var h=this.bytesWritten-f,b=function(m,w,R,E,C){var T=t.transformTo("string",C(E));return v.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(m,2)+n(m,2)+n(w,4)+n(R,4)+n(T.length,2)+T}(this.dirRecords.length,h,f,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(f){this._sources.push(f);var y=this;return f.on("data",function(h){y.processChunk(h)}),f.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),f.on("error",function(h){y.error(h)}),this},x.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(f){var y=this._sources;if(!a.prototype.error.call(this,f))return!1;for(var h=0;h<y.length;h++)try{y[h].error(f)}catch{}return!0},x.prototype.lock=function(){a.prototype.lock.call(this);for(var f=this._sources,y=0;y<f.length;y++)f[y].lock()},d.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,d,l){var n=r("../compressions"),o=r("./ZipFileWorker");l.generateWorker=function(t,a,c){var p=new o(a.streamFiles,c,a.platform,a.encodeFileName),v=0;try{t.forEach(function(x,f){v++;var y=function(w,R){var E=w||R,C=n[E];if(!C)throw new Error(E+" is not a valid compression method !");return C}(f.options.compression,a.compression),h=f.options.compressionOptions||a.compressionOptions||{},b=f.dir,m=f.date;f._compressWorker(y,h).withStreamInfo("file",{name:x,dir:b,date:m,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(p)}),p.entriesCount=v}catch(x){p.error(x)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,d,l){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new n;for(var t in this)typeof this[t]!="function"&&(o[t]=this[t]);return o}}(n.prototype=r("./object")).loadAsync=r("./load"),n.support=r("./support"),n.defaults=r("./defaults"),n.version="3.10.1",n.loadAsync=function(o,t){return new n().loadAsync(o,t)},n.external=r("./external"),d.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,d,l){var n=r("./utils"),o=r("./external"),t=r("./utf8"),a=r("./zipEntries"),c=r("./stream/Crc32Probe"),p=r("./nodejsUtils");function v(x){return new o.Promise(function(f,y){var h=x.decompressed.getContentWorker().pipe(new c);h.on("error",function(b){y(b)}).on("end",function(){h.streamInfo.crc32!==x.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}d.exports=function(x,f){var y=this;return f=n.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:t.utf8decode}),p.isNode&&p.isStream(x)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",x,!0,f.optimizedBinaryString,f.base64).then(function(h){var b=new a(f);return b.load(h),b}).then(function(h){var b=[o.Promise.resolve(h)],m=h.files;if(f.checkCRC32)for(var w=0;w<m.length;w++)b.push(v(m[w]));return o.Promise.all(b)}).then(function(h){for(var b=h.shift(),m=b.files,w=0;w<m.length;w++){var R=m[w],E=R.fileNameStr,C=n.resolve(R.fileNameStr);y.file(C,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:f.createFolders}),R.dir||(y.file(C).unsafeOriginalName=E)}return b.zipComment.length&&(y.comment=b.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,d,l){var n=r("../utils"),o=r("../stream/GenericWorker");function t(a,c){o.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(c)}n.inherits(t,o),t.prototype._bindStream=function(a){var c=this;(this._stream=a).pause(),a.on("data",function(p){c.push({data:p,meta:{percent:0}})}).on("error",function(p){c.isPaused?this.generatedError=p:c.error(p)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},t.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},t.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},d.exports=t},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,d,l){var n=r("readable-stream").Readable;function o(t,a,c){n.call(this,a),this._helper=t;var p=this;t.on("data",function(v,x){p.push(v)||p._helper.pause(),c&&c(x)}).on("error",function(v){p.emit("error",v)}).on("end",function(){p.push(null)})}r("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},d.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,d,l){d.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,o);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,o)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var o=new Buffer(n);return o.fill(0),o},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(r,d,l){function n(C,T,B){var H,z=t.getTypeOf(T),M=t.extend(B||{},p);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(C=m(C)),M.createFolders&&(H=b(C))&&w.call(this,H,!0);var X=z==="string"&&M.binary===!1&&M.base64===!1;B&&B.binary!==void 0||(M.binary=!X),(T instanceof v&&T.uncompressedSize===0||M.dir||!T||T.length===0)&&(M.base64=!1,M.binary=!0,T="",M.compression="STORE",z="string");var k=null;k=T instanceof v||T instanceof a?T:y.isNode&&y.isStream(T)?new h(C,T):t.prepareContent(C,T,M.binary,M.optimizedBinaryString,M.base64);var F=new x(C,k,M);this.files[C]=F}var o=r("./utf8"),t=r("./utils"),a=r("./stream/GenericWorker"),c=r("./stream/StreamHelper"),p=r("./defaults"),v=r("./compressedObject"),x=r("./zipObject"),f=r("./generate"),y=r("./nodejsUtils"),h=r("./nodejs/NodejsStreamInputAdapter"),b=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var T=C.lastIndexOf("/");return 0<T?C.substring(0,T):""},m=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},w=function(C,T){return T=T!==void 0?T:p.createFolders,C=m(C),this.files[C]||n.call(this,C,null,{dir:!0,createFolders:T}),this.files[C]};function R(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var T,B,H;for(T in this.files)H=this.files[T],(B=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&C(B,H)},filter:function(C){var T=[];return this.forEach(function(B,H){C(B,H)&&T.push(H)}),T},file:function(C,T,B){if(arguments.length!==1)return C=this.root+C,n.call(this,C,T,B),this;if(R(C)){var H=C;return this.filter(function(M,X){return!X.dir&&H.test(M)})}var z=this.files[this.root+C];return z&&!z.dir?z:null},folder:function(C){if(!C)return this;if(R(C))return this.filter(function(z,M){return M.dir&&C.test(z)});var T=this.root+C,B=w.call(this,T),H=this.clone();return H.root=B.name,H},remove:function(C){C=this.root+C;var T=this.files[C];if(T||(C.slice(-1)!=="/"&&(C+="/"),T=this.files[C]),T&&!T.dir)delete this.files[C];else for(var B=this.filter(function(z,M){return M.name.slice(0,C.length)===C}),H=0;H<B.length;H++)delete this.files[B[H].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var T,B={};try{if((B=t.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");t.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var H=B.comment||this.comment||"";T=f.generateWorker(this,B,H)}catch(z){(T=new a("error")).error(z)}return new c(T,B.type||"string",B.mimeType)},generateAsync:function(C,T){return this.generateInternalStream(C).accumulate(T)},generateNodeStream:function(C,T){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(T)}};d.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,d,l){d.exports=r("stream")},{stream:void 0}],17:[function(r,d,l){var n=r("./DataReader");function o(t){n.call(this,t);for(var a=0;a<this.data.length;a++)t[a]=255&t[a]}r("../utils").inherits(o,n),o.prototype.byteAt=function(t){return this.data[this.zero+t]},o.prototype.lastIndexOfSignature=function(t){for(var a=t.charCodeAt(0),c=t.charCodeAt(1),p=t.charCodeAt(2),v=t.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===a&&this.data[x+1]===c&&this.data[x+2]===p&&this.data[x+3]===v)return x-this.zero;return-1},o.prototype.readAndCheckSignature=function(t){var a=t.charCodeAt(0),c=t.charCodeAt(1),p=t.charCodeAt(2),v=t.charCodeAt(3),x=this.readData(4);return a===x[0]&&c===x[1]&&p===x[2]&&v===x[3]},o.prototype.readData=function(t){if(this.checkOffset(t),t===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,a},d.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,d,l){var n=r("../utils");function o(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var a,c=0;for(this.checkOffset(t),a=this.index+t-1;a>=this.index;a--)c=(c<<8)+this.byteAt(a);return this.index+=t,c},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},d.exports=o},{"../utils":32}],19:[function(r,d,l){var n=r("./Uint8ArrayReader");function o(t){n.call(this,t)}r("../utils").inherits(o,n),o.prototype.readData=function(t){this.checkOffset(t);var a=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,a},d.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,d,l){var n=r("./DataReader");function o(t){n.call(this,t)}r("../utils").inherits(o,n),o.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},o.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},o.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},o.prototype.readData=function(t){this.checkOffset(t);var a=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,a},d.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,d,l){var n=r("./ArrayReader");function o(t){n.call(this,t)}r("../utils").inherits(o,n),o.prototype.readData=function(t){if(this.checkOffset(t),t===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,a},d.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,d,l){var n=r("../utils"),o=r("../support"),t=r("./ArrayReader"),a=r("./StringReader"),c=r("./NodeBufferReader"),p=r("./Uint8ArrayReader");d.exports=function(v){var x=n.getTypeOf(v);return n.checkSupport(x),x!=="string"||o.uint8array?x==="nodebuffer"?new c(v):o.uint8array?new p(n.transformTo("uint8array",v)):new t(n.transformTo("array",v)):new a(v)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,d,l){l.LOCAL_FILE_HEADER="PK",l.CENTRAL_FILE_HEADER="PK",l.CENTRAL_DIRECTORY_END="PK",l.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",l.ZIP64_CENTRAL_DIRECTORY_END="PK",l.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,d,l){var n=r("./GenericWorker"),o=r("../utils");function t(a){n.call(this,"ConvertWorker to "+a),this.destType=a}o.inherits(t,n),t.prototype.processChunk=function(a){this.push({data:o.transformTo(this.destType,a.data),meta:a.meta})},d.exports=t},{"../utils":32,"./GenericWorker":28}],25:[function(r,d,l){var n=r("./GenericWorker"),o=r("../crc32");function t(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(t,n),t.prototype.processChunk=function(a){this.streamInfo.crc32=o(a.data,this.streamInfo.crc32||0),this.push(a)},d.exports=t},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,d,l){var n=r("../utils"),o=r("./GenericWorker");function t(a){o.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}n.inherits(t,o),t.prototype.processChunk=function(a){if(a){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+a.data.length}o.prototype.processChunk.call(this,a)},d.exports=t},{"../utils":32,"./GenericWorker":28}],27:[function(r,d,l){var n=r("../utils"),o=r("./GenericWorker");function t(a){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(p){c.dataIsReady=!0,c.data=p,c.max=p&&p.length||0,c.type=n.getTypeOf(p),c.isPaused||c._tickAndRepeat()},function(p){c.error(p)})}n.inherits(t,o),t.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},t.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},t.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},t.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,c);break;case"uint8array":a=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":a=this.data.slice(this.index,c)}return this.index=c,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},d.exports=t},{"../utils":32,"./GenericWorker":28}],28:[function(r,d,l){function n(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,t){return this._listeners[o].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,t){if(this._listeners[o])for(var a=0;a<this._listeners[o].length;a++)this._listeners[o][a].call(this,t)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var t=this;return o.on("data",function(a){t.processChunk(a)}),o.on("end",function(){t.end()}),o.on("error",function(a){t.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,t){return this.extraStreamInfo[o]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},d.exports=n},{}],29:[function(r,d,l){var n=r("../utils"),o=r("./ConvertWorker"),t=r("./GenericWorker"),a=r("../base64"),c=r("../support"),p=r("../external"),v=null;if(c.nodestream)try{v=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function x(y,h){return new p.Promise(function(b,m){var w=[],R=y._internalType,E=y._outputType,C=y._mimeType;y.on("data",function(T,B){w.push(T),h&&h(B)}).on("error",function(T){w=[],m(T)}).on("end",function(){try{var T=function(B,H,z){switch(B){case"blob":return n.newBlob(n.transformTo("arraybuffer",H),z);case"base64":return a.encode(H);default:return n.transformTo(B,H)}}(E,function(B,H){var z,M=0,X=null,k=0;for(z=0;z<H.length;z++)k+=H[z].length;switch(B){case"string":return H.join("");case"array":return Array.prototype.concat.apply([],H);case"uint8array":for(X=new Uint8Array(k),z=0;z<H.length;z++)X.set(H[z],M),M+=H[z].length;return X;case"nodebuffer":return Buffer.concat(H);default:throw new Error("concat : unsupported type '"+B+"'")}}(R,w),C);b(T)}catch(B){m(B)}w=[]}).resume()})}function f(y,h,b){var m=h;switch(h){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=h,this._mimeType=b,n.checkSupport(m),this._worker=y.pipe(new o(m)),y.lock()}catch(w){this._worker=new t("error"),this._worker.error(w)}}f.prototype={accumulate:function(y){return x(this,y)},on:function(y,h){var b=this;return y==="data"?this._worker.on(y,function(m){h.call(b,m.data,m.meta)}):this._worker.on(y,function(){n.delay(h,arguments,b)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new v(this,{objectMode:this._outputType!=="nodebuffer"},y)}},d.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,d,l){if(l.base64=!0,l.array=!0,l.string=!0,l.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",l.nodebuffer=typeof Buffer<"u",l.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")l.blob=!1;else{var n=new ArrayBuffer(0);try{l.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(n),l.blob=o.getBlob("application/zip").size===0}catch{l.blob=!1}}}try{l.nodestream=!!r("readable-stream").Readable}catch{l.nodestream=!1}},{"readable-stream":16}],31:[function(r,d,l){for(var n=r("./utils"),o=r("./support"),t=r("./nodejsUtils"),a=r("./stream/GenericWorker"),c=new Array(256),p=0;p<256;p++)c[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;c[254]=c[254]=1;function v(){a.call(this,"utf-8 decode"),this.leftOver=null}function x(){a.call(this,"utf-8 encode")}l.utf8encode=function(f){return o.nodebuffer?t.newBufferFrom(f,"utf-8"):function(y){var h,b,m,w,R,E=y.length,C=0;for(w=0;w<E;w++)(64512&(b=y.charCodeAt(w)))==55296&&w+1<E&&(64512&(m=y.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),w++),C+=b<128?1:b<2048?2:b<65536?3:4;for(h=o.uint8array?new Uint8Array(C):new Array(C),w=R=0;R<C;w++)(64512&(b=y.charCodeAt(w)))==55296&&w+1<E&&(64512&(m=y.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),w++),b<128?h[R++]=b:(b<2048?h[R++]=192|b>>>6:(b<65536?h[R++]=224|b>>>12:(h[R++]=240|b>>>18,h[R++]=128|b>>>12&63),h[R++]=128|b>>>6&63),h[R++]=128|63&b);return h}(f)},l.utf8decode=function(f){return o.nodebuffer?n.transformTo("nodebuffer",f).toString("utf-8"):function(y){var h,b,m,w,R=y.length,E=new Array(2*R);for(h=b=0;h<R;)if((m=y[h++])<128)E[b++]=m;else if(4<(w=c[m]))E[b++]=65533,h+=w-1;else{for(m&=w===2?31:w===3?15:7;1<w&&h<R;)m=m<<6|63&y[h++],w--;1<w?E[b++]=65533:m<65536?E[b++]=m:(m-=65536,E[b++]=55296|m>>10&1023,E[b++]=56320|1023&m)}return E.length!==b&&(E.subarray?E=E.subarray(0,b):E.length=b),n.applyFromCharCode(E)}(f=n.transformTo(o.uint8array?"uint8array":"array",f))},n.inherits(v,a),v.prototype.processChunk=function(f){var y=n.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var h=y;(y=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),y.set(h,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var b=function(w,R){var E;for((R=R||w.length)>w.length&&(R=w.length),E=R-1;0<=E&&(192&w[E])==128;)E--;return E<0||E===0?R:E+c[w[E]]>R?E:R}(y),m=y;b!==y.length&&(o.uint8array?(m=y.subarray(0,b),this.leftOver=y.subarray(b,y.length)):(m=y.slice(0,b),this.leftOver=y.slice(b,y.length))),this.push({data:l.utf8decode(m),meta:f.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:l.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},l.Utf8DecodeWorker=v,n.inherits(x,a),x.prototype.processChunk=function(f){this.push({data:l.utf8encode(f.data),meta:f.meta})},l.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,d,l){var n=r("./support"),o=r("./base64"),t=r("./nodejsUtils"),a=r("./external");function c(h){return h}function p(h,b){for(var m=0;m<h.length;++m)b[m]=255&h.charCodeAt(m);return b}r("setimmediate"),l.newBlob=function(h,b){l.checkSupport("blob");try{return new Blob([h],{type:b})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(h),m.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(h,b,m){var w=[],R=0,E=h.length;if(E<=m)return String.fromCharCode.apply(null,h);for(;R<E;)b==="array"||b==="nodebuffer"?w.push(String.fromCharCode.apply(null,h.slice(R,Math.min(R+m,E)))):w.push(String.fromCharCode.apply(null,h.subarray(R,Math.min(R+m,E)))),R+=m;return w.join("")},stringifyByChar:function(h){for(var b="",m=0;m<h.length;m++)b+=String.fromCharCode(h[m]);return b},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,t.allocBuffer(1)).length===1}catch{return!1}}()}};function x(h){var b=65536,m=l.getTypeOf(h),w=!0;if(m==="uint8array"?w=v.applyCanBeUsed.uint8array:m==="nodebuffer"&&(w=v.applyCanBeUsed.nodebuffer),w)for(;1<b;)try{return v.stringifyByChunk(h,m,b)}catch{b=Math.floor(b/2)}return v.stringifyByChar(h)}function f(h,b){for(var m=0;m<h.length;m++)b[m]=h[m];return b}l.applyFromCharCode=x;var y={};y.string={string:c,array:function(h){return p(h,new Array(h.length))},arraybuffer:function(h){return y.string.uint8array(h).buffer},uint8array:function(h){return p(h,new Uint8Array(h.length))},nodebuffer:function(h){return p(h,t.allocBuffer(h.length))}},y.array={string:x,array:c,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return t.newBufferFrom(h)}},y.arraybuffer={string:function(h){return x(new Uint8Array(h))},array:function(h){return f(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:c,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return t.newBufferFrom(new Uint8Array(h))}},y.uint8array={string:x,array:function(h){return f(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:c,nodebuffer:function(h){return t.newBufferFrom(h)}},y.nodebuffer={string:x,array:function(h){return f(h,new Array(h.length))},arraybuffer:function(h){return y.nodebuffer.uint8array(h).buffer},uint8array:function(h){return f(h,new Uint8Array(h.length))},nodebuffer:c},l.transformTo=function(h,b){if(b=b||"",!h)return b;l.checkSupport(h);var m=l.getTypeOf(b);return y[m][h](b)},l.resolve=function(h){for(var b=h.split("/"),m=[],w=0;w<b.length;w++){var R=b[w];R==="."||R===""&&w!==0&&w!==b.length-1||(R===".."?m.pop():m.push(R))}return m.join("/")},l.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":n.nodebuffer&&t.isBuffer(h)?"nodebuffer":n.uint8array&&h instanceof Uint8Array?"uint8array":n.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},l.checkSupport=function(h){if(!n[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},l.MAX_VALUE_16BITS=65535,l.MAX_VALUE_32BITS=-1,l.pretty=function(h){var b,m,w="";for(m=0;m<(h||"").length;m++)w+="\\x"+((b=h.charCodeAt(m))<16?"0":"")+b.toString(16).toUpperCase();return w},l.delay=function(h,b,m){setImmediate(function(){h.apply(m||null,b||[])})},l.inherits=function(h,b){function m(){}m.prototype=b.prototype,h.prototype=new m},l.extend=function(){var h,b,m={};for(h=0;h<arguments.length;h++)for(b in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],b)&&m[b]===void 0&&(m[b]=arguments[h][b]);return m},l.prepareContent=function(h,b,m,w,R){return a.Promise.resolve(b).then(function(E){return n.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new a.Promise(function(C,T){var B=new FileReader;B.onload=function(H){C(H.target.result)},B.onerror=function(H){T(H.target.error)},B.readAsArrayBuffer(E)}):E}).then(function(E){var C=l.getTypeOf(E);return C?(C==="arraybuffer"?E=l.transformTo("uint8array",E):C==="string"&&(R?E=o.decode(E):m&&w!==!0&&(E=function(T){return p(T,n.uint8array?new Uint8Array(T.length):new Array(T.length))}(E))),E):a.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,d,l){var n=r("./reader/readerFor"),o=r("./utils"),t=r("./signature"),a=r("./zipEntry"),c=r("./support");function p(v){this.files=[],this.loadOptions=v}p.prototype={checkSignature:function(v){if(!this.reader.readAndCheckSignature(v)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(x)+", expected "+o.pretty(v)+")")}},isSignature:function(v,x){var f=this.reader.index;this.reader.setIndex(v);var y=this.reader.readString(4)===x;return this.reader.setIndex(f),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var v=this.reader.readData(this.zipCommentLength),x=c.uint8array?"uint8array":"array",f=o.transformTo(x,v);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var v,x,f,y=this.zip64EndOfCentralSize-44;0<y;)v=this.reader.readInt(2),x=this.reader.readInt(4),f=this.reader.readData(x),this.zip64ExtensibleData[v]={id:v,length:x,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var v,x;for(v=0;v<this.files.length;v++)x=this.files[v],this.reader.setIndex(x.localHeaderOffset),this.checkSignature(t.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var v;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(t.CENTRAL_FILE_HEADER);)(v=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(v);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var v=this.reader.lastIndexOfSignature(t.CENTRAL_DIRECTORY_END);if(v<0)throw this.isSignature(0,t.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(v);var x=v;if(this.checkSignature(t.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(v=this.reader.lastIndexOfSignature(t.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(v),this.checkSignature(t.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,t.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(t.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(t.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var y=x-f;if(0<y)this.isSignature(x,t.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(v){this.reader=n(v)},load:function(v){this.prepareReader(v),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},d.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,d,l){var n=r("./reader/readerFor"),o=r("./utils"),t=r("./compressedObject"),a=r("./crc32"),c=r("./utf8"),p=r("./compressions"),v=r("./support");function x(f,y){this.options=f,this.loadOptions=y}x.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var y,h;if(f.skip(22),this.fileNameLength=f.readInt(2),h=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(b){for(var m in p)if(Object.prototype.hasOwnProperty.call(p,m)&&p[m].magic===b)return p[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new t(this.compressedSize,this.uncompressedSize,this.crc32,y,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var y=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(y),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var y,h,b,m=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<m;)y=f.readInt(2),h=f.readInt(2),b=f.readData(h),this.extraFields[y]={id:y,length:h,value:b};f.setIndex(m)},handleUTF8:function(){var f=v.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var h=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var m=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var y=n(f.value);return y.readInt(1)!==1||a(this.fileName)!==y.readInt(4)?null:c.utf8decode(y.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var y=n(f.value);return y.readInt(1)!==1||a(this.fileComment)!==y.readInt(4)?null:c.utf8decode(y.readData(f.length-5))}return null}},d.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,d,l){function n(y,h,b){this.name=y,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=h,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=r("./stream/StreamHelper"),t=r("./stream/DataWorker"),a=r("./utf8"),c=r("./compressedObject"),p=r("./stream/GenericWorker");n.prototype={internalStream:function(y){var h=null,b="string";try{if(!y)throw new Error("No output type specified.");var m=(b=y.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),h=this._decompressWorker();var w=!this._dataBinary;w&&!m&&(h=h.pipe(new a.Utf8EncodeWorker)),!w&&m&&(h=h.pipe(new a.Utf8DecodeWorker))}catch(R){(h=new p("error")).error(R)}return new o(h,b,"")},async:function(y,h){return this.internalStream(y).accumulate(h)},nodeStream:function(y,h){return this.internalStream(y||"nodebuffer").toNodejsStream(h)},_compressWorker:function(y,h){if(this._data instanceof c&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new a.Utf8EncodeWorker)),c.createWorkerFrom(b,y,h)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof p?this._data:new t(this._data)}};for(var v=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<v.length;f++)n.prototype[v[f]]=x;d.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,d,l){(function(n){var o,t,a=n.MutationObserver||n.WebKitMutationObserver;if(a){var c=0,p=new a(y),v=n.document.createTextNode("");p.observe(v,{characterData:!0}),o=function(){v.data=c=++c%2}}else if(n.setImmediate||n.MessageChannel===void 0)o="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var h=n.document.createElement("script");h.onreadystatechange=function(){y(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},n.document.documentElement.appendChild(h)}:function(){setTimeout(y,0)};else{var x=new n.MessageChannel;x.port1.onmessage=y,o=function(){x.port2.postMessage(0)}}var f=[];function y(){var h,b;t=!0;for(var m=f.length;m;){for(b=f,f=[],h=-1;++h<m;)b[h]();m=f.length}t=!1}d.exports=function(h){f.push(h)!==1||t||o()}}).call(this,typeof yt<"u"?yt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,d,l){var n=r("immediate");function o(){}var t={},a=["REJECTED"],c=["FULFILLED"],p=["PENDING"];function v(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,m!==o&&h(this,m)}function x(m,w,R){this.promise=m,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function f(m,w,R){n(function(){var E;try{E=w(R)}catch(C){return t.reject(m,C)}E===m?t.reject(m,new TypeError("Cannot resolve promise with itself")):t.resolve(m,E)})}function y(m){var w=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof w=="function")return function(){w.apply(m,arguments)}}function h(m,w){var R=!1;function E(B){R||(R=!0,t.reject(m,B))}function C(B){R||(R=!0,t.resolve(m,B))}var T=b(function(){w(C,E)});T.status==="error"&&E(T.value)}function b(m,w){var R={};try{R.value=m(w),R.status="success"}catch(E){R.status="error",R.value=E}return R}(d.exports=v).prototype.finally=function(m){if(typeof m!="function")return this;var w=this.constructor;return this.then(function(R){return w.resolve(m()).then(function(){return R})},function(R){return w.resolve(m()).then(function(){throw R})})},v.prototype.catch=function(m){return this.then(null,m)},v.prototype.then=function(m,w){if(typeof m!="function"&&this.state===c||typeof w!="function"&&this.state===a)return this;var R=new this.constructor(o);return this.state!==p?f(R,this.state===c?m:w,this.outcome):this.queue.push(new x(R,m,w)),R},x.prototype.callFulfilled=function(m){t.resolve(this.promise,m)},x.prototype.otherCallFulfilled=function(m){f(this.promise,this.onFulfilled,m)},x.prototype.callRejected=function(m){t.reject(this.promise,m)},x.prototype.otherCallRejected=function(m){f(this.promise,this.onRejected,m)},t.resolve=function(m,w){var R=b(y,w);if(R.status==="error")return t.reject(m,R.value);var E=R.value;if(E)h(m,E);else{m.state=c,m.outcome=w;for(var C=-1,T=m.queue.length;++C<T;)m.queue[C].callFulfilled(w)}return m},t.reject=function(m,w){m.state=a,m.outcome=w;for(var R=-1,E=m.queue.length;++R<E;)m.queue[R].callRejected(w);return m},v.resolve=function(m){return m instanceof this?m:t.resolve(new this(o),m)},v.reject=function(m){var w=new this(o);return t.reject(w,m)},v.all=function(m){var w=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=m.length,E=!1;if(!R)return this.resolve([]);for(var C=new Array(R),T=0,B=-1,H=new this(o);++B<R;)z(m[B],B);return H;function z(M,X){w.resolve(M).then(function(k){C[X]=k,++T!==R||E||(E=!0,t.resolve(H,C))},function(k){E||(E=!0,t.reject(H,k))})}},v.race=function(m){var w=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=m.length,E=!1;if(!R)return this.resolve([]);for(var C=-1,T=new this(o);++C<R;)B=m[C],w.resolve(B).then(function(H){E||(E=!0,t.resolve(T,H))},function(H){E||(E=!0,t.reject(T,H))});var B;return T}},{immediate:36}],38:[function(r,d,l){var n={};(0,r("./lib/utils/common").assign)(n,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),d.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,d,l){var n=r("./zlib/deflate"),o=r("./utils/common"),t=r("./utils/strings"),a=r("./zlib/messages"),c=r("./zlib/zstream"),p=Object.prototype.toString,v=0,x=-1,f=0,y=8;function h(m){if(!(this instanceof h))return new h(m);this.options=o.assign({level:x,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},m||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var R=n.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(R!==v)throw new Error(a[R]);if(w.header&&n.deflateSetHeader(this.strm,w.header),w.dictionary){var E;if(E=typeof w.dictionary=="string"?t.string2buf(w.dictionary):p.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(R=n.deflateSetDictionary(this.strm,E))!==v)throw new Error(a[R]);this._dict_set=!0}}function b(m,w){var R=new h(w);if(R.push(m,!0),R.err)throw R.msg||a[R.err];return R.result}h.prototype.push=function(m,w){var R,E,C=this.strm,T=this.options.chunkSize;if(this.ended)return!1;E=w===~~w?w:w===!0?4:0,typeof m=="string"?C.input=t.string2buf(m):p.call(m)==="[object ArrayBuffer]"?C.input=new Uint8Array(m):C.input=m,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new o.Buf8(T),C.next_out=0,C.avail_out=T),(R=n.deflate(C,E))!==1&&R!==v)return this.onEnd(R),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(t.buf2binstring(o.shrinkBuf(C.output,C.next_out))):this.onData(o.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&R!==1);return E===4?(R=n.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===v):E!==2||(this.onEnd(v),!(C.avail_out=0))},h.prototype.onData=function(m){this.chunks.push(m)},h.prototype.onEnd=function(m){m===v&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},l.Deflate=h,l.deflate=b,l.deflateRaw=function(m,w){return(w=w||{}).raw=!0,b(m,w)},l.gzip=function(m,w){return(w=w||{}).gzip=!0,b(m,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,d,l){var n=r("./zlib/inflate"),o=r("./utils/common"),t=r("./utils/strings"),a=r("./zlib/constants"),c=r("./zlib/messages"),p=r("./zlib/zstream"),v=r("./zlib/gzheader"),x=Object.prototype.toString;function f(h){if(!(this instanceof f))return new f(h);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},h||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||h&&h.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var m=n.inflateInit2(this.strm,b.windowBits);if(m!==a.Z_OK)throw new Error(c[m]);this.header=new v,n.inflateGetHeader(this.strm,this.header)}function y(h,b){var m=new f(b);if(m.push(h,!0),m.err)throw m.msg||c[m.err];return m.result}f.prototype.push=function(h,b){var m,w,R,E,C,T,B=this.strm,H=this.options.chunkSize,z=this.options.dictionary,M=!1;if(this.ended)return!1;w=b===~~b?b:b===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof h=="string"?B.input=t.binstring2buf(h):x.call(h)==="[object ArrayBuffer]"?B.input=new Uint8Array(h):B.input=h,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(H),B.next_out=0,B.avail_out=H),(m=n.inflate(B,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&z&&(T=typeof z=="string"?t.string2buf(z):x.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,m=n.inflateSetDictionary(this.strm,T)),m===a.Z_BUF_ERROR&&M===!0&&(m=a.Z_OK,M=!1),m!==a.Z_STREAM_END&&m!==a.Z_OK)return this.onEnd(m),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&m!==a.Z_STREAM_END&&(B.avail_in!==0||w!==a.Z_FINISH&&w!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=t.utf8border(B.output,B.next_out),E=B.next_out-R,C=t.buf2string(B.output,R),B.next_out=E,B.avail_out=H-E,E&&o.arraySet(B.output,B.output,R,E,0),this.onData(C)):this.onData(o.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(M=!0)}while((0<B.avail_in||B.avail_out===0)&&m!==a.Z_STREAM_END);return m===a.Z_STREAM_END&&(w=a.Z_FINISH),w===a.Z_FINISH?(m=n.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===a.Z_OK):w!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(B.avail_out=0))},f.prototype.onData=function(h){this.chunks.push(h)},f.prototype.onEnd=function(h){h===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},l.Inflate=f,l.inflate=y,l.inflateRaw=function(h,b){return(b=b||{}).raw=!0,y(h,b)},l.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,d,l){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";l.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var p=c.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var v in p)p.hasOwnProperty(v)&&(a[v]=p[v])}}return a},l.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var o={arraySet:function(a,c,p,v,x){if(c.subarray&&a.subarray)a.set(c.subarray(p,p+v),x);else for(var f=0;f<v;f++)a[x+f]=c[p+f]},flattenChunks:function(a){var c,p,v,x,f,y;for(c=v=0,p=a.length;c<p;c++)v+=a[c].length;for(y=new Uint8Array(v),c=x=0,p=a.length;c<p;c++)f=a[c],y.set(f,x),x+=f.length;return y}},t={arraySet:function(a,c,p,v,x){for(var f=0;f<v;f++)a[x+f]=c[p+f]},flattenChunks:function(a){return[].concat.apply([],a)}};l.setTyped=function(a){a?(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,o)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,t))},l.setTyped(n)},{}],42:[function(r,d,l){var n=r("./common"),o=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t=!1}for(var a=new n.Buf8(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function p(v,x){if(x<65537&&(v.subarray&&t||!v.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(v,x));for(var f="",y=0;y<x;y++)f+=String.fromCharCode(v[y]);return f}a[254]=a[254]=1,l.string2buf=function(v){var x,f,y,h,b,m=v.length,w=0;for(h=0;h<m;h++)(64512&(f=v.charCodeAt(h)))==55296&&h+1<m&&(64512&(y=v.charCodeAt(h+1)))==56320&&(f=65536+(f-55296<<10)+(y-56320),h++),w+=f<128?1:f<2048?2:f<65536?3:4;for(x=new n.Buf8(w),h=b=0;b<w;h++)(64512&(f=v.charCodeAt(h)))==55296&&h+1<m&&(64512&(y=v.charCodeAt(h+1)))==56320&&(f=65536+(f-55296<<10)+(y-56320),h++),f<128?x[b++]=f:(f<2048?x[b++]=192|f>>>6:(f<65536?x[b++]=224|f>>>12:(x[b++]=240|f>>>18,x[b++]=128|f>>>12&63),x[b++]=128|f>>>6&63),x[b++]=128|63&f);return x},l.buf2binstring=function(v){return p(v,v.length)},l.binstring2buf=function(v){for(var x=new n.Buf8(v.length),f=0,y=x.length;f<y;f++)x[f]=v.charCodeAt(f);return x},l.buf2string=function(v,x){var f,y,h,b,m=x||v.length,w=new Array(2*m);for(f=y=0;f<m;)if((h=v[f++])<128)w[y++]=h;else if(4<(b=a[h]))w[y++]=65533,f+=b-1;else{for(h&=b===2?31:b===3?15:7;1<b&&f<m;)h=h<<6|63&v[f++],b--;1<b?w[y++]=65533:h<65536?w[y++]=h:(h-=65536,w[y++]=55296|h>>10&1023,w[y++]=56320|1023&h)}return p(w,y)},l.utf8border=function(v,x){var f;for((x=x||v.length)>v.length&&(x=v.length),f=x-1;0<=f&&(192&v[f])==128;)f--;return f<0||f===0?x:f+a[v[f]]>x?f:x}},{"./common":41}],43:[function(r,d,l){d.exports=function(n,o,t,a){for(var c=65535&n|0,p=n>>>16&65535|0,v=0;t!==0;){for(t-=v=2e3<t?2e3:t;p=p+(c=c+o[a++]|0)|0,--v;);c%=65521,p%=65521}return c|p<<16|0}},{}],44:[function(r,d,l){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,d,l){var n=function(){for(var o,t=[],a=0;a<256;a++){o=a;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;t[a]=o}return t}();d.exports=function(o,t,a,c){var p=n,v=c+a;o^=-1;for(var x=c;x<v;x++)o=o>>>8^p[255&(o^t[x])];return-1^o}},{}],46:[function(r,d,l){var n,o=r("../utils/common"),t=r("./trees"),a=r("./adler32"),c=r("./crc32"),p=r("./messages"),v=0,x=4,f=0,y=-2,h=-1,b=4,m=2,w=8,R=9,E=286,C=30,T=19,B=2*E+1,H=15,z=3,M=258,X=M+z+1,k=42,F=113,s=1,P=2,K=3,$=4;function ee(i,j){return i.msg=p[j],j}function V(i){return(i<<1)-(4<i?9:0)}function re(i){for(var j=i.length;0<=--j;)i[j]=0}function O(i){var j=i.state,D=j.pending;D>i.avail_out&&(D=i.avail_out),D!==0&&(o.arraySet(i.output,j.pending_buf,j.pending_out,D,i.next_out),i.next_out+=D,j.pending_out+=D,i.total_out+=D,i.avail_out-=D,j.pending-=D,j.pending===0&&(j.pending_out=0))}function I(i,j){t._tr_flush_block(i,0<=i.block_start?i.block_start:-1,i.strstart-i.block_start,j),i.block_start=i.strstart,O(i.strm)}function te(i,j){i.pending_buf[i.pending++]=j}function Y(i,j){i.pending_buf[i.pending++]=j>>>8&255,i.pending_buf[i.pending++]=255&j}function G(i,j){var D,_,u=i.max_chain_length,S=i.strstart,L=i.prev_length,N=i.nice_match,A=i.strstart>i.w_size-X?i.strstart-(i.w_size-X):0,W=i.window,q=i.w_mask,Z=i.prev,Q=i.strstart+M,he=W[S+L-1],se=W[S+L];i.prev_length>=i.good_match&&(u>>=2),N>i.lookahead&&(N=i.lookahead);do if(W[(D=j)+L]===se&&W[D+L-1]===he&&W[D]===W[S]&&W[++D]===W[S+1]){S+=2,D++;do;while(W[++S]===W[++D]&&W[++S]===W[++D]&&W[++S]===W[++D]&&W[++S]===W[++D]&&W[++S]===W[++D]&&W[++S]===W[++D]&&W[++S]===W[++D]&&W[++S]===W[++D]&&S<Q);if(_=M-(Q-S),S=Q-M,L<_){if(i.match_start=j,N<=(L=_))break;he=W[S+L-1],se=W[S+L]}}while((j=Z[j&q])>A&&--u!=0);return L<=i.lookahead?L:i.lookahead}function oe(i){var j,D,_,u,S,L,N,A,W,q,Z=i.w_size;do{if(u=i.window_size-i.lookahead-i.strstart,i.strstart>=Z+(Z-X)){for(o.arraySet(i.window,i.window,Z,Z,0),i.match_start-=Z,i.strstart-=Z,i.block_start-=Z,j=D=i.hash_size;_=i.head[--j],i.head[j]=Z<=_?_-Z:0,--D;);for(j=D=Z;_=i.prev[--j],i.prev[j]=Z<=_?_-Z:0,--D;);u+=Z}if(i.strm.avail_in===0)break;if(L=i.strm,N=i.window,A=i.strstart+i.lookahead,W=u,q=void 0,q=L.avail_in,W<q&&(q=W),D=q===0?0:(L.avail_in-=q,o.arraySet(N,L.input,L.next_in,q,A),L.state.wrap===1?L.adler=a(L.adler,N,q,A):L.state.wrap===2&&(L.adler=c(L.adler,N,q,A)),L.next_in+=q,L.total_in+=q,q),i.lookahead+=D,i.lookahead+i.insert>=z)for(S=i.strstart-i.insert,i.ins_h=i.window[S],i.ins_h=(i.ins_h<<i.hash_shift^i.window[S+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[S+z-1])&i.hash_mask,i.prev[S&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=S,S++,i.insert--,!(i.lookahead+i.insert<z)););}while(i.lookahead<X&&i.strm.avail_in!==0)}function Ce(i,j){for(var D,_;;){if(i.lookahead<X){if(oe(i),i.lookahead<X&&j===v)return s;if(i.lookahead===0)break}if(D=0,i.lookahead>=z&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+z-1])&i.hash_mask,D=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),D!==0&&i.strstart-D<=i.w_size-X&&(i.match_length=G(i,D)),i.match_length>=z)if(_=t._tr_tally(i,i.strstart-i.match_start,i.match_length-z),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=z){for(i.match_length--;i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+z-1])&i.hash_mask,D=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart,--i.match_length!=0;);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else _=t._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(_&&(I(i,!1),i.strm.avail_out===0))return s}return i.insert=i.strstart<z-1?i.strstart:z-1,j===x?(I(i,!0),i.strm.avail_out===0?K:$):i.last_lit&&(I(i,!1),i.strm.avail_out===0)?s:P}function ie(i,j){for(var D,_,u;;){if(i.lookahead<X){if(oe(i),i.lookahead<X&&j===v)return s;if(i.lookahead===0)break}if(D=0,i.lookahead>=z&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+z-1])&i.hash_mask,D=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=z-1,D!==0&&i.prev_length<i.max_lazy_match&&i.strstart-D<=i.w_size-X&&(i.match_length=G(i,D),i.match_length<=5&&(i.strategy===1||i.match_length===z&&4096<i.strstart-i.match_start)&&(i.match_length=z-1)),i.prev_length>=z&&i.match_length<=i.prev_length){for(u=i.strstart+i.lookahead-z,_=t._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-z),i.lookahead-=i.prev_length-1,i.prev_length-=2;++i.strstart<=u&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+z-1])&i.hash_mask,D=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),--i.prev_length!=0;);if(i.match_available=0,i.match_length=z-1,i.strstart++,_&&(I(i,!1),i.strm.avail_out===0))return s}else if(i.match_available){if((_=t._tr_tally(i,0,i.window[i.strstart-1]))&&I(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return s}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(_=t._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<z-1?i.strstart:z-1,j===x?(I(i,!0),i.strm.avail_out===0?K:$):i.last_lit&&(I(i,!1),i.strm.avail_out===0)?s:P}function le(i,j,D,_,u){this.good_length=i,this.max_lazy=j,this.nice_length=D,this.max_chain=_,this.func=u}function _e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*B),this.dyn_dtree=new o.Buf16(2*(2*C+1)),this.bl_tree=new o.Buf16(2*(2*T+1)),re(this.dyn_ltree),re(this.dyn_dtree),re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(H+1),this.heap=new o.Buf16(2*E+1),re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*E+1),re(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function be(i){var j;return i&&i.state?(i.total_in=i.total_out=0,i.data_type=m,(j=i.state).pending=0,j.pending_out=0,j.wrap<0&&(j.wrap=-j.wrap),j.status=j.wrap?k:F,i.adler=j.wrap===2?0:1,j.last_flush=v,t._tr_init(j),f):ee(i,y)}function Ae(i){var j=be(i);return j===f&&function(D){D.window_size=2*D.w_size,re(D.head),D.max_lazy_match=n[D.level].max_lazy,D.good_match=n[D.level].good_length,D.nice_match=n[D.level].nice_length,D.max_chain_length=n[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=z-1,D.match_available=0,D.ins_h=0}(i.state),j}function Re(i,j,D,_,u,S){if(!i)return y;var L=1;if(j===h&&(j=6),_<0?(L=0,_=-_):15<_&&(L=2,_-=16),u<1||R<u||D!==w||_<8||15<_||j<0||9<j||S<0||b<S)return ee(i,y);_===8&&(_=9);var N=new _e;return(i.state=N).strm=i,N.wrap=L,N.gzhead=null,N.w_bits=_,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=u+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+z-1)/z),N.window=new o.Buf8(2*N.w_size),N.head=new o.Buf16(N.hash_size),N.prev=new o.Buf16(N.w_size),N.lit_bufsize=1<<u+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new o.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=j,N.strategy=S,N.method=D,Ae(i)}n=[new le(0,0,0,0,function(i,j){var D=65535;for(D>i.pending_buf_size-5&&(D=i.pending_buf_size-5);;){if(i.lookahead<=1){if(oe(i),i.lookahead===0&&j===v)return s;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var _=i.block_start+D;if((i.strstart===0||i.strstart>=_)&&(i.lookahead=i.strstart-_,i.strstart=_,I(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-X&&(I(i,!1),i.strm.avail_out===0))return s}return i.insert=0,j===x?(I(i,!0),i.strm.avail_out===0?K:$):(i.strstart>i.block_start&&(I(i,!1),i.strm.avail_out),s)}),new le(4,4,8,4,Ce),new le(4,5,16,8,Ce),new le(4,6,32,32,Ce),new le(4,4,16,16,ie),new le(8,16,32,32,ie),new le(8,16,128,128,ie),new le(8,32,128,256,ie),new le(32,128,258,1024,ie),new le(32,258,258,4096,ie)],l.deflateInit=function(i,j){return Re(i,j,w,15,8,0)},l.deflateInit2=Re,l.deflateReset=Ae,l.deflateResetKeep=be,l.deflateSetHeader=function(i,j){return i&&i.state?i.state.wrap!==2?y:(i.state.gzhead=j,f):y},l.deflate=function(i,j){var D,_,u,S;if(!i||!i.state||5<j||j<0)return i?ee(i,y):y;if(_=i.state,!i.output||!i.input&&i.avail_in!==0||_.status===666&&j!==x)return ee(i,i.avail_out===0?-5:y);if(_.strm=i,D=_.last_flush,_.last_flush=j,_.status===k)if(_.wrap===2)i.adler=0,te(_,31),te(_,139),te(_,8),_.gzhead?(te(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),te(_,255&_.gzhead.time),te(_,_.gzhead.time>>8&255),te(_,_.gzhead.time>>16&255),te(_,_.gzhead.time>>24&255),te(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),te(_,255&_.gzhead.os),_.gzhead.extra&&_.gzhead.extra.length&&(te(_,255&_.gzhead.extra.length),te(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(i.adler=c(i.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=69):(te(_,0),te(_,0),te(_,0),te(_,0),te(_,0),te(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),te(_,3),_.status=F);else{var L=w+(_.w_bits-8<<4)<<8;L|=(2<=_.strategy||_.level<2?0:_.level<6?1:_.level===6?2:3)<<6,_.strstart!==0&&(L|=32),L+=31-L%31,_.status=F,Y(_,L),_.strstart!==0&&(Y(_,i.adler>>>16),Y(_,65535&i.adler)),i.adler=1}if(_.status===69)if(_.gzhead.extra){for(u=_.pending;_.gzindex<(65535&_.gzhead.extra.length)&&(_.pending!==_.pending_buf_size||(_.gzhead.hcrc&&_.pending>u&&(i.adler=c(i.adler,_.pending_buf,_.pending-u,u)),O(i),u=_.pending,_.pending!==_.pending_buf_size));)te(_,255&_.gzhead.extra[_.gzindex]),_.gzindex++;_.gzhead.hcrc&&_.pending>u&&(i.adler=c(i.adler,_.pending_buf,_.pending-u,u)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=73)}else _.status=73;if(_.status===73)if(_.gzhead.name){u=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>u&&(i.adler=c(i.adler,_.pending_buf,_.pending-u,u)),O(i),u=_.pending,_.pending===_.pending_buf_size)){S=1;break}S=_.gzindex<_.gzhead.name.length?255&_.gzhead.name.charCodeAt(_.gzindex++):0,te(_,S)}while(S!==0);_.gzhead.hcrc&&_.pending>u&&(i.adler=c(i.adler,_.pending_buf,_.pending-u,u)),S===0&&(_.gzindex=0,_.status=91)}else _.status=91;if(_.status===91)if(_.gzhead.comment){u=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>u&&(i.adler=c(i.adler,_.pending_buf,_.pending-u,u)),O(i),u=_.pending,_.pending===_.pending_buf_size)){S=1;break}S=_.gzindex<_.gzhead.comment.length?255&_.gzhead.comment.charCodeAt(_.gzindex++):0,te(_,S)}while(S!==0);_.gzhead.hcrc&&_.pending>u&&(i.adler=c(i.adler,_.pending_buf,_.pending-u,u)),S===0&&(_.status=103)}else _.status=103;if(_.status===103&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&O(i),_.pending+2<=_.pending_buf_size&&(te(_,255&i.adler),te(_,i.adler>>8&255),i.adler=0,_.status=F)):_.status=F),_.pending!==0){if(O(i),i.avail_out===0)return _.last_flush=-1,f}else if(i.avail_in===0&&V(j)<=V(D)&&j!==x)return ee(i,-5);if(_.status===666&&i.avail_in!==0)return ee(i,-5);if(i.avail_in!==0||_.lookahead!==0||j!==v&&_.status!==666){var N=_.strategy===2?function(A,W){for(var q;;){if(A.lookahead===0&&(oe(A),A.lookahead===0)){if(W===v)return s;break}if(A.match_length=0,q=t._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++,q&&(I(A,!1),A.strm.avail_out===0))return s}return A.insert=0,W===x?(I(A,!0),A.strm.avail_out===0?K:$):A.last_lit&&(I(A,!1),A.strm.avail_out===0)?s:P}(_,j):_.strategy===3?function(A,W){for(var q,Z,Q,he,se=A.window;;){if(A.lookahead<=M){if(oe(A),A.lookahead<=M&&W===v)return s;if(A.lookahead===0)break}if(A.match_length=0,A.lookahead>=z&&0<A.strstart&&(Z=se[Q=A.strstart-1])===se[++Q]&&Z===se[++Q]&&Z===se[++Q]){he=A.strstart+M;do;while(Z===se[++Q]&&Z===se[++Q]&&Z===se[++Q]&&Z===se[++Q]&&Z===se[++Q]&&Z===se[++Q]&&Z===se[++Q]&&Z===se[++Q]&&Q<he);A.match_length=M-(he-Q),A.match_length>A.lookahead&&(A.match_length=A.lookahead)}if(A.match_length>=z?(q=t._tr_tally(A,1,A.match_length-z),A.lookahead-=A.match_length,A.strstart+=A.match_length,A.match_length=0):(q=t._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++),q&&(I(A,!1),A.strm.avail_out===0))return s}return A.insert=0,W===x?(I(A,!0),A.strm.avail_out===0?K:$):A.last_lit&&(I(A,!1),A.strm.avail_out===0)?s:P}(_,j):n[_.level].func(_,j);if(N!==K&&N!==$||(_.status=666),N===s||N===K)return i.avail_out===0&&(_.last_flush=-1),f;if(N===P&&(j===1?t._tr_align(_):j!==5&&(t._tr_stored_block(_,0,0,!1),j===3&&(re(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),O(i),i.avail_out===0))return _.last_flush=-1,f}return j!==x?f:_.wrap<=0?1:(_.wrap===2?(te(_,255&i.adler),te(_,i.adler>>8&255),te(_,i.adler>>16&255),te(_,i.adler>>24&255),te(_,255&i.total_in),te(_,i.total_in>>8&255),te(_,i.total_in>>16&255),te(_,i.total_in>>24&255)):(Y(_,i.adler>>>16),Y(_,65535&i.adler)),O(i),0<_.wrap&&(_.wrap=-_.wrap),_.pending!==0?f:1)},l.deflateEnd=function(i){var j;return i&&i.state?(j=i.state.status)!==k&&j!==69&&j!==73&&j!==91&&j!==103&&j!==F&&j!==666?ee(i,y):(i.state=null,j===F?ee(i,-3):f):y},l.deflateSetDictionary=function(i,j){var D,_,u,S,L,N,A,W,q=j.length;if(!i||!i.state||(S=(D=i.state).wrap)===2||S===1&&D.status!==k||D.lookahead)return y;for(S===1&&(i.adler=a(i.adler,j,q,0)),D.wrap=0,q>=D.w_size&&(S===0&&(re(D.head),D.strstart=0,D.block_start=0,D.insert=0),W=new o.Buf8(D.w_size),o.arraySet(W,j,q-D.w_size,D.w_size,0),j=W,q=D.w_size),L=i.avail_in,N=i.next_in,A=i.input,i.avail_in=q,i.next_in=0,i.input=j,oe(D);D.lookahead>=z;){for(_=D.strstart,u=D.lookahead-(z-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[_+z-1])&D.hash_mask,D.prev[_&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=_,_++,--u;);D.strstart=_,D.lookahead=z-1,oe(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=z-1,D.match_available=0,i.next_in=N,i.input=A,i.avail_in=L,D.wrap=S,f},l.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,d,l){d.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,d,l){d.exports=function(n,o){var t,a,c,p,v,x,f,y,h,b,m,w,R,E,C,T,B,H,z,M,X,k,F,s,P;t=n.state,a=n.next_in,s=n.input,c=a+(n.avail_in-5),p=n.next_out,P=n.output,v=p-(o-n.avail_out),x=p+(n.avail_out-257),f=t.dmax,y=t.wsize,h=t.whave,b=t.wnext,m=t.window,w=t.hold,R=t.bits,E=t.lencode,C=t.distcode,T=(1<<t.lenbits)-1,B=(1<<t.distbits)-1;e:do{R<15&&(w+=s[a++]<<R,R+=8,w+=s[a++]<<R,R+=8),H=E[w&T];t:for(;;){if(w>>>=z=H>>>24,R-=z,(z=H>>>16&255)===0)P[p++]=65535&H;else{if(!(16&z)){if(!(64&z)){H=E[(65535&H)+(w&(1<<z)-1)];continue t}if(32&z){t.mode=12;break e}n.msg="invalid literal/length code",t.mode=30;break e}M=65535&H,(z&=15)&&(R<z&&(w+=s[a++]<<R,R+=8),M+=w&(1<<z)-1,w>>>=z,R-=z),R<15&&(w+=s[a++]<<R,R+=8,w+=s[a++]<<R,R+=8),H=C[w&B];r:for(;;){if(w>>>=z=H>>>24,R-=z,!(16&(z=H>>>16&255))){if(!(64&z)){H=C[(65535&H)+(w&(1<<z)-1)];continue r}n.msg="invalid distance code",t.mode=30;break e}if(X=65535&H,R<(z&=15)&&(w+=s[a++]<<R,(R+=8)<z&&(w+=s[a++]<<R,R+=8)),f<(X+=w&(1<<z)-1)){n.msg="invalid distance too far back",t.mode=30;break e}if(w>>>=z,R-=z,(z=p-v)<X){if(h<(z=X-z)&&t.sane){n.msg="invalid distance too far back",t.mode=30;break e}if(F=m,(k=0)===b){if(k+=y-z,z<M){for(M-=z;P[p++]=m[k++],--z;);k=p-X,F=P}}else if(b<z){if(k+=y+b-z,(z-=b)<M){for(M-=z;P[p++]=m[k++],--z;);if(k=0,b<M){for(M-=z=b;P[p++]=m[k++],--z;);k=p-X,F=P}}}else if(k+=b-z,z<M){for(M-=z;P[p++]=m[k++],--z;);k=p-X,F=P}for(;2<M;)P[p++]=F[k++],P[p++]=F[k++],P[p++]=F[k++],M-=3;M&&(P[p++]=F[k++],1<M&&(P[p++]=F[k++]))}else{for(k=p-X;P[p++]=P[k++],P[p++]=P[k++],P[p++]=P[k++],2<(M-=3););M&&(P[p++]=P[k++],1<M&&(P[p++]=P[k++]))}break}}break}}while(a<c&&p<x);a-=M=R>>3,w&=(1<<(R-=M<<3))-1,n.next_in=a,n.next_out=p,n.avail_in=a<c?c-a+5:5-(a-c),n.avail_out=p<x?x-p+257:257-(p-x),t.hold=w,t.bits=R}},{}],49:[function(r,d,l){var n=r("../utils/common"),o=r("./adler32"),t=r("./crc32"),a=r("./inffast"),c=r("./inftrees"),p=1,v=2,x=0,f=-2,y=1,h=852,b=592;function m(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R(k){var F;return k&&k.state?(F=k.state,k.total_in=k.total_out=F.total=0,k.msg="",F.wrap&&(k.adler=1&F.wrap),F.mode=y,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new n.Buf32(h),F.distcode=F.distdyn=new n.Buf32(b),F.sane=1,F.back=-1,x):f}function E(k){var F;return k&&k.state?((F=k.state).wsize=0,F.whave=0,F.wnext=0,R(k)):f}function C(k,F){var s,P;return k&&k.state?(P=k.state,F<0?(s=0,F=-F):(s=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?f:(P.window!==null&&P.wbits!==F&&(P.window=null),P.wrap=s,P.wbits=F,E(k))):f}function T(k,F){var s,P;return k?(P=new w,(k.state=P).window=null,(s=C(k,F))!==x&&(k.state=null),s):f}var B,H,z=!0;function M(k){if(z){var F;for(B=new n.Buf32(512),H=new n.Buf32(32),F=0;F<144;)k.lens[F++]=8;for(;F<256;)k.lens[F++]=9;for(;F<280;)k.lens[F++]=7;for(;F<288;)k.lens[F++]=8;for(c(p,k.lens,0,288,B,0,k.work,{bits:9}),F=0;F<32;)k.lens[F++]=5;c(v,k.lens,0,32,H,0,k.work,{bits:5}),z=!1}k.lencode=B,k.lenbits=9,k.distcode=H,k.distbits=5}function X(k,F,s,P){var K,$=k.state;return $.window===null&&($.wsize=1<<$.wbits,$.wnext=0,$.whave=0,$.window=new n.Buf8($.wsize)),P>=$.wsize?(n.arraySet($.window,F,s-$.wsize,$.wsize,0),$.wnext=0,$.whave=$.wsize):(P<(K=$.wsize-$.wnext)&&(K=P),n.arraySet($.window,F,s-P,K,$.wnext),(P-=K)?(n.arraySet($.window,F,s-P,P,0),$.wnext=P,$.whave=$.wsize):($.wnext+=K,$.wnext===$.wsize&&($.wnext=0),$.whave<$.wsize&&($.whave+=K))),0}l.inflateReset=E,l.inflateReset2=C,l.inflateResetKeep=R,l.inflateInit=function(k){return T(k,15)},l.inflateInit2=T,l.inflate=function(k,F){var s,P,K,$,ee,V,re,O,I,te,Y,G,oe,Ce,ie,le,_e,be,Ae,Re,i,j,D,_,u=0,S=new n.Buf8(4),L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return f;(s=k.state).mode===12&&(s.mode=13),ee=k.next_out,K=k.output,re=k.avail_out,$=k.next_in,P=k.input,V=k.avail_in,O=s.hold,I=s.bits,te=V,Y=re,j=x;e:for(;;)switch(s.mode){case y:if(s.wrap===0){s.mode=13;break}for(;I<16;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}if(2&s.wrap&&O===35615){S[s.check=0]=255&O,S[1]=O>>>8&255,s.check=t(s.check,S,2,0),I=O=0,s.mode=2;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&O)<<8)+(O>>8))%31){k.msg="incorrect header check",s.mode=30;break}if((15&O)!=8){k.msg="unknown compression method",s.mode=30;break}if(I-=4,i=8+(15&(O>>>=4)),s.wbits===0)s.wbits=i;else if(i>s.wbits){k.msg="invalid window size",s.mode=30;break}s.dmax=1<<i,k.adler=s.check=1,s.mode=512&O?10:12,I=O=0;break;case 2:for(;I<16;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}if(s.flags=O,(255&s.flags)!=8){k.msg="unknown compression method",s.mode=30;break}if(57344&s.flags){k.msg="unknown header flags set",s.mode=30;break}s.head&&(s.head.text=O>>8&1),512&s.flags&&(S[0]=255&O,S[1]=O>>>8&255,s.check=t(s.check,S,2,0)),I=O=0,s.mode=3;case 3:for(;I<32;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}s.head&&(s.head.time=O),512&s.flags&&(S[0]=255&O,S[1]=O>>>8&255,S[2]=O>>>16&255,S[3]=O>>>24&255,s.check=t(s.check,S,4,0)),I=O=0,s.mode=4;case 4:for(;I<16;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}s.head&&(s.head.xflags=255&O,s.head.os=O>>8),512&s.flags&&(S[0]=255&O,S[1]=O>>>8&255,s.check=t(s.check,S,2,0)),I=O=0,s.mode=5;case 5:if(1024&s.flags){for(;I<16;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}s.length=O,s.head&&(s.head.extra_len=O),512&s.flags&&(S[0]=255&O,S[1]=O>>>8&255,s.check=t(s.check,S,2,0)),I=O=0}else s.head&&(s.head.extra=null);s.mode=6;case 6:if(1024&s.flags&&(V<(G=s.length)&&(G=V),G&&(s.head&&(i=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Array(s.head.extra_len)),n.arraySet(s.head.extra,P,$,G,i)),512&s.flags&&(s.check=t(s.check,P,G,$)),V-=G,$+=G,s.length-=G),s.length))break e;s.length=0,s.mode=7;case 7:if(2048&s.flags){if(V===0)break e;for(G=0;i=P[$+G++],s.head&&i&&s.length<65536&&(s.head.name+=String.fromCharCode(i)),i&&G<V;);if(512&s.flags&&(s.check=t(s.check,P,G,$)),V-=G,$+=G,i)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=8;case 8:if(4096&s.flags){if(V===0)break e;for(G=0;i=P[$+G++],s.head&&i&&s.length<65536&&(s.head.comment+=String.fromCharCode(i)),i&&G<V;);if(512&s.flags&&(s.check=t(s.check,P,G,$)),V-=G,$+=G,i)break e}else s.head&&(s.head.comment=null);s.mode=9;case 9:if(512&s.flags){for(;I<16;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}if(O!==(65535&s.check)){k.msg="header crc mismatch",s.mode=30;break}I=O=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),k.adler=s.check=0,s.mode=12;break;case 10:for(;I<32;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}k.adler=s.check=m(O),I=O=0,s.mode=11;case 11:if(s.havedict===0)return k.next_out=ee,k.avail_out=re,k.next_in=$,k.avail_in=V,s.hold=O,s.bits=I,2;k.adler=s.check=1,s.mode=12;case 12:if(F===5||F===6)break e;case 13:if(s.last){O>>>=7&I,I-=7&I,s.mode=27;break}for(;I<3;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}switch(s.last=1&O,I-=1,3&(O>>>=1)){case 0:s.mode=14;break;case 1:if(M(s),s.mode=20,F!==6)break;O>>>=2,I-=2;break e;case 2:s.mode=17;break;case 3:k.msg="invalid block type",s.mode=30}O>>>=2,I-=2;break;case 14:for(O>>>=7&I,I-=7&I;I<32;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}if((65535&O)!=(O>>>16^65535)){k.msg="invalid stored block lengths",s.mode=30;break}if(s.length=65535&O,I=O=0,s.mode=15,F===6)break e;case 15:s.mode=16;case 16:if(G=s.length){if(V<G&&(G=V),re<G&&(G=re),G===0)break e;n.arraySet(K,P,$,G,ee),V-=G,$+=G,re-=G,ee+=G,s.length-=G;break}s.mode=12;break;case 17:for(;I<14;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}if(s.nlen=257+(31&O),O>>>=5,I-=5,s.ndist=1+(31&O),O>>>=5,I-=5,s.ncode=4+(15&O),O>>>=4,I-=4,286<s.nlen||30<s.ndist){k.msg="too many length or distance symbols",s.mode=30;break}s.have=0,s.mode=18;case 18:for(;s.have<s.ncode;){for(;I<3;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}s.lens[L[s.have++]]=7&O,O>>>=3,I-=3}for(;s.have<19;)s.lens[L[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,D={bits:s.lenbits},j=c(0,s.lens,0,19,s.lencode,0,s.work,D),s.lenbits=D.bits,j){k.msg="invalid code lengths set",s.mode=30;break}s.have=0,s.mode=19;case 19:for(;s.have<s.nlen+s.ndist;){for(;le=(u=s.lencode[O&(1<<s.lenbits)-1])>>>16&255,_e=65535&u,!((ie=u>>>24)<=I);){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}if(_e<16)O>>>=ie,I-=ie,s.lens[s.have++]=_e;else{if(_e===16){for(_=ie+2;I<_;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}if(O>>>=ie,I-=ie,s.have===0){k.msg="invalid bit length repeat",s.mode=30;break}i=s.lens[s.have-1],G=3+(3&O),O>>>=2,I-=2}else if(_e===17){for(_=ie+3;I<_;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}I-=ie,i=0,G=3+(7&(O>>>=ie)),O>>>=3,I-=3}else{for(_=ie+7;I<_;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}I-=ie,i=0,G=11+(127&(O>>>=ie)),O>>>=7,I-=7}if(s.have+G>s.nlen+s.ndist){k.msg="invalid bit length repeat",s.mode=30;break}for(;G--;)s.lens[s.have++]=i}}if(s.mode===30)break;if(s.lens[256]===0){k.msg="invalid code -- missing end-of-block",s.mode=30;break}if(s.lenbits=9,D={bits:s.lenbits},j=c(p,s.lens,0,s.nlen,s.lencode,0,s.work,D),s.lenbits=D.bits,j){k.msg="invalid literal/lengths set",s.mode=30;break}if(s.distbits=6,s.distcode=s.distdyn,D={bits:s.distbits},j=c(v,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,D),s.distbits=D.bits,j){k.msg="invalid distances set",s.mode=30;break}if(s.mode=20,F===6)break e;case 20:s.mode=21;case 21:if(6<=V&&258<=re){k.next_out=ee,k.avail_out=re,k.next_in=$,k.avail_in=V,s.hold=O,s.bits=I,a(k,Y),ee=k.next_out,K=k.output,re=k.avail_out,$=k.next_in,P=k.input,V=k.avail_in,O=s.hold,I=s.bits,s.mode===12&&(s.back=-1);break}for(s.back=0;le=(u=s.lencode[O&(1<<s.lenbits)-1])>>>16&255,_e=65535&u,!((ie=u>>>24)<=I);){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}if(le&&!(240&le)){for(be=ie,Ae=le,Re=_e;le=(u=s.lencode[Re+((O&(1<<be+Ae)-1)>>be)])>>>16&255,_e=65535&u,!(be+(ie=u>>>24)<=I);){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}O>>>=be,I-=be,s.back+=be}if(O>>>=ie,I-=ie,s.back+=ie,s.length=_e,le===0){s.mode=26;break}if(32&le){s.back=-1,s.mode=12;break}if(64&le){k.msg="invalid literal/length code",s.mode=30;break}s.extra=15&le,s.mode=22;case 22:if(s.extra){for(_=s.extra;I<_;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}s.length+=O&(1<<s.extra)-1,O>>>=s.extra,I-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=23;case 23:for(;le=(u=s.distcode[O&(1<<s.distbits)-1])>>>16&255,_e=65535&u,!((ie=u>>>24)<=I);){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}if(!(240&le)){for(be=ie,Ae=le,Re=_e;le=(u=s.distcode[Re+((O&(1<<be+Ae)-1)>>be)])>>>16&255,_e=65535&u,!(be+(ie=u>>>24)<=I);){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}O>>>=be,I-=be,s.back+=be}if(O>>>=ie,I-=ie,s.back+=ie,64&le){k.msg="invalid distance code",s.mode=30;break}s.offset=_e,s.extra=15&le,s.mode=24;case 24:if(s.extra){for(_=s.extra;I<_;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}s.offset+=O&(1<<s.extra)-1,O>>>=s.extra,I-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){k.msg="invalid distance too far back",s.mode=30;break}s.mode=25;case 25:if(re===0)break e;if(G=Y-re,s.offset>G){if((G=s.offset-G)>s.whave&&s.sane){k.msg="invalid distance too far back",s.mode=30;break}oe=G>s.wnext?(G-=s.wnext,s.wsize-G):s.wnext-G,G>s.length&&(G=s.length),Ce=s.window}else Ce=K,oe=ee-s.offset,G=s.length;for(re<G&&(G=re),re-=G,s.length-=G;K[ee++]=Ce[oe++],--G;);s.length===0&&(s.mode=21);break;case 26:if(re===0)break e;K[ee++]=s.length,re--,s.mode=21;break;case 27:if(s.wrap){for(;I<32;){if(V===0)break e;V--,O|=P[$++]<<I,I+=8}if(Y-=re,k.total_out+=Y,s.total+=Y,Y&&(k.adler=s.check=s.flags?t(s.check,K,Y,ee-Y):o(s.check,K,Y,ee-Y)),Y=re,(s.flags?O:m(O))!==s.check){k.msg="incorrect data check",s.mode=30;break}I=O=0}s.mode=28;case 28:if(s.wrap&&s.flags){for(;I<32;){if(V===0)break e;V--,O+=P[$++]<<I,I+=8}if(O!==(4294967295&s.total)){k.msg="incorrect length check",s.mode=30;break}I=O=0}s.mode=29;case 29:j=1;break e;case 30:j=-3;break e;case 31:return-4;case 32:default:return f}return k.next_out=ee,k.avail_out=re,k.next_in=$,k.avail_in=V,s.hold=O,s.bits=I,(s.wsize||Y!==k.avail_out&&s.mode<30&&(s.mode<27||F!==4))&&X(k,k.output,k.next_out,Y-k.avail_out)?(s.mode=31,-4):(te-=k.avail_in,Y-=k.avail_out,k.total_in+=te,k.total_out+=Y,s.total+=Y,s.wrap&&Y&&(k.adler=s.check=s.flags?t(s.check,K,Y,k.next_out-Y):o(s.check,K,Y,k.next_out-Y)),k.data_type=s.bits+(s.last?64:0)+(s.mode===12?128:0)+(s.mode===20||s.mode===15?256:0),(te==0&&Y===0||F===4)&&j===x&&(j=-5),j)},l.inflateEnd=function(k){if(!k||!k.state)return f;var F=k.state;return F.window&&(F.window=null),k.state=null,x},l.inflateGetHeader=function(k,F){var s;return k&&k.state&&2&(s=k.state).wrap?((s.head=F).done=!1,x):f},l.inflateSetDictionary=function(k,F){var s,P=F.length;return k&&k.state?(s=k.state).wrap!==0&&s.mode!==11?f:s.mode===11&&o(1,F,P,0)!==s.check?-3:X(k,F,P,P)?(s.mode=31,-4):(s.havedict=1,x):f},l.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,d,l){var n=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],t=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(p,v,x,f,y,h,b,m){var w,R,E,C,T,B,H,z,M,X=m.bits,k=0,F=0,s=0,P=0,K=0,$=0,ee=0,V=0,re=0,O=0,I=null,te=0,Y=new n.Buf16(16),G=new n.Buf16(16),oe=null,Ce=0;for(k=0;k<=15;k++)Y[k]=0;for(F=0;F<f;F++)Y[v[x+F]]++;for(K=X,P=15;1<=P&&Y[P]===0;P--);if(P<K&&(K=P),P===0)return y[h++]=20971520,y[h++]=20971520,m.bits=1,0;for(s=1;s<P&&Y[s]===0;s++);for(K<s&&(K=s),k=V=1;k<=15;k++)if(V<<=1,(V-=Y[k])<0)return-1;if(0<V&&(p===0||P!==1))return-1;for(G[1]=0,k=1;k<15;k++)G[k+1]=G[k]+Y[k];for(F=0;F<f;F++)v[x+F]!==0&&(b[G[v[x+F]]++]=F);if(B=p===0?(I=oe=b,19):p===1?(I=o,te-=257,oe=t,Ce-=257,256):(I=a,oe=c,-1),k=s,T=h,ee=F=O=0,E=-1,C=(re=1<<($=K))-1,p===1&&852<re||p===2&&592<re)return 1;for(;;){for(H=k-ee,M=b[F]<B?(z=0,b[F]):b[F]>B?(z=oe[Ce+b[F]],I[te+b[F]]):(z=96,0),w=1<<k-ee,s=R=1<<$;y[T+(O>>ee)+(R-=w)]=H<<24|z<<16|M|0,R!==0;);for(w=1<<k-1;O&w;)w>>=1;if(w!==0?(O&=w-1,O+=w):O=0,F++,--Y[k]==0){if(k===P)break;k=v[x+b[F]]}if(K<k&&(O&C)!==E){for(ee===0&&(ee=K),T+=s,V=1<<($=k-ee);$+ee<P&&!((V-=Y[$+ee])<=0);)$++,V<<=1;if(re+=1<<$,p===1&&852<re||p===2&&592<re)return 1;y[E=O&C]=K<<24|$<<16|T-h|0}}return O!==0&&(y[T+O]=k-ee<<24|64<<16|0),m.bits=K,0}},{"../utils/common":41}],51:[function(r,d,l){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,d,l){var n=r("../utils/common"),o=0,t=1;function a(u){for(var S=u.length;0<=--S;)u[S]=0}var c=0,p=29,v=256,x=v+1+p,f=30,y=19,h=2*x+1,b=15,m=16,w=7,R=256,E=16,C=17,T=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(x+2));a(X);var k=new Array(2*f);a(k);var F=new Array(512);a(F);var s=new Array(256);a(s);var P=new Array(p);a(P);var K,$,ee,V=new Array(f);function re(u,S,L,N,A){this.static_tree=u,this.extra_bits=S,this.extra_base=L,this.elems=N,this.max_length=A,this.has_stree=u&&u.length}function O(u,S){this.dyn_tree=u,this.max_code=0,this.stat_desc=S}function I(u){return u<256?F[u]:F[256+(u>>>7)]}function te(u,S){u.pending_buf[u.pending++]=255&S,u.pending_buf[u.pending++]=S>>>8&255}function Y(u,S,L){u.bi_valid>m-L?(u.bi_buf|=S<<u.bi_valid&65535,te(u,u.bi_buf),u.bi_buf=S>>m-u.bi_valid,u.bi_valid+=L-m):(u.bi_buf|=S<<u.bi_valid&65535,u.bi_valid+=L)}function G(u,S,L){Y(u,L[2*S],L[2*S+1])}function oe(u,S){for(var L=0;L|=1&u,u>>>=1,L<<=1,0<--S;);return L>>>1}function Ce(u,S,L){var N,A,W=new Array(b+1),q=0;for(N=1;N<=b;N++)W[N]=q=q+L[N-1]<<1;for(A=0;A<=S;A++){var Z=u[2*A+1];Z!==0&&(u[2*A]=oe(W[Z]++,Z))}}function ie(u){var S;for(S=0;S<x;S++)u.dyn_ltree[2*S]=0;for(S=0;S<f;S++)u.dyn_dtree[2*S]=0;for(S=0;S<y;S++)u.bl_tree[2*S]=0;u.dyn_ltree[2*R]=1,u.opt_len=u.static_len=0,u.last_lit=u.matches=0}function le(u){8<u.bi_valid?te(u,u.bi_buf):0<u.bi_valid&&(u.pending_buf[u.pending++]=u.bi_buf),u.bi_buf=0,u.bi_valid=0}function _e(u,S,L,N){var A=2*S,W=2*L;return u[A]<u[W]||u[A]===u[W]&&N[S]<=N[L]}function be(u,S,L){for(var N=u.heap[L],A=L<<1;A<=u.heap_len&&(A<u.heap_len&&_e(S,u.heap[A+1],u.heap[A],u.depth)&&A++,!_e(S,N,u.heap[A],u.depth));)u.heap[L]=u.heap[A],L=A,A<<=1;u.heap[L]=N}function Ae(u,S,L){var N,A,W,q,Z=0;if(u.last_lit!==0)for(;N=u.pending_buf[u.d_buf+2*Z]<<8|u.pending_buf[u.d_buf+2*Z+1],A=u.pending_buf[u.l_buf+Z],Z++,N===0?G(u,A,S):(G(u,(W=s[A])+v+1,S),(q=B[W])!==0&&Y(u,A-=P[W],q),G(u,W=I(--N),L),(q=H[W])!==0&&Y(u,N-=V[W],q)),Z<u.last_lit;);G(u,R,S)}function Re(u,S){var L,N,A,W=S.dyn_tree,q=S.stat_desc.static_tree,Z=S.stat_desc.has_stree,Q=S.stat_desc.elems,he=-1;for(u.heap_len=0,u.heap_max=h,L=0;L<Q;L++)W[2*L]!==0?(u.heap[++u.heap_len]=he=L,u.depth[L]=0):W[2*L+1]=0;for(;u.heap_len<2;)W[2*(A=u.heap[++u.heap_len]=he<2?++he:0)]=1,u.depth[A]=0,u.opt_len--,Z&&(u.static_len-=q[2*A+1]);for(S.max_code=he,L=u.heap_len>>1;1<=L;L--)be(u,W,L);for(A=Q;L=u.heap[1],u.heap[1]=u.heap[u.heap_len--],be(u,W,1),N=u.heap[1],u.heap[--u.heap_max]=L,u.heap[--u.heap_max]=N,W[2*A]=W[2*L]+W[2*N],u.depth[A]=(u.depth[L]>=u.depth[N]?u.depth[L]:u.depth[N])+1,W[2*L+1]=W[2*N+1]=A,u.heap[1]=A++,be(u,W,1),2<=u.heap_len;);u.heap[--u.heap_max]=u.heap[1],function(se,Be){var lt,Oe,ut,we,vt,Tt,Fe=Be.dyn_tree,nr=Be.max_code,Vr=Be.stat_desc.static_tree,qr=Be.stat_desc.has_stree,Gr=Be.stat_desc.extra_bits,ir=Be.stat_desc.extra_base,dt=Be.stat_desc.max_length,bt=0;for(we=0;we<=b;we++)se.bl_count[we]=0;for(Fe[2*se.heap[se.heap_max]+1]=0,lt=se.heap_max+1;lt<h;lt++)dt<(we=Fe[2*Fe[2*(Oe=se.heap[lt])+1]+1]+1)&&(we=dt,bt++),Fe[2*Oe+1]=we,nr<Oe||(se.bl_count[we]++,vt=0,ir<=Oe&&(vt=Gr[Oe-ir]),Tt=Fe[2*Oe],se.opt_len+=Tt*(we+vt),qr&&(se.static_len+=Tt*(Vr[2*Oe+1]+vt)));if(bt!==0){do{for(we=dt-1;se.bl_count[we]===0;)we--;se.bl_count[we]--,se.bl_count[we+1]+=2,se.bl_count[dt]--,bt-=2}while(0<bt);for(we=dt;we!==0;we--)for(Oe=se.bl_count[we];Oe!==0;)nr<(ut=se.heap[--lt])||(Fe[2*ut+1]!==we&&(se.opt_len+=(we-Fe[2*ut+1])*Fe[2*ut],Fe[2*ut+1]=we),Oe--)}}(u,S),Ce(W,he,u.bl_count)}function i(u,S,L){var N,A,W=-1,q=S[1],Z=0,Q=7,he=4;for(q===0&&(Q=138,he=3),S[2*(L+1)+1]=65535,N=0;N<=L;N++)A=q,q=S[2*(N+1)+1],++Z<Q&&A===q||(Z<he?u.bl_tree[2*A]+=Z:A!==0?(A!==W&&u.bl_tree[2*A]++,u.bl_tree[2*E]++):Z<=10?u.bl_tree[2*C]++:u.bl_tree[2*T]++,W=A,he=(Z=0)===q?(Q=138,3):A===q?(Q=6,3):(Q=7,4))}function j(u,S,L){var N,A,W=-1,q=S[1],Z=0,Q=7,he=4;for(q===0&&(Q=138,he=3),N=0;N<=L;N++)if(A=q,q=S[2*(N+1)+1],!(++Z<Q&&A===q)){if(Z<he)for(;G(u,A,u.bl_tree),--Z!=0;);else A!==0?(A!==W&&(G(u,A,u.bl_tree),Z--),G(u,E,u.bl_tree),Y(u,Z-3,2)):Z<=10?(G(u,C,u.bl_tree),Y(u,Z-3,3)):(G(u,T,u.bl_tree),Y(u,Z-11,7));W=A,he=(Z=0)===q?(Q=138,3):A===q?(Q=6,3):(Q=7,4)}}a(V);var D=!1;function _(u,S,L,N){Y(u,(c<<1)+(N?1:0),3),function(A,W,q,Z){le(A),te(A,q),te(A,~q),n.arraySet(A.pending_buf,A.window,W,q,A.pending),A.pending+=q}(u,S,L)}l._tr_init=function(u){D||(function(){var S,L,N,A,W,q=new Array(b+1);for(A=N=0;A<p-1;A++)for(P[A]=N,S=0;S<1<<B[A];S++)s[N++]=A;for(s[N-1]=A,A=W=0;A<16;A++)for(V[A]=W,S=0;S<1<<H[A];S++)F[W++]=A;for(W>>=7;A<f;A++)for(V[A]=W<<7,S=0;S<1<<H[A]-7;S++)F[256+W++]=A;for(L=0;L<=b;L++)q[L]=0;for(S=0;S<=143;)X[2*S+1]=8,S++,q[8]++;for(;S<=255;)X[2*S+1]=9,S++,q[9]++;for(;S<=279;)X[2*S+1]=7,S++,q[7]++;for(;S<=287;)X[2*S+1]=8,S++,q[8]++;for(Ce(X,x+1,q),S=0;S<f;S++)k[2*S+1]=5,k[2*S]=oe(S,5);K=new re(X,B,v+1,x,b),$=new re(k,H,0,f,b),ee=new re(new Array(0),z,0,y,w)}(),D=!0),u.l_desc=new O(u.dyn_ltree,K),u.d_desc=new O(u.dyn_dtree,$),u.bl_desc=new O(u.bl_tree,ee),u.bi_buf=0,u.bi_valid=0,ie(u)},l._tr_stored_block=_,l._tr_flush_block=function(u,S,L,N){var A,W,q=0;0<u.level?(u.strm.data_type===2&&(u.strm.data_type=function(Z){var Q,he=4093624447;for(Q=0;Q<=31;Q++,he>>>=1)if(1&he&&Z.dyn_ltree[2*Q]!==0)return o;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return t;for(Q=32;Q<v;Q++)if(Z.dyn_ltree[2*Q]!==0)return t;return o}(u)),Re(u,u.l_desc),Re(u,u.d_desc),q=function(Z){var Q;for(i(Z,Z.dyn_ltree,Z.l_desc.max_code),i(Z,Z.dyn_dtree,Z.d_desc.max_code),Re(Z,Z.bl_desc),Q=y-1;3<=Q&&Z.bl_tree[2*M[Q]+1]===0;Q--);return Z.opt_len+=3*(Q+1)+5+5+4,Q}(u),A=u.opt_len+3+7>>>3,(W=u.static_len+3+7>>>3)<=A&&(A=W)):A=W=L+5,L+4<=A&&S!==-1?_(u,S,L,N):u.strategy===4||W===A?(Y(u,2+(N?1:0),3),Ae(u,X,k)):(Y(u,4+(N?1:0),3),function(Z,Q,he,se){var Be;for(Y(Z,Q-257,5),Y(Z,he-1,5),Y(Z,se-4,4),Be=0;Be<se;Be++)Y(Z,Z.bl_tree[2*M[Be]+1],3);j(Z,Z.dyn_ltree,Q-1),j(Z,Z.dyn_dtree,he-1)}(u,u.l_desc.max_code+1,u.d_desc.max_code+1,q+1),Ae(u,u.dyn_ltree,u.dyn_dtree)),ie(u),N&&le(u)},l._tr_tally=function(u,S,L){return u.pending_buf[u.d_buf+2*u.last_lit]=S>>>8&255,u.pending_buf[u.d_buf+2*u.last_lit+1]=255&S,u.pending_buf[u.l_buf+u.last_lit]=255&L,u.last_lit++,S===0?u.dyn_ltree[2*L]++:(u.matches++,S--,u.dyn_ltree[2*(s[L]+v+1)]++,u.dyn_dtree[2*I(S)]++),u.last_lit===u.lit_bufsize-1},l._tr_align=function(u){Y(u,2,3),G(u,R,X),function(S){S.bi_valid===16?(te(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):8<=S.bi_valid&&(S.pending_buf[S.pending++]=255&S.bi_buf,S.bi_buf>>=8,S.bi_valid-=8)}(u)}},{"../utils/common":41}],53:[function(r,d,l){d.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,d,l){(function(n){(function(o,t){if(!o.setImmediate){var a,c,p,v,x=1,f={},y=!1,h=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,a={}.toString.call(o.process)==="[object process]"?function(E){process.nextTick(function(){w(E)})}:function(){if(o.postMessage&&!o.importScripts){var E=!0,C=o.onmessage;return o.onmessage=function(){E=!1},o.postMessage("","*"),o.onmessage=C,E}}()?(v="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",R,!1):o.attachEvent("onmessage",R),function(E){o.postMessage(v+E,"*")}):o.MessageChannel?((p=new MessageChannel).port1.onmessage=function(E){w(E.data)},function(E){p.port2.postMessage(E)}):h&&"onreadystatechange"in h.createElement("script")?(c=h.documentElement,function(E){var C=h.createElement("script");C.onreadystatechange=function(){w(E),C.onreadystatechange=null,c.removeChild(C),C=null},c.appendChild(C)}):function(E){setTimeout(w,0,E)},b.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var C=new Array(arguments.length-1),T=0;T<C.length;T++)C[T]=arguments[T+1];var B={callback:E,args:C};return f[x]=B,a(x),x++},b.clearImmediate=m}function m(E){delete f[E]}function w(E){if(y)setTimeout(w,0,E);else{var C=f[E];if(C){y=!0;try{(function(T){var B=T.callback,H=T.args;switch(H.length){case 0:B();break;case 1:B(H[0]);break;case 2:B(H[0],H[1]);break;case 3:B(H[0],H[1],H[2]);break;default:B.apply(t,H)}})(C)}finally{m(E),y=!1}}}}function R(E){E.source===o&&typeof E.data=="string"&&E.data.indexOf(v)===0&&w(+E.data.slice(v.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof yt<"u"?yt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Zr);var co=Zr.exports;const ho=bn(co),fo={class:"content"},po={class:"info"},mo=["src"],go=ke({__name:"index",setup(e){const g=pe([{src:lo,boxList:[{name:"头盔",x:.15,y:.15,w:.15,h:.15},{name:"口罩",x:.35,y:.45,w:.25,h:.25}]},{src:uo,boxList:[]}]),r=pe(0);Cr(Nr,a=>{g.value.length>=r.value&&(g.value[r.value].boxList=a)});function d(a){a!==r.value&&(a!==void 0&&(r.value=a),requestAnimationFrame(()=>Ft(g.value[r.value])))}d();function l(a){const c=a[0];if(!c||!c.file)return;const p=URL.createObjectURL(c.file);g.value.push({src:p,boxList:[]})}function n(a){g.value.splice(a,1),g.value.length==0?(r.value=0,Ft()):a==r.value&&(r.value=Math.max(0,r.value-1),Ft(g.value[r.value]))}function o(a){Ze.value=Ze.value.filter(c=>c.name!==a),g.value.forEach(c=>{c.boxList=c.boxList.filter(p=>p.name!==a)}),d()}async function t(){const a="yolo8FormatAnnotator";if(xn(a,"导出中..."),g.value.length==0)return window.$message.warning("没有图片可导出~");const c=new ho,p=c.folder("images"),v=c.folder("annotations");if(!p||!v)return window.$message.warning("图片导出失败~");const x=Ze.value.map(f=>f.name);c.file("names.txt",`names: ["${x.join('", "')}"]`);for(const f of g.value)try{const h=await(await fetch(f.src)).blob(),b=Jt();p.file(b+"."+h.type.split("/")[1],h);const m=f.boxList.map(w=>{const{name:R,x:E,y:C,w:T,h:B}=w;return`${x.findIndex(H=>H===R)} ${E} ${C} ${T} ${B}`}).join(`
`);v.file(b+".txt",m)}catch(y){console.error(`Error fetching image at ${f.src}: ${y}`)}c.generateAsync({type:"blob"}).then(function(f){const y=URL.createObjectURL(f),h=document.createElement("a");h.href=y,h.download="yolo8FormatAnnotator.zip",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(y)}).finally(()=>kn(a))}return window.addEventListener("mousemove",yr),window.addEventListener("mouseup",br),window.addEventListener("keydown",wr),yn(()=>{window.removeEventListener("mousemove",yr),window.removeEventListener("mouseup",br),window.removeEventListener("keydown",wr)}),(a,c)=>(je(),rt("div",fo,[Te("div",po,[ze(de(Ln),{href:"https://github.com/ultralytics/ultralytics",target:"_blank"},{default:Se(()=>c[5]||(c[5]=[Pe(" ultralytics YOLO Vision ")])),_:1,__:[5]}),ze(de(Ee),{onClick:de(so)},{default:Se(()=>c[6]||(c[6]=[Pe("添加标签")])),_:1,__:[6]},8,["onClick"]),ze(de(St),null,{default:Se(()=>[(je(!0),rt(Ct,null,Dt(de(Ze),p=>(je(),Ot(de(Cn),{key:p.name,closable:"",bordered:!1,class:"box-tag",color:{color:p.color,textColor:"#fff"},onClose:v=>o(p.name)},{default:Se(()=>[Pe(Ut(p.name),1)]),_:2},1032,["color","onClose"]))),128))]),_:1}),ze(de(St),null,{default:Se(()=>[ze(de(ji),{multiple:"",accept:"image/*","show-file-list":!1,"file-list":[],"onUpdate:fileList":l},{default:Se(()=>[ze(de(Ee),null,{default:Se(()=>c[7]||(c[7]=[Pe("添加图片")])),_:1,__:[7]})]),_:1}),ze(de(Ee),{onClick:t},{default:Se(()=>c[8]||(c[8]=[Pe("导出")])),_:1,__:[8]})]),_:1}),ze(de(Fn),{class:"file-list"},{default:Se(()=>[ze(de(vi),{hoverable:"",clickable:""},{default:Se(()=>[(je(!0),rt(Ct,null,Dt(g.value,(p,v)=>(je(),Ot(de(bi),{key:p.src,class:Sn([v==r.value&&"active"]),onClick:x=>d(v)},{default:Se(()=>[Te("img",{src:p.src,alt:""},null,8,mo),Pe(" 标注个数："+Ut(p.boxList.length)+" ",1),ze(de(Ee),{onClick:Rn(x=>n(v),["stop"])},{default:Se(()=>[ze(de(zr),{size:"20",component:de(Qi)},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),Te("div",{class:"canvas-box",style:wn({"pointer-events":g.value.length>0?"auto":"none"})},[Te("canvas",{ref_key:"canvas",ref:Pr,onWheel:c[0]||(c[0]=(...p)=>de(mr)&&de(mr)(...p)),onMousedown:c[1]||(c[1]=(...p)=>de(vr)&&de(vr)(...p)),onContextmenu:c[2]||(c[2]=(...p)=>de(_r)&&de(_r)(...p)),onClick:c[3]||(c[3]=(...p)=>de(gr)&&de(gr)(...p))},null,544),ze(de(St),null,{default:Se(()=>[ze(de(Pn),{value:de(zt),"onUpdate:value":c[4]||(c[4]=p=>_n(zt)?zt.value=p:null),size:"large"},{checked:Se(()=>c[9]||(c[9]=[Pe(" 连续创建")])),unchecked:Se(()=>c[10]||(c[10]=[Pe(" 单个创建 ")])),_:1},8,["value"]),(je(!0),rt(Ct,null,Dt(de(Ze),(p,v)=>{var x;return je(),Ot(de(Ee),{key:p.color,onClick:f=>de(io)(v),color:p.color,secondary:((x=de(ae))==null?void 0:x.name)!==p.name},{default:Se(()=>[Pe(Ut(p.name),1)]),_:2},1032,["onClick","color","secondary"])}),128))]),_:1})],4)]))}}),Eo=zn(go,[["__scopeId","data-v-6456d186"]]);export{Eo as default};
