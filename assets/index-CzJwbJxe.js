import{bo as Rt,bp as Nt,bq as $t,br as Be,bs as qt,bt as Oe,bu as Lt,bv as Yt,bw as De,bx as ar,by as Gt,bz as Mt,bA as ve,d as At,H as pt,x as kt,h as G,ab as Jt,aa as Qt,l as sr,n as Le,T as lr,bB as ie,bC as Ue,bD as Te,bE as Pe,ai as Ir,O as Bt,m as ht,al as Rr,an as vt,P as Vt,aG as Br,p as ur,q as Se,bF as Or,I as cr,C as be,S as qe,z as dr,V as Ge,D as hr,aI as Dr,Z as Fe,aE as Ur,az as Tr,aA as Pr,aB as Fr,at as Nr,aC as Lr,aD as Mr,G as ue,B as Pt,A as jr,ao as $r,ap as Wr,U as Zr,bG as Hr,aF as Vr,aP as Me,aY as _e,aZ as fr,bH as Ke,bI as ce,bJ as qr,ag as Gr,o as Wt,c as de,aL as he,b as xt,w as yt,u as ut,a_ as Kr,e as Ut,X as ze,aS as Ae,bK as Xr,bL as Yr,bM as Jr,aR as Ee,aW as Qr,t as Ie,bN as tn,bO as en,_ as rn}from"./index-bdWu6tU0.js";import{N as pr}from"./Input-BIo1mfjZ.js";import{N as nn}from"./InputGroup-BFl7Ce9i.js";import{u as on}from"./use-locale-BkZRJsSa.js";import{C as an,N as sn,T as ln}from"./TrashBinOutline-BaaR6_An.js";import{S as un}from"./Scrollbar-C4FgRC88.js";import{N as cn}from"./Switch-BK0w-Pm7.js";import{N as dn}from"./a-B6178hmm.js";import"./Suffix-DU0y3ooo.js";import"./Progress-XZ3MNBEL.js";import"./Image-dsiQ21H_.js";import"./download-C2161hUv.js";function hn(f,C){switch(f[0]){case"hex":return C?"#000000FF":"#000000";case"rgb":return C?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return C?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return C?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return"#000000"}function oe(f){return f===null?null:/^ *#/.test(f)?"hex":f.includes("rgb")?"rgb":f.includes("hsl")?"hsl":f.includes("hsv")?"hsv":null}function fn(f,C=[255,255,255],s="AA"){const[_,c,n,r]=Rt(Nt(f));if(r===1){const u=fe([_,c,n]),g=fe(C);return(Math.max(u,g)+.05)/(Math.min(u,g)+.05)>=(s==="AA"?4.5:7)}const e=Math.round(_*r+C[0]*(1-r)),a=Math.round(c*r+C[1]*(1-r)),h=Math.round(n*r+C[2]*(1-r)),m=fe([e,a,h]),b=fe(C);return(Math.max(m,b)+.05)/(Math.min(m,b)+.05)>=(s==="AA"?4.5:7)}function fe(f){const[C,s,_]=f.map(c=>(c/=255,c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4)));return .2126*C+.7152*s+.0722*_}function pn(f){return f=Math.round(f),f>=360?359:f<0?0:f}function mn(f){return f=Math.round(f*100)/100,f>1?1:f<0?0:f}const gn={rgb:{hex(f){return $t(Rt(f))},hsl(f){const[C,s,_,c]=Rt(f);return Nt([...Be(C,s,_),c])},hsv(f){const[C,s,_,c]=Rt(f);return qt([...Oe(C,s,_),c])}},hex:{rgb(f){return Lt(Rt(f))},hsl(f){const[C,s,_,c]=Rt(f);return Nt([...Be(C,s,_),c])},hsv(f){const[C,s,_,c]=Rt(f);return qt([...Oe(C,s,_),c])}},hsl:{hex(f){const[C,s,_,c]=Yt(f);return $t([...De(C,s,_),c])},rgb(f){const[C,s,_,c]=Yt(f);return Lt([...De(C,s,_),c])},hsv(f){const[C,s,_,c]=Yt(f);return qt([...ar(C,s,_),c])}},hsv:{hex(f){const[C,s,_,c]=Gt(f);return $t([...Mt(C,s,_),c])},rgb(f){const[C,s,_,c]=Gt(f);return Lt([...Mt(C,s,_),c])},hsl(f){const[C,s,_,c]=Gt(f);return Nt([...ve(C,s,_),c])}}};function mr(f,C,s){return s=s||oe(f),s?s===C?f:gn[s][C](f):null}const ne="12px",vn=12,Zt="6px",bn=At({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(f){const C=pt(null);function s(n){!C.value||!f.rgba||(Jt("mousemove",document,_),Jt("mouseup",document,c),_(n))}function _(n){const{value:r}=C;if(!r)return;const{width:e,left:a}=r.getBoundingClientRect(),h=(n.clientX-a)/(e-vn);f.onUpdateAlpha(mn(h))}function c(){var n;Qt("mousemove",document,_),Qt("mouseup",document,c),(n=f.onComplete)===null||n===void 0||n.call(f)}return{railRef:C,railBackgroundImage:kt(()=>{const{rgba:n}=f;return n?`linear-gradient(to right, rgba(${n[0]}, ${n[1]}, ${n[2]}, 0) 0%, rgba(${n[0]}, ${n[1]}, ${n[2]}, 1) 100%)`:""}),handleMouseDown:s}},render(){const{clsPrefix:f}=this;return G("div",{class:`${f}-color-picker-slider`,ref:"railRef",style:{height:ne,borderRadius:Zt},onMousedown:this.handleMouseDown},G("div",{style:{borderRadius:Zt,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},G("div",{class:`${f}-color-picker-checkboard`}),G("div",{class:`${f}-color-picker-slider__image`,style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&G("div",{style:{position:"absolute",left:Zt,right:Zt,top:0,bottom:0}},G("div",{class:`${f}-color-picker-handle`,style:{left:`calc(${this.alpha*100}% - ${Zt})`,borderRadius:Zt,width:ne,height:ne}},G("div",{class:`${f}-color-picker-handle__fill`,style:{backgroundColor:Lt(this.rgba),borderRadius:Zt,width:ne,height:ne}}))))}}),je=sr("n-color-picker");function _n(f){return/^\d{1,3}\.?\d*$/.test(f.trim())?Math.max(0,Math.min(Number.parseInt(f),255)):!1}function yn(f){return/^\d{1,3}\.?\d*$/.test(f.trim())?Math.max(0,Math.min(Number.parseInt(f),360)):!1}function wn(f){return/^\d{1,3}\.?\d*$/.test(f.trim())?Math.max(0,Math.min(Number.parseInt(f),100)):!1}function xn(f){const C=f.trim();return/^#[0-9a-fA-F]+$/.test(C)?[4,5,7,9].includes(C.length):!1}function kn(f){return/^\d{1,3}\.?\d*%$/.test(f.trim())?Math.max(0,Math.min(Number.parseInt(f)/100,100)):!1}const Sn={paddingSmall:"0 4px"},Xe=At({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(f){const C=pt(""),{themeRef:s}=Le(je,null);lr(()=>{C.value=_()});function _(){const{value:r}=f;if(r===null)return"";const{label:e}=f;return e==="HEX"?r:e==="A"?`${Math.floor(r*100)}%`:String(Math.floor(r))}function c(r){C.value=r}function n(r){let e,a;switch(f.label){case"HEX":a=xn(r),a&&f.onUpdateValue(r),C.value=_();break;case"H":e=yn(r),e===!1?C.value=_():f.onUpdateValue(e);break;case"S":case"L":case"V":e=wn(r),e===!1?C.value=_():f.onUpdateValue(e);break;case"A":e=kn(r),e===!1?C.value=_():f.onUpdateValue(e);break;case"R":case"G":case"B":e=_n(r),e===!1?C.value=_():f.onUpdateValue(e);break}}return{mergedTheme:s,inputValue:C,handleInputChange:n,handleInputUpdateValue:c}},render(){const{mergedTheme:f}=this;return G(pr,{size:"small",placeholder:this.label,theme:f.peers.Input,themeOverrides:f.peerOverrides.Input,builtinThemeOverrides:Sn,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:this.label==="A"?"flex-grow: 1.25;":""})}}),Cn=At({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup(f){return{handleUnitUpdateValue(C,s){const{showAlpha:_}=f;if(f.mode==="hex"){f.onUpdateValue((_?$t:ie)(s));return}let c;switch(f.valueArr===null?c=[0,0,0,0]:c=Array.from(f.valueArr),f.mode){case"hsv":c[C]=s,f.onUpdateValue((_?qt:Pe)(c));break;case"rgb":c[C]=s,f.onUpdateValue((_?Lt:Te)(c));break;case"hsl":c[C]=s,f.onUpdateValue((_?Nt:Ue)(c));break}}}},render(){const{clsPrefix:f,modes:C}=this;return G("div",{class:`${f}-color-picker-input`},G("div",{class:`${f}-color-picker-input__mode`,onClick:this.onUpdateMode,style:{cursor:C.length===1?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),G(nn,null,{default:()=>{const{mode:s,valueArr:_,showAlpha:c}=this;if(s==="hex"){let n=null;try{n=_===null?null:(c?$t:ie)(_)}catch{}return G(Xe,{label:"HEX",showAlpha:c,value:n,onUpdateValue:r=>{this.handleUnitUpdateValue(0,r)}})}return(s+(c?"a":"")).split("").map((n,r)=>G(Xe,{label:n.toUpperCase(),value:_===null?null:_[r],onUpdateValue:e=>{this.handleUnitUpdateValue(r,e)}}))}}))}});function zn(f,C){if(C==="hsv"){const[s,_,c,n]=Gt(f);return Lt([...Mt(s,_,c),n])}return f}function An(f){const C=document.createElement("canvas").getContext("2d");return C?(C.fillStyle=f,C.fillStyle):"#000000"}const En=At({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(f){const C=kt(()=>f.swatches.map(n=>{const r=oe(n);return{value:n,mode:r,legalValue:zn(n,r)}}));function s(n){const{mode:r}=f;let{value:e,mode:a}=n;return a||(a="hex",/^[a-zA-Z]+$/.test(e)?e=An(e):(Ir("color-picker",`color ${e} in swatches is invalid.`),e="#000000")),a===r?e:mr(e,r,a)}function _(n){f.onUpdateColor(s(n))}function c(n,r){n.key==="Enter"&&_(r)}return{parsedSwatchesRef:C,handleSwatchSelect:_,handleSwatchKeyDown:c}},render(){const{clsPrefix:f}=this;return G("div",{class:`${f}-color-picker-swatches`},this.parsedSwatchesRef.map(C=>G("div",{class:`${f}-color-picker-swatch`,tabindex:0,onClick:()=>{this.handleSwatchSelect(C)},onKeydown:s=>{this.handleSwatchKeyDown(s,C)}},G("div",{class:`${f}-color-picker-swatch__fill`,style:{background:C.legalValue}}))))}}),In=At({name:"ColorPickerTrigger",slots:Object,props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(f){const{colorPickerSlots:C,renderLabelRef:s}=Le(je,null);return()=>{const{hsla:_,value:c,clsPrefix:n,onClick:r,disabled:e}=f,a=C.label||s.value;return G("div",{class:[`${n}-color-picker-trigger`,e&&`${n}-color-picker-trigger--disabled`],onClick:e?void 0:r},G("div",{class:`${n}-color-picker-trigger__fill`},G("div",{class:`${n}-color-picker-checkboard`}),G("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:_?Nt(_):""}}),c&&_?G("div",{class:`${n}-color-picker-trigger__value`,style:{color:fn(_)?"white":"black"}},a?a(c):c):null))}}}),Rn=At({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:f=>{const C=oe(f);return!!(!f||C&&C!=="hsv")}},onUpdateColor:{type:Function,required:!0}},setup(f){function C(s){var _;const c=s.target.value;(_=f.onUpdateColor)===null||_===void 0||_.call(f,mr(c.toUpperCase(),f.mode,"hex")),s.stopPropagation()}return{handleChange:C}},render(){const{clsPrefix:f}=this;return G("div",{class:`${f}-color-picker-preview__preview`},G("span",{class:`${f}-color-picker-preview__fill`,style:{background:this.color||"#000000"}}),G("input",{class:`${f}-color-picker-preview__input`,type:"color",value:this.color,onChange:this.handleChange}))}}),Kt="12px",Bn=12,Ht="6px",On=6,Dn="linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",Un=At({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(f){const C=pt(null);function s(n){C.value&&(Jt("mousemove",document,_),Jt("mouseup",document,c),_(n))}function _(n){const{value:r}=C;if(!r)return;const{width:e,left:a}=r.getBoundingClientRect(),h=pn((n.clientX-a-On)/(e-Bn)*360);f.onUpdateHue(h)}function c(){var n;Qt("mousemove",document,_),Qt("mouseup",document,c),(n=f.onComplete)===null||n===void 0||n.call(f)}return{railRef:C,handleMouseDown:s}},render(){const{clsPrefix:f}=this;return G("div",{class:`${f}-color-picker-slider`,style:{height:Kt,borderRadius:Ht}},G("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:Dn,height:Kt,borderRadius:Ht,position:"relative"},onMousedown:this.handleMouseDown},G("div",{style:{position:"absolute",left:Ht,right:Ht,top:0,bottom:0}},G("div",{class:`${f}-color-picker-handle`,style:{left:`calc((${this.hue}%) / 359 * 100 - ${Ht})`,borderRadius:Ht,width:Kt,height:Kt}},G("div",{class:`${f}-color-picker-handle__fill`,style:{backgroundColor:`hsl(${this.hue}, 100%, 50%)`,borderRadius:Ht,width:Kt,height:Kt}})))))}}),pe="12px",me="6px",Tn=At({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(f){const C=pt(null);function s(n){C.value&&(Jt("mousemove",document,_),Jt("mouseup",document,c),_(n))}function _(n){const{value:r}=C;if(!r)return;const{width:e,height:a,left:h,bottom:m}=r.getBoundingClientRect(),b=(m-n.clientY)/a,w=(n.clientX-h)/e,u=100*(w>1?1:w<0?0:w),g=100*(b>1?1:b<0?0:b);f.onUpdateSV(u,g)}function c(){var n;Qt("mousemove",document,_),Qt("mouseup",document,c),(n=f.onComplete)===null||n===void 0||n.call(f)}return{palleteRef:C,handleColor:kt(()=>{const{rgba:n}=f;return n?`rgb(${n[0]}, ${n[1]}, ${n[2]})`:""}),handleMouseDown:s}},render(){const{clsPrefix:f}=this;return G("div",{class:`${f}-color-picker-pallete`,onMousedown:this.handleMouseDown,ref:"palleteRef"},G("div",{class:`${f}-color-picker-pallete__layer`,style:{backgroundImage:`linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`}}),G("div",{class:`${f}-color-picker-pallete__layer ${f}-color-picker-pallete__layer--shadowed`,style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&G("div",{class:`${f}-color-picker-handle`,style:{width:pe,height:pe,borderRadius:me,left:`calc(${this.displayedSv[0]}% - ${me})`,bottom:`calc(${this.displayedSv[1]}% - ${me})`}},G("div",{class:`${f}-color-picker-handle__fill`,style:{backgroundColor:this.handleColor,borderRadius:me,width:pe,height:pe}})))}}),Pn=Bt([ht("color-picker",`
 display: inline-block;
 box-sizing: border-box;
 height: var(--n-height);
 font-size: var(--n-font-size);
 width: 100%;
 position: relative;
 `),ht("color-picker-panel",`
 margin: 4px 0;
 width: 240px;
 font-size: var(--n-panel-font-size);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition:
 box-shadow .3s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 `,[Rr(),ht("input",`
 text-align: center;
 `)]),ht("color-picker-checkboard",`
 background: white; 
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[Bt("&::after",`
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 12px 12px;
 background-position: 0 0, 0 6px, 6px -6px, -6px 0px;
 background-repeat: repeat;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),ht("color-picker-slider",`
 margin-bottom: 8px;
 position: relative;
 box-sizing: border-box;
 `,[vt("image",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `),Bt("&::after",`
 content: "";
 position: absolute;
 border-radius: inherit;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 pointer-events: none;
 `)]),ht("color-picker-handle",`
 z-index: 1;
 box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);
 position: absolute;
 background-color: white;
 overflow: hidden;
 `,[vt("fill",`
 box-sizing: border-box;
 border: 2px solid white;
 `)]),ht("color-picker-pallete",`
 height: 180px;
 position: relative;
 margin-bottom: 8px;
 cursor: crosshair;
 `,[vt("layer",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[Vt("shadowed",`
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 `)])]),ht("color-picker-preview",`
 display: flex;
 `,[vt("sliders",`
 flex: 1 0 auto;
 `),vt("preview",`
 position: relative;
 height: 30px;
 width: 30px;
 margin: 0 0 8px 6px;
 border-radius: 50%;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 overflow: hidden;
 `),vt("fill",`
 display: block;
 width: 30px;
 height: 30px;
 `),vt("input",`
 position: absolute;
 top: 0;
 left: 0;
 width: 30px;
 height: 30px;
 opacity: 0;
 z-index: 1;
 `)]),ht("color-picker-input",`
 display: flex;
 align-items: center;
 `,[ht("input",`
 flex-grow: 1;
 flex-basis: 0;
 `),vt("mode",`
 width: 72px;
 text-align: center;
 `)]),ht("color-picker-control",`
 padding: 12px;
 `),ht("color-picker-action",`
 display: flex;
 margin-top: -4px;
 border-top: 1px solid var(--n-divider-color);
 padding: 8px 12px;
 justify-content: flex-end;
 `,[ht("button","margin-left: 8px;")]),ht("color-picker-trigger",`
 border: var(--n-border);
 height: 100%;
 box-sizing: border-box;
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 cursor: pointer;
 `,[vt("value",`
 white-space: nowrap;
 position: relative;
 `),vt("fill",`
 border-radius: var(--n-border-radius);
 position: absolute;
 display: flex;
 align-items: center;
 justify-content: center;
 left: 4px;
 right: 4px;
 top: 4px;
 bottom: 4px;
 `),Vt("disabled","cursor: not-allowed"),ht("color-picker-checkboard",`
 border-radius: var(--n-border-radius);
 `,[Bt("&::after",`
 --n-block-size: calc((var(--n-height) - 8px) / 3);
 background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);
 background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; 
 `)])]),ht("color-picker-swatches",`
 display: grid;
 grid-gap: 8px;
 flex-wrap: wrap;
 position: relative;
 grid-template-columns: repeat(auto-fill, 18px);
 margin-top: 10px;
 `,[ht("color-picker-swatch",`
 width: 18px;
 height: 18px;
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 8px 8px;
 background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;
 background-repeat: repeat;
 `,[vt("fill",`
 position: relative;
 width: 100%;
 height: 100%;
 border-radius: 3px;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 cursor: pointer;
 `),Bt("&:focus",`
 outline: none;
 `,[vt("fill",[Bt("&::after",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 background: inherit;
 filter: blur(2px);
 content: "";
 `)])])])])]),Fn=Object.assign(Object.assign({},Se.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:Fe.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,onClear:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),Nn=At({name:"ColorPicker",props:Fn,slots:Object,setup(f,{slots:C}){const s=pt(null);let _=null;const c=Br(f),{mergedSizeRef:n,mergedDisabledRef:r}=c,{localeRef:e}=on("global"),{mergedClsPrefixRef:a,namespaceRef:h,inlineThemeDisabled:m}=ur(f),b=Se("ColorPicker","-color-picker",Pn,Or,f,a);cr(je,{themeRef:b,renderLabelRef:be(f,"renderLabel"),colorPickerSlots:C});const w=pt(f.defaultShow),u=qe(be(f,"show"),w);function g(o){const{onUpdateShow:k,"onUpdate:show":D}=f;k&&ue(k,o),D&&ue(D,o),w.value=o}const{defaultValue:l}=f,p=pt(l===void 0?hn(f.modes,f.showAlpha):l),d=qe(be(f,"value"),p),y=pt([d.value]),S=pt(0),E=kt(()=>oe(d.value)),{modes:A}=f,N=pt(oe(d.value)||A[0]||"rgb");function T(){const{modes:o}=f,{value:k}=N,D=o.findIndex(F=>F===k);~D?N.value=o[(D+1)%o.length]:N.value="rgb"}let j,O,Z,J,x,U,i,P;const et=kt(()=>{const{value:o}=d;if(!o)return null;switch(E.value){case"hsv":return Gt(o);case"hsl":return[j,O,Z,P]=Yt(o),[...ar(j,O,Z),P];case"rgb":case"hex":return[x,U,i,P]=Rt(o),[...Oe(x,U,i),P]}}),$=kt(()=>{const{value:o}=d;if(!o)return null;switch(E.value){case"rgb":case"hex":return Rt(o);case"hsv":return[j,O,J,P]=Gt(o),[...Mt(j,O,J),P];case"hsl":return[j,O,Z,P]=Yt(o),[...De(j,O,Z),P]}}),rt=kt(()=>{const{value:o}=d;if(!o)return null;switch(E.value){case"hsl":return Yt(o);case"hsv":return[j,O,J,P]=Gt(o),[...ve(j,O,J),P];case"rgb":case"hex":return[x,U,i,P]=Rt(o),[...Be(x,U,i),P]}}),H=kt(()=>{switch(N.value){case"rgb":case"hex":return $.value;case"hsv":return et.value;case"hsl":return rt.value}}),tt=pt(0),B=pt(1),I=pt([0,0]);function Q(o,k){const{value:D}=et,F=tt.value,z=D?D[3]:1;I.value=[o,k];const{showAlpha:M}=f;switch(N.value){case"hsv":it((M?qt:Pe)([F,o,k,z]),"cursor");break;case"hsl":it((M?Nt:Ue)([...ve(F,o,k),z]),"cursor");break;case"rgb":it((M?Lt:Te)([...Mt(F,o,k),z]),"cursor");break;case"hex":it((M?$t:ie)([...Mt(F,o,k),z]),"cursor");break}}function K(o){tt.value=o;const{value:k}=et;if(!k)return;const[,D,F,z]=k,{showAlpha:M}=f;switch(N.value){case"hsv":it((M?qt:Pe)([o,D,F,z]),"cursor");break;case"rgb":it((M?Lt:Te)([...Mt(o,D,F),z]),"cursor");break;case"hex":it((M?$t:ie)([...Mt(o,D,F),z]),"cursor");break;case"hsl":it((M?Nt:Ue)([...ve(o,D,F),z]),"cursor");break}}function q(o){switch(N.value){case"hsv":[j,O,J]=et.value,it(qt([j,O,J,o]),"cursor");break;case"rgb":[x,U,i]=$.value,it(Lt([x,U,i,o]),"cursor");break;case"hex":[x,U,i]=$.value,it($t([x,U,i,o]),"cursor");break;case"hsl":[j,O,Z]=rt.value,it(Nt([j,O,Z,o]),"cursor");break}B.value=o}function it(o,k){k==="cursor"?_=o:_=null;const{nTriggerFormChange:D,nTriggerFormInput:F}=c,{onUpdateValue:z,"onUpdate:value":M}=f;z&&ue(z,o),M&&ue(M,o),D(),F(),p.value=o}function _t(o){it(o,"input"),jr(nt)}function nt(o=!0){const{value:k}=d;if(k){const{nTriggerFormChange:D,nTriggerFormInput:F}=c,{onComplete:z}=f;z&&z(k);const{value:M}=y,{value:V}=S;o&&(M.splice(V+1,M.length,k),S.value=V+1),D(),F()}}function st(){const{value:o}=S;o-1<0||(it(y.value[o-1],"input"),nt(!1),S.value=o-1)}function gt(){const{value:o}=S;o<0||o+1>=y.value.length||(it(y.value[o+1],"input"),nt(!1),S.value=o+1)}function ft(){it(null,"input");const{onClear:o}=f;o&&o(),g(!1)}function St(){const{value:o}=d,{onConfirm:k}=f;k&&k(o),g(!1)}const wt=kt(()=>S.value>=1),t=kt(()=>{const{value:o}=y;return o.length>1&&S.value<o.length-1});dr(u,o=>{o||(y.value=[d.value],S.value=0)}),lr(()=>{if(!(_&&_===d.value)){const{value:o}=et;o&&(tt.value=o[0],B.value=o[3],I.value=[o[1],o[2]])}_=null});const L=kt(()=>{const{value:o}=n,{common:{cubicBezierEaseInOut:k},self:{textColor:D,color:F,panelFontSize:z,boxShadow:M,border:V,borderRadius:W,dividerColor:Y,[Ge("height",o)]:ct,[Ge("fontSize",o)]:at}}=b.value;return{"--n-bezier":k,"--n-text-color":D,"--n-color":F,"--n-panel-font-size":z,"--n-font-size":at,"--n-box-shadow":M,"--n-border":V,"--n-border-radius":W,"--n-height":ct,"--n-divider-color":Y}}),R=m?hr("color-picker",kt(()=>n.value[0]),L,f):void 0;function v(){var o;const{value:k}=$,{value:D}=tt,{internalActions:F,modes:z,actions:M}=f,{value:V}=b,{value:W}=a;return G("div",{class:[`${W}-color-picker-panel`,R==null?void 0:R.themeClass.value],onDragstart:Y=>{Y.preventDefault()},style:m?void 0:L.value},G("div",{class:`${W}-color-picker-control`},G(Tn,{clsPrefix:W,rgba:k,displayedHue:D,displayedSv:I.value,onUpdateSV:Q,onComplete:nt}),G("div",{class:`${W}-color-picker-preview`},G("div",{class:`${W}-color-picker-preview__sliders`},G(Un,{clsPrefix:W,hue:D,onUpdateHue:K,onComplete:nt}),f.showAlpha?G(bn,{clsPrefix:W,rgba:k,alpha:B.value,onUpdateAlpha:q,onComplete:nt}):null),f.showPreview?G(Rn,{clsPrefix:W,mode:N.value,color:$.value&&ie($.value),onUpdateColor:Y=>{it(Y,"input")}}):null),G(Cn,{clsPrefix:W,showAlpha:f.showAlpha,mode:N.value,modes:z,onUpdateMode:T,value:d.value,valueArr:H.value,onUpdateValue:_t}),((o=f.swatches)===null||o===void 0?void 0:o.length)&&G(En,{clsPrefix:W,mode:N.value,swatches:f.swatches,onUpdateColor:Y=>{it(Y,"input")}})),M!=null&&M.length?G("div",{class:`${W}-color-picker-action`},M.includes("confirm")&&G(Pt,{size:"small",onClick:St,theme:V.peers.Button,themeOverrides:V.peerOverrides.Button},{default:()=>e.value.confirm}),M.includes("clear")&&G(Pt,{size:"small",onClick:ft,disabled:!d.value,theme:V.peers.Button,themeOverrides:V.peerOverrides.Button},{default:()=>e.value.clear})):null,C.action?G("div",{class:`${W}-color-picker-action`},{default:C.action}):F?G("div",{class:`${W}-color-picker-action`},F.includes("undo")&&G(Pt,{size:"small",onClick:st,disabled:!wt.value,theme:V.peers.Button,themeOverrides:V.peerOverrides.Button},{default:()=>e.value.undo}),F.includes("redo")&&G(Pt,{size:"small",onClick:gt,disabled:!t.value,theme:V.peers.Button,themeOverrides:V.peerOverrides.Button},{default:()=>e.value.redo})):null)}return{mergedClsPrefix:a,namespace:h,selfRef:s,hsla:rt,rgba:$,mergedShow:u,mergedDisabled:r,isMounted:Dr(),adjustedTo:Fe(f),mergedValue:d,handleTriggerClick(){g(!0)},handleClickOutside(o){var k;!((k=s.value)===null||k===void 0)&&k.contains(Ur(o))||g(!1)},renderPanel:v,cssVars:m?void 0:L,themeClass:R==null?void 0:R.themeClass,onRender:R==null?void 0:R.onRender}},render(){const{mergedClsPrefix:f,onRender:C}=this;return C==null||C(),G("div",{class:[this.themeClass,`${f}-color-picker`],ref:"selfRef",style:this.cssVars},G(Tr,null,{default:()=>[G(Pr,null,{default:()=>G(In,{clsPrefix:f,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick})}),G(Fr,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===Fe.tdkey,to:this.adjustedTo},{default:()=>G(Nr,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?Lr(this.renderPanel(),[[Mr,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}}),Ln=Bt([ht("list",`
 --n-merged-border-color: var(--n-border-color);
 --n-merged-color: var(--n-color);
 --n-merged-color-hover: var(--n-color-hover);
 margin: 0;
 font-size: var(--n-font-size);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 padding: 0;
 list-style-type: none;
 color: var(--n-text-color);
 background-color: var(--n-merged-color);
 `,[Vt("show-divider",[ht("list-item",[Bt("&:not(:last-child)",[vt("divider",`
 background-color: var(--n-merged-border-color);
 `)])])]),Vt("clickable",[ht("list-item",`
 cursor: pointer;
 `)]),Vt("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `),Vt("hoverable",[ht("list-item",`
 border-radius: var(--n-border-radius);
 `,[Bt("&:hover",`
 background-color: var(--n-merged-color-hover);
 `,[vt("divider",`
 background-color: transparent;
 `)])])]),Vt("bordered, hoverable",[ht("list-item",`
 padding: 12px 20px;
 `),vt("header, footer",`
 padding: 12px 20px;
 `)]),vt("header, footer",`
 padding: 12px 0;
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
 `,[Bt("&:not(:last-child)",`
 border-bottom: 1px solid var(--n-merged-border-color);
 `)]),ht("list-item",`
 position: relative;
 padding: 12px 0; 
 box-sizing: border-box;
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[vt("prefix",`
 margin-right: 20px;
 flex: 0;
 `),vt("suffix",`
 margin-left: 20px;
 flex: 0;
 `),vt("main",`
 flex: 1;
 `),vt("divider",`
 height: 1px;
 position: absolute;
 bottom: 0;
 left: 0;
 right: 0;
 background-color: transparent;
 transition: background-color .3s var(--n-bezier);
 pointer-events: none;
 `)])]),$r(ht("list",`
 --n-merged-color-hover: var(--n-color-hover-modal);
 --n-merged-color: var(--n-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `)),Wr(ht("list",`
 --n-merged-color-hover: var(--n-color-hover-popover);
 --n-merged-color: var(--n-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `))]),Mn=Object.assign(Object.assign({},Se.props),{size:{type:String,default:"medium"},bordered:Boolean,clickable:Boolean,hoverable:Boolean,showDivider:{type:Boolean,default:!0}}),gr=sr("n-list"),jn=At({name:"List",props:Mn,slots:Object,setup(f){const{mergedClsPrefixRef:C,inlineThemeDisabled:s,mergedRtlRef:_}=ur(f),c=Zr("List",_,C),n=Se("List","-list",Ln,Hr,f,C);cr(gr,{showDividerRef:be(f,"showDivider"),mergedClsPrefixRef:C});const r=kt(()=>{const{common:{cubicBezierEaseInOut:a},self:{fontSize:h,textColor:m,color:b,colorModal:w,colorPopover:u,borderColor:g,borderColorModal:l,borderColorPopover:p,borderRadius:d,colorHover:y,colorHoverModal:S,colorHoverPopover:E}}=n.value;return{"--n-font-size":h,"--n-bezier":a,"--n-text-color":m,"--n-color":b,"--n-border-radius":d,"--n-border-color":g,"--n-border-color-modal":l,"--n-border-color-popover":p,"--n-color-modal":w,"--n-color-popover":u,"--n-color-hover":y,"--n-color-hover-modal":S,"--n-color-hover-popover":E}}),e=s?hr("list",void 0,r,f):void 0;return{mergedClsPrefix:C,rtlEnabled:c,cssVars:s?void 0:r,themeClass:e==null?void 0:e.themeClass,onRender:e==null?void 0:e.onRender}},render(){var f;const{$slots:C,mergedClsPrefix:s,onRender:_}=this;return _==null||_(),G("ul",{class:[`${s}-list`,this.rtlEnabled&&`${s}-list--rtl`,this.bordered&&`${s}-list--bordered`,this.showDivider&&`${s}-list--show-divider`,this.hoverable&&`${s}-list--hoverable`,this.clickable&&`${s}-list--clickable`,this.themeClass],style:this.cssVars},C.header?G("div",{class:`${s}-list__header`},C.header()):null,(f=C.default)===null||f===void 0?void 0:f.call(C),C.footer?G("div",{class:`${s}-list__footer`},C.footer()):null)}}),$n=At({name:"ListItem",slots:Object,setup(){const f=Le(gr,null);return f||Vr("list-item","`n-list-item` must be placed in `n-list`."),{showDivider:f.showDividerRef,mergedClsPrefix:f.mergedClsPrefixRef}},render(){const{$slots:f,mergedClsPrefix:C}=this;return G("li",{class:`${C}-list-item`},f.prefix?G("div",{class:`${C}-list-item__prefix`},f.prefix()):null,f.default?G("div",{class:`${C}-list-item__main`},f):null,f.suffix?G("div",{class:`${C}-list-item__suffix`},f.suffix()):null,this.showDivider&&G("div",{class:`${C}-list-item__divider`}))}});function ae(f,C){let s=!1;const{x:_,y:c}=f,n=C.length;for(let r=0,e=n-1;r<n;e=r++){const a=C[r].x,h=C[r].y,m=C[e].x,b=C[e].y;h>c!=b>c&&_<(m-a)*(c-h)/(b-h)+a&&(s=!s)}return s}const vr=pt(),bt={x:0,y:0};let zt=1,Xt=.1,Ye=4,Je=Xt,br=.4;const jt=pt([{name:"头盔",color:"#18a058"},{name:"口罩",color:"#f0a020"},{name:"飞机",color:"#2080f0"}]);let Ft=[];const ot=pt(),ye=pt(!1);let X,Tt=7;const _r=pt();function $e(){const f=Ft.map(C=>({name:C.name,...C.points}));X&&f.push({name:X.name,...X.points}),_r.value=f}let dt;const we=new Image;function yr(f,C){const{naturalWidth:s,naturalHeight:_}=we,c=s/_,r=f/C<=c,e=r?f:C*c,a=r?f/c:C,h=r?0:(f-e)/2,m=r?(C-a)/2:0;return{width:zt*e,height:zt*a,left:zt*h+bt.x,top:zt*m+bt.y}}function Ne(f,C,s,_){const{ctx:c,left:n,top:r,width:e,height:a}=dt,h=18*zt,m=5*zt;c.font=h+"px serif";let b=c.measureText(s);c.fillStyle=_,c.fillRect(n+f*e,r+C*a-(h+2*m),b.width+2*m,h+2*m),c.fillStyle="white",c.textBaseline="bottom",c.fillText(s,n+f*e+m,r+C*a-m)}function Wn(){const{ctx:f,left:C,top:s,width:_,height:c}=dt;function n(r,e,a,h,m){f.fillStyle=m+(255*br).toString(16).split(".")[0],f.fillRect(r,e,a,h),f.strokeStyle=m,f.strokeRect(r,e,a,h)}if(Ft.forEach(r=>{n(C+r.points.x*_,s+r.points.y*c,r.points.w*_,r.points.h*c,r.color),Ne(r.points.x,r.points.y,r.name,r.color)}),ot.value&&ot.value.points.length>1){const r=Math.min(ot.value.points[0].x,ot.value.points[1].x),e=Math.min(ot.value.points[0].y,ot.value.points[1].y),a=Math.max(ot.value.points[0].x,ot.value.points[1].x)-r,h=Math.max(ot.value.points[0].y,ot.value.points[1].y)-e;n(C+r*_,s+e*c,a*_,h*c,ot.value.color),Ne(r,e,ot.value.name,ot.value.color)}}function xe(){X&&(Ft.push(X),X=void 0)}function wr(){if(!X)return;const{left:f,top:C,width:s,height:_}=dt,{x:c,y:n,w:r,h:e}=X.points;return[{x:c,y:n,type:"left-top"},{x:c+r/2,y:n,type:"center-top"},{x:c+r,y:n,type:"right-top"},{x:c+r,y:n+e/2,type:"right-center"},{x:c+r,y:n+e,type:"right-bottom"},{x:c+r/2,y:n+e,type:"center-bottom"},{x:c,y:n+e,type:"left-bottom"},{x:c,y:n+e/2,type:"left-center"}].map(({x:h,y:m,type:b})=>({x:h*s+f,y:m*_+C,type:b}))}function xr(f,C){const s=wr();if(!s)return;const{dom:_}=dt,{x:c,y:n}=_.getBoundingClientRect();function r(e){const a=e.x+c,h=e.y+n;return[{x:a-Tt,y:h-Tt},{x:a+Tt,y:h-Tt},{x:a+Tt,y:h+Tt},{x:a-Tt,y:h+Tt}]}return s.find(e=>ae({x:f,y:C},r(e)))}function Zn(){if(!X)return;const{ctx:f,left:C,top:s,width:_,height:c}=dt,{points:n,color:r}=X,e=C+n.x*_,a=s+n.y*c,h=n.w*_,m=n.h*c;f.fillStyle=r+(255*br).toString(16).split(".")[0],f.fillRect(e,a,h,m),f.strokeStyle="white",f.strokeRect(e,a,h,m),Ne(n.x,n.y,X.name,X.color);const b=wr();b==null||b.forEach(({x:w,y:u})=>{f.strokeStyle=r,f.beginPath(),f.arc(w,u,Tt,0,2*Math.PI),f.stroke(),f.fillStyle="white",f.fill()})}function Hn(){const{clientWidth:f,clientHeight:C,ctx:s}=dt,{left:_,top:c,width:n,height:r}=yr(f,C);s.drawImage(we,_,c,n,r)}function Et(){const f=vr.value,C=f.getContext("2d");if(!f||!C)return;const{clientWidth:s,clientHeight:_}=f;f.width=s,f.height=_;const{x:c,y:n}=f.getBoundingClientRect(),{left:r,top:e,width:a,height:h}=yr(s,_);C.clearRect(bt.x,bt.y,s+bt.x,_+bt.y),dt={dom:f,ctx:C,clientWidth:s,clientHeight:_,x:c,y:n,left:r,top:e,width:a,height:h},Hn(),Wn(),Zn()}let We=!1,Ze=!1,lt,Ot={};function kr(f){if(!dt)return;const{clientX:C,clientY:s}=f,{left:_,top:c,width:n,height:r,x:e,y:a}=dt;return{x:(C-(e+_))/n,y:(s-(a+c))/r}}function ke(f){const{left:C,top:s,width:_,height:c}=dt,n=C+f.points.x*_,r=s+f.points.y*c,e=f.points.w*_,a=f.points.h*c;return[{x:n,y:r},{x:n+e,y:r},{x:n+e,y:r+a},{x:n,y:r+a}]}const Qe=function(){const f=Ke(()=>window.$message.warning(`放大到最大值了！ ${Ye} 倍`),200),C=Ke(()=>window.$message.warning(`缩小到最小值了！ ${Je} 倍`),200);return function(s){if(!dt)return;const{x:_,y:c}=dt,{deltaY:n,clientX:r,clientY:e}=s;function a(){const m=_+bt.x,b=c+bt.y,w=r-m,u=e-b,g=n>0?-Xt:Xt,l=zt-g,p=w/l*g,d=u/l*g;r<m?bt.x+=p:r>m&&(bt.x-=p),e<b?bt.y+=d:e>b&&(bt.y-=d),Et()}function h(){var m;if(n<0&&zt>=Ye)f();else if(n>0&&zt<=Je)C();else{const b=((m=Xt.toString().split(".")[1])==null?void 0:m.length)||0,w=n>0?-Xt:Xt;zt=Number((zt+w).toFixed(b)),a()}}h()}}();function tr(f){const{clientX:C,clientY:s}=f;if(!(!dt||We)){if(ot.value){const _=kr(f);if(_===void 0)return;if(ot.value.points.length===0)ot.value.points[0]=_;else{const c=Math.min(ot.value.points[0].x,_.x),n=Math.min(ot.value.points[0].y,_.y),r=Math.max(ot.value.points[0].x,_.x)-c,e=Math.max(ot.value.points[0].y,_.y)-n;if(Ft.push({id:Me(),name:ot.value.name,color:ot.value.color,points:{x:c,y:n,w:r,h:e}}),$e(),ye.value){const a=ot.value;ot.value={name:a.name,color:a.color,points:[]}}else ot.value=void 0}Et()}else if(!lt){const{x:_,y:c}=dt;if(X&&ae({x:C-_,y:s-c},ke(X)))xe(),Et();else{const r=[...Ft];r.sort((a,h)=>a.points.w*a.points.h-h.points.w*h.points.h);const e=r.find(a=>ae({x:C-_,y:s-c},ke(a)));xe(),e&&(Ft=Ft.filter(a=>a.id!==e.id),X=e),Et()}}}}function er(f){const{clientX:C,clientY:s}=f;if(!dt)return;const{x:_,y:c,dom:n}=dt;if(X){const r=xr(C,s),e=X&&ae({x:C-_,y:s-c},ke(X));(r||e)&&(lt=r?r.type:"box",Ot={x:C,y:s},e&&!r&&(n.style.cursor="move"))}else ot.value||(Ze=!0)}function rr(){if(Ot={},Ze=!1,requestAnimationFrame(()=>{lt=void 0,We=!1}),!dt)return;const{dom:f}=dt;f.style.cursor="inherit"}const Sr={"left-top":"nwse-resize","center-top":"ns-resize","right-top":"nesw-resize","right-center":"ew-resize","right-bottom":"nwse-resize","center-bottom":"ns-resize","left-bottom":"nesw-resize","left-center":"ew-resize"};function Vn(f,C){if(!lt)return;const{x:s,y:_}=Ot;if(s===void 0||_===void 0||!X)return;const{width:c,height:n,dom:r}=dt,e={x:(f-s)/c,y:(C-_)/n};if(Ot={x:f,y:C},lt=="left-top"){X.points.x+=e.x,X.points.y+=e.y,X.points.w+=-e.x,X.points.h+=-e.y;const a=X.points.w<0,h=X.points.h<0;a&&h?lt="right-bottom":a?lt="right-top":h&&(lt="left-bottom")}else if(lt=="center-top")X.points.y+=e.y,X.points.h+=-e.y,X.points.h<0&&(lt="center-bottom");else if(lt=="right-top"){X.points.y+=e.y,X.points.w+=e.x,X.points.h+=-e.y;const a=X.points.w<0,h=X.points.h<0;a&&h?lt="left-bottom":a?lt="left-top":h&&(lt="right-bottom")}else if(lt=="right-center")X.points.w+=e.x,X.points.w<0&&(lt="left-center");else if(lt=="right-bottom"){X.points.w+=e.x,X.points.h+=e.y;const a=X.points.w<0,h=X.points.h<0;a&&h?lt="left-top":a?lt="left-bottom":h&&(lt="right-top")}else if(lt=="center-bottom")X.points.h+=e.y,X.points.h<0&&(lt="center-top");else if(lt=="left-bottom"){X.points.x+=e.x,X.points.w+=-e.x,X.points.h+=e.y;const a=X.points.w<0,h=X.points.h<0;a&&h?lt="right-top":a?lt="right-bottom":h&&(lt="left-top")}else lt=="left-center"?(X.points.x+=e.x,X.points.w+=-e.x,X.points.w<0&&(lt="right-center")):lt=="box"&&(X.points.x+=e.x,X.points.y+=e.y);lt!="box"&&(r.style.cursor=Sr[lt]),X.points.w<0&&(X.points.x+=X.points.w,X.points.w=-X.points.w),X.points.h<0&&(X.points.y+=X.points.h,X.points.h=-X.points.h),$e(),Et()}function nr(f){const{clientX:C,clientY:s}=f;if(dt){if(Ze)Ot.x!==void 0&&Ot.y!==void 0&&(We=!0,bt.x+=C-Ot.x,bt.y+=s-Ot.y,Et()),Ot.x=C,Ot.y=s;else if(ot.value!==void 0&&ot.value.points.length>0){const _=kr(f);if(_===void 0)return;ot.value.points[1]=_,Et()}else if(X)if(lt)Vn(C,s);else{const{x:_,y:c,dom:n}=dt,r=xr(C,s),e=ae({x:C-_,y:s-c},ke(X));r||e?n.style.cursor=r?Sr[r.type]:"move":n.style.cursor="inherit"}}}function ir(f){if(dt&&f.key==="Delete"){const C=!!ot.value,s=!!X;ot.value=void 0,X=void 0,s&&$e(),(C||s)&&Et()}}function or(f){if(dt)if(f.preventDefault(),ot.value){const C=ot.value.points.length>0;ot.value=void 0,C&&Et()}else X&&(xe(),Et())}function qn(f){const C=jt.value[f];!dt||!C||(ot.value={...C,points:[]},X&&xe())}function Re(f){if(Ft=[],X=void 0,ot.value=void 0,f){const{src:C}=f;we.src=C,Ft=f.boxList.map(s=>{const _=jt.value.find(n=>n.name===s.name);if(!_)return;const c={...s};return delete c.name,{id:Me(),name:s.name,color:_.color,points:c}}).filter(Boolean),we.onload=function(){zt=1,bt.x=0,bt.y=0,Et()}}else if(dt){const{ctx:C,clientWidth:s,clientHeight:_}=dt;C.clearRect(bt.x,bt.y,s+bt.x,_+bt.y)}}function Gn(){const f="0123456789ABCDEF";let C="#";for(let s=0;s<6;s++)C+=f[Math.floor(Math.random()*16)];return C}function Kn(f){return()=>G(fr,null,{default:()=>G(f)})}function Xn(){const f=pt(Gn()),C=pt("你好啊你好");window.$dialog.create({icon:Kn(an),title:"添加方框类别",content:()=>G(_e,{vertical:!0},()=>[G(pr,{label:"类别名称",value:C.value,onUpdateValue:s=>C.value=s}),G(Nn,{modes:["hex"],"show-alpha":!1,label:"类别颜色",value:f.value,onUpdateValue:s=>f.value=s})]),positiveText:"添加",negativeText:"取消",onPositiveClick:()=>{jt.value.push({name:C.value,color:f.value})}})}const Yn=""+new URL("1-D6MQjZe8.avif",import.meta.url).href,Jn=""+new URL("2-BR1XFc7x.avif",import.meta.url).href;function ge(f){throw new Error('Could not dynamically require "'+f+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(f,C){(function(s){f.exports=s()})(function(){return function s(_,c,n){function r(h,m){if(!c[h]){if(!_[h]){var b=typeof ge=="function"&&ge;if(!m&&b)return b(h,!0);if(e)return e(h,!0);var w=new Error("Cannot find module '"+h+"'");throw w.code="MODULE_NOT_FOUND",w}var u=c[h]={exports:{}};_[h][0].call(u.exports,function(g){var l=_[h][1][g];return r(l||g)},u,u.exports,s,_,c,n)}return c[h].exports}for(var e=typeof ge=="function"&&ge,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(s,_,c){var n=s("./utils"),r=s("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(a){for(var h,m,b,w,u,g,l,p=[],d=0,y=a.length,S=y,E=n.getTypeOf(a)!=="string";d<a.length;)S=y-d,b=E?(h=a[d++],m=d<y?a[d++]:0,d<y?a[d++]:0):(h=a.charCodeAt(d++),m=d<y?a.charCodeAt(d++):0,d<y?a.charCodeAt(d++):0),w=h>>2,u=(3&h)<<4|m>>4,g=1<S?(15&m)<<2|b>>6:64,l=2<S?63&b:64,p.push(e.charAt(w)+e.charAt(u)+e.charAt(g)+e.charAt(l));return p.join("")},c.decode=function(a){var h,m,b,w,u,g,l=0,p=0,d="data:";if(a.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var y,S=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===e.charAt(64)&&S--,a.charAt(a.length-2)===e.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=r.uint8array?new Uint8Array(0|S):new Array(0|S);l<a.length;)h=e.indexOf(a.charAt(l++))<<2|(w=e.indexOf(a.charAt(l++)))>>4,m=(15&w)<<4|(u=e.indexOf(a.charAt(l++)))>>2,b=(3&u)<<6|(g=e.indexOf(a.charAt(l++))),y[p++]=h,u!==64&&(y[p++]=m),g!==64&&(y[p++]=b);return y}},{"./support":30,"./utils":32}],2:[function(s,_,c){var n=s("./external"),r=s("./stream/DataWorker"),e=s("./stream/Crc32Probe"),a=s("./stream/DataLengthProbe");function h(m,b,w,u,g){this.compressedSize=m,this.uncompressedSize=b,this.crc32=w,this.compression=u,this.compressedContent=g}h.prototype={getContentWorker:function(){var m=new r(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),b=this;return m.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new r(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(m,b,w){return m.pipe(new e).pipe(new a("uncompressedSize")).pipe(b.compressWorker(w)).pipe(new a("compressedSize")).withStreamInfo("compression",b)},_.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,_,c){var n=s("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},c.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,_,c){var n=s("./utils"),r=function(){for(var e,a=[],h=0;h<256;h++){e=h;for(var m=0;m<8;m++)e=1&e?3988292384^e>>>1:e>>>1;a[h]=e}return a}();_.exports=function(e,a){return e!==void 0&&e.length?n.getTypeOf(e)!=="string"?function(h,m,b,w){var u=r,g=w+b;h^=-1;for(var l=w;l<g;l++)h=h>>>8^u[255&(h^m[l])];return-1^h}(0|a,e,e.length,0):function(h,m,b,w){var u=r,g=w+b;h^=-1;for(var l=w;l<g;l++)h=h>>>8^u[255&(h^m.charCodeAt(l))];return-1^h}(0|a,e,e.length,0):0}},{"./utils":32}],5:[function(s,_,c){c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],6:[function(s,_,c){var n=null;n=typeof Promise<"u"?Promise:s("lie"),_.exports={Promise:n}},{lie:37}],7:[function(s,_,c){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=s("pako"),e=s("./utils"),a=s("./stream/GenericWorker"),h=n?"uint8array":"array";function m(b,w){a.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=w,this.meta={}}c.magic="\b\0",e.inherits(m,a),m.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(h,b.data),!1)},m.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(w){b.push({data:w,meta:b.meta})}},c.compressWorker=function(b){return new m("Deflate",b)},c.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,_,c){function n(u,g){var l,p="";for(l=0;l<g;l++)p+=String.fromCharCode(255&u),u>>>=8;return p}function r(u,g,l,p,d,y){var S,E,A=u.file,N=u.compression,T=y!==h.utf8encode,j=e.transformTo("string",y(A.name)),O=e.transformTo("string",h.utf8encode(A.name)),Z=A.comment,J=e.transformTo("string",y(Z)),x=e.transformTo("string",h.utf8encode(Z)),U=O.length!==A.name.length,i=x.length!==Z.length,P="",et="",$="",rt=A.dir,H=A.date,tt={crc32:0,compressedSize:0,uncompressedSize:0};g&&!l||(tt.crc32=u.crc32,tt.compressedSize=u.compressedSize,tt.uncompressedSize=u.uncompressedSize);var B=0;g&&(B|=8),T||!U&&!i||(B|=2048);var I=0,Q=0;rt&&(I|=16),d==="UNIX"?(Q=798,I|=function(q,it){var _t=q;return q||(_t=it?16893:33204),(65535&_t)<<16}(A.unixPermissions,rt)):(Q=20,I|=function(q){return 63&(q||0)}(A.dosPermissions)),S=H.getUTCHours(),S<<=6,S|=H.getUTCMinutes(),S<<=5,S|=H.getUTCSeconds()/2,E=H.getUTCFullYear()-1980,E<<=4,E|=H.getUTCMonth()+1,E<<=5,E|=H.getUTCDate(),U&&(et=n(1,1)+n(m(j),4)+O,P+="up"+n(et.length,2)+et),i&&($=n(1,1)+n(m(J),4)+x,P+="uc"+n($.length,2)+$);var K="";return K+=`
\0`,K+=n(B,2),K+=N.magic,K+=n(S,2),K+=n(E,2),K+=n(tt.crc32,4),K+=n(tt.compressedSize,4),K+=n(tt.uncompressedSize,4),K+=n(j.length,2),K+=n(P.length,2),{fileRecord:b.LOCAL_FILE_HEADER+K+j+P,dirRecord:b.CENTRAL_FILE_HEADER+n(Q,2)+K+n(J.length,2)+"\0\0\0\0"+n(I,4)+n(p,4)+j+P+J}}var e=s("../utils"),a=s("../stream/GenericWorker"),h=s("../utf8"),m=s("../crc32"),b=s("../signature");function w(u,g,l,p){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=l,this.encodeFileName=p,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(w,a),w.prototype.push=function(u){var g=u.meta.percent||0,l=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,a.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:l?(g+100*(l-p-1))/l:100}}))},w.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var g=this.streamFiles&&!u.file.dir;if(g){var l=r(u,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:l.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(u){this.accumulate=!1;var g=this.streamFiles&&!u.file.dir,l=r(u,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(l.dirRecord),g)this.push({data:function(p){return b.DATA_DESCRIPTOR+n(p.crc32,4)+n(p.compressedSize,4)+n(p.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:l.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var u=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var l=this.bytesWritten-u,p=function(d,y,S,E,A){var N=e.transformTo("string",A(E));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(d,2)+n(d,2)+n(y,4)+n(S,4)+n(N.length,2)+N}(this.dirRecords.length,l,u,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(u){this._sources.push(u);var g=this;return u.on("data",function(l){g.processChunk(l)}),u.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),u.on("error",function(l){g.error(l)}),this},w.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(u){var g=this._sources;if(!a.prototype.error.call(this,u))return!1;for(var l=0;l<g.length;l++)try{g[l].error(u)}catch{}return!0},w.prototype.lock=function(){a.prototype.lock.call(this);for(var u=this._sources,g=0;g<u.length;g++)u[g].lock()},_.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,_,c){var n=s("../compressions"),r=s("./ZipFileWorker");c.generateWorker=function(e,a,h){var m=new r(a.streamFiles,h,a.platform,a.encodeFileName),b=0;try{e.forEach(function(w,u){b++;var g=function(y,S){var E=y||S,A=n[E];if(!A)throw new Error(E+" is not a valid compression method !");return A}(u.options.compression,a.compression),l=u.options.compressionOptions||a.compressionOptions||{},p=u.dir,d=u.date;u._compressWorker(g,l).withStreamInfo("file",{name:w,dir:p,date:d,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(m)}),m.entriesCount=b}catch(w){m.error(w)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,_,c){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new n;for(var e in this)typeof this[e]!="function"&&(r[e]=this[e]);return r}}(n.prototype=s("./object")).loadAsync=s("./load"),n.support=s("./support"),n.defaults=s("./defaults"),n.version="3.10.1",n.loadAsync=function(r,e){return new n().loadAsync(r,e)},n.external=s("./external"),_.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,_,c){var n=s("./utils"),r=s("./external"),e=s("./utf8"),a=s("./zipEntries"),h=s("./stream/Crc32Probe"),m=s("./nodejsUtils");function b(w){return new r.Promise(function(u,g){var l=w.decompressed.getContentWorker().pipe(new h);l.on("error",function(p){g(p)}).on("end",function(){l.streamInfo.crc32!==w.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}_.exports=function(w,u){var g=this;return u=n.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),m.isNode&&m.isStream(w)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",w,!0,u.optimizedBinaryString,u.base64).then(function(l){var p=new a(u);return p.load(l),p}).then(function(l){var p=[r.Promise.resolve(l)],d=l.files;if(u.checkCRC32)for(var y=0;y<d.length;y++)p.push(b(d[y]));return r.Promise.all(p)}).then(function(l){for(var p=l.shift(),d=p.files,y=0;y<d.length;y++){var S=d[y],E=S.fileNameStr,A=n.resolve(S.fileNameStr);g.file(A,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:u.createFolders}),S.dir||(g.file(A).unsafeOriginalName=E)}return p.zipComment.length&&(g.comment=p.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,_,c){var n=s("../utils"),r=s("../stream/GenericWorker");function e(a,h){r.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(h)}n.inherits(e,r),e.prototype._bindStream=function(a){var h=this;(this._stream=a).pause(),a.on("data",function(m){h.push({data:m,meta:{percent:0}})}).on("error",function(m){h.isPaused?this.generatedError=m:h.error(m)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},e.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},_.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,_,c){var n=s("readable-stream").Readable;function r(e,a,h){n.call(this,a),this._helper=e;var m=this;e.on("data",function(b,w){m.push(b)||m._helper.pause(),h&&h(w)}).on("error",function(b){m.emit("error",b)}).on("end",function(){m.push(null)})}s("../utils").inherits(r,n),r.prototype._read=function(){this._helper.resume()},_.exports=r},{"../utils":32,"readable-stream":16}],14:[function(s,_,c){_.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,r);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,r)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var r=new Buffer(n);return r.fill(0),r},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(s,_,c){function n(A,N,T){var j,O=e.getTypeOf(N),Z=e.extend(T||{},m);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(A=d(A)),Z.createFolders&&(j=p(A))&&y.call(this,j,!0);var J=O==="string"&&Z.binary===!1&&Z.base64===!1;T&&T.binary!==void 0||(Z.binary=!J),(N instanceof b&&N.uncompressedSize===0||Z.dir||!N||N.length===0)&&(Z.base64=!1,Z.binary=!0,N="",Z.compression="STORE",O="string");var x=null;x=N instanceof b||N instanceof a?N:g.isNode&&g.isStream(N)?new l(A,N):e.prepareContent(A,N,Z.binary,Z.optimizedBinaryString,Z.base64);var U=new w(A,x,Z);this.files[A]=U}var r=s("./utf8"),e=s("./utils"),a=s("./stream/GenericWorker"),h=s("./stream/StreamHelper"),m=s("./defaults"),b=s("./compressedObject"),w=s("./zipObject"),u=s("./generate"),g=s("./nodejsUtils"),l=s("./nodejs/NodejsStreamInputAdapter"),p=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var N=A.lastIndexOf("/");return 0<N?A.substring(0,N):""},d=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},y=function(A,N){return N=N!==void 0?N:m.createFolders,A=d(A),this.files[A]||n.call(this,A,null,{dir:!0,createFolders:N}),this.files[A]};function S(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var N,T,j;for(N in this.files)j=this.files[N],(T=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&A(T,j)},filter:function(A){var N=[];return this.forEach(function(T,j){A(T,j)&&N.push(j)}),N},file:function(A,N,T){if(arguments.length!==1)return A=this.root+A,n.call(this,A,N,T),this;if(S(A)){var j=A;return this.filter(function(Z,J){return!J.dir&&j.test(Z)})}var O=this.files[this.root+A];return O&&!O.dir?O:null},folder:function(A){if(!A)return this;if(S(A))return this.filter(function(O,Z){return Z.dir&&A.test(O)});var N=this.root+A,T=y.call(this,N),j=this.clone();return j.root=T.name,j},remove:function(A){A=this.root+A;var N=this.files[A];if(N||(A.slice(-1)!=="/"&&(A+="/"),N=this.files[A]),N&&!N.dir)delete this.files[A];else for(var T=this.filter(function(O,Z){return Z.name.slice(0,A.length)===A}),j=0;j<T.length;j++)delete this.files[T[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var N,T={};try{if((T=e.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");e.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var j=T.comment||this.comment||"";N=u.generateWorker(this,T,j)}catch(O){(N=new a("error")).error(O)}return new h(N,T.type||"string",T.mimeType)},generateAsync:function(A,N){return this.generateInternalStream(A).accumulate(N)},generateNodeStream:function(A,N){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(N)}};_.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,_,c){_.exports=s("stream")},{stream:void 0}],17:[function(s,_,c){var n=s("./DataReader");function r(e){n.call(this,e);for(var a=0;a<this.data.length;a++)e[a]=255&e[a]}s("../utils").inherits(r,n),r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var a=e.charCodeAt(0),h=e.charCodeAt(1),m=e.charCodeAt(2),b=e.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===a&&this.data[w+1]===h&&this.data[w+2]===m&&this.data[w+3]===b)return w-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var a=e.charCodeAt(0),h=e.charCodeAt(1),m=e.charCodeAt(2),b=e.charCodeAt(3),w=this.readData(4);return a===w[0]&&h===w[1]&&m===w[2]&&b===w[3]},r.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,a},_.exports=r},{"../utils":32,"./DataReader":18}],18:[function(s,_,c){var n=s("../utils");function r(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var a,h=0;for(this.checkOffset(e),a=this.index+e-1;a>=this.index;a--)h=(h<<8)+this.byteAt(a);return this.index+=e,h},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},_.exports=r},{"../utils":32}],19:[function(s,_,c){var n=s("./Uint8ArrayReader");function r(e){n.call(this,e)}s("../utils").inherits(r,n),r.prototype.readData=function(e){this.checkOffset(e);var a=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,a},_.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,_,c){var n=s("./DataReader");function r(e){n.call(this,e)}s("../utils").inherits(r,n),r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},r.prototype.readData=function(e){this.checkOffset(e);var a=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,a},_.exports=r},{"../utils":32,"./DataReader":18}],21:[function(s,_,c){var n=s("./ArrayReader");function r(e){n.call(this,e)}s("../utils").inherits(r,n),r.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,a},_.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(s,_,c){var n=s("../utils"),r=s("../support"),e=s("./ArrayReader"),a=s("./StringReader"),h=s("./NodeBufferReader"),m=s("./Uint8ArrayReader");_.exports=function(b){var w=n.getTypeOf(b);return n.checkSupport(w),w!=="string"||r.uint8array?w==="nodebuffer"?new h(b):r.uint8array?new m(n.transformTo("uint8array",b)):new e(n.transformTo("array",b)):new a(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,_,c){c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,_,c){var n=s("./GenericWorker"),r=s("../utils");function e(a){n.call(this,"ConvertWorker to "+a),this.destType=a}r.inherits(e,n),e.prototype.processChunk=function(a){this.push({data:r.transformTo(this.destType,a.data),meta:a.meta})},_.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(s,_,c){var n=s("./GenericWorker"),r=s("../crc32");function e(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(e,n),e.prototype.processChunk=function(a){this.streamInfo.crc32=r(a.data,this.streamInfo.crc32||0),this.push(a)},_.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,_,c){var n=s("../utils"),r=s("./GenericWorker");function e(a){r.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}n.inherits(e,r),e.prototype.processChunk=function(a){if(a){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+a.data.length}r.prototype.processChunk.call(this,a)},_.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(s,_,c){var n=s("../utils"),r=s("./GenericWorker");function e(a){r.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(m){h.dataIsReady=!0,h.data=m,h.max=m&&m.length||0,h.type=n.getTypeOf(m),h.isPaused||h._tickAndRepeat()},function(m){h.error(m)})}n.inherits(e,r),e.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,h);break;case"uint8array":a=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":a=this.data.slice(this.index,h)}return this.index=h,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},_.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(s,_,c){function n(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,e){return this._listeners[r].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,e){if(this._listeners[r])for(var a=0;a<this._listeners[r].length;a++)this._listeners[r][a].call(this,e)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var e=this;return r.on("data",function(a){e.processChunk(a)}),r.on("end",function(){e.end()}),r.on("error",function(a){e.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,e){return this.extraStreamInfo[r]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},_.exports=n},{}],29:[function(s,_,c){var n=s("../utils"),r=s("./ConvertWorker"),e=s("./GenericWorker"),a=s("../base64"),h=s("../support"),m=s("../external"),b=null;if(h.nodestream)try{b=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(g,l){return new m.Promise(function(p,d){var y=[],S=g._internalType,E=g._outputType,A=g._mimeType;g.on("data",function(N,T){y.push(N),l&&l(T)}).on("error",function(N){y=[],d(N)}).on("end",function(){try{var N=function(T,j,O){switch(T){case"blob":return n.newBlob(n.transformTo("arraybuffer",j),O);case"base64":return a.encode(j);default:return n.transformTo(T,j)}}(E,function(T,j){var O,Z=0,J=null,x=0;for(O=0;O<j.length;O++)x+=j[O].length;switch(T){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(J=new Uint8Array(x),O=0;O<j.length;O++)J.set(j[O],Z),Z+=j[O].length;return J;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+T+"'")}}(S,y),A);p(N)}catch(T){d(T)}y=[]}).resume()})}function u(g,l,p){var d=l;switch(l){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=l,this._mimeType=p,n.checkSupport(d),this._worker=g.pipe(new r(d)),g.lock()}catch(y){this._worker=new e("error"),this._worker.error(y)}}u.prototype={accumulate:function(g){return w(this,g)},on:function(g,l){var p=this;return g==="data"?this._worker.on(g,function(d){l.call(p,d.data,d.meta)}):this._worker.on(g,function(){n.delay(l,arguments,p)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},g)}},_.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,_,c){if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",c.nodebuffer=typeof Buffer<"u",c.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")c.blob=!1;else{var n=new ArrayBuffer(0);try{c.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(n),c.blob=r.getBlob("application/zip").size===0}catch{c.blob=!1}}}try{c.nodestream=!!s("readable-stream").Readable}catch{c.nodestream=!1}},{"readable-stream":16}],31:[function(s,_,c){for(var n=s("./utils"),r=s("./support"),e=s("./nodejsUtils"),a=s("./stream/GenericWorker"),h=new Array(256),m=0;m<256;m++)h[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;h[254]=h[254]=1;function b(){a.call(this,"utf-8 decode"),this.leftOver=null}function w(){a.call(this,"utf-8 encode")}c.utf8encode=function(u){return r.nodebuffer?e.newBufferFrom(u,"utf-8"):function(g){var l,p,d,y,S,E=g.length,A=0;for(y=0;y<E;y++)(64512&(p=g.charCodeAt(y)))==55296&&y+1<E&&(64512&(d=g.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(d-56320),y++),A+=p<128?1:p<2048?2:p<65536?3:4;for(l=r.uint8array?new Uint8Array(A):new Array(A),y=S=0;S<A;y++)(64512&(p=g.charCodeAt(y)))==55296&&y+1<E&&(64512&(d=g.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(d-56320),y++),p<128?l[S++]=p:(p<2048?l[S++]=192|p>>>6:(p<65536?l[S++]=224|p>>>12:(l[S++]=240|p>>>18,l[S++]=128|p>>>12&63),l[S++]=128|p>>>6&63),l[S++]=128|63&p);return l}(u)},c.utf8decode=function(u){return r.nodebuffer?n.transformTo("nodebuffer",u).toString("utf-8"):function(g){var l,p,d,y,S=g.length,E=new Array(2*S);for(l=p=0;l<S;)if((d=g[l++])<128)E[p++]=d;else if(4<(y=h[d]))E[p++]=65533,l+=y-1;else{for(d&=y===2?31:y===3?15:7;1<y&&l<S;)d=d<<6|63&g[l++],y--;1<y?E[p++]=65533:d<65536?E[p++]=d:(d-=65536,E[p++]=55296|d>>10&1023,E[p++]=56320|1023&d)}return E.length!==p&&(E.subarray?E=E.subarray(0,p):E.length=p),n.applyFromCharCode(E)}(u=n.transformTo(r.uint8array?"uint8array":"array",u))},n.inherits(b,a),b.prototype.processChunk=function(u){var g=n.transformTo(r.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var l=g;(g=new Uint8Array(l.length+this.leftOver.length)).set(this.leftOver,0),g.set(l,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var p=function(y,S){var E;for((S=S||y.length)>y.length&&(S=y.length),E=S-1;0<=E&&(192&y[E])==128;)E--;return E<0||E===0?S:E+h[y[E]]>S?E:S}(g),d=g;p!==g.length&&(r.uint8array?(d=g.subarray(0,p),this.leftOver=g.subarray(p,g.length)):(d=g.slice(0,p),this.leftOver=g.slice(p,g.length))),this.push({data:c.utf8decode(d),meta:u.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=b,n.inherits(w,a),w.prototype.processChunk=function(u){this.push({data:c.utf8encode(u.data),meta:u.meta})},c.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,_,c){var n=s("./support"),r=s("./base64"),e=s("./nodejsUtils"),a=s("./external");function h(l){return l}function m(l,p){for(var d=0;d<l.length;++d)p[d]=255&l.charCodeAt(d);return p}s("setimmediate"),c.newBlob=function(l,p){c.checkSupport("blob");try{return new Blob([l],{type:p})}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return d.append(l),d.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(l,p,d){var y=[],S=0,E=l.length;if(E<=d)return String.fromCharCode.apply(null,l);for(;S<E;)p==="array"||p==="nodebuffer"?y.push(String.fromCharCode.apply(null,l.slice(S,Math.min(S+d,E)))):y.push(String.fromCharCode.apply(null,l.subarray(S,Math.min(S+d,E)))),S+=d;return y.join("")},stringifyByChar:function(l){for(var p="",d=0;d<l.length;d++)p+=String.fromCharCode(l[d]);return p},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch{return!1}}()}};function w(l){var p=65536,d=c.getTypeOf(l),y=!0;if(d==="uint8array"?y=b.applyCanBeUsed.uint8array:d==="nodebuffer"&&(y=b.applyCanBeUsed.nodebuffer),y)for(;1<p;)try{return b.stringifyByChunk(l,d,p)}catch{p=Math.floor(p/2)}return b.stringifyByChar(l)}function u(l,p){for(var d=0;d<l.length;d++)p[d]=l[d];return p}c.applyFromCharCode=w;var g={};g.string={string:h,array:function(l){return m(l,new Array(l.length))},arraybuffer:function(l){return g.string.uint8array(l).buffer},uint8array:function(l){return m(l,new Uint8Array(l.length))},nodebuffer:function(l){return m(l,e.allocBuffer(l.length))}},g.array={string:w,array:h,arraybuffer:function(l){return new Uint8Array(l).buffer},uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return e.newBufferFrom(l)}},g.arraybuffer={string:function(l){return w(new Uint8Array(l))},array:function(l){return u(new Uint8Array(l),new Array(l.byteLength))},arraybuffer:h,uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return e.newBufferFrom(new Uint8Array(l))}},g.uint8array={string:w,array:function(l){return u(l,new Array(l.length))},arraybuffer:function(l){return l.buffer},uint8array:h,nodebuffer:function(l){return e.newBufferFrom(l)}},g.nodebuffer={string:w,array:function(l){return u(l,new Array(l.length))},arraybuffer:function(l){return g.nodebuffer.uint8array(l).buffer},uint8array:function(l){return u(l,new Uint8Array(l.length))},nodebuffer:h},c.transformTo=function(l,p){if(p=p||"",!l)return p;c.checkSupport(l);var d=c.getTypeOf(p);return g[d][l](p)},c.resolve=function(l){for(var p=l.split("/"),d=[],y=0;y<p.length;y++){var S=p[y];S==="."||S===""&&y!==0&&y!==p.length-1||(S===".."?d.pop():d.push(S))}return d.join("/")},c.getTypeOf=function(l){return typeof l=="string"?"string":Object.prototype.toString.call(l)==="[object Array]"?"array":n.nodebuffer&&e.isBuffer(l)?"nodebuffer":n.uint8array&&l instanceof Uint8Array?"uint8array":n.arraybuffer&&l instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(l){if(!n[l.toLowerCase()])throw new Error(l+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(l){var p,d,y="";for(d=0;d<(l||"").length;d++)y+="\\x"+((p=l.charCodeAt(d))<16?"0":"")+p.toString(16).toUpperCase();return y},c.delay=function(l,p,d){setImmediate(function(){l.apply(d||null,p||[])})},c.inherits=function(l,p){function d(){}d.prototype=p.prototype,l.prototype=new d},c.extend=function(){var l,p,d={};for(l=0;l<arguments.length;l++)for(p in arguments[l])Object.prototype.hasOwnProperty.call(arguments[l],p)&&d[p]===void 0&&(d[p]=arguments[l][p]);return d},c.prepareContent=function(l,p,d,y,S){return a.Promise.resolve(p).then(function(E){return n.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new a.Promise(function(A,N){var T=new FileReader;T.onload=function(j){A(j.target.result)},T.onerror=function(j){N(j.target.error)},T.readAsArrayBuffer(E)}):E}).then(function(E){var A=c.getTypeOf(E);return A?(A==="arraybuffer"?E=c.transformTo("uint8array",E):A==="string"&&(S?E=r.decode(E):d&&y!==!0&&(E=function(N){return m(N,n.uint8array?new Uint8Array(N.length):new Array(N.length))}(E))),E):a.Promise.reject(new Error("Can't read the data of '"+l+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,_,c){var n=s("./reader/readerFor"),r=s("./utils"),e=s("./signature"),a=s("./zipEntry"),h=s("./support");function m(b){this.files=[],this.loadOptions=b}m.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(w)+", expected "+r.pretty(b)+")")}},isSignature:function(b,w){var u=this.reader.index;this.reader.setIndex(b);var g=this.reader.readString(4)===w;return this.reader.setIndex(u),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),w=h.uint8array?"uint8array":"array",u=r.transformTo(w,b);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,w,u,g=this.zip64EndOfCentralSize-44;0<g;)b=this.reader.readInt(2),w=this.reader.readInt(4),u=this.reader.readData(w),this.zip64ExtensibleData[b]={id:b,length:w,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,w;for(b=0;b<this.files.length;b++)w=this.files[b],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(b=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var w=b;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var g=w-u;if(0<g)this.isSignature(w,e.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(b){this.reader=n(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},_.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,_,c){var n=s("./reader/readerFor"),r=s("./utils"),e=s("./compressedObject"),a=s("./crc32"),h=s("./utf8"),m=s("./compressions"),b=s("./support");function w(u,g){this.options=u,this.loadOptions=g}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var g,l;if(u.skip(22),this.fileNameLength=u.readInt(2),l=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(l),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(p){for(var d in m)if(Object.prototype.hasOwnProperty.call(m,d)&&m[d].magic===p)return m[d];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,g,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var g=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(g),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=n(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var g,l,p,d=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<d;)g=u.readInt(2),l=u.readInt(2),p=u.readData(l),this.extraFields[g]={id:g,length:l,value:p};u.setIndex(d)},handleUTF8:function(){var u=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var l=r.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(l)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var d=r.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(d)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var g=n(u.value);return g.readInt(1)!==1||a(this.fileName)!==g.readInt(4)?null:h.utf8decode(g.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var g=n(u.value);return g.readInt(1)!==1||a(this.fileComment)!==g.readInt(4)?null:h.utf8decode(g.readData(u.length-5))}return null}},_.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,_,c){function n(g,l,p){this.name=g,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=l,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var r=s("./stream/StreamHelper"),e=s("./stream/DataWorker"),a=s("./utf8"),h=s("./compressedObject"),m=s("./stream/GenericWorker");n.prototype={internalStream:function(g){var l=null,p="string";try{if(!g)throw new Error("No output type specified.");var d=(p=g.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),l=this._decompressWorker();var y=!this._dataBinary;y&&!d&&(l=l.pipe(new a.Utf8EncodeWorker)),!y&&d&&(l=l.pipe(new a.Utf8DecodeWorker))}catch(S){(l=new m("error")).error(S)}return new r(l,p,"")},async:function(g,l){return this.internalStream(g).accumulate(l)},nodeStream:function(g,l){return this.internalStream(g||"nodebuffer").toNodejsStream(l)},_compressWorker:function(g,l){if(this._data instanceof h&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new a.Utf8EncodeWorker)),h.createWorkerFrom(p,g,l)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof m?this._data:new e(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<b.length;u++)n.prototype[b[u]]=w;_.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,_,c){(function(n){var r,e,a=n.MutationObserver||n.WebKitMutationObserver;if(a){var h=0,m=new a(g),b=n.document.createTextNode("");m.observe(b,{characterData:!0}),r=function(){b.data=h=++h%2}}else if(n.setImmediate||n.MessageChannel===void 0)r="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var l=n.document.createElement("script");l.onreadystatechange=function(){g(),l.onreadystatechange=null,l.parentNode.removeChild(l),l=null},n.document.documentElement.appendChild(l)}:function(){setTimeout(g,0)};else{var w=new n.MessageChannel;w.port1.onmessage=g,r=function(){w.port2.postMessage(0)}}var u=[];function g(){var l,p;e=!0;for(var d=u.length;d;){for(p=u,u=[],l=-1;++l<d;)p[l]();d=u.length}e=!1}_.exports=function(l){u.push(l)!==1||e||r()}}).call(this,typeof ce<"u"?ce:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,_,c){var n=s("immediate");function r(){}var e={},a=["REJECTED"],h=["FULFILLED"],m=["PENDING"];function b(d){if(typeof d!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,d!==r&&l(this,d)}function w(d,y,S){this.promise=d,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function u(d,y,S){n(function(){var E;try{E=y(S)}catch(A){return e.reject(d,A)}E===d?e.reject(d,new TypeError("Cannot resolve promise with itself")):e.resolve(d,E)})}function g(d){var y=d&&d.then;if(d&&(typeof d=="object"||typeof d=="function")&&typeof y=="function")return function(){y.apply(d,arguments)}}function l(d,y){var S=!1;function E(T){S||(S=!0,e.reject(d,T))}function A(T){S||(S=!0,e.resolve(d,T))}var N=p(function(){y(A,E)});N.status==="error"&&E(N.value)}function p(d,y){var S={};try{S.value=d(y),S.status="success"}catch(E){S.status="error",S.value=E}return S}(_.exports=b).prototype.finally=function(d){if(typeof d!="function")return this;var y=this.constructor;return this.then(function(S){return y.resolve(d()).then(function(){return S})},function(S){return y.resolve(d()).then(function(){throw S})})},b.prototype.catch=function(d){return this.then(null,d)},b.prototype.then=function(d,y){if(typeof d!="function"&&this.state===h||typeof y!="function"&&this.state===a)return this;var S=new this.constructor(r);return this.state!==m?u(S,this.state===h?d:y,this.outcome):this.queue.push(new w(S,d,y)),S},w.prototype.callFulfilled=function(d){e.resolve(this.promise,d)},w.prototype.otherCallFulfilled=function(d){u(this.promise,this.onFulfilled,d)},w.prototype.callRejected=function(d){e.reject(this.promise,d)},w.prototype.otherCallRejected=function(d){u(this.promise,this.onRejected,d)},e.resolve=function(d,y){var S=p(g,y);if(S.status==="error")return e.reject(d,S.value);var E=S.value;if(E)l(d,E);else{d.state=h,d.outcome=y;for(var A=-1,N=d.queue.length;++A<N;)d.queue[A].callFulfilled(y)}return d},e.reject=function(d,y){d.state=a,d.outcome=y;for(var S=-1,E=d.queue.length;++S<E;)d.queue[S].callRejected(y);return d},b.resolve=function(d){return d instanceof this?d:e.resolve(new this(r),d)},b.reject=function(d){var y=new this(r);return e.reject(y,d)},b.all=function(d){var y=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=d.length,E=!1;if(!S)return this.resolve([]);for(var A=new Array(S),N=0,T=-1,j=new this(r);++T<S;)O(d[T],T);return j;function O(Z,J){y.resolve(Z).then(function(x){A[J]=x,++N!==S||E||(E=!0,e.resolve(j,A))},function(x){E||(E=!0,e.reject(j,x))})}},b.race=function(d){var y=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=d.length,E=!1;if(!S)return this.resolve([]);for(var A=-1,N=new this(r);++A<S;)T=d[A],y.resolve(T).then(function(j){E||(E=!0,e.resolve(N,j))},function(j){E||(E=!0,e.reject(N,j))});var T;return N}},{immediate:36}],38:[function(s,_,c){var n={};(0,s("./lib/utils/common").assign)(n,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),_.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,_,c){var n=s("./zlib/deflate"),r=s("./utils/common"),e=s("./utils/strings"),a=s("./zlib/messages"),h=s("./zlib/zstream"),m=Object.prototype.toString,b=0,w=-1,u=0,g=8;function l(d){if(!(this instanceof l))return new l(d);this.options=r.assign({level:w,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},d||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var S=n.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(S!==b)throw new Error(a[S]);if(y.header&&n.deflateSetHeader(this.strm,y.header),y.dictionary){var E;if(E=typeof y.dictionary=="string"?e.string2buf(y.dictionary):m.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(S=n.deflateSetDictionary(this.strm,E))!==b)throw new Error(a[S]);this._dict_set=!0}}function p(d,y){var S=new l(y);if(S.push(d,!0),S.err)throw S.msg||a[S.err];return S.result}l.prototype.push=function(d,y){var S,E,A=this.strm,N=this.options.chunkSize;if(this.ended)return!1;E=y===~~y?y:y===!0?4:0,typeof d=="string"?A.input=e.string2buf(d):m.call(d)==="[object ArrayBuffer]"?A.input=new Uint8Array(d):A.input=d,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new r.Buf8(N),A.next_out=0,A.avail_out=N),(S=n.deflate(A,E))!==1&&S!==b)return this.onEnd(S),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(r.shrinkBuf(A.output,A.next_out))):this.onData(r.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&S!==1);return E===4?(S=n.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===b):E!==2||(this.onEnd(b),!(A.avail_out=0))},l.prototype.onData=function(d){this.chunks.push(d)},l.prototype.onEnd=function(d){d===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},c.Deflate=l,c.deflate=p,c.deflateRaw=function(d,y){return(y=y||{}).raw=!0,p(d,y)},c.gzip=function(d,y){return(y=y||{}).gzip=!0,p(d,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,_,c){var n=s("./zlib/inflate"),r=s("./utils/common"),e=s("./utils/strings"),a=s("./zlib/constants"),h=s("./zlib/messages"),m=s("./zlib/zstream"),b=s("./zlib/gzheader"),w=Object.prototype.toString;function u(l){if(!(this instanceof u))return new u(l);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},l||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||l&&l.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&!(15&p.windowBits)&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var d=n.inflateInit2(this.strm,p.windowBits);if(d!==a.Z_OK)throw new Error(h[d]);this.header=new b,n.inflateGetHeader(this.strm,this.header)}function g(l,p){var d=new u(p);if(d.push(l,!0),d.err)throw d.msg||h[d.err];return d.result}u.prototype.push=function(l,p){var d,y,S,E,A,N,T=this.strm,j=this.options.chunkSize,O=this.options.dictionary,Z=!1;if(this.ended)return!1;y=p===~~p?p:p===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof l=="string"?T.input=e.binstring2buf(l):w.call(l)==="[object ArrayBuffer]"?T.input=new Uint8Array(l):T.input=l,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new r.Buf8(j),T.next_out=0,T.avail_out=j),(d=n.inflate(T,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&O&&(N=typeof O=="string"?e.string2buf(O):w.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,d=n.inflateSetDictionary(this.strm,N)),d===a.Z_BUF_ERROR&&Z===!0&&(d=a.Z_OK,Z=!1),d!==a.Z_STREAM_END&&d!==a.Z_OK)return this.onEnd(d),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&d!==a.Z_STREAM_END&&(T.avail_in!==0||y!==a.Z_FINISH&&y!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=e.utf8border(T.output,T.next_out),E=T.next_out-S,A=e.buf2string(T.output,S),T.next_out=E,T.avail_out=j-E,E&&r.arraySet(T.output,T.output,S,E,0),this.onData(A)):this.onData(r.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(Z=!0)}while((0<T.avail_in||T.avail_out===0)&&d!==a.Z_STREAM_END);return d===a.Z_STREAM_END&&(y=a.Z_FINISH),y===a.Z_FINISH?(d=n.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===a.Z_OK):y!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(T.avail_out=0))},u.prototype.onData=function(l){this.chunks.push(l)},u.prototype.onEnd=function(l){l===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},c.Inflate=u,c.inflate=g,c.inflateRaw=function(l,p){return(p=p||{}).raw=!0,g(l,p)},c.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,_,c){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";c.assign=function(a){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var m=h.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var b in m)m.hasOwnProperty(b)&&(a[b]=m[b])}}return a},c.shrinkBuf=function(a,h){return a.length===h?a:a.subarray?a.subarray(0,h):(a.length=h,a)};var r={arraySet:function(a,h,m,b,w){if(h.subarray&&a.subarray)a.set(h.subarray(m,m+b),w);else for(var u=0;u<b;u++)a[w+u]=h[m+u]},flattenChunks:function(a){var h,m,b,w,u,g;for(h=b=0,m=a.length;h<m;h++)b+=a[h].length;for(g=new Uint8Array(b),h=w=0,m=a.length;h<m;h++)u=a[h],g.set(u,w),w+=u.length;return g}},e={arraySet:function(a,h,m,b,w){for(var u=0;u<b;u++)a[w+u]=h[m+u]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,r)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,e))},c.setTyped(n)},{}],42:[function(s,_,c){var n=s("./common"),r=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{e=!1}for(var a=new n.Buf8(256),h=0;h<256;h++)a[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function m(b,w){if(w<65537&&(b.subarray&&e||!b.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(b,w));for(var u="",g=0;g<w;g++)u+=String.fromCharCode(b[g]);return u}a[254]=a[254]=1,c.string2buf=function(b){var w,u,g,l,p,d=b.length,y=0;for(l=0;l<d;l++)(64512&(u=b.charCodeAt(l)))==55296&&l+1<d&&(64512&(g=b.charCodeAt(l+1)))==56320&&(u=65536+(u-55296<<10)+(g-56320),l++),y+=u<128?1:u<2048?2:u<65536?3:4;for(w=new n.Buf8(y),l=p=0;p<y;l++)(64512&(u=b.charCodeAt(l)))==55296&&l+1<d&&(64512&(g=b.charCodeAt(l+1)))==56320&&(u=65536+(u-55296<<10)+(g-56320),l++),u<128?w[p++]=u:(u<2048?w[p++]=192|u>>>6:(u<65536?w[p++]=224|u>>>12:(w[p++]=240|u>>>18,w[p++]=128|u>>>12&63),w[p++]=128|u>>>6&63),w[p++]=128|63&u);return w},c.buf2binstring=function(b){return m(b,b.length)},c.binstring2buf=function(b){for(var w=new n.Buf8(b.length),u=0,g=w.length;u<g;u++)w[u]=b.charCodeAt(u);return w},c.buf2string=function(b,w){var u,g,l,p,d=w||b.length,y=new Array(2*d);for(u=g=0;u<d;)if((l=b[u++])<128)y[g++]=l;else if(4<(p=a[l]))y[g++]=65533,u+=p-1;else{for(l&=p===2?31:p===3?15:7;1<p&&u<d;)l=l<<6|63&b[u++],p--;1<p?y[g++]=65533:l<65536?y[g++]=l:(l-=65536,y[g++]=55296|l>>10&1023,y[g++]=56320|1023&l)}return m(y,g)},c.utf8border=function(b,w){var u;for((w=w||b.length)>b.length&&(w=b.length),u=w-1;0<=u&&(192&b[u])==128;)u--;return u<0||u===0?w:u+a[b[u]]>w?u:w}},{"./common":41}],43:[function(s,_,c){_.exports=function(n,r,e,a){for(var h=65535&n|0,m=n>>>16&65535|0,b=0;e!==0;){for(e-=b=2e3<e?2e3:e;m=m+(h=h+r[a++]|0)|0,--b;);h%=65521,m%=65521}return h|m<<16|0}},{}],44:[function(s,_,c){_.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,_,c){var n=function(){for(var r,e=[],a=0;a<256;a++){r=a;for(var h=0;h<8;h++)r=1&r?3988292384^r>>>1:r>>>1;e[a]=r}return e}();_.exports=function(r,e,a,h){var m=n,b=h+a;r^=-1;for(var w=h;w<b;w++)r=r>>>8^m[255&(r^e[w])];return-1^r}},{}],46:[function(s,_,c){var n,r=s("../utils/common"),e=s("./trees"),a=s("./adler32"),h=s("./crc32"),m=s("./messages"),b=0,w=4,u=0,g=-2,l=-1,p=4,d=2,y=8,S=9,E=286,A=30,N=19,T=2*E+1,j=15,O=3,Z=258,J=Z+O+1,x=42,U=113,i=1,P=2,et=3,$=4;function rt(t,L){return t.msg=m[L],L}function H(t){return(t<<1)-(4<t?9:0)}function tt(t){for(var L=t.length;0<=--L;)t[L]=0}function B(t){var L=t.state,R=L.pending;R>t.avail_out&&(R=t.avail_out),R!==0&&(r.arraySet(t.output,L.pending_buf,L.pending_out,R,t.next_out),t.next_out+=R,L.pending_out+=R,t.total_out+=R,t.avail_out-=R,L.pending-=R,L.pending===0&&(L.pending_out=0))}function I(t,L){e._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,L),t.block_start=t.strstart,B(t.strm)}function Q(t,L){t.pending_buf[t.pending++]=L}function K(t,L){t.pending_buf[t.pending++]=L>>>8&255,t.pending_buf[t.pending++]=255&L}function q(t,L){var R,v,o=t.max_chain_length,k=t.strstart,D=t.prev_length,F=t.nice_match,z=t.strstart>t.w_size-J?t.strstart-(t.w_size-J):0,M=t.window,V=t.w_mask,W=t.prev,Y=t.strstart+Z,ct=M[k+D-1],at=M[k+D];t.prev_length>=t.good_match&&(o>>=2),F>t.lookahead&&(F=t.lookahead);do if(M[(R=L)+D]===at&&M[R+D-1]===ct&&M[R]===M[k]&&M[++R]===M[k+1]){k+=2,R++;do;while(M[++k]===M[++R]&&M[++k]===M[++R]&&M[++k]===M[++R]&&M[++k]===M[++R]&&M[++k]===M[++R]&&M[++k]===M[++R]&&M[++k]===M[++R]&&M[++k]===M[++R]&&k<Y);if(v=Z-(Y-k),k=Y-Z,D<v){if(t.match_start=L,F<=(D=v))break;ct=M[k+D-1],at=M[k+D]}}while((L=W[L&V])>z&&--o!=0);return D<=t.lookahead?D:t.lookahead}function it(t){var L,R,v,o,k,D,F,z,M,V,W=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=W+(W-J)){for(r.arraySet(t.window,t.window,W,W,0),t.match_start-=W,t.strstart-=W,t.block_start-=W,L=R=t.hash_size;v=t.head[--L],t.head[L]=W<=v?v-W:0,--R;);for(L=R=W;v=t.prev[--L],t.prev[L]=W<=v?v-W:0,--R;);o+=W}if(t.strm.avail_in===0)break;if(D=t.strm,F=t.window,z=t.strstart+t.lookahead,M=o,V=void 0,V=D.avail_in,M<V&&(V=M),R=V===0?0:(D.avail_in-=V,r.arraySet(F,D.input,D.next_in,V,z),D.state.wrap===1?D.adler=a(D.adler,F,V,z):D.state.wrap===2&&(D.adler=h(D.adler,F,V,z)),D.next_in+=V,D.total_in+=V,V),t.lookahead+=R,t.lookahead+t.insert>=O)for(k=t.strstart-t.insert,t.ins_h=t.window[k],t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+O-1])&t.hash_mask,t.prev[k&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=k,k++,t.insert--,!(t.lookahead+t.insert<O)););}while(t.lookahead<J&&t.strm.avail_in!==0)}function _t(t,L){for(var R,v;;){if(t.lookahead<J){if(it(t),t.lookahead<J&&L===b)return i;if(t.lookahead===0)break}if(R=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),R!==0&&t.strstart-R<=t.w_size-J&&(t.match_length=q(t,R)),t.match_length>=O)if(v=e._tr_tally(t,t.strstart-t.match_start,t.match_length-O),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=O){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else v=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(v&&(I(t,!1),t.strm.avail_out===0))return i}return t.insert=t.strstart<O-1?t.strstart:O-1,L===w?(I(t,!0),t.strm.avail_out===0?et:$):t.last_lit&&(I(t,!1),t.strm.avail_out===0)?i:P}function nt(t,L){for(var R,v,o;;){if(t.lookahead<J){if(it(t),t.lookahead<J&&L===b)return i;if(t.lookahead===0)break}if(R=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=O-1,R!==0&&t.prev_length<t.max_lazy_match&&t.strstart-R<=t.w_size-J&&(t.match_length=q(t,R),t.match_length<=5&&(t.strategy===1||t.match_length===O&&4096<t.strstart-t.match_start)&&(t.match_length=O-1)),t.prev_length>=O&&t.match_length<=t.prev_length){for(o=t.strstart+t.lookahead-O,v=e._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-O),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,R=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=O-1,t.strstart++,v&&(I(t,!1),t.strm.avail_out===0))return i}else if(t.match_available){if((v=e._tr_tally(t,0,t.window[t.strstart-1]))&&I(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return i}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(v=e._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<O-1?t.strstart:O-1,L===w?(I(t,!0),t.strm.avail_out===0?et:$):t.last_lit&&(I(t,!1),t.strm.avail_out===0)?i:P}function st(t,L,R,v,o){this.good_length=t,this.max_lazy=L,this.nice_length=R,this.max_chain=v,this.func=o}function gt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*T),this.dyn_dtree=new r.Buf16(2*(2*A+1)),this.bl_tree=new r.Buf16(2*(2*N+1)),tt(this.dyn_ltree),tt(this.dyn_dtree),tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(j+1),this.heap=new r.Buf16(2*E+1),tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*E+1),tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ft(t){var L;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=d,(L=t.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?x:U,t.adler=L.wrap===2?0:1,L.last_flush=b,e._tr_init(L),u):rt(t,g)}function St(t){var L=ft(t);return L===u&&function(R){R.window_size=2*R.w_size,tt(R.head),R.max_lazy_match=n[R.level].max_lazy,R.good_match=n[R.level].good_length,R.nice_match=n[R.level].nice_length,R.max_chain_length=n[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=O-1,R.match_available=0,R.ins_h=0}(t.state),L}function wt(t,L,R,v,o,k){if(!t)return g;var D=1;if(L===l&&(L=6),v<0?(D=0,v=-v):15<v&&(D=2,v-=16),o<1||S<o||R!==y||v<8||15<v||L<0||9<L||k<0||p<k)return rt(t,g);v===8&&(v=9);var F=new gt;return(t.state=F).strm=t,F.wrap=D,F.gzhead=null,F.w_bits=v,F.w_size=1<<F.w_bits,F.w_mask=F.w_size-1,F.hash_bits=o+7,F.hash_size=1<<F.hash_bits,F.hash_mask=F.hash_size-1,F.hash_shift=~~((F.hash_bits+O-1)/O),F.window=new r.Buf8(2*F.w_size),F.head=new r.Buf16(F.hash_size),F.prev=new r.Buf16(F.w_size),F.lit_bufsize=1<<o+6,F.pending_buf_size=4*F.lit_bufsize,F.pending_buf=new r.Buf8(F.pending_buf_size),F.d_buf=1*F.lit_bufsize,F.l_buf=3*F.lit_bufsize,F.level=L,F.strategy=k,F.method=R,St(t)}n=[new st(0,0,0,0,function(t,L){var R=65535;for(R>t.pending_buf_size-5&&(R=t.pending_buf_size-5);;){if(t.lookahead<=1){if(it(t),t.lookahead===0&&L===b)return i;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var v=t.block_start+R;if((t.strstart===0||t.strstart>=v)&&(t.lookahead=t.strstart-v,t.strstart=v,I(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-J&&(I(t,!1),t.strm.avail_out===0))return i}return t.insert=0,L===w?(I(t,!0),t.strm.avail_out===0?et:$):(t.strstart>t.block_start&&(I(t,!1),t.strm.avail_out),i)}),new st(4,4,8,4,_t),new st(4,5,16,8,_t),new st(4,6,32,32,_t),new st(4,4,16,16,nt),new st(8,16,32,32,nt),new st(8,16,128,128,nt),new st(8,32,128,256,nt),new st(32,128,258,1024,nt),new st(32,258,258,4096,nt)],c.deflateInit=function(t,L){return wt(t,L,y,15,8,0)},c.deflateInit2=wt,c.deflateReset=St,c.deflateResetKeep=ft,c.deflateSetHeader=function(t,L){return t&&t.state?t.state.wrap!==2?g:(t.state.gzhead=L,u):g},c.deflate=function(t,L){var R,v,o,k;if(!t||!t.state||5<L||L<0)return t?rt(t,g):g;if(v=t.state,!t.output||!t.input&&t.avail_in!==0||v.status===666&&L!==w)return rt(t,t.avail_out===0?-5:g);if(v.strm=t,R=v.last_flush,v.last_flush=L,v.status===x)if(v.wrap===2)t.adler=0,Q(v,31),Q(v,139),Q(v,8),v.gzhead?(Q(v,(v.gzhead.text?1:0)+(v.gzhead.hcrc?2:0)+(v.gzhead.extra?4:0)+(v.gzhead.name?8:0)+(v.gzhead.comment?16:0)),Q(v,255&v.gzhead.time),Q(v,v.gzhead.time>>8&255),Q(v,v.gzhead.time>>16&255),Q(v,v.gzhead.time>>24&255),Q(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),Q(v,255&v.gzhead.os),v.gzhead.extra&&v.gzhead.extra.length&&(Q(v,255&v.gzhead.extra.length),Q(v,v.gzhead.extra.length>>8&255)),v.gzhead.hcrc&&(t.adler=h(t.adler,v.pending_buf,v.pending,0)),v.gzindex=0,v.status=69):(Q(v,0),Q(v,0),Q(v,0),Q(v,0),Q(v,0),Q(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),Q(v,3),v.status=U);else{var D=y+(v.w_bits-8<<4)<<8;D|=(2<=v.strategy||v.level<2?0:v.level<6?1:v.level===6?2:3)<<6,v.strstart!==0&&(D|=32),D+=31-D%31,v.status=U,K(v,D),v.strstart!==0&&(K(v,t.adler>>>16),K(v,65535&t.adler)),t.adler=1}if(v.status===69)if(v.gzhead.extra){for(o=v.pending;v.gzindex<(65535&v.gzhead.extra.length)&&(v.pending!==v.pending_buf_size||(v.gzhead.hcrc&&v.pending>o&&(t.adler=h(t.adler,v.pending_buf,v.pending-o,o)),B(t),o=v.pending,v.pending!==v.pending_buf_size));)Q(v,255&v.gzhead.extra[v.gzindex]),v.gzindex++;v.gzhead.hcrc&&v.pending>o&&(t.adler=h(t.adler,v.pending_buf,v.pending-o,o)),v.gzindex===v.gzhead.extra.length&&(v.gzindex=0,v.status=73)}else v.status=73;if(v.status===73)if(v.gzhead.name){o=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>o&&(t.adler=h(t.adler,v.pending_buf,v.pending-o,o)),B(t),o=v.pending,v.pending===v.pending_buf_size)){k=1;break}k=v.gzindex<v.gzhead.name.length?255&v.gzhead.name.charCodeAt(v.gzindex++):0,Q(v,k)}while(k!==0);v.gzhead.hcrc&&v.pending>o&&(t.adler=h(t.adler,v.pending_buf,v.pending-o,o)),k===0&&(v.gzindex=0,v.status=91)}else v.status=91;if(v.status===91)if(v.gzhead.comment){o=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>o&&(t.adler=h(t.adler,v.pending_buf,v.pending-o,o)),B(t),o=v.pending,v.pending===v.pending_buf_size)){k=1;break}k=v.gzindex<v.gzhead.comment.length?255&v.gzhead.comment.charCodeAt(v.gzindex++):0,Q(v,k)}while(k!==0);v.gzhead.hcrc&&v.pending>o&&(t.adler=h(t.adler,v.pending_buf,v.pending-o,o)),k===0&&(v.status=103)}else v.status=103;if(v.status===103&&(v.gzhead.hcrc?(v.pending+2>v.pending_buf_size&&B(t),v.pending+2<=v.pending_buf_size&&(Q(v,255&t.adler),Q(v,t.adler>>8&255),t.adler=0,v.status=U)):v.status=U),v.pending!==0){if(B(t),t.avail_out===0)return v.last_flush=-1,u}else if(t.avail_in===0&&H(L)<=H(R)&&L!==w)return rt(t,-5);if(v.status===666&&t.avail_in!==0)return rt(t,-5);if(t.avail_in!==0||v.lookahead!==0||L!==b&&v.status!==666){var F=v.strategy===2?function(z,M){for(var V;;){if(z.lookahead===0&&(it(z),z.lookahead===0)){if(M===b)return i;break}if(z.match_length=0,V=e._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,V&&(I(z,!1),z.strm.avail_out===0))return i}return z.insert=0,M===w?(I(z,!0),z.strm.avail_out===0?et:$):z.last_lit&&(I(z,!1),z.strm.avail_out===0)?i:P}(v,L):v.strategy===3?function(z,M){for(var V,W,Y,ct,at=z.window;;){if(z.lookahead<=Z){if(it(z),z.lookahead<=Z&&M===b)return i;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=O&&0<z.strstart&&(W=at[Y=z.strstart-1])===at[++Y]&&W===at[++Y]&&W===at[++Y]){ct=z.strstart+Z;do;while(W===at[++Y]&&W===at[++Y]&&W===at[++Y]&&W===at[++Y]&&W===at[++Y]&&W===at[++Y]&&W===at[++Y]&&W===at[++Y]&&Y<ct);z.match_length=Z-(ct-Y),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=O?(V=e._tr_tally(z,1,z.match_length-O),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(V=e._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),V&&(I(z,!1),z.strm.avail_out===0))return i}return z.insert=0,M===w?(I(z,!0),z.strm.avail_out===0?et:$):z.last_lit&&(I(z,!1),z.strm.avail_out===0)?i:P}(v,L):n[v.level].func(v,L);if(F!==et&&F!==$||(v.status=666),F===i||F===et)return t.avail_out===0&&(v.last_flush=-1),u;if(F===P&&(L===1?e._tr_align(v):L!==5&&(e._tr_stored_block(v,0,0,!1),L===3&&(tt(v.head),v.lookahead===0&&(v.strstart=0,v.block_start=0,v.insert=0))),B(t),t.avail_out===0))return v.last_flush=-1,u}return L!==w?u:v.wrap<=0?1:(v.wrap===2?(Q(v,255&t.adler),Q(v,t.adler>>8&255),Q(v,t.adler>>16&255),Q(v,t.adler>>24&255),Q(v,255&t.total_in),Q(v,t.total_in>>8&255),Q(v,t.total_in>>16&255),Q(v,t.total_in>>24&255)):(K(v,t.adler>>>16),K(v,65535&t.adler)),B(t),0<v.wrap&&(v.wrap=-v.wrap),v.pending!==0?u:1)},c.deflateEnd=function(t){var L;return t&&t.state?(L=t.state.status)!==x&&L!==69&&L!==73&&L!==91&&L!==103&&L!==U&&L!==666?rt(t,g):(t.state=null,L===U?rt(t,-3):u):g},c.deflateSetDictionary=function(t,L){var R,v,o,k,D,F,z,M,V=L.length;if(!t||!t.state||(k=(R=t.state).wrap)===2||k===1&&R.status!==x||R.lookahead)return g;for(k===1&&(t.adler=a(t.adler,L,V,0)),R.wrap=0,V>=R.w_size&&(k===0&&(tt(R.head),R.strstart=0,R.block_start=0,R.insert=0),M=new r.Buf8(R.w_size),r.arraySet(M,L,V-R.w_size,R.w_size,0),L=M,V=R.w_size),D=t.avail_in,F=t.next_in,z=t.input,t.avail_in=V,t.next_in=0,t.input=L,it(R);R.lookahead>=O;){for(v=R.strstart,o=R.lookahead-(O-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[v+O-1])&R.hash_mask,R.prev[v&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=v,v++,--o;);R.strstart=v,R.lookahead=O-1,it(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=O-1,R.match_available=0,t.next_in=F,t.input=z,t.avail_in=D,R.wrap=k,u},c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,_,c){_.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,_,c){_.exports=function(n,r){var e,a,h,m,b,w,u,g,l,p,d,y,S,E,A,N,T,j,O,Z,J,x,U,i,P;e=n.state,a=n.next_in,i=n.input,h=a+(n.avail_in-5),m=n.next_out,P=n.output,b=m-(r-n.avail_out),w=m+(n.avail_out-257),u=e.dmax,g=e.wsize,l=e.whave,p=e.wnext,d=e.window,y=e.hold,S=e.bits,E=e.lencode,A=e.distcode,N=(1<<e.lenbits)-1,T=(1<<e.distbits)-1;t:do{S<15&&(y+=i[a++]<<S,S+=8,y+=i[a++]<<S,S+=8),j=E[y&N];e:for(;;){if(y>>>=O=j>>>24,S-=O,(O=j>>>16&255)===0)P[m++]=65535&j;else{if(!(16&O)){if(!(64&O)){j=E[(65535&j)+(y&(1<<O)-1)];continue e}if(32&O){e.mode=12;break t}n.msg="invalid literal/length code",e.mode=30;break t}Z=65535&j,(O&=15)&&(S<O&&(y+=i[a++]<<S,S+=8),Z+=y&(1<<O)-1,y>>>=O,S-=O),S<15&&(y+=i[a++]<<S,S+=8,y+=i[a++]<<S,S+=8),j=A[y&T];r:for(;;){if(y>>>=O=j>>>24,S-=O,!(16&(O=j>>>16&255))){if(!(64&O)){j=A[(65535&j)+(y&(1<<O)-1)];continue r}n.msg="invalid distance code",e.mode=30;break t}if(J=65535&j,S<(O&=15)&&(y+=i[a++]<<S,(S+=8)<O&&(y+=i[a++]<<S,S+=8)),u<(J+=y&(1<<O)-1)){n.msg="invalid distance too far back",e.mode=30;break t}if(y>>>=O,S-=O,(O=m-b)<J){if(l<(O=J-O)&&e.sane){n.msg="invalid distance too far back",e.mode=30;break t}if(U=d,(x=0)===p){if(x+=g-O,O<Z){for(Z-=O;P[m++]=d[x++],--O;);x=m-J,U=P}}else if(p<O){if(x+=g+p-O,(O-=p)<Z){for(Z-=O;P[m++]=d[x++],--O;);if(x=0,p<Z){for(Z-=O=p;P[m++]=d[x++],--O;);x=m-J,U=P}}}else if(x+=p-O,O<Z){for(Z-=O;P[m++]=d[x++],--O;);x=m-J,U=P}for(;2<Z;)P[m++]=U[x++],P[m++]=U[x++],P[m++]=U[x++],Z-=3;Z&&(P[m++]=U[x++],1<Z&&(P[m++]=U[x++]))}else{for(x=m-J;P[m++]=P[x++],P[m++]=P[x++],P[m++]=P[x++],2<(Z-=3););Z&&(P[m++]=P[x++],1<Z&&(P[m++]=P[x++]))}break}}break}}while(a<h&&m<w);a-=Z=S>>3,y&=(1<<(S-=Z<<3))-1,n.next_in=a,n.next_out=m,n.avail_in=a<h?h-a+5:5-(a-h),n.avail_out=m<w?w-m+257:257-(m-w),e.hold=y,e.bits=S}},{}],49:[function(s,_,c){var n=s("../utils/common"),r=s("./adler32"),e=s("./crc32"),a=s("./inffast"),h=s("./inftrees"),m=1,b=2,w=0,u=-2,g=1,l=852,p=592;function d(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(x){var U;return x&&x.state?(U=x.state,x.total_in=x.total_out=U.total=0,x.msg="",U.wrap&&(x.adler=1&U.wrap),U.mode=g,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new n.Buf32(l),U.distcode=U.distdyn=new n.Buf32(p),U.sane=1,U.back=-1,w):u}function E(x){var U;return x&&x.state?((U=x.state).wsize=0,U.whave=0,U.wnext=0,S(x)):u}function A(x,U){var i,P;return x&&x.state?(P=x.state,U<0?(i=0,U=-U):(i=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?u:(P.window!==null&&P.wbits!==U&&(P.window=null),P.wrap=i,P.wbits=U,E(x))):u}function N(x,U){var i,P;return x?(P=new y,(x.state=P).window=null,(i=A(x,U))!==w&&(x.state=null),i):u}var T,j,O=!0;function Z(x){if(O){var U;for(T=new n.Buf32(512),j=new n.Buf32(32),U=0;U<144;)x.lens[U++]=8;for(;U<256;)x.lens[U++]=9;for(;U<280;)x.lens[U++]=7;for(;U<288;)x.lens[U++]=8;for(h(m,x.lens,0,288,T,0,x.work,{bits:9}),U=0;U<32;)x.lens[U++]=5;h(b,x.lens,0,32,j,0,x.work,{bits:5}),O=!1}x.lencode=T,x.lenbits=9,x.distcode=j,x.distbits=5}function J(x,U,i,P){var et,$=x.state;return $.window===null&&($.wsize=1<<$.wbits,$.wnext=0,$.whave=0,$.window=new n.Buf8($.wsize)),P>=$.wsize?(n.arraySet($.window,U,i-$.wsize,$.wsize,0),$.wnext=0,$.whave=$.wsize):(P<(et=$.wsize-$.wnext)&&(et=P),n.arraySet($.window,U,i-P,et,$.wnext),(P-=et)?(n.arraySet($.window,U,i-P,P,0),$.wnext=P,$.whave=$.wsize):($.wnext+=et,$.wnext===$.wsize&&($.wnext=0),$.whave<$.wsize&&($.whave+=et))),0}c.inflateReset=E,c.inflateReset2=A,c.inflateResetKeep=S,c.inflateInit=function(x){return N(x,15)},c.inflateInit2=N,c.inflate=function(x,U){var i,P,et,$,rt,H,tt,B,I,Q,K,q,it,_t,nt,st,gt,ft,St,wt,t,L,R,v,o=0,k=new n.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return u;(i=x.state).mode===12&&(i.mode=13),rt=x.next_out,et=x.output,tt=x.avail_out,$=x.next_in,P=x.input,H=x.avail_in,B=i.hold,I=i.bits,Q=H,K=tt,L=w;t:for(;;)switch(i.mode){case g:if(i.wrap===0){i.mode=13;break}for(;I<16;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}if(2&i.wrap&&B===35615){k[i.check=0]=255&B,k[1]=B>>>8&255,i.check=e(i.check,k,2,0),I=B=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&B)<<8)+(B>>8))%31){x.msg="incorrect header check",i.mode=30;break}if((15&B)!=8){x.msg="unknown compression method",i.mode=30;break}if(I-=4,t=8+(15&(B>>>=4)),i.wbits===0)i.wbits=t;else if(t>i.wbits){x.msg="invalid window size",i.mode=30;break}i.dmax=1<<t,x.adler=i.check=1,i.mode=512&B?10:12,I=B=0;break;case 2:for(;I<16;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}if(i.flags=B,(255&i.flags)!=8){x.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){x.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=B>>8&1),512&i.flags&&(k[0]=255&B,k[1]=B>>>8&255,i.check=e(i.check,k,2,0)),I=B=0,i.mode=3;case 3:for(;I<32;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}i.head&&(i.head.time=B),512&i.flags&&(k[0]=255&B,k[1]=B>>>8&255,k[2]=B>>>16&255,k[3]=B>>>24&255,i.check=e(i.check,k,4,0)),I=B=0,i.mode=4;case 4:for(;I<16;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}i.head&&(i.head.xflags=255&B,i.head.os=B>>8),512&i.flags&&(k[0]=255&B,k[1]=B>>>8&255,i.check=e(i.check,k,2,0)),I=B=0,i.mode=5;case 5:if(1024&i.flags){for(;I<16;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}i.length=B,i.head&&(i.head.extra_len=B),512&i.flags&&(k[0]=255&B,k[1]=B>>>8&255,i.check=e(i.check,k,2,0)),I=B=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(H<(q=i.length)&&(q=H),q&&(i.head&&(t=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,P,$,q,t)),512&i.flags&&(i.check=e(i.check,P,q,$)),H-=q,$+=q,i.length-=q),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(H===0)break t;for(q=0;t=P[$+q++],i.head&&t&&i.length<65536&&(i.head.name+=String.fromCharCode(t)),t&&q<H;);if(512&i.flags&&(i.check=e(i.check,P,q,$)),H-=q,$+=q,t)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(H===0)break t;for(q=0;t=P[$+q++],i.head&&t&&i.length<65536&&(i.head.comment+=String.fromCharCode(t)),t&&q<H;);if(512&i.flags&&(i.check=e(i.check,P,q,$)),H-=q,$+=q,t)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;I<16;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}if(B!==(65535&i.check)){x.msg="header crc mismatch",i.mode=30;break}I=B=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),x.adler=i.check=0,i.mode=12;break;case 10:for(;I<32;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}x.adler=i.check=d(B),I=B=0,i.mode=11;case 11:if(i.havedict===0)return x.next_out=rt,x.avail_out=tt,x.next_in=$,x.avail_in=H,i.hold=B,i.bits=I,2;x.adler=i.check=1,i.mode=12;case 12:if(U===5||U===6)break t;case 13:if(i.last){B>>>=7&I,I-=7&I,i.mode=27;break}for(;I<3;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}switch(i.last=1&B,I-=1,3&(B>>>=1)){case 0:i.mode=14;break;case 1:if(Z(i),i.mode=20,U!==6)break;B>>>=2,I-=2;break t;case 2:i.mode=17;break;case 3:x.msg="invalid block type",i.mode=30}B>>>=2,I-=2;break;case 14:for(B>>>=7&I,I-=7&I;I<32;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}if((65535&B)!=(B>>>16^65535)){x.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&B,I=B=0,i.mode=15,U===6)break t;case 15:i.mode=16;case 16:if(q=i.length){if(H<q&&(q=H),tt<q&&(q=tt),q===0)break t;n.arraySet(et,P,$,q,rt),H-=q,$+=q,tt-=q,rt+=q,i.length-=q;break}i.mode=12;break;case 17:for(;I<14;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}if(i.nlen=257+(31&B),B>>>=5,I-=5,i.ndist=1+(31&B),B>>>=5,I-=5,i.ncode=4+(15&B),B>>>=4,I-=4,286<i.nlen||30<i.ndist){x.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;I<3;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}i.lens[D[i.have++]]=7&B,B>>>=3,I-=3}for(;i.have<19;)i.lens[D[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,R={bits:i.lenbits},L=h(0,i.lens,0,19,i.lencode,0,i.work,R),i.lenbits=R.bits,L){x.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;st=(o=i.lencode[B&(1<<i.lenbits)-1])>>>16&255,gt=65535&o,!((nt=o>>>24)<=I);){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}if(gt<16)B>>>=nt,I-=nt,i.lens[i.have++]=gt;else{if(gt===16){for(v=nt+2;I<v;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}if(B>>>=nt,I-=nt,i.have===0){x.msg="invalid bit length repeat",i.mode=30;break}t=i.lens[i.have-1],q=3+(3&B),B>>>=2,I-=2}else if(gt===17){for(v=nt+3;I<v;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}I-=nt,t=0,q=3+(7&(B>>>=nt)),B>>>=3,I-=3}else{for(v=nt+7;I<v;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}I-=nt,t=0,q=11+(127&(B>>>=nt)),B>>>=7,I-=7}if(i.have+q>i.nlen+i.ndist){x.msg="invalid bit length repeat",i.mode=30;break}for(;q--;)i.lens[i.have++]=t}}if(i.mode===30)break;if(i.lens[256]===0){x.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,R={bits:i.lenbits},L=h(m,i.lens,0,i.nlen,i.lencode,0,i.work,R),i.lenbits=R.bits,L){x.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,R={bits:i.distbits},L=h(b,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,R),i.distbits=R.bits,L){x.msg="invalid distances set",i.mode=30;break}if(i.mode=20,U===6)break t;case 20:i.mode=21;case 21:if(6<=H&&258<=tt){x.next_out=rt,x.avail_out=tt,x.next_in=$,x.avail_in=H,i.hold=B,i.bits=I,a(x,K),rt=x.next_out,et=x.output,tt=x.avail_out,$=x.next_in,P=x.input,H=x.avail_in,B=i.hold,I=i.bits,i.mode===12&&(i.back=-1);break}for(i.back=0;st=(o=i.lencode[B&(1<<i.lenbits)-1])>>>16&255,gt=65535&o,!((nt=o>>>24)<=I);){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}if(st&&!(240&st)){for(ft=nt,St=st,wt=gt;st=(o=i.lencode[wt+((B&(1<<ft+St)-1)>>ft)])>>>16&255,gt=65535&o,!(ft+(nt=o>>>24)<=I);){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}B>>>=ft,I-=ft,i.back+=ft}if(B>>>=nt,I-=nt,i.back+=nt,i.length=gt,st===0){i.mode=26;break}if(32&st){i.back=-1,i.mode=12;break}if(64&st){x.msg="invalid literal/length code",i.mode=30;break}i.extra=15&st,i.mode=22;case 22:if(i.extra){for(v=i.extra;I<v;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}i.length+=B&(1<<i.extra)-1,B>>>=i.extra,I-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;st=(o=i.distcode[B&(1<<i.distbits)-1])>>>16&255,gt=65535&o,!((nt=o>>>24)<=I);){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}if(!(240&st)){for(ft=nt,St=st,wt=gt;st=(o=i.distcode[wt+((B&(1<<ft+St)-1)>>ft)])>>>16&255,gt=65535&o,!(ft+(nt=o>>>24)<=I);){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}B>>>=ft,I-=ft,i.back+=ft}if(B>>>=nt,I-=nt,i.back+=nt,64&st){x.msg="invalid distance code",i.mode=30;break}i.offset=gt,i.extra=15&st,i.mode=24;case 24:if(i.extra){for(v=i.extra;I<v;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}i.offset+=B&(1<<i.extra)-1,B>>>=i.extra,I-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){x.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(tt===0)break t;if(q=K-tt,i.offset>q){if((q=i.offset-q)>i.whave&&i.sane){x.msg="invalid distance too far back",i.mode=30;break}it=q>i.wnext?(q-=i.wnext,i.wsize-q):i.wnext-q,q>i.length&&(q=i.length),_t=i.window}else _t=et,it=rt-i.offset,q=i.length;for(tt<q&&(q=tt),tt-=q,i.length-=q;et[rt++]=_t[it++],--q;);i.length===0&&(i.mode=21);break;case 26:if(tt===0)break t;et[rt++]=i.length,tt--,i.mode=21;break;case 27:if(i.wrap){for(;I<32;){if(H===0)break t;H--,B|=P[$++]<<I,I+=8}if(K-=tt,x.total_out+=K,i.total+=K,K&&(x.adler=i.check=i.flags?e(i.check,et,K,rt-K):r(i.check,et,K,rt-K)),K=tt,(i.flags?B:d(B))!==i.check){x.msg="incorrect data check",i.mode=30;break}I=B=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;I<32;){if(H===0)break t;H--,B+=P[$++]<<I,I+=8}if(B!==(4294967295&i.total)){x.msg="incorrect length check",i.mode=30;break}I=B=0}i.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return u}return x.next_out=rt,x.avail_out=tt,x.next_in=$,x.avail_in=H,i.hold=B,i.bits=I,(i.wsize||K!==x.avail_out&&i.mode<30&&(i.mode<27||U!==4))&&J(x,x.output,x.next_out,K-x.avail_out)?(i.mode=31,-4):(Q-=x.avail_in,K-=x.avail_out,x.total_in+=Q,x.total_out+=K,i.total+=K,i.wrap&&K&&(x.adler=i.check=i.flags?e(i.check,et,K,x.next_out-K):r(i.check,et,K,x.next_out-K)),x.data_type=i.bits+(i.last?64:0)+(i.mode===12?128:0)+(i.mode===20||i.mode===15?256:0),(Q==0&&K===0||U===4)&&L===w&&(L=-5),L)},c.inflateEnd=function(x){if(!x||!x.state)return u;var U=x.state;return U.window&&(U.window=null),x.state=null,w},c.inflateGetHeader=function(x,U){var i;return x&&x.state&&2&(i=x.state).wrap?((i.head=U).done=!1,w):u},c.inflateSetDictionary=function(x,U){var i,P=U.length;return x&&x.state?(i=x.state).wrap!==0&&i.mode!==11?u:i.mode===11&&r(1,U,P,0)!==i.check?-3:J(x,U,P,P)?(i.mode=31,-4):(i.havedict=1,w):u},c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,_,c){var n=s("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];_.exports=function(m,b,w,u,g,l,p,d){var y,S,E,A,N,T,j,O,Z,J=d.bits,x=0,U=0,i=0,P=0,et=0,$=0,rt=0,H=0,tt=0,B=0,I=null,Q=0,K=new n.Buf16(16),q=new n.Buf16(16),it=null,_t=0;for(x=0;x<=15;x++)K[x]=0;for(U=0;U<u;U++)K[b[w+U]]++;for(et=J,P=15;1<=P&&K[P]===0;P--);if(P<et&&(et=P),P===0)return g[l++]=20971520,g[l++]=20971520,d.bits=1,0;for(i=1;i<P&&K[i]===0;i++);for(et<i&&(et=i),x=H=1;x<=15;x++)if(H<<=1,(H-=K[x])<0)return-1;if(0<H&&(m===0||P!==1))return-1;for(q[1]=0,x=1;x<15;x++)q[x+1]=q[x]+K[x];for(U=0;U<u;U++)b[w+U]!==0&&(p[q[b[w+U]]++]=U);if(T=m===0?(I=it=p,19):m===1?(I=r,Q-=257,it=e,_t-=257,256):(I=a,it=h,-1),x=i,N=l,rt=U=B=0,E=-1,A=(tt=1<<($=et))-1,m===1&&852<tt||m===2&&592<tt)return 1;for(;;){for(j=x-rt,Z=p[U]<T?(O=0,p[U]):p[U]>T?(O=it[_t+p[U]],I[Q+p[U]]):(O=96,0),y=1<<x-rt,i=S=1<<$;g[N+(B>>rt)+(S-=y)]=j<<24|O<<16|Z|0,S!==0;);for(y=1<<x-1;B&y;)y>>=1;if(y!==0?(B&=y-1,B+=y):B=0,U++,--K[x]==0){if(x===P)break;x=b[w+p[U]]}if(et<x&&(B&A)!==E){for(rt===0&&(rt=et),N+=i,H=1<<($=x-rt);$+rt<P&&!((H-=K[$+rt])<=0);)$++,H<<=1;if(tt+=1<<$,m===1&&852<tt||m===2&&592<tt)return 1;g[E=B&A]=et<<24|$<<16|N-l|0}}return B!==0&&(g[N+B]=x-rt<<24|64<<16|0),d.bits=et,0}},{"../utils/common":41}],51:[function(s,_,c){_.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,_,c){var n=s("../utils/common"),r=0,e=1;function a(o){for(var k=o.length;0<=--k;)o[k]=0}var h=0,m=29,b=256,w=b+1+m,u=30,g=19,l=2*w+1,p=15,d=16,y=7,S=256,E=16,A=17,N=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(w+2));a(J);var x=new Array(2*u);a(x);var U=new Array(512);a(U);var i=new Array(256);a(i);var P=new Array(m);a(P);var et,$,rt,H=new Array(u);function tt(o,k,D,F,z){this.static_tree=o,this.extra_bits=k,this.extra_base=D,this.elems=F,this.max_length=z,this.has_stree=o&&o.length}function B(o,k){this.dyn_tree=o,this.max_code=0,this.stat_desc=k}function I(o){return o<256?U[o]:U[256+(o>>>7)]}function Q(o,k){o.pending_buf[o.pending++]=255&k,o.pending_buf[o.pending++]=k>>>8&255}function K(o,k,D){o.bi_valid>d-D?(o.bi_buf|=k<<o.bi_valid&65535,Q(o,o.bi_buf),o.bi_buf=k>>d-o.bi_valid,o.bi_valid+=D-d):(o.bi_buf|=k<<o.bi_valid&65535,o.bi_valid+=D)}function q(o,k,D){K(o,D[2*k],D[2*k+1])}function it(o,k){for(var D=0;D|=1&o,o>>>=1,D<<=1,0<--k;);return D>>>1}function _t(o,k,D){var F,z,M=new Array(p+1),V=0;for(F=1;F<=p;F++)M[F]=V=V+D[F-1]<<1;for(z=0;z<=k;z++){var W=o[2*z+1];W!==0&&(o[2*z]=it(M[W]++,W))}}function nt(o){var k;for(k=0;k<w;k++)o.dyn_ltree[2*k]=0;for(k=0;k<u;k++)o.dyn_dtree[2*k]=0;for(k=0;k<g;k++)o.bl_tree[2*k]=0;o.dyn_ltree[2*S]=1,o.opt_len=o.static_len=0,o.last_lit=o.matches=0}function st(o){8<o.bi_valid?Q(o,o.bi_buf):0<o.bi_valid&&(o.pending_buf[o.pending++]=o.bi_buf),o.bi_buf=0,o.bi_valid=0}function gt(o,k,D,F){var z=2*k,M=2*D;return o[z]<o[M]||o[z]===o[M]&&F[k]<=F[D]}function ft(o,k,D){for(var F=o.heap[D],z=D<<1;z<=o.heap_len&&(z<o.heap_len&&gt(k,o.heap[z+1],o.heap[z],o.depth)&&z++,!gt(k,F,o.heap[z],o.depth));)o.heap[D]=o.heap[z],D=z,z<<=1;o.heap[D]=F}function St(o,k,D){var F,z,M,V,W=0;if(o.last_lit!==0)for(;F=o.pending_buf[o.d_buf+2*W]<<8|o.pending_buf[o.d_buf+2*W+1],z=o.pending_buf[o.l_buf+W],W++,F===0?q(o,z,k):(q(o,(M=i[z])+b+1,k),(V=T[M])!==0&&K(o,z-=P[M],V),q(o,M=I(--F),D),(V=j[M])!==0&&K(o,F-=H[M],V)),W<o.last_lit;);q(o,S,k)}function wt(o,k){var D,F,z,M=k.dyn_tree,V=k.stat_desc.static_tree,W=k.stat_desc.has_stree,Y=k.stat_desc.elems,ct=-1;for(o.heap_len=0,o.heap_max=l,D=0;D<Y;D++)M[2*D]!==0?(o.heap[++o.heap_len]=ct=D,o.depth[D]=0):M[2*D+1]=0;for(;o.heap_len<2;)M[2*(z=o.heap[++o.heap_len]=ct<2?++ct:0)]=1,o.depth[z]=0,o.opt_len--,W&&(o.static_len-=V[2*z+1]);for(k.max_code=ct,D=o.heap_len>>1;1<=D;D--)ft(o,M,D);for(z=Y;D=o.heap[1],o.heap[1]=o.heap[o.heap_len--],ft(o,M,1),F=o.heap[1],o.heap[--o.heap_max]=D,o.heap[--o.heap_max]=F,M[2*z]=M[2*D]+M[2*F],o.depth[z]=(o.depth[D]>=o.depth[F]?o.depth[D]:o.depth[F])+1,M[2*D+1]=M[2*F+1]=z,o.heap[1]=z++,ft(o,M,1),2<=o.heap_len;);o.heap[--o.heap_max]=o.heap[1],function(at,Ct){var te,It,ee,mt,se,Ce,Dt=Ct.dyn_tree,He=Ct.max_code,zr=Ct.stat_desc.static_tree,Ar=Ct.stat_desc.has_stree,Er=Ct.stat_desc.extra_bits,Ve=Ct.stat_desc.extra_base,re=Ct.stat_desc.max_length,le=0;for(mt=0;mt<=p;mt++)at.bl_count[mt]=0;for(Dt[2*at.heap[at.heap_max]+1]=0,te=at.heap_max+1;te<l;te++)re<(mt=Dt[2*Dt[2*(It=at.heap[te])+1]+1]+1)&&(mt=re,le++),Dt[2*It+1]=mt,He<It||(at.bl_count[mt]++,se=0,Ve<=It&&(se=Er[It-Ve]),Ce=Dt[2*It],at.opt_len+=Ce*(mt+se),Ar&&(at.static_len+=Ce*(zr[2*It+1]+se)));if(le!==0){do{for(mt=re-1;at.bl_count[mt]===0;)mt--;at.bl_count[mt]--,at.bl_count[mt+1]+=2,at.bl_count[re]--,le-=2}while(0<le);for(mt=re;mt!==0;mt--)for(It=at.bl_count[mt];It!==0;)He<(ee=at.heap[--te])||(Dt[2*ee+1]!==mt&&(at.opt_len+=(mt-Dt[2*ee+1])*Dt[2*ee],Dt[2*ee+1]=mt),It--)}}(o,k),_t(M,ct,o.bl_count)}function t(o,k,D){var F,z,M=-1,V=k[1],W=0,Y=7,ct=4;for(V===0&&(Y=138,ct=3),k[2*(D+1)+1]=65535,F=0;F<=D;F++)z=V,V=k[2*(F+1)+1],++W<Y&&z===V||(W<ct?o.bl_tree[2*z]+=W:z!==0?(z!==M&&o.bl_tree[2*z]++,o.bl_tree[2*E]++):W<=10?o.bl_tree[2*A]++:o.bl_tree[2*N]++,M=z,ct=(W=0)===V?(Y=138,3):z===V?(Y=6,3):(Y=7,4))}function L(o,k,D){var F,z,M=-1,V=k[1],W=0,Y=7,ct=4;for(V===0&&(Y=138,ct=3),F=0;F<=D;F++)if(z=V,V=k[2*(F+1)+1],!(++W<Y&&z===V)){if(W<ct)for(;q(o,z,o.bl_tree),--W!=0;);else z!==0?(z!==M&&(q(o,z,o.bl_tree),W--),q(o,E,o.bl_tree),K(o,W-3,2)):W<=10?(q(o,A,o.bl_tree),K(o,W-3,3)):(q(o,N,o.bl_tree),K(o,W-11,7));M=z,ct=(W=0)===V?(Y=138,3):z===V?(Y=6,3):(Y=7,4)}}a(H);var R=!1;function v(o,k,D,F){K(o,(h<<1)+(F?1:0),3),function(z,M,V,W){st(z),Q(z,V),Q(z,~V),n.arraySet(z.pending_buf,z.window,M,V,z.pending),z.pending+=V}(o,k,D)}c._tr_init=function(o){R||(function(){var k,D,F,z,M,V=new Array(p+1);for(z=F=0;z<m-1;z++)for(P[z]=F,k=0;k<1<<T[z];k++)i[F++]=z;for(i[F-1]=z,z=M=0;z<16;z++)for(H[z]=M,k=0;k<1<<j[z];k++)U[M++]=z;for(M>>=7;z<u;z++)for(H[z]=M<<7,k=0;k<1<<j[z]-7;k++)U[256+M++]=z;for(D=0;D<=p;D++)V[D]=0;for(k=0;k<=143;)J[2*k+1]=8,k++,V[8]++;for(;k<=255;)J[2*k+1]=9,k++,V[9]++;for(;k<=279;)J[2*k+1]=7,k++,V[7]++;for(;k<=287;)J[2*k+1]=8,k++,V[8]++;for(_t(J,w+1,V),k=0;k<u;k++)x[2*k+1]=5,x[2*k]=it(k,5);et=new tt(J,T,b+1,w,p),$=new tt(x,j,0,u,p),rt=new tt(new Array(0),O,0,g,y)}(),R=!0),o.l_desc=new B(o.dyn_ltree,et),o.d_desc=new B(o.dyn_dtree,$),o.bl_desc=new B(o.bl_tree,rt),o.bi_buf=0,o.bi_valid=0,nt(o)},c._tr_stored_block=v,c._tr_flush_block=function(o,k,D,F){var z,M,V=0;0<o.level?(o.strm.data_type===2&&(o.strm.data_type=function(W){var Y,ct=4093624447;for(Y=0;Y<=31;Y++,ct>>>=1)if(1&ct&&W.dyn_ltree[2*Y]!==0)return r;if(W.dyn_ltree[18]!==0||W.dyn_ltree[20]!==0||W.dyn_ltree[26]!==0)return e;for(Y=32;Y<b;Y++)if(W.dyn_ltree[2*Y]!==0)return e;return r}(o)),wt(o,o.l_desc),wt(o,o.d_desc),V=function(W){var Y;for(t(W,W.dyn_ltree,W.l_desc.max_code),t(W,W.dyn_dtree,W.d_desc.max_code),wt(W,W.bl_desc),Y=g-1;3<=Y&&W.bl_tree[2*Z[Y]+1]===0;Y--);return W.opt_len+=3*(Y+1)+5+5+4,Y}(o),z=o.opt_len+3+7>>>3,(M=o.static_len+3+7>>>3)<=z&&(z=M)):z=M=D+5,D+4<=z&&k!==-1?v(o,k,D,F):o.strategy===4||M===z?(K(o,2+(F?1:0),3),St(o,J,x)):(K(o,4+(F?1:0),3),function(W,Y,ct,at){var Ct;for(K(W,Y-257,5),K(W,ct-1,5),K(W,at-4,4),Ct=0;Ct<at;Ct++)K(W,W.bl_tree[2*Z[Ct]+1],3);L(W,W.dyn_ltree,Y-1),L(W,W.dyn_dtree,ct-1)}(o,o.l_desc.max_code+1,o.d_desc.max_code+1,V+1),St(o,o.dyn_ltree,o.dyn_dtree)),nt(o),F&&st(o)},c._tr_tally=function(o,k,D){return o.pending_buf[o.d_buf+2*o.last_lit]=k>>>8&255,o.pending_buf[o.d_buf+2*o.last_lit+1]=255&k,o.pending_buf[o.l_buf+o.last_lit]=255&D,o.last_lit++,k===0?o.dyn_ltree[2*D]++:(o.matches++,k--,o.dyn_ltree[2*(i[D]+b+1)]++,o.dyn_dtree[2*I(k)]++),o.last_lit===o.lit_bufsize-1},c._tr_align=function(o){K(o,2,3),q(o,S,J),function(k){k.bi_valid===16?(Q(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(o)}},{"../utils/common":41}],53:[function(s,_,c){_.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,_,c){(function(n){(function(r,e){if(!r.setImmediate){var a,h,m,b,w=1,u={},g=!1,l=r.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(r);p=p&&p.setTimeout?p:r,a={}.toString.call(r.process)==="[object process]"?function(E){process.nextTick(function(){y(E)})}:function(){if(r.postMessage&&!r.importScripts){var E=!0,A=r.onmessage;return r.onmessage=function(){E=!1},r.postMessage("","*"),r.onmessage=A,E}}()?(b="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",S,!1):r.attachEvent("onmessage",S),function(E){r.postMessage(b+E,"*")}):r.MessageChannel?((m=new MessageChannel).port1.onmessage=function(E){y(E.data)},function(E){m.port2.postMessage(E)}):l&&"onreadystatechange"in l.createElement("script")?(h=l.documentElement,function(E){var A=l.createElement("script");A.onreadystatechange=function(){y(E),A.onreadystatechange=null,h.removeChild(A),A=null},h.appendChild(A)}):function(E){setTimeout(y,0,E)},p.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var A=new Array(arguments.length-1),N=0;N<A.length;N++)A[N]=arguments[N+1];var T={callback:E,args:A};return u[w]=T,a(w),w++},p.clearImmediate=d}function d(E){delete u[E]}function y(E){if(g)setTimeout(y,0,E);else{var A=u[E];if(A){g=!0;try{(function(N){var T=N.callback,j=N.args;switch(j.length){case 0:T();break;case 1:T(j[0]);break;case 2:T(j[0],j[1]);break;case 3:T(j[0],j[1],j[2]);break;default:T.apply(e,j)}})(A)}finally{d(E),g=!1}}}}function S(E){E.source===r&&typeof E.data=="string"&&E.data.indexOf(b)===0&&y(+E.data.slice(b.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof ce<"u"?ce:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Cr);var Qn=Cr.exports;const ti=qr(Qn),ei={class:"content"},ri={class:"info"},ni=["src"],ii=At({__name:"index",setup(f){const C=pt([{src:Yn,boxList:[{name:"头盔",x:.15,y:.15,w:.15,h:.15},{name:"口罩",x:.35,y:.45,w:.25,h:.25}]},{src:Jn,boxList:[]}]),s=pt(0);dr(_r,a=>{C.value.length>=s.value&&(C.value[s.value].boxList=a)});function _(a){a!==s.value&&(a!==void 0&&(s.value=a),requestAnimationFrame(()=>Re(C.value[s.value])))}_();function c(a){const h=a[0];if(!h||!h.file)return;const m=URL.createObjectURL(h.file);C.value.push({src:m,boxList:[]})}function n(a){C.value.splice(a,1),C.value.length==0?(s.value=0,Re()):a==s.value&&(s.value=Math.max(0,s.value-1),Re(C.value[s.value]))}function r(a){jt.value=jt.value.filter(h=>h.name!==a),C.value.forEach(h=>{h.boxList=h.boxList.filter(m=>m.name!==a)}),_()}async function e(){const a="yolo8FormatAnnotator";if(Yr(a,"导出中..."),C.value.length==0)return window.$message.warning("没有图片可导出~");const h=new ti,m=h.folder("images"),b=h.folder("annotations");if(!m||!b)return window.$message.warning("图片导出失败~");const w=jt.value.map(u=>u.name);h.file("names.txt",`names: ["${w.join('", "')}"]`);for(const u of C.value)try{const l=await(await fetch(u.src)).blob(),p=Me();m.file(p+"."+l.type.split("/")[1],l);const d=u.boxList.map(y=>{const{name:S,x:E,y:A,w:N,h:T}=y;return`${w.findIndex(j=>j===S)} ${E} ${A} ${N} ${T}`}).join(`
`);b.file(p+".txt",d)}catch(g){console.error(`Error fetching image at ${u.src}: ${g}`)}h.generateAsync({type:"blob"}).then(function(u){const g=URL.createObjectURL(u),l=document.createElement("a");l.href=g,l.download="yolo8FormatAnnotator.zip",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(g)}).finally(()=>Jr(a))}return window.addEventListener("mousemove",nr),window.addEventListener("mouseup",rr),window.addEventListener("keydown",ir),Gr(()=>{window.removeEventListener("mousemove",nr),window.removeEventListener("mouseup",rr),window.removeEventListener("keydown",ir)}),(a,h)=>(Wt(),de("div",ei,[he("div",ri,[xt(ut(dn),{href:"https://github.com/ultralytics/ultralytics",target:"_blank"},{default:yt(()=>h[5]||(h[5]=[Ut(" ultralytics YOLO Vision ")])),_:1,__:[5]}),xt(ut(Pt),{onClick:ut(Xn)},{default:yt(()=>h[6]||(h[6]=[Ut("添加标签")])),_:1,__:[6]},8,["onClick"]),xt(ut(_e),null,{default:yt(()=>[(Wt(!0),de(ze,null,Ae(ut(jt),m=>(Wt(),Ee(ut(Qr),{key:m.name,closable:"",bordered:!1,class:"box-tag",color:{color:m.color,textColor:"#fff"},onClose:b=>r(m.name)},{default:yt(()=>[Ut(Ie(m.name),1)]),_:2},1032,["color","onClose"]))),128))]),_:1}),xt(ut(_e),null,{default:yt(()=>[xt(ut(sn),{multiple:"",accept:"image/*","show-file-list":!1,"file-list":[],"onUpdate:fileList":c},{default:yt(()=>[xt(ut(Pt),null,{default:yt(()=>h[7]||(h[7]=[Ut("添加图片")])),_:1,__:[7]})]),_:1}),xt(ut(Pt),{onClick:e},{default:yt(()=>h[8]||(h[8]=[Ut("导出")])),_:1,__:[8]})]),_:1}),xt(ut(un),{class:"file-list"},{default:yt(()=>[xt(ut(jn),{hoverable:"",clickable:""},{default:yt(()=>[(Wt(!0),de(ze,null,Ae(C.value,(m,b)=>(Wt(),Ee(ut($n),{key:m.src,class:tn([b==s.value&&"active"]),onClick:w=>_(b)},{default:yt(()=>[he("img",{src:m.src,alt:""},null,8,ni),Ut(" 标注个数："+Ie(m.boxList.length)+" ",1),xt(ut(Pt),{onClick:en(w=>n(b),["stop"])},{default:yt(()=>[xt(ut(fr),{size:"20",component:ut(ln)},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),he("div",{class:"canvas-box",style:Kr({"pointer-events":C.value.length>0?"auto":"none"})},[he("canvas",{ref_key:"canvas",ref:vr,onWheel:h[0]||(h[0]=(...m)=>ut(Qe)&&ut(Qe)(...m)),onMousedown:h[1]||(h[1]=(...m)=>ut(er)&&ut(er)(...m)),onContextmenu:h[2]||(h[2]=(...m)=>ut(or)&&ut(or)(...m)),onClick:h[3]||(h[3]=(...m)=>ut(tr)&&ut(tr)(...m))},null,544),xt(ut(_e),null,{default:yt(()=>[xt(ut(cn),{value:ut(ye),"onUpdate:value":h[4]||(h[4]=m=>Xr(ye)?ye.value=m:null),size:"large"},{checked:yt(()=>h[9]||(h[9]=[Ut(" 连续创建")])),unchecked:yt(()=>h[10]||(h[10]=[Ut(" 单个创建 ")])),_:1},8,["value"]),(Wt(!0),de(ze,null,Ae(ut(jt),(m,b)=>{var w;return Wt(),Ee(ut(Pt),{key:m.color,onClick:u=>ut(qn)(b),color:m.color,secondary:((w=ut(ot))==null?void 0:w.name)!==m.name},{default:yt(()=>[Ut(Ie(m.name),1)]),_:2},1032,["onClick","color","secondary"])}),128))]),_:1})],4)]))}}),vi=rn(ii,[["__scopeId","data-v-6456d186"]]);export{vi as default};
