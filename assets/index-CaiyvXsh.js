import{R as Ce}from"./ResponsiveDirectionLayout-DQ9-6xWh.js";import{c3 as ve,c4 as ye,z as A,J as x,a7 as $e,n as Re,d as C,q as Me,ab as F,k as R,c5 as je,v as me,ag as Q,aI as we,K as Te,E as ne,bm as Ee,a3 as oe,ai as Ne,am as Ve,c6 as Oe,c7 as Be,c8 as re,p as J,ap as Y,x as ke,c9 as Ie,W as ze,F as Ge,c0 as Z,o as M,c as B,aM as h,b as ge,ah as Ae,a as l,w as u,u as e,Z as Le,aW as G,aX as y,B as O,e as $,t as De,aR as Pe,b2 as Ue,bj as se,ca as He,cb as Fe,_ as We}from"./index-0eR8rf1o.js";import{N as qe}from"./Image-QkNWt_FW.js";import"./use-locale-u8nGuLbf.js";import"./download-C2161hUv.js";function Xe(n){if(typeof n=="number")return{"":n.toString()};const t={};return n.split(/ +/).forEach(r=>{if(r==="")return;const[a,i]=r.split(":");i===void 0?t[""]=a:t[a]=i}),t}function H(n,t){var r;if(n==null)return;const a=Xe(n);if(t===void 0)return a[""];if(typeof t=="string")return(r=a[t])!==null&&r!==void 0?r:a[""];if(Array.isArray(t)){for(let i=t.length-1;i>=0;--i){const s=t[i];if(s in a)return a[s]}return a[""]}else{let i,s=-1;return Object.keys(a).forEach(o=>{const c=Number(o);!Number.isNaN(c)&&t>=c&&c>=s&&(s=c,i=a[o])}),i}}function Qe(n){var t;const r=(t=n.dirs)===null||t===void 0?void 0:t.find(({dir:a})=>a===ve);return!!(r&&r.value===!1)}const Je={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function Ye(n){return`(min-width: ${n}px)`}const X={};function Ze(n=Je){if(!ye)return A(()=>[]);if(typeof window.matchMedia!="function")return A(()=>[]);const t=x({}),r=Object.keys(n),a=(i,s)=>{i.matches?t.value[s]=!0:t.value[s]=!1};return r.forEach(i=>{const s=n[i];let o,c;X[s]===void 0?(o=window.matchMedia(Ye(s)),o.addEventListener?o.addEventListener("change",m=>{c.forEach(v=>{v(m,i)})}):o.addListener&&o.addListener(m=>{c.forEach(v=>{v(m,i)})}),c=new Set,X[s]={mql:o,cbs:c}):(o=X[s].mql,c=X[s].cbs),c.add(a),o.matches&&c.forEach(m=>{m(o,i)})}),$e(()=>{r.forEach(i=>{const{cbs:s}=X[n[i]];s.has(a)&&s.delete(a)})}),A(()=>{const{value:i}=t;return r.filter(s=>i[s])})}const le=1,_e=Re("n-grid"),xe=1,Ke={span:{type:[Number,String],default:xe},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},K=C({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:Ke,setup(){const{isSsrRef:n,xGapRef:t,itemStyleRef:r,overflowRef:a,layoutShiftDisabledRef:i}=Me(_e),s=je();return{overflow:a,itemStyle:r,layoutShiftDisabled:i,mergedXGap:A(()=>F(t.value||0)),deriveStyle:()=>{n.value;const{privateSpan:o=xe,privateShow:c=!0,privateColStart:m=void 0,privateOffset:v=0}=s.vnode.props,{value:j}=t,g=F(j||0);return{display:c?"":"none",gridColumn:`${m??`span ${o}`} / span ${o}`,marginLeft:v?`calc((100% - (${o} - 1) * ${g}) / ${o} * ${v} + ${g} * ${v})`:""}}}},render(){var n,t;if(this.layoutShiftDisabled){const{span:r,offset:a,mergedXGap:i}=this;return R("div",{style:{gridColumn:`span ${r} / span ${r}`,marginLeft:a?`calc((100% - (${r} - 1) * ${i}) / ${r} * ${a} + ${i} * ${a})`:""}},this.$slots)}return R("div",{style:[this.itemStyle,this.deriveStyle()]},(t=(n=this.$slots).default)===null||t===void 0?void 0:t.call(n,{overflow:this.overflow}))}}),et={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},be=24,ee="__ssr__",tt={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:be},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},nt=C({name:"Grid",inheritAttrs:!1,props:tt,setup(n){const{mergedClsPrefixRef:t,mergedBreakpointsRef:r}=me(n),a=/^\d+$/,i=x(void 0),s=Ze((r==null?void 0:r.value)||et),o=Q(()=>!!(n.itemResponsive||!a.test(n.cols.toString())||!a.test(n.xGap.toString())||!a.test(n.yGap.toString()))),c=A(()=>{if(o.value)return n.responsive==="self"?i.value:s.value}),m=Q(()=>{var w;return(w=Number(H(n.cols.toString(),c.value)))!==null&&w!==void 0?w:be}),v=Q(()=>H(n.xGap.toString(),c.value)),j=Q(()=>H(n.yGap.toString(),c.value)),g=w=>{i.value=w.contentRect.width},S=w=>{Ve(g,w)},k=x(!1),I=A(()=>{if(n.responsive==="self")return S}),_=x(!1),T=x();return we(()=>{const{value:w}=T;w&&w.hasAttribute(ee)&&(w.removeAttribute(ee),_.value=!0)}),Te(_e,{layoutShiftDisabledRef:ne(n,"layoutShiftDisabled"),isSsrRef:_,itemStyleRef:ne(n,"itemStyle"),xGapRef:v,overflowRef:k}),{isSsr:!Ee,contentEl:T,mergedClsPrefix:t,style:A(()=>n.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${n.cols}, minmax(0, 1fr))`,columnGap:F(n.xGap),rowGap:F(n.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${m.value}, minmax(0, 1fr))`,columnGap:F(v.value),rowGap:F(j.value)}),isResponsive:o,responsiveQuery:c,responsiveCols:m,handleResize:I,overflow:k}},render(){if(this.layoutShiftDisabled)return R("div",oe({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const n=()=>{var t,r,a,i,s,o,c;this.overflow=!1;const m=Oe(Be(this)),v=[],{collapsed:j,collapsedRows:g,responsiveCols:S,responsiveQuery:k}=this;m.forEach(p=>{var E,z,N,L,W;if(((E=p==null?void 0:p.type)===null||E===void 0?void 0:E.__GRID_ITEM__)!==!0)return;if(Qe(p)){const V=re(p);V.props?V.props.privateShow=!1:V.props={privateShow:!1},v.push({child:V,rawChildSpan:0});return}p.dirs=((z=p.dirs)===null||z===void 0?void 0:z.filter(({dir:V})=>V!==ve))||null,((N=p.dirs)===null||N===void 0?void 0:N.length)===0&&(p.dirs=null);const P=re(p),q=Number((W=H((L=P.props)===null||L===void 0?void 0:L.span,k))!==null&&W!==void 0?W:le);q!==0&&v.push({child:P,rawChildSpan:q})});let I=0;const _=(t=v[v.length-1])===null||t===void 0?void 0:t.child;if(_!=null&&_.props){const p=(r=_.props)===null||r===void 0?void 0:r.suffix;p!==void 0&&p!==!1&&(I=Number((i=H((a=_.props)===null||a===void 0?void 0:a.span,k))!==null&&i!==void 0?i:le),_.props.privateSpan=I,_.props.privateColStart=S+1-I,_.props.privateShow=(s=_.props.privateShow)!==null&&s!==void 0?s:!0)}let T=0,w=!1;for(const{child:p,rawChildSpan:E}of v){if(w&&(this.overflow=!0),!w){const z=Number((c=H((o=p.props)===null||o===void 0?void 0:o.offset,k))!==null&&c!==void 0?c:0),N=Math.min(E+z,S);if(p.props?(p.props.privateSpan=N,p.props.privateOffset=z):p.props={privateSpan:N,privateOffset:z},j){const L=T%S;N+L>S&&(T+=S-L),N+T+I>g*S?w=!0:T+=N}}w&&(p.props?p.props.privateShow!==!0&&(p.props.privateShow=!1):p.props={privateShow:!1})}return R("div",oe({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[ee]:this.isSsr||void 0},this.$attrs),v.map(({child:p})=>p))};return this.isResponsive&&this.responsive==="self"?R(Ne,{onResize:this.handleResize},{default:n}):n()}}),ot=J("statistic",[Y("label",`
 font-weight: var(--n-label-font-weight);
 transition: .3s color var(--n-bezier);
 font-size: var(--n-label-font-size);
 color: var(--n-label-text-color);
 `),J("statistic-value",`
 margin-top: 4px;
 font-weight: var(--n-value-font-weight);
 `,[Y("prefix",`
 margin: 0 4px 0 0;
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-prefix-text-color);
 `,[J("icon",{verticalAlign:"-0.125em"})]),Y("content",`
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-text-color);
 `),Y("suffix",`
 margin: 0 0 0 4px;
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-suffix-text-color);
 `,[J("icon",{verticalAlign:"-0.125em"})])])]),rt=Object.assign(Object.assign({},ke.props),{tabularNums:Boolean,label:String,value:[String,Number]}),D=C({name:"Statistic",props:rt,setup(n){const{mergedClsPrefixRef:t,inlineThemeDisabled:r,mergedRtlRef:a}=me(n),i=ke("Statistic","-statistic",ot,Ie,n,t),s=ze("Statistic",a,t),o=A(()=>{const{self:{labelFontWeight:m,valueFontSize:v,valueFontWeight:j,valuePrefixTextColor:g,labelTextColor:S,valueSuffixTextColor:k,valueTextColor:I,labelFontSize:_},common:{cubicBezierEaseInOut:T}}=i.value;return{"--n-bezier":T,"--n-label-font-size":_,"--n-label-font-weight":m,"--n-label-text-color":S,"--n-value-font-weight":j,"--n-value-font-size":v,"--n-value-prefix-text-color":g,"--n-value-suffix-text-color":k,"--n-value-text-color":I}}),c=r?Ge("statistic",void 0,o,n):void 0;return{rtlEnabled:s,mergedClsPrefix:t,cssVars:r?void 0:o,themeClass:c==null?void 0:c.themeClass,onRender:c==null?void 0:c.onRender}},render(){var n;const{mergedClsPrefix:t,$slots:{default:r,label:a,prefix:i,suffix:s}}=this;return(n=this.onRender)===null||n===void 0||n.call(this),R("div",{class:[`${t}-statistic`,this.themeClass,this.rtlEnabled&&`${t}-statistic--rtl`],style:this.cssVars},Z(a,o=>R("div",{class:`${t}-statistic__label`},this.label||o)),R("div",{class:`${t}-statistic-value`,style:{fontVariantNumeric:this.tabularNums?"tabular-nums":""}},Z(i,o=>o&&R("span",{class:`${t}-statistic-value__prefix`},o)),this.value!==void 0?R("span",{class:`${t}-statistic-value__content`},this.value):Z(r,o=>o&&R("span",{class:`${t}-statistic-value__content`},o)),Z(s,o=>o&&R("span",{class:`${t}-statistic-value__suffix`},o))))}}),st={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},lt=h("path",{d:"M350.54 148.68l-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h352a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),it=h("circle",{cx:"256",cy:"272",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),at=h("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M124 158v-22h-24v22"},null,-1),ut=[lt,it,at],ie=C({name:"CameraOutline",render:function(t,r){return M(),B("svg",st,ut)}}),ct={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},dt=ge('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M304 416V304h112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M314.2 314.23L432 432"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M208 96v112H96"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M197.8 197.77L80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M416 208H304V96"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M314.23 197.8L432 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M96 304h112v112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M197.77 314.2L80 432"></path>',8),ft=[dt],ae=C({name:"ContractOutline",render:function(t,r){return M(),B("svg",ct,ft)}}),ht={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},pt=h("rect",{x:"32",y:"64",width:"448",height:"320",rx:"32",ry:"32",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),vt=h("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M304 448l-8-64h-80l-8 64h96z",fill:"currentColor"},null,-1),mt=h("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 448H144"},null,-1),wt=h("path",{d:"M32 304v48a32.09 32.09 0 0 0 32 32h384a32.09 32.09 0 0 0 32-32v-48zm224 64a16 16 0 1 1 16-16a16 16 0 0 1-16 16z",fill:"currentColor"},null,-1),kt=[pt,vt,mt,wt],ue=C({name:"DesktopOutline",render:function(t,r){return M(),B("svg",ht,kt)}}),gt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},_t=ge('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M432 320v112H320"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M421.8 421.77L304 304"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M80 192V80h112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M90.2 90.23L208 208"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 80h112v112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M421.77 90.2L304 208"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M192 432H80V320"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M90.23 421.8L208 304"></path>',8),xt=[_t],ce=C({name:"ExpandOutline",render:function(t,r){return M(),B("svg",gt,xt)}}),bt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},St=h("rect",{x:"48",y:"80",width:"416",height:"352",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ct=h("circle",{cx:"336",cy:"176",r:"32",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),yt=h("path",{d:"M304 335.79l-90.66-90.49a32 32 0 0 0-43.87-1.3L48 352",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),$t=h("path",{d:"M224 432l123.34-123.34a32 32 0 0 1 43.11-2L464 368",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Rt=[St,Ct,yt,$t],Mt=C({name:"ImageOutline",render:function(t,r){return M(),B("svg",bt,Rt)}}),jt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Tt=h("circle",{cx:"128",cy:"256",r:"96",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Et=h("circle",{cx:"384",cy:"256",r:"96",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Nt=h("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M128 352h256"},null,-1),Vt=[Tt,Et,Nt],de=C({name:"RecordingOutline",render:function(t,r){return M(),B("svg",jt,Vt)}}),Ot={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Bt=h("rect",{x:"64",y:"320",width:"48",height:"160",rx:"8",ry:"8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),It=h("rect",{x:"288",y:"224",width:"48",height:"256",rx:"8",ry:"8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),zt=h("rect",{x:"400",y:"112",width:"48",height:"368",rx:"8",ry:"8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Gt=h("rect",{x:"176",y:"32",width:"48",height:"448",rx:"8",ry:"8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),At=[Bt,It,zt,Gt],Lt=C({name:"StatsChartOutline",render:function(t,r){return M(),B("svg",Ot,At)}}),Dt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Pt=h("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Ut=h("path",{d:"M310.4 336H201.6a25.62 25.62 0 0 1-25.6-25.6V201.6a25.62 25.62 0 0 1 25.6-25.6h108.8a25.62 25.62 0 0 1 25.6 25.6v108.8a25.62 25.62 0 0 1-25.6 25.6z",fill:"currentColor"},null,-1),Ht=[Pt,Ut],fe=C({name:"StopCircleOutline",render:function(t,r){return M(),B("svg",Dt,Ht)}}),Ft={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Wt=h("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"32","stroke-linejoin":"round",d:"M374.79 308.78L457.5 367a16 16 0 0 0 22.5-14.62V159.62A16 16 0 0 0 457.5 145l-82.71 58.22A16 16 0 0 0 368 216.3v79.4a16 16 0 0 0 6.79 13.08z"},null,-1),qt=h("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"32","stroke-miterlimit":"10",d:"M50.19 140.57A51.94 51.94 0 0 0 32 180v152a52.15 52.15 0 0 0 52 52h184a51.6 51.6 0 0 0 22-4.9"},null,-1),Xt=h("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"32","stroke-miterlimit":"10",d:"M208 128h60.48A51.68 51.68 0 0 1 320 179.52V248"},null,-1),Qt=h("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"32","stroke-miterlimit":"10",d:"M416 416L80 80"},null,-1),Jt=[Wt,qt,Xt,Qt],he=C({name:"VideocamOffOutline",render:function(t,r){return M(),B("svg",Ft,Jt)}}),Yt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Zt=h("path",{d:"M374.79 308.78L457.5 367a16 16 0 0 0 22.5-14.62V159.62A16 16 0 0 0 457.5 145l-82.71 58.22A16 16 0 0 0 368 216.3v79.4a16 16 0 0 0 6.79 13.08z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Kt=h("path",{d:"M268 384H84a52.15 52.15 0 0 1-52-52V180a52.15 52.15 0 0 1 52-52h184.48A51.68 51.68 0 0 1 320 179.52V332a52.15 52.15 0 0 1-52 52z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),en=[Zt,Kt],pe=C({name:"VideocamOutline",render:function(t,r){return M(),B("svg",Yt,en)}}),tn={class:"media-box"},nn=C({__name:"index",setup(n){const t=x(),r=x();let a=new MediaStream,i=new MediaStream;const s=x(!1),o=x(!1),c=x(!1),m=x(!1),v=x(!1),j=x("");let g=null,S=[];const k=x({screen:{width:0,height:0,fps:0,bitrate:0},camera:{width:0,height:0,fps:0,bitrate:0}});async function I(){try{const d=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});d.getVideoTracks()[0].addEventListener("ended",()=>{s.value=!1,window.$message.warning("屏幕共享已停止")}),a.getTracks().forEach(f=>{a.removeTrack(f)}),d.getVideoTracks().forEach(f=>{console.log(f),a.addTrack(f),V(f,"screen")}),s.value=!0,window.$message.success("屏幕媒体流已加入")}catch(d){window.$message.error("无法采集屏幕媒体流"),console.error("无法采集屏幕媒体流:",d)}}async function _(){try{a.getTracks().forEach(d=>{d.stop(),a.removeTrack(d)}),s.value=!1,window.$message.success("屏幕媒体流已关闭")}catch(d){window.$message.error("无法关闭屏幕媒体流"),console.error("无法关闭屏幕媒体流:",d)}}async function T(){try{const d=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});i.getTracks().forEach(f=>{i.removeTrack(f)}),d.getVideoTracks().forEach(f=>{i.addTrack(f),V(f,"camera")}),o.value=!0,window.$message.success("摄像头媒体流已加入")}catch(d){window.$message.error("无法采集摄像头媒体流"),console.error("无法采集摄像头媒体流:",d)}}async function w(){try{i.getTracks().forEach(d=>{d.stop(),i.removeTrack(d)}),o.value=!1,window.$message.success("摄像头媒体流已关闭")}catch(d){window.$message.error("无法关闭摄像头媒体流"),console.error("无法关闭摄像头媒体流:",d)}}let p;const E=x(0),z=A(()=>`${String(parseInt(E.value/3600+"")%24).padStart(2,"0")}:${String(parseInt(E.value/60+"")%60).padStart(2,"0")}:${String(E.value%60).padStart(2,"0")}`);function N(){if(!s.value&&!o.value){window.$message.warning("请先开启至少一个媒体流");return}const d=new MediaStream;a.getTracks().forEach(f=>d.addTrack(f)),i.getTracks().forEach(f=>d.addTrack(f)),S=[],g=new MediaRecorder(d,{mimeType:"video/webm;codecs=vp9"}),g.ondataavailable=f=>{f.data.size>0&&S.push(f.data)},g.onstop=()=>{clearInterval(p),d.getTracks().forEach(Se=>d.removeTrack(Se));const f=new Blob(S,{type:"video/webm"}),b=URL.createObjectURL(f),U=document.createElement("a");U.style.display="none",U.href=b,U.download=`recording-${new Date().toISOString()}.webm`,document.body.appendChild(U),U.click(),setTimeout(()=>{document.body.removeChild(U),window.URL.revokeObjectURL(b)},100)},g.start(1e3),c.value=!0,E.value=0,p=window.setInterval(()=>{E.value+=1},1e3)}function L(){g&&c.value&&(g.stop(),c.value=!1,window.$message.success("录制已保存"))}function W(){if(!s.value&&!o.value){window.$message.warning("请先开启至少一个媒体流");return}const d=document.createElement("canvas"),f=s.value?t.value:r.value;if(f){d.width=f.videoWidth,d.height=f.videoHeight;const b=d.getContext("2d");b&&(b.drawImage(f,0,0,d.width,d.height),j.value=d.toDataURL("image/png"),v.value=!0)}}const P=x(void 0);async function q(d){d&&(document.pictureInPictureElement===d?await document.exitPictureInPicture():await d.requestPictureInPicture(),P.value=document.pictureInPictureElement)}function V(d,f){if(!("getSettings"in d))return;const b=d.getSettings();k.value[f].width=b.width||0,k.value[f].height=b.height||0,k.value[f].fps=b.frameRate||0}let te;return we(()=>{t.value.srcObject=a,r.value.srcObject=i,te=window.setInterval(()=>{s.value&&a.getVideoTracks().length>0&&V(a.getVideoTracks()[0],"screen"),o.value&&i.getVideoTracks().length>0&&V(i.getVideoTracks()[0],"camera")},1e3)}),Ae(()=>{_(),w(),g&&c.value&&g.stop(),clearInterval(te)}),(d,f)=>(M(),B(Le,null,[l(Ce,null,{left:u(()=>[l(e(G),{vertical:""},{default:u(()=>[l(e(G),{vertical:""},{default:u(()=>[l(e(D),{label:"屏幕状态",value:s.value?"活跃":"未激活"},{suffix:u(()=>[l(e(y),{color:s.value?"green":"red",component:s.value?e(pe):e(he)},null,8,["color","component"])]),_:1},8,["value"]),l(e(G),null,{default:u(()=>[l(e(O),{onClick:I,type:"primary",ghost:"",disabled:s.value},{icon:u(()=>[l(e(y),{component:e(ue)},null,8,["component"])]),default:u(()=>[$(" 提取屏幕 ")]),_:1},8,["disabled"]),l(e(O),{onClick:_,type:"error",ghost:"",disabled:!s.value},{icon:u(()=>[l(e(y),{component:e(ue)},null,8,["component"])]),default:u(()=>[$(" 关闭屏幕 ")]),_:1},8,["disabled"]),l(e(O),{onClick:f[0]||(f[0]=b=>q(t.value)),type:"info",ghost:"",disabled:!s.value},{icon:u(()=>[l(e(y),{component:s.value&&P.value===t.value?e(ae):e(ce)},null,8,["component"])]),default:u(()=>[$(" 画中画 ")]),_:1},8,["disabled"])]),_:1})]),_:1}),l(e(G),{vertical:""},{default:u(()=>[l(e(D),{label:"摄像头状态",value:o.value?"活跃":"未激活"},{suffix:u(()=>[l(e(y),{color:o.value?"green":"red",component:o.value?e(pe):e(he)},null,8,["color","component"])]),_:1},8,["value"]),l(e(G),null,{default:u(()=>[l(e(O),{onClick:T,type:"primary",ghost:"",disabled:o.value},{icon:u(()=>[l(e(y),{component:e(ie)},null,8,["component"])]),default:u(()=>[$(" 提取摄像头 ")]),_:1},8,["disabled"]),l(e(O),{onClick:w,type:"error",ghost:"",disabled:!o.value},{icon:u(()=>[l(e(y),{component:e(ie)},null,8,["component"])]),default:u(()=>[$(" 关闭摄像头 ")]),_:1},8,["disabled"]),l(e(O),{onClick:f[1]||(f[1]=b=>q(r.value)),type:"info",ghost:"",disabled:!o.value},{icon:u(()=>[l(e(y),{component:o.value&&P.value===r.value?e(ae):e(ce)},null,8,["component"])]),default:u(()=>[$(" 画中画 ")]),_:1},8,["disabled"])]),_:1})]),_:1}),l(e(G),{vertical:""},{default:u(()=>[l(e(D),{label:"录制状态",value:c.value?"进行中":"未开始"},{prefix:u(()=>[l(e(y),{color:c.value?"red":"gray",component:c.value?e(de):e(fe)},null,8,["color","component"])]),suffix:u(()=>[$(De(z.value),1)]),_:1},8,["value"]),l(e(G),null,{default:u(()=>[l(e(O),{onClick:N,type:"error",ghost:"",disabled:c.value||!s.value&&!o.value},{icon:u(()=>[l(e(y),{component:e(de)},null,8,["component"])]),default:u(()=>[$(" 开始录制 ")]),_:1},8,["disabled"]),l(e(O),{onClick:L,type:"error",disabled:!c.value},{icon:u(()=>[l(e(y),{component:e(fe)},null,8,["component"])]),default:u(()=>[$(" 停止录制 ")]),_:1},8,["disabled"])]),_:1})]),_:1}),l(e(G),null,{default:u(()=>[l(e(O),{onClick:W,type:"info",ghost:"",disabled:!s.value&&!o.value},{icon:u(()=>[l(e(y),{component:e(Mt)},null,8,["component"])]),default:u(()=>[$(" 截图 ")]),_:1},8,["disabled"]),l(e(O),{onClick:f[2]||(f[2]=b=>m.value=!m.value),type:"info",ghost:""},{icon:u(()=>[l(e(y),{component:e(Lt)},null,8,["component"])]),default:u(()=>[$(" 统计信息 ")]),_:1})]),_:1}),m.value?(M(),Pe(e(G),{key:0,vertical:""},{default:u(()=>[l(e(nt),{cols:2,"x-gap":"12","y-gap":"12"},{default:u(()=>[l(e(K),null,{default:u(()=>[l(e(D),{label:"屏幕分辨率",value:`${k.value.screen.width}×${k.value.screen.height}`},null,8,["value"])]),_:1}),l(e(K),null,{default:u(()=>[l(e(D),{label:"屏幕帧率",value:k.value.screen.fps},null,8,["value"])]),_:1}),l(e(K),null,{default:u(()=>[l(e(D),{label:"摄像头分辨率",value:`${k.value.camera.width}×${k.value.camera.height}`},null,8,["value"])]),_:1}),l(e(K),null,{default:u(()=>[l(e(D),{label:"摄像头帧率",value:k.value.camera.fps},null,8,["value"])]),_:1})]),_:1})]),_:1})):Ue("",!0)]),_:1})]),right:u(()=>[h("div",tn,[h("video",{ref_key:"DisplayMedia",ref:t,autoplay:"",muted:"",playsinline:"",class:se(["media-video",{active:s.value}])},null,2),h("video",{ref_key:"UserMedia",ref:r,autoplay:"",muted:"",playsinline:"",class:se(["media-video",{active:o.value}])},null,2)])]),_:1}),l(e(Fe),{show:v.value,"onUpdate:show":f[4]||(f[4]=b=>v.value=b),title:"截图预览",preset:"card",style:{width:"70vw"}},{"header-extra":u(()=>[l(e(O),{ghost:"",type:"success",onClick:f[3]||(f[3]=b=>e(He)(j.value,`screenshot-${new Date().toISOString()}.png`))},{default:u(()=>[$(" 下载 ")]),_:1})]),default:u(()=>[l(e(qe),{src:j.value},null,8,["src"])]),_:1},8,["show"])],64))}}),un=We(nn,[["__scopeId","data-v-de3e3c72"]]);export{un as default};
