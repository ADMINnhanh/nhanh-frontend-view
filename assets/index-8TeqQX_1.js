var Qt=Object.defineProperty;var Nt=(i,e,t)=>e in i?Qt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var d=(i,e,t)=>Nt(i,typeof e!="symbol"?e+"":e,t);import{R as Wt}from"./ResponsiveDirectionLayout-pkY7mgWe.js";import{bL as Ut,bM as jt,C as Vt,aM as Xt,y as Yt,U as _t,d as q,h as B,D as Ie,bN as Lt,Q as D,bO as Jt,G as I,aF as rt,ag as lt,z as Ht,au as b,W as C,V as j,bP as ut,bQ as Gt,al as $e,aE as Ke,aJ as Ot,bR as Ft,ay as qt,R as Ze,a1 as $t,J as Kt,a2 as Zt,bS as eo,I as de,E as ct,bT as to,K as oo,b4 as no,aL as io,ai as re,N as et,ah as le,c as F,o as J,a as ao,aV as so,u as v,_ as dt,aY as ro,w as A,b as p,b2 as X,bc as O,Z as ue,aX as ce,aS as lo,bd as uo,e as R,t as xe,B as co,b3 as ho}from"./index-SnQg8QuD.js";import{S as fo}from"./Scrollbar-BGtSPmIE.js";import{c as Ao}from"./_createCompounder-CruQZFnc.js";import{N as oe}from"./InputNumber-C5hDgSg1.js";import{N as we}from"./RadioGroup-Cs76OdtN.js";import{N as be}from"./Radio-BchURRfn.js";import{N as go}from"./Switch-B2pzmqCO.js";import{N as tt}from"./InputGroup-Dje1OER4.js";import"./Input-Cdb7vm1h.js";import"./Suffix-DbiknC0m.js";import"./use-locale-2Ng1HaKl.js";function vo(i){return Ut(jt(i).toLowerCase())}var ot=Ao(function(i,e,t){return e=e.toLowerCase(),i+(t?vo(e):e)});const ht=Yt("n-carousel-methods");function po(i){_t(ht,i)}function Ve(i="unknown",e="component"){const t=Vt(ht);return t||Xt(i,`\`${e}\` must be placed inside \`n-carousel\`.`),t}function mo(){return B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},B("g",{fill:"none"},B("path",{d:"M10.26 3.2a.75.75 0 0 1 .04 1.06L6.773 8l3.527 3.74a.75.75 0 1 1-1.1 1.02l-4-4.25a.75.75 0 0 1 0-1.02l4-4.25a.75.75 0 0 1 1.06-.04z",fill:"currentColor"})))}function xo(){return B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},B("g",{fill:"none"},B("path",{d:"M5.74 3.2a.75.75 0 0 0-.04 1.06L9.227 8L5.7 11.74a.75.75 0 1 0 1.1 1.02l4-4.25a.75.75 0 0 0 0-1.02l-4-4.25a.75.75 0 0 0-1.06-.04z",fill:"currentColor"})))}const wo=q({name:"CarouselArrow",setup(i){const{mergedClsPrefixRef:e}=Ie(i),{isVertical:t,isPrevDisabled:o,isNextDisabled:n,prev:s,next:c}=Ve();return{mergedClsPrefix:e,isVertical:t,isPrevDisabled:o,isNextDisabled:n,prev:s,next:c}},render(){const{mergedClsPrefix:i}=this;return B("div",{class:`${i}-carousel__arrow-group`},B("div",{class:[`${i}-carousel__arrow`,this.isPrevDisabled()&&`${i}-carousel__arrow--disabled`],role:"button",onClick:this.prev},mo()),B("div",{class:[`${i}-carousel__arrow`,this.isNextDisabled()&&`${i}-carousel__arrow--disabled`],role:"button",onClick:this.next},xo()))}}),bo={total:{type:Number,default:0},currentIndex:{type:Number,default:0},dotType:{type:String,default:"dot"},trigger:{type:String,default:"click"},keyboard:Boolean},Co=q({name:"CarouselDots",props:bo,setup(i){const{mergedClsPrefixRef:e}=Ie(i),t=D([]),o=Ve();function n(l,g){switch(l.key){case"Enter":case" ":l.preventDefault(),o.to(g);return}i.keyboard&&f(l)}function s(l){i.trigger==="hover"&&o.to(l)}function c(l){i.trigger==="click"&&o.to(l)}function f(l){var g;if(l.shiftKey||l.altKey||l.ctrlKey||l.metaKey)return;const y=(g=document.activeElement)===null||g===void 0?void 0:g.nodeName.toLowerCase();if(y==="input"||y==="textarea")return;const{code:E}=l,P=E==="PageUp"||E==="ArrowUp",Y=E==="PageDown"||E==="ArrowDown",M=E==="PageUp"||E==="ArrowRight",z=E==="PageDown"||E==="ArrowLeft",N=o.isVertical(),H=N?P:M,_=N?Y:z;!H&&!_||(l.preventDefault(),H&&!o.isNextDisabled()?(o.next(),r(o.currentIndexRef.value)):_&&!o.isPrevDisabled()&&(o.prev(),r(o.currentIndexRef.value)))}function r(l){var g;(g=t.value[l])===null||g===void 0||g.focus()}return Jt(()=>t.value.length=0),{mergedClsPrefix:e,dotEls:t,handleKeydown:n,handleMouseenter:s,handleClick:c}},render(){const{mergedClsPrefix:i,dotEls:e}=this;return B("div",{class:[`${i}-carousel__dots`,`${i}-carousel__dots--${this.dotType}`],role:"tablist"},Lt(this.total,t=>{const o=t===this.currentIndex;return B("div",{"aria-selected":o,ref:n=>e.push(n),role:"button",tabindex:"0",class:[`${i}-carousel__dot`,o&&`${i}-carousel__dot--active`],key:t,onClick:()=>{this.handleClick(t)},onMouseenter:()=>{this.handleMouseenter(t)},onKeydown:n=>{this.handleKeydown(n,t)}})}))}}),ye="CarouselItem";function yo(i){var e;return((e=i.type)===null||e===void 0?void 0:e.name)===ye}const ft=q({name:ye,setup(i){const{mergedClsPrefixRef:e}=Ie(i),t=Ve(ot(ye),`n-${ot(ye)}`),o=D(),n=I(()=>{const{value:g}=o;return g?t.getSlideIndex(g):-1}),s=I(()=>t.isPrev(n.value)),c=I(()=>t.isNext(n.value)),f=I(()=>t.isActive(n.value)),r=I(()=>t.getSlideStyle(n.value));rt(()=>{t.addSlide(o.value)}),lt(()=>{t.removeSlide(o.value)});function l(g){const{value:y}=n;y!==void 0&&(t==null||t.onCarouselItemClick(y,g))}return{mergedClsPrefix:e,selfElRef:o,isPrev:s,isNext:c,isActive:f,index:n,style:r,handleClick:l}},render(){var i;const{$slots:e,mergedClsPrefix:t,isPrev:o,isNext:n,isActive:s,index:c,style:f}=this,r=[`${t}-carousel__slide`,{[`${t}-carousel__slide--current`]:s,[`${t}-carousel__slide--prev`]:o,[`${t}-carousel__slide--next`]:n}];return B("div",{ref:"selfElRef",class:r,role:"option",tabindex:"-1","data-index":c,"aria-hidden":!s,style:f,onClickCapture:this.handleClick},(i=e.default)===null||i===void 0?void 0:i.call(e,{isPrev:o,isNext:n,isActive:s,index:c}))}}),Io=Ht("carousel",`
 position: relative;
 width: 100%;
 height: 100%;
 touch-action: pan-y;
 overflow: hidden;
`,[b("slides",`
 display: flex;
 width: 100%;
 height: 100%;
 transition-timing-function: var(--n-bezier);
 transition-property: transform;
 `,[b("slide",`
 flex-shrink: 0;
 position: relative;
 width: 100%;
 height: 100%;
 outline: none;
 overflow: hidden;
 `,[j("> img",`
 display: block;
 `)])]),b("dots",`
 position: absolute;
 display: flex;
 flex-wrap: nowrap;
 `,[C("dot",[b("dot",`
 height: var(--n-dot-size);
 width: var(--n-dot-size);
 background-color: var(--n-dot-color);
 border-radius: 50%;
 cursor: pointer;
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 outline: none;
 `,[j("&:focus",`
 background-color: var(--n-dot-color-focus);
 `),C("active",`
 background-color: var(--n-dot-color-active);
 `)])]),C("line",[b("dot",`
 border-radius: 9999px;
 width: var(--n-dot-line-width);
 height: 4px;
 background-color: var(--n-dot-color);
 cursor: pointer;
 transition:
 width .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 outline: none;
 `,[j("&:focus",`
 background-color: var(--n-dot-color-focus);
 `),C("active",`
 width: var(--n-dot-line-width-active);
 background-color: var(--n-dot-color-active);
 `)])])]),b("arrow",`
 transition: background-color .3s var(--n-bezier);
 cursor: pointer;
 height: 28px;
 width: 28px;
 display: flex;
 align-items: center;
 justify-content: center;
 background-color: rgba(255, 255, 255, .2);
 color: var(--n-arrow-color);
 border-radius: 8px;
 user-select: none;
 -webkit-user-select: none;
 font-size: 18px;
 `,[j("svg",`
 height: 1em;
 width: 1em;
 `),j("&:hover",`
 background-color: rgba(255, 255, 255, .3);
 `)]),C("vertical",`
 touch-action: pan-x;
 `,[b("slides",`
 flex-direction: column;
 `),C("fade",[b("slide",`
 top: 50%;
 left: unset;
 transform: translateY(-50%);
 `)]),C("card",[b("slide",`
 top: 50%;
 left: unset;
 transform: translateY(-50%) translateZ(-400px);
 `,[C("current",`
 transform: translateY(-50%) translateZ(0);
 `),C("prev",`
 transform: translateY(-100%) translateZ(-200px);
 `),C("next",`
 transform: translateY(0%) translateZ(-200px);
 `)])])]),C("usercontrol",[b("slides",[j(">",[j("div",`
 position: absolute;
 top: 50%;
 left: 50%;
 width: 100%;
 height: 100%;
 transform: translate(-50%, -50%);
 `)])])]),C("left",[b("dots",`
 transform: translateY(-50%);
 top: 50%;
 left: 12px;
 flex-direction: column;
 `,[C("line",[b("dot",`
 width: 4px;
 height: var(--n-dot-line-width);
 margin: 4px 0;
 transition:
 height .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 outline: none;
 `,[C("active",`
 height: var(--n-dot-line-width-active);
 `)])])]),b("dot",`
 margin: 4px 0;
 `)]),b("arrow-group",`
 position: absolute;
 display: flex;
 flex-wrap: nowrap;
 `),C("vertical",[b("arrow",`
 transform: rotate(90deg);
 `)]),C("show-arrow",[C("bottom",[b("dots",`
 transform: translateX(0);
 bottom: 18px;
 left: 18px;
 `)]),C("top",[b("dots",`
 transform: translateX(0);
 top: 18px;
 left: 18px;
 `)]),C("left",[b("dots",`
 transform: translateX(0);
 top: 18px;
 left: 18px;
 `)]),C("right",[b("dots",`
 transform: translateX(0);
 top: 18px;
 right: 18px;
 `)])]),C("left",[b("arrow-group",`
 bottom: 12px;
 left: 12px;
 flex-direction: column;
 `,[j("> *:first-child",`
 margin-bottom: 12px;
 `)])]),C("right",[b("dots",`
 transform: translateY(-50%);
 top: 50%;
 right: 12px;
 flex-direction: column;
 `,[C("line",[b("dot",`
 width: 4px;
 height: var(--n-dot-line-width);
 margin: 4px 0;
 transition:
 height .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 outline: none;
 `,[C("active",`
 height: var(--n-dot-line-width-active);
 `)])])]),b("dot",`
 margin: 4px 0;
 `),b("arrow-group",`
 bottom: 12px;
 right: 12px;
 flex-direction: column;
 `,[j("> *:first-child",`
 margin-bottom: 12px;
 `)])]),C("top",[b("dots",`
 transform: translateX(-50%);
 top: 12px;
 left: 50%;
 `,[C("line",[b("dot",`
 margin: 0 4px;
 `)])]),b("dot",`
 margin: 0 4px;
 `),b("arrow-group",`
 top: 12px;
 right: 12px;
 `,[j("> *:first-child",`
 margin-right: 12px;
 `)])]),C("bottom",[b("dots",`
 transform: translateX(-50%);
 bottom: 12px;
 left: 50%;
 `,[C("line",[b("dot",`
 margin: 0 4px;
 `)])]),b("dot",`
 margin: 0 4px;
 `),b("arrow-group",`
 bottom: 12px;
 right: 12px;
 `,[j("> *:first-child",`
 margin-right: 12px;
 `)])]),C("fade",[b("slide",`
 position: absolute;
 opacity: 0;
 transition-property: opacity;
 pointer-events: none;
 `,[C("current",`
 opacity: 1;
 pointer-events: auto;
 `)])]),C("card",[b("slides",`
 perspective: 1000px;
 `),b("slide",`
 position: absolute;
 left: 50%;
 opacity: 0;
 transform: translateX(-50%) translateZ(-400px);
 transition-property: opacity, transform;
 `,[C("current",`
 opacity: 1;
 transform: translateX(-50%) translateZ(0);
 z-index: 1;
 `),C("prev",`
 opacity: 0.4;
 transform: translateX(-100%) translateZ(-200px);
 `),C("next",`
 opacity: 0.4;
 transform: translateX(0%) translateZ(-200px);
 `)])])]);function ko(i){const{length:e}=i;return e>1&&(i.push(nt(i[0],0,"append")),i.unshift(nt(i[e-1],e-1,"prepend"))),i}function nt(i,e,t){return ut(i,{key:`carousel-item-duplicate-${e}-${t}`})}function it(i,e,t){return e===1?0:t?i===0?e-3:i===e-1?0:i-1:i}function Ue(i,e){return e?i+1:i}function So(i,e,t){return i<0?null:i===0?t?e-1:null:i-1}function Bo(i,e,t){return i>e-1?null:i===e-1?t?0:null:i+1}function Eo(i,e){return e&&i>3?i-2:i}function at(i){return window.TouchEvent&&i instanceof window.TouchEvent}function st(i,e){let{offsetWidth:t,offsetHeight:o}=i;if(e){const n=getComputedStyle(i);t=t-Number.parseFloat(n.getPropertyValue("padding-left"))-Number.parseFloat(n.getPropertyValue("padding-right")),o=o-Number.parseFloat(n.getPropertyValue("padding-top"))-Number.parseFloat(n.getPropertyValue("padding-bottom"))}return{width:t,height:o}}function Ce(i,e,t){return i<e?e:i>t?t:i}function Mo(i){if(i===void 0)return 0;if(typeof i=="number")return i;const e=/^((\d+)?\.?\d+?)(ms|s)?$/,t=i.match(e);if(t){const[,o,,n="ms"]=t;return Number(o)*(n==="ms"?1:1e3)}return 0}const Ro=["transitionDuration","transitionTimingFunction"],zo=Object.assign(Object.assign({},ct.props),{defaultIndex:{type:Number,default:0},currentIndex:Number,showArrow:Boolean,dotType:{type:String,default:"dot"},dotPlacement:{type:String,default:"bottom"},slidesPerView:{type:[Number,String],default:1},spaceBetween:{type:Number,default:0},centeredSlides:Boolean,direction:{type:String,default:"horizontal"},autoplay:Boolean,interval:{type:Number,default:5e3},loop:{type:Boolean,default:!0},effect:{type:String,default:"slide"},showDots:{type:Boolean,default:!0},trigger:{type:String,default:"click"},transitionStyle:{type:Object,default:()=>({transitionDuration:"300ms"})},transitionProps:Object,draggable:Boolean,prevSlideStyle:[Object,String],nextSlideStyle:[Object,String],touchable:{type:Boolean,default:!0},mousewheel:Boolean,keyboard:Boolean,"onUpdate:currentIndex":Function,onUpdateCurrentIndex:Function});let je=!1;const Do=q({name:"Carousel",props:zo,slots:Object,setup(i){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=Ie(i),o=D(null),n=D(null),s=D([]),c={value:[]},f=I(()=>i.direction==="vertical"),r=I(()=>f.value?"height":"width"),l=I(()=>f.value?"bottom":"right"),g=I(()=>i.effect==="slide"),y=I(()=>i.loop&&i.slidesPerView===1&&g.value),E=I(()=>i.effect==="custom"),P=I(()=>!g.value||i.centeredSlides?1:i.slidesPerView),Y=I(()=>E.value?1:i.slidesPerView),M=I(()=>P.value==="auto"||i.slidesPerView==="auto"&&i.centeredSlides),z=D({width:0,height:0}),N=D(0),H=I(()=>{const{value:a}=s;if(!a.length)return[];N.value;const{value:u}=M;if(u)return a.map(S=>st(S));const{value:h}=Y,{value:x}=z,{value:w}=r;let m=x[w];if(h!=="auto"){const{spaceBetween:S}=i,Q=m-(h-1)*S,me=1/Math.max(1,h);m=Q*me}const k=Object.assign(Object.assign({},x),{[w]:m});return a.map(()=>k)}),_=I(()=>{const{value:a}=H;if(!a.length)return[];const{centeredSlides:u,spaceBetween:h}=i,{value:x}=r,{[x]:w}=z.value;let m=0;return a.map(({[x]:k})=>{let S=m;return u&&(S+=(k-w)/2),m+=k+h,S})}),Xe=D(!1),ke=I(()=>{const{transitionStyle:a}=i;return a?Ze(a,Ro):{}}),Se=I(()=>E.value?0:Mo(ke.value.transitionDuration)),Ye=I(()=>{const{value:a}=s;if(!a.length)return[];const u=!(M.value||Y.value===1),h=k=>{if(u){const{value:S}=r;return{[S]:`${H.value[k][S]}px`}}};if(E.value)return a.map((k,S)=>h(S));const{effect:x,spaceBetween:w}=i,{value:m}=l;return a.reduce((k,S,Q)=>{const me=Object.assign(Object.assign({},h(Q)),{[`margin-${m}`]:`${w}px`});return k.push(me),Xe.value&&(x==="fade"||x==="card")&&Object.assign(me,ke.value),k},[])}),T=I(()=>{const{value:a}=P,{length:u}=s.value;if(a!=="auto")return Math.max(u-a,0)+1;{const{value:h}=H,{length:x}=h;if(!x)return u;const{value:w}=_,{value:m}=r,k=z.value[m];let S=h[h.length-1][m],Q=x;for(;Q>1&&S<k;)Q--,S+=w[Q]-w[Q-1];return Ce(Q+1,1,x)}}),Be=I(()=>Eo(T.value,y.value)),At=Ue(i.defaultIndex,y.value),Ee=D(it(At,T.value,y.value)),V=$t(Kt(i,"currentIndex"),Ee),W=I(()=>Ue(V.value,y.value));function ne(a){var u,h;a=Ce(a,0,T.value-1);const x=it(a,T.value,y.value),{value:w}=V;x!==V.value&&(Ee.value=x,(u=i["onUpdate:currentIndex"])===null||u===void 0||u.call(i,x,w),(h=i.onUpdateCurrentIndex)===null||h===void 0||h.call(i,x,w))}function Me(a=W.value){return So(a,T.value,i.loop)}function Re(a=W.value){return Bo(a,T.value,i.loop)}function gt(a){const u=K(a);return u!==null&&Me()===u&&T.value>1}function vt(a){const u=K(a);return u!==null&&Re()===u&&T.value>1}function _e(a){return W.value===K(a)}function pt(a){return V.value===a}function Le(){return Me()===null}function Je(){return Re()===null}let $=0;function ze(a){const u=Ce(Ue(a,y.value),0,T.value);(a!==V.value||u!==W.value)&&ne(u)}function he(){const a=Me();a!==null&&($=-1,ne(a))}function ie(){const a=Re();a!==null&&($=1,ne(a))}let U=!1;function mt(){(!U||!y.value)&&he()}function xt(){(!U||!y.value)&&ie()}let G=0;const De=D({});function fe(a,u=0){De.value=Object.assign({},ke.value,{transform:f.value?`translateY(${-a}px)`:`translateX(${-a}px)`,transitionDuration:`${u}ms`})}function ae(a=0){g.value?Pe(W.value,a):G!==0&&(!U&&a>0&&(U=!0),fe(G=0,a))}function Pe(a,u){const h=He(a);h!==G&&u>0&&(U=!0),G=He(W.value),fe(h,u)}function He(a){let u;return a>=T.value-1?u=Ge():u=_.value[a]||0,u}function Ge(){if(P.value==="auto"){const{value:a}=r,{[a]:u}=z.value,{value:h}=_,x=h[h.length-1];let w;if(x===void 0)w=u;else{const{value:m}=H;w=x+m[m.length-1][a]}return w-u}else{const{value:a}=_;return a[T.value-1]||0}}const se={currentIndexRef:V,to:ze,prev:mt,next:xt,isVertical:()=>f.value,isHorizontal:()=>!f.value,isPrev:gt,isNext:vt,isActive:_e,isPrevDisabled:Le,isNextDisabled:Je,getSlideIndex:K,getSlideStyle:Ct,addSlide:wt,removeSlide:bt,onCarouselItemClick:yt};po(se);function wt(a){a&&s.value.push(a)}function bt(a){if(!a)return;const u=K(a);u!==-1&&s.value.splice(u,1)}function K(a){return typeof a=="number"?a:a?s.value.indexOf(a):-1}function Ct(a){const u=K(a);if(u!==-1){const h=[Ye.value[u]],x=se.isPrev(u),w=se.isNext(u);return x&&h.push(i.prevSlideStyle||""),w&&h.push(i.nextSlideStyle||""),no(h)}}let Te=0,Qe=0,L=0,Ne=0,Ae=!1,We=!1;function yt(a,u){let h=!U&&!Ae&&!We;i.effect==="card"&&h&&!_e(a)&&(ze(a),h=!1),h||(u.preventDefault(),u.stopPropagation())}let ge=null;function ve(){ge&&(clearInterval(ge),ge=null)}function Z(){ve(),!i.autoplay||Be.value<2||(ge=window.setInterval(ie,i.interval))}function Oe(a){var u;if(je||!(!((u=n.value)===null||u===void 0)&&u.contains(io(a))))return;je=!0,Ae=!0,We=!1,Ne=Date.now(),ve(),a.type!=="touchstart"&&!a.target.isContentEditable&&a.preventDefault();const h=at(a)?a.touches[0]:a;f.value?Qe=h.clientY:Te=h.clientX,i.touchable&&(re("touchmove",document,pe),re("touchend",document,ee),re("touchcancel",document,ee)),i.draggable&&(re("mousemove",document,pe),re("mouseup",document,ee))}function pe(a){const{value:u}=f,{value:h}=r,x=at(a)?a.touches[0]:a,w=u?x.clientY-Qe:x.clientX-Te,m=z.value[h];L=Ce(w,-m,m),a.cancelable&&a.preventDefault(),g.value&&fe(G-L,0)}function ee(){const{value:a}=W;let u=a;if(!U&&L!==0&&g.value){const h=G-L,x=[..._.value.slice(0,T.value-1),Ge()];let w=null;for(let m=0;m<x.length;m++){const k=Math.abs(x[m]-h);if(w!==null&&w<k)break;w=k,u=m}}if(u===a){const h=Date.now()-Ne,{value:x}=r,w=z.value[x];L>w/2||L/h>.4?he():(L<-w/2||L/h<-.4)&&ie()}u!==null&&u!==a?(We=!0,ne(u),et(()=>{(!y.value||Ee.value!==V.value)&&ae(Se.value)})):ae(Se.value),Fe(),Z()}function Fe(){Ae&&(je=!1),Ae=!1,Te=0,Qe=0,L=0,Ne=0,le("touchmove",document,pe),le("touchend",document,ee),le("touchcancel",document,ee),le("mousemove",document,pe),le("mouseup",document,ee)}function It(){if(g.value&&U){const{value:a}=W;Pe(a,0)}else Z();g.value&&(De.value.transitionDuration="0ms"),U=!1}function kt(a){if(a.preventDefault(),U)return;let{deltaX:u,deltaY:h}=a;a.shiftKey&&!u&&(u=h);const x=-1,w=1,m=(u||h)>0?w:x;let k=0,S=0;f.value?S=m:k=m;const Q=10;(S*h>=Q||k*u>=Q)&&(m===w&&!Je()?ie():m===x&&!Le()&&he())}function St(){z.value=st(o.value,!0),Z()}function Bt(){M.value&&N.value++}function Et(){i.autoplay&&ve()}function Mt(){i.autoplay&&Z()}rt(()=>{Zt(Z),requestAnimationFrame(()=>Xe.value=!0)}),lt(()=>{Fe(),ve()}),eo(()=>{const{value:a}=s,{value:u}=c,h=new Map,x=m=>h.has(m)?h.get(m):-1;let w=!1;for(let m=0;m<a.length;m++){const k=u.findIndex(S=>S.el===a[m]);k!==m&&(w=!0),h.set(a[m],k)}w&&a.sort((m,k)=>x(m)-x(k))}),de(W,(a,u)=>{if(a===u){$=0;return}if(Z(),g.value){if(y.value){const{value:h}=T;$===-1&&u===1&&a===h-2?a=0:$===1&&u===h-2&&a===1&&(a=h-1)}Pe(a,Se.value)}else ae();$=0},{immediate:!0}),de([y,P],()=>void et(()=>{ne(W.value)})),de(_,()=>{g.value&&ae()},{deep:!0}),de(g,a=>{a?ae():(U=!1,fe(G=0))});const Rt=I(()=>({onTouchstartPassive:i.touchable?Oe:void 0,onMousedown:i.draggable?Oe:void 0,onWheel:i.mousewheel?kt:void 0})),zt=I(()=>Object.assign(Object.assign({},Ze(se,["to","prev","next","isPrevDisabled","isNextDisabled"])),{total:Be.value,currentIndex:V.value})),Dt=I(()=>({total:Be.value,currentIndex:V.value,to:se.to})),Pt={getCurrentIndex:()=>V.value,to:ze,prev:he,next:ie},Tt=ct("Carousel","-carousel",Io,to,i,e),qe=I(()=>{const{common:{cubicBezierEaseInOut:a},self:{dotSize:u,dotColor:h,dotColorActive:x,dotColorFocus:w,dotLineWidth:m,dotLineWidthActive:k,arrowColor:S}}=Tt.value;return{"--n-bezier":a,"--n-dot-color":h,"--n-dot-color-focus":w,"--n-dot-color-active":x,"--n-dot-size":u,"--n-dot-line-width":m,"--n-dot-line-width-active":k,"--n-arrow-color":S}}),te=t?oo("carousel",void 0,qe,i):void 0;return Object.assign(Object.assign({mergedClsPrefix:e,selfElRef:o,slidesElRef:n,slideVNodes:c,duplicatedable:y,userWantsControl:E,autoSlideSize:M,realIndex:W,slideStyles:Ye,translateStyle:De,slidesControlListeners:Rt,handleTransitionEnd:It,handleResize:St,handleSlideResize:Bt,handleMouseenter:Et,handleMouseleave:Mt,isActive:pt,arrowSlotProps:zt,dotSlotProps:Dt},Pt),{cssVars:t?void 0:qe,themeClass:te==null?void 0:te.themeClass,onRender:te==null?void 0:te.onRender})},render(){var i;const{mergedClsPrefix:e,showArrow:t,userWantsControl:o,slideStyles:n,dotType:s,dotPlacement:c,slidesControlListeners:f,transitionProps:r={},arrowSlotProps:l,dotSlotProps:g,$slots:{default:y,dots:E,arrow:P}}=this,Y=y&&Gt(y())||[];let M=Po(Y);return M.length||(M=Y.map(z=>B(ft,null,{default:()=>ut(z)}))),this.duplicatedable&&(M=ko(M)),this.slideVNodes.value=M,this.autoSlideSize&&(M=M.map(z=>B($e,{onResize:this.handleSlideResize},{default:()=>z}))),(i=this.onRender)===null||i===void 0||i.call(this),B("div",Object.assign({ref:"selfElRef",class:[this.themeClass,`${e}-carousel`,this.direction==="vertical"&&`${e}-carousel--vertical`,this.showArrow&&`${e}-carousel--show-arrow`,`${e}-carousel--${c}`,`${e}-carousel--${this.direction}`,`${e}-carousel--${this.effect}`,o&&`${e}-carousel--usercontrol`],style:this.cssVars},f,{onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave}),B($e,{onResize:this.handleResize},{default:()=>B("div",{ref:"slidesElRef",class:`${e}-carousel__slides`,role:"listbox",style:this.translateStyle,onTransitionend:this.handleTransitionEnd},o?M.map((z,N)=>B("div",{style:n[N],key:N},Ot(B(qt,Object.assign({},r),{default:()=>z}),[[Ft,this.isActive(N)]]))):M)}),this.showDots&&g.total>1&&Ke(E,g,()=>[B(Co,{key:s+c,total:g.total,currentIndex:g.currentIndex,dotType:s,trigger:this.trigger,keyboard:this.keyboard})]),t&&Ke(P,l,()=>[B(wo,null)]))}});function Po(i){return i.reduce((e,t)=>(yo(t)&&e.push(t),e),[])}const To={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Qo=ao('<path d="M86.76 255a9.89 9.89 0 0 0 4.87-1.29a9.82 9.82 0 0 0 3.65-13.43c-16.46-28.56-17.81-52.12-7.45-70c14.26-24.57 53.61-33.65 105.27-24.29a9.86 9.86 0 0 0 11.45-7.9a9.84 9.84 0 0 0-7.93-11.44c-29.19-5.28-56-5.18-77.39.3c-22.3 5.71-39 17.28-48.45 33.48c-14 24.19-12.7 54.73 7.42 89.62a9.85 9.85 0 0 0 8.56 4.95z" fill="currentColor"></path><path d="M361.61 143.73c32.24.42 52.61 9.31 62.79 26.86c14.21 24.48 2.52 62.81-31.27 102.52a9.82 9.82 0 0 0 7.51 16.18a9.88 9.88 0 0 0 7.52-3.46c19.12-22.47 32.35-45.54 38.25-66.71c6.14-22 4.43-42.21-5-58.38c-13.8-23.78-40.13-36.15-79.59-36.67h-.14a9.83 9.83 0 0 0-.12 19.66z" fill="currentColor"></path><path d="M326.47 414.89a9.88 9.88 0 0 0-13.5 3.35c-16.41 27.15-36.57 42.1-56.77 42.1c-28.49 0-56-29.31-73.73-78.42a9.87 9.87 0 0 0-12.59-5.92a9.83 9.83 0 0 0-6 12.58c10 27.77 23.47 50.75 39 66.46c16.11 16.34 34.55 25 53.32 25c27.38 0 53.54-18.33 73.65-51.61a9.81 9.81 0 0 0-3.38-13.5z" fill="currentColor"></path><path d="M431.7 338.54a32.14 32.14 0 0 0-29.9 44.33c-41.8 19.5-119.8 4.79-191.87-36.62c-32.91-18.9-62.16-41.86-84.6-66.39a9.9 9.9 0 0 0-13.91-.65a9.8 9.8 0 0 0-.65 13.9c23.79 26 54.68 50.28 89.33 70.18c40.28 23.13 82.27 38.63 121.43 44.81a225.54 225.54 0 0 0 35 2.91c23.12 0 43-4.3 58.51-12.79a32.2 32.2 0 1 0 16.7-59.68zm0 44.66a12.6 12.6 0 0 1-7.82-2.72a10 10 0 0 0-2.2-2.21a12.61 12.61 0 1 1 10 4.93z" fill="currentColor"></path><path d="M82.09 338.59c.57-21.26 12.41-47 33.68-73.16c23.19-28.45 56.69-56 94.34-77.65c33.25-19.1 65.2-31.9 98.07-38.91a9.83 9.83 0 1 0-4.12-19.22c-34.85 7.43-68.78 21-103.79 41.09C116.09 219.09 59.9 289.88 62.46 343.9a32.32 32.32 0 1 0 19.63-5.31zM80.3 383.2a12.5 12.5 0 1 1 12.59-12.5a12.56 12.56 0 0 1-12.59 12.5z" fill="currentColor"></path><path d="M256.2 96.32a32.23 32.23 0 0 0 26.53-13.81c17.89 11.69 34 35 45.81 66.12c13 34.39 19.84 75.38 19.84 118.54c0 37.18-5.19 72.35-15 103.6a9.72 9.72 0 0 0 .66 7.49a9.82 9.82 0 0 0 5.8 4.84a9.89 9.89 0 0 0 12.34-6.44c10.42-33.14 15.93-70.34 15.93-109.49c0-47.17-7.77-91.77-22.47-129c-14.41-36.48-34.13-62.4-57.14-75.16a32.3 32.3 0 1 0-32.3 33.31zm0-44.66a12.5 12.5 0 1 1-12.59 12.5a12.56 12.56 0 0 1 12.59-12.5z" fill="currentColor"></path><path d="M251 243.36a24.35 24.35 0 0 0 5.16 48.16a24.68 24.68 0 0 0 5.16-.55A24.36 24.36 0 1 0 251 243.36z" fill="currentColor"></path>',7),No=[Qo],Wo=q({name:"LogoElectron",render:function(e,t){return J(),F("svg",To,No)}});class Uo{constructor(){d(this,"_moveMethod","bounce");d(this,"linear",e=>{const{progress:t,startX:o,startY:n,endX:s,endY:c}=e;return{x:(s-o)*t+o,y:(c-n)*t+n}});d(this,"ease",e=>{const{progress:t,startX:o,startY:n,endX:s,endY:c}=e,f=.5*(1-Math.cos(t*Math.PI));return{x:(s-o)*f+o,y:(c-n)*f+n}});d(this,"easeOut",e=>{const{progress:t,startX:o,startY:n,endX:s,endY:c}=e,f=1-Math.pow(1-t,2);return{x:(s-o)*f+o,y:(c-n)*f+n}});d(this,"easeIn",e=>{const{progress:t,startX:o,startY:n,endX:s,endY:c}=e,f=Math.pow(t,2);return{x:(s-o)*f+o,y:(c-n)*f+n}});d(this,"bounce",e=>{const{startX:t,startY:o,endX:n,endY:s}=e;let c=e.progress;const f=7.5625,r=2.75;let l=0;return c<1/r?l=f*c*c:c<2/r?l=f*(c-=1.5/r)*c+.75:c<2.5/r?l=f*(c-=2.25/r)*c+.9375:l=f*(c-=2.625/r)*c+.984375,{x:(n-t)*l+t,y:(s-o)*l+o}})}get moveMethod(){return this._moveMethod}set moveMethod(e){e&&e in this&&(this._moveMethod=e)}move(e){const t=this[this.moveMethod];e.forEach(o=>{if(o.progress==0)o.currentX=o.startX,o.currentY=o.startY;else if(o.progress==1)o.currentX=o.endX,o.currentY=o.endY;else{const{x:n,y:s}=t(o);o.currentX=n,o.currentY=s}})}}class jo{constructor(e){d(this,"duration",.5);d(this,"blockMove",new Uo);d(this,"main");this.main=e}get export(){return{duration:this.duration,moveMethod:this.blockMove.moveMethod}}update(){if(!this.main.config.animation)return;const{name:e,duration:t}=this.main.config.animation;this.blockMove.moveMethod=e,this.duration=t||this.duration}calculateBlockPosition(){this.blockMove.move(this.main.throwManager.runningBlocks)}}class Vo{constructor(){d(this,"_sortType","sequence");d(this,"sort",(e,t)=>this[this.sortType](e,t));d(this,"sequence",(e,t)=>{const o=[];for(let n=0;n<t;n++)for(let s=0;s<e;s++)o.push({blockXIndex:s,blockYIndex:n});return o});d(this,"randomly",(e,t)=>{const o=this.sequence(e,t);for(let n=o.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[o[n],o[s]]=[o[s],o[n]]}return o});d(this,"tetris",(e,t)=>{const o=[],n=Array.from({length:e}).fill(t-1),s=e*t;for(let c=0;c<s;c++){const f=n.map(l=>l>=0);let r=Math.floor(Math.random()*e);for(;!f[r];)r=Math.floor(Math.random()*e);o.push({blockXIndex:r,blockYIndex:n[r]--})}return o})}get sortType(){return this._sortType}set sortType(e){e&&e in this&&(this._sortType=e)}}class Xo{constructor(e){d(this,"_positionMethod","bottom");d(this,"main");d(this,"center",()=>{const{canvasWidth:e,canvasHeight:t,blockWidth:o,blockHeight:n}=this.getDimensions();return{x:(e-o)/2,y:(t-n)/2}});d(this,"top",()=>{const{canvasWidth:e,blockWidth:t}=this.getDimensions();return{x:(e-t)/2,y:0}});d(this,"bottom",()=>{const{canvasWidth:e,canvasHeight:t,blockWidth:o,blockHeight:n}=this.getDimensions();return{x:(e-o)/2,y:t-n}});d(this,"left",()=>{const{canvasHeight:e,blockHeight:t}=this.getDimensions();return{x:0,y:(e-t)/2}});d(this,"right",()=>{const{canvasWidth:e,canvasHeight:t,blockWidth:o,blockHeight:n}=this.getDimensions();return{x:e-o,y:(t-n)/2}});this.main=e}get positionMethod(){return this._positionMethod}set positionMethod(e){e&&e in this&&(this._positionMethod=e)}generate(e){e.forEach(t=>{const o=this[this.positionMethod](t),n=Math.round(o.x),s=Math.round(o.y);t.startX=n,t.startY=s,t.currentX=n,t.currentY=s})}getDimensions(){const{canvasWidth:e,canvasHeight:t}=this.main.canvasProcessor.export,{width:o,height:n}=this.main.imageProcessor.export.blockSizeClamped;return{canvasWidth:e,canvasHeight:t,blockWidth:o,blockHeight:n}}}class Yo{constructor(e){d(this,"blockSort",new Vo);d(this,"blockStartPosition");d(this,"blockCoordinates",[]);d(this,"main");this.main=e,this.blockStartPosition=new Xo(e)}get origin(){const e=this.main.config.origin;if(e)return e;const{imageWidth:t,imageHeight:o}=this.main.imageProcessor.export,{canvasWidth:n,canvasHeight:s}=this.main.canvasProcessor.export;return{x:Math.round((n-t)/2),y:Math.round((s-o)/2)}}update(e){const{blockSortType:t,blockStartPositionGenerator:o}=this.main.config,n=t&&t!==this.blockSort.sortType,s=o&&o!==this.blockStartPosition.positionMethod;this.blockSort.sortType=t,this.blockStartPosition.positionMethod=o;const c=!!(e||n||s);return c&&this.regenerateBlockCoordinates(),c}regenerateBlockCoordinates(){const{totalXBlocks:e,totalYBlocks:t}=this.main.imageProcessor.export,o=this.blockSort.sort(e,t);this.initializeBlockPositionProperties(o),this.blockStartPosition.generate(o),this.blockCoordinates=o}initializeBlockPositionProperties(e){const t=this.origin,{width:o,height:n}=this.main.imageProcessor.export.blockSizeClamped;e.forEach(s=>{s.endX=Math.floor(s.blockXIndex*o+t.x),s.endY=Math.floor(s.blockYIndex*n+t.y),s.progress=0})}reset(){this.blockCoordinates.forEach(e=>{e.progress=0})}}class _o{constructor(e){d(this,"finishedBlocks",[]);d(this,"runningBlocks",[]);d(this,"autoThrowTimer");d(this,"autoThrowInterval",.1);d(this,"main");this.main=e}get throwCount(){return this.finishedBlocks.length+this.runningBlocks.length}get blockCoordinates(){return this.main.blockManager.blockCoordinates}get blockCount(){return this.blockCoordinates.length}get isFinished(){return this.finishedBlocks.length==this.blockCount}update(){const{autoThrowInterval:e,type:t}=this.main.config.throw||{};t=="manual"&&this.stopAutoThrow(),e&&e!=this.autoThrowInterval&&(this.autoThrowInterval=e,this.autoThrowTimer&&this.autoThrow())}updateBlockProgress(e){const{duration:t}=this.main.animationManager.export,o=e/(t*1e3);this.runningBlocks.forEach(n=>{if(typeof n.duration=="number"){const s=e/(n.duration*1e3);n.progress=Math.min(n.progress+s,1)}else n.progress=Math.min(n.progress+o,1)}),this.check()}throw(e=1){const t=this.blockCount-this.throwCount,o=Math.min(e,t);for(e;e<=o;e++){const n=this.blockCoordinates[this.throwCount];this.runningBlocks.push(n)}}autoThrow(){this.stopAutoThrow(),this.autoThrowTimer=setInterval(()=>this.throw(),this.autoThrowInterval*1e3)}stopAutoThrow(){clearInterval(this.autoThrowTimer),this.autoThrowTimer=void 0}check(){const e=this.runningBlocks.filter(t=>t.progress==1);e.forEach(t=>{t.currentX=t.endX,t.currentY=t.endY}),this.finishedBlocks.push(...e),this.runningBlocks=this.runningBlocks.filter(t=>t.progress!=1)}reset(){this.finishedBlocks=[],this.runningBlocks=[]}}class Lo{constructor(e){d(this,"id");d(this,"userCtx");d(this,"fixedCtx",document.createElement("canvas").getContext("2d"));d(this,"dynamicCtx",document.createElement("canvas").getContext("2d"));d(this,"canvasWidth",0);d(this,"canvasHeight",0);d(this,"main");d(this,"finishedBlockCount",0);this.main=e}get export(){return{canvasWidth:this.canvasWidth,canvasHeight:this.canvasHeight}}update(){var c;const{id:e}=this.main.config,t=e&&e!==this.id;if(t){this.id=e;const f=document.getElementById(e);f?this.userCtx=f.getContext("2d"):console.error("canvas not found")}const{width:o,height:n}=((c=this.userCtx)==null?void 0:c.canvas.getBoundingClientRect())||{},s=o!=this.canvasWidth||n!=this.canvasHeight;return s&&o&&n&&this.updateCanvasSize(o,n),!!(t&&s)}updateCanvasSize(e,t){this.userCtx&&(this.canvasWidth=e,this.canvasHeight=t,this.userCtx.canvas.width=e,this.userCtx.canvas.height=t,this.fixedCtx.canvas.width=e,this.fixedCtx.canvas.height=t,this.dynamicCtx.canvas.width=e,this.dynamicCtx.canvas.height=t)}renderCanvas(){if(!this.userCtx)return;const{runningBlocks:e,finishedBlocks:t}=this.main.throwManager;this.clearCtx(this.userCtx),this.clearCtx(this.dynamicCtx),this.finishedBlockCount!==t.length&&(this.clearCtx(this.fixedCtx),this.renderBlocks(this.fixedCtx,t),this.finishedBlockCount=t.length),this.renderBlocks(this.dynamicCtx,e),this.userCtx.drawImage(this.fixedCtx.canvas,0,0),this.userCtx.drawImage(this.dynamicCtx.canvas,0,0)}renderBlocks(e,t){t.forEach(o=>{const{blockXIndex:n,blockYIndex:s,currentX:c,currentY:f}=o,r=this.main.imageProcessor.getBlockPixelData(n,s);r&&e.putImageData(r,c,f)})}clearCtx(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)}reset(){this.clearCtx(this.fixedCtx),this.clearCtx(this.dynamicCtx)}}class Jo{constructor(e){d(this,"canvasId");d(this,"imageSource");d(this,"imageElement");d(this,"imageData");d(this,"_blockSize");d(this,"_renderSize");d(this,"blockRows",[]);d(this,"totalXBlocks",0);d(this,"totalYBlocks",0);d(this,"main");this.main=e}get blockSize(){if(this._blockSize)return this._blockSize;const{width:e=0,height:t=0}=this.imageData??{};return{width:Math.max(40,Math.round(e/10)),height:Math.max(40,Math.round(t/10))}}set blockSize(e){e?this._blockSize={...e}:this._blockSize=e}get blockSizeClamped(){const{imageData:e,blockSize:t}=this,o=(e==null?void 0:e.width)||0,n=(e==null?void 0:e.height)||0,s=Math.min(t.width,o),c=Math.min(t.height,n);return{width:s,height:c}}get renderSize(){return this._renderSize}set renderSize(e){e?this._renderSize={...e}:this._renderSize=e}get export(){const{imageData:e,blockSize:t,totalXBlocks:o,totalYBlocks:n,blockSizeClamped:s}=this,c=(e==null?void 0:e.width)||0,f=(e==null?void 0:e.height)||0;return{blockSize:t,blockSizeClamped:s,totalXBlocks:o,totalYBlocks:n,imageWidth:c,imageHeight:f}}jsonNotEqual(e,t){return e!==void 0&&JSON.stringify(e)!==JSON.stringify(t)}async update(e){const{id:t,url:o,blockSize:n,renderSize:s}=this.main.config,c=t&&t!==this.canvasId,f=o&&o!==this.imageSource,r=this.jsonNotEqual(n,this.blockSize),l=this.jsonNotEqual(s,this.renderSize);l&&(this.renderSize=s),c&&(this.canvasId=t),f?(this.imageSource=o,await this.loadImageData()):(l||c||e)&&this.getImageDataFromElement(),r&&(this.blockSize=n);const g=c||f||r||l;return g&&this.organizeBlockPixelData(),!!g}async loadImageData(){const e=this.imageSource;if(e instanceof URL)await this.getImageDataFromUrl(e.href);else if(e instanceof Blob){const t=URL.createObjectURL(e);await this.getImageDataFromUrl(t),URL.revokeObjectURL(t)}else await this.getImageDataFromUrl(e)}getImageDataFromUrl(e){return new Promise((t,o)=>{const n=new Image;n.src=e,n.crossOrigin="Anonymous",n.onload=()=>t(this.getImageDataFromElement()),n.onerror=s=>o(new Error(`加载图片失败: ${e}`)),this.imageElement=n})}getImageDataFromElement(){if(!this.imageElement)return;const e=this.imageElement,{width:t,height:o}=this.calculateFitSize(e.width,e.height),n=document.createElement("canvas");n.width=t,n.height=o;const s=n.getContext("2d");s.drawImage(e,0,0,t,o),this.imageData=s.getImageData(0,0,t,o)}calculateFitSize(e,t){if(this.renderSize)return this.renderSize;const{canvasWidth:o,canvasHeight:n}=this.main.canvasProcessor.export;if(o>e&&n>t)return{width:e,height:t};const s=o/e,c=n/t;return s>c?{width:n/t*e,height:n}:{width:o,height:o/e*t}}getBlockPixelData(e,t){var c,f;if(!Number.isInteger(e)||!Number.isInteger(t)){console.warn(`获取区块数据失败: 索引必须为整数，当前x: ${e}, y: ${t}`);return}const o=e>=0&&e<this.totalXBlocks,n=t>=0&&t<this.totalYBlocks;if(!o||!n){console.warn(`获取区块数据失败: 索引超出有效范围
      - 输入索引: x=${e}, y=${t}
      - 有效范围: x∈[0, ${this.totalXBlocks-1}], y∈[0, ${this.totalYBlocks-1}]`);return}return((f=(c=this.blockRows)==null?void 0:c[t])==null?void 0:f[e])??[]}organizeBlockPixelData(){const{imageData:e,blockSize:t}=this;if(e){this.blockRows=[],this.totalXBlocks=Math.ceil(e.width/t.width),this.totalYBlocks=Math.ceil(e.height/t.height);for(let o=0;o<this.totalYBlocks;o++){const n=[];for(let s=0;s<this.totalXBlocks;s++)n.push(this.getSingleBlockPixelData(s,o));this.blockRows.push(n)}}}getSingleBlockPixelData(e,t){const o=this.imageData,n=this.blockSize,s=e*n.width,c=Math.min(s+n.width,o.width),f=t*n.height,r=Math.min(f+n.height,o.height);let l=0;const g=new ImageData(c-s,r-f);for(let y=f;y<r;y++)for(let E=s;E<c;E++){const P=(y*o.width+E)*4,Y=o.data[P],M=o.data[P+1],z=o.data[P+2],N=o.data[P+3];g.data[l++]=Y,g.data[l++]=M,g.data[l++]=z,g.data[l++]=N}return g}}class Ho{constructor(){d(this,"status","static");d(this,"imageProcessor",new Jo(this));d(this,"canvasProcessor",new Lo(this));d(this,"blockManager",new Yo(this));d(this,"animationManager",new jo(this));d(this,"throwManager",new _o(this));d(this,"config",{});d(this,"lastTimestamp")}async start(e){var t;e&&(this.pause(),await this.updateConfig(e)),this.status="running",this.loopCheck(),((t=this.config.throw)==null?void 0:t.type)=="auto"&&this.throwManager.autoThrow()}pause(){this.status="static",this.throwManager.stopAutoThrow(),this.lastTimestamp=void 0}throwBlock(e){this.throwManager.throw(e),this.status!="running"&&(this.status="running",this.loopCheck())}reset(){this.blockManager.reset(),this.canvasProcessor.reset(),this.throwManager.reset()}loopCheck(e){var o;const t=()=>{requestAnimationFrame(n=>this.loopCheck(n))};if(this.status=="running"){if(!e)return t();if(this.lastTimestamp){const n=e-this.lastTimestamp;this.throwManager.updateBlockProgress(n),this.animationManager.calculateBlockPosition(),this.canvasProcessor.renderCanvas()}{if(this.throwManager.isFinished)return this.reset(),this.pause();if(((o=this.config.throw)==null?void 0:o.type)=="manual"&&this.throwManager.runningBlocks.length==0)return this.pause()}this.lastTimestamp=e,t()}}async updateConfig(e){if(!this.validationConfig(e))return Promise.reject("Invalid config");if(this.status=="running")return this.start(e),Promise.reject("可忽略");Object.assign(this.config,e);const t=this.canvasProcessor.update(),o=await this.imageProcessor.update(t),n=this.blockManager.update(o);this.animationManager.update(),this.throwManager.update(),(o||n)&&this.reset()}validationConfig(e){let t=!0;const{renderSize:o,blockSize:n}=e;return[o,n].forEach(s=>{s&&!this.validateMinIntegerValues(s)&&(t=!1)}),t}validateMinIntegerValues(e,t=1){if(!e||typeof e!="object"||Array.isArray(e))return console.warn("Input must be a non-array object"),!1;Number.isInteger(t)||(console.warn(`Minimum value must be an integer (got ${t}), fallback to 1`),t=1);let o=!0;for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],c=typeof s;if(c!=="number"){console.warn(`[${n}] Value must be a number, got ${c}`),o=!1;continue}Number.isInteger(s)?s<t&&(console.warn(`[${n}] Value must be ≥ ${t} (got ${s})`),o=!1):(console.warn(`[${n}] Value must be an integer (got ${s})`),o=!1)}return o}}const Go=["id"],Oo=q({__name:"index",props:{config:{}},setup(i,{expose:e}){const t=i,o=so(),n=new Ho;return de(()=>t.config,s=>{requestAnimationFrame(()=>n.start({id:o,...s}))},{immediate:!0,deep:!0}),e({imageScatterRecombine:n}),(s,c)=>(J(),F("canvas",{id:v(o)},null,8,Go))}}),Fo=dt(Oo,[["__scopeId","data-v-4ce811e9"]]),qo=["src"],$o=q({__name:"index",setup(i){const e=[new URL(""+new URL("200x200-DTKpAlTe.jpg",import.meta.url).href,import.meta.url).href,new URL("data:image/jpeg;base64,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",import.meta.url).href,new URL(""+new URL("350x300-C5B_vUvx.jpg",import.meta.url).href,import.meta.url).href,new URL(""+new URL("400x300-CewFpxfe.jpg",import.meta.url).href,import.meta.url).href],t=D(0),o=D(!1),n=D({renderSize:{width:200,height:300},blockSize:{width:50,height:50},blockSortType:"sequence",blockStartPositionGenerator:"bottom",animation:{name:"bounce",duration:.5},throw:{type:"auto",autoThrowInterval:.1}}),s=I(()=>{const f=e[t.value],r=o.value?n.value.renderSize:null;return{...n.value,url:f,renderSize:r}}),c=D();return(f,r)=>(J(),ro(Wt,{"default-size":.35,min:0},{left:A(()=>[p(v(fo),null,{default:A(()=>[p(v(X),{vertical:""},{default:A(()=>[p(v(O),{title:"图片 url",size:"small",hoverable:""},{default:A(()=>[p(v(Do),{"current-index":t.value,"onUpdate:currentIndex":r[0]||(r[0]=l=>t.value=l),"space-between":15,loop:!1,"slides-per-view":"auto","centered-slides":"",draggable:"","show-arrow":""},{default:A(()=>[(J(),F(ue,null,ce(e,l=>p(v(ft),{key:l,style:{width:"40%"}},{default:A(()=>[lo("img",{src:l},null,8,qo)]),_:2},1024)),64))]),_:1},8,["current-index"])]),_:1}),p(v(O),{title:"渲染大小 renderSize",size:"small",hoverable:""},{default:A(()=>[p(v(X),{vertical:""},{default:A(()=>[p(v(X),{align:"center"},{default:A(()=>[p(v(uo),{depth:"3"},{default:A(()=>[...r[13]||(r[13]=[R("自定义",-1)])]),_:1}),p(v(go),{value:o.value,"onUpdate:value":r[1]||(r[1]=l=>o.value=l)},null,8,["value"])]),_:1}),p(v(tt),null,{default:A(()=>[p(v(oe),{value:n.value.renderSize.width,"onUpdate:value":r[2]||(r[2]=l=>n.value.renderSize.width=l)},{prefix:A(()=>[...r[14]||(r[14]=[R(" width ",-1)])]),suffix:A(()=>[...r[15]||(r[15]=[R(" px ",-1)])]),_:1},8,["value"]),p(v(oe),{value:n.value.renderSize.height,"onUpdate:value":r[3]||(r[3]=l=>n.value.renderSize.height=l)},{prefix:A(()=>[...r[16]||(r[16]=[R(" height ",-1)])]),suffix:A(()=>[...r[17]||(r[17]=[R(" px ",-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),p(v(O),{title:"数据块大小 blockSize",size:"small",hoverable:""},{default:A(()=>[p(v(tt),null,{default:A(()=>[p(v(oe),{value:n.value.blockSize.width,"onUpdate:value":r[4]||(r[4]=l=>n.value.blockSize.width=l)},{prefix:A(()=>[...r[18]||(r[18]=[R(" width ",-1)])]),suffix:A(()=>[...r[19]||(r[19]=[R(" px ",-1)])]),_:1},8,["value"]),p(v(oe),{value:n.value.blockSize.height,"onUpdate:value":r[5]||(r[5]=l=>n.value.blockSize.height=l)},{prefix:A(()=>[...r[20]||(r[20]=[R(" height ",-1)])]),suffix:A(()=>[...r[21]||(r[21]=[R(" px ",-1)])]),_:1},8,["value"])]),_:1})]),_:1}),p(v(O),{title:"排序方式 blockSortType",size:"small",hoverable:""},{default:A(()=>[p(v(we),{value:n.value.blockSortType,"onUpdate:value":r[6]||(r[6]=l=>n.value.blockSortType=l)},{default:A(()=>[p(v(X),null,{default:A(()=>[(J(),F(ue,null,ce(["sequence","randomly","tetris"],l=>p(v(be),{key:l,value:l},{default:A(()=>[R(xe(l),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["value"])]),_:1}),p(v(O),{title:"起始位置 blockStartPositionGenerator",size:"small",hoverable:""},{default:A(()=>[p(v(we),{value:n.value.blockStartPositionGenerator,"onUpdate:value":r[7]||(r[7]=l=>n.value.blockStartPositionGenerator=l)},{default:A(()=>[p(v(X),null,{default:A(()=>[(J(),F(ue,null,ce(["center","top","bottom","left","right"],l=>p(v(be),{key:l,value:l},{default:A(()=>[R(xe(l),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["value"])]),_:1}),p(v(O),{title:"动画 animation",size:"small",hoverable:""},{default:A(()=>[p(v(X),{align:"center"},{default:A(()=>[p(v(we),{value:n.value.animation.name,"onUpdate:value":r[8]||(r[8]=l=>n.value.animation.name=l)},{default:A(()=>[p(v(X),null,{default:A(()=>[(J(),F(ue,null,ce(["linear","ease","easeOut","easeIn","bounce"],l=>p(v(be),{key:l,value:l},{default:A(()=>[R(xe(l),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["value"]),p(v(oe),{value:n.value.animation.duration,"onUpdate:value":r[9]||(r[9]=l=>n.value.animation.duration=l),step:.1},{prefix:A(()=>[...r[22]||(r[22]=[R(" duration ",-1)])]),suffix:A(()=>[...r[23]||(r[23]=[R(" s ",-1)])]),_:1},8,["value"])]),_:1})]),_:1}),p(v(O),{title:"抛出 throw",size:"small",hoverable:""},{default:A(()=>[p(v(X),{vertical:""},{default:A(()=>[p(v(X),{align:"center"},{default:A(()=>{var l;return[p(v(we),{value:n.value.throw.type,"onUpdate:value":r[10]||(r[10]=g=>n.value.throw.type=g)},{default:A(()=>[p(v(X),null,{default:A(()=>[(J(),F(ue,null,ce(["auto","manual"],g=>p(v(be),{key:g,value:g},{default:A(()=>[R(xe(g),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["value"]),p(v(co),{type:"success",secondary:"",size:"small",disabled:((l=n.value.throw)==null?void 0:l.type)!="manual",onClick:r[11]||(r[11]=g=>{var y;return(y=c.value)==null?void 0:y.imageScatterRecombine.throwBlock()})},{icon:A(()=>[p(v(ho),{component:v(Wo)},null,8,["component"])]),default:A(()=>[r[24]||(r[24]=R(" 抛出 ",-1))]),_:1},8,["disabled"])]}),_:1}),p(v(oe),{value:n.value.throw.autoThrowInterval,"onUpdate:value":r[12]||(r[12]=l=>n.value.throw.autoThrowInterval=l),step:.1},{prefix:A(()=>[...r[25]||(r[25]=[R(" autoThrowInterval ",-1)])]),suffix:A(()=>[...r[26]||(r[26]=[R(" s ",-1)])]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),right:A(()=>[p(Fo,{ref_key:"coreRef",ref:c,config:s.value},null,8,["config"])]),_:1}))}}),hn=dt($o,[["__scopeId","data-v-6b6b3a3d"]]);export{hn as default};
