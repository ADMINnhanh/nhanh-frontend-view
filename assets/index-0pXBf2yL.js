import{cS as y,d as _,aP as g,cd as w,aI as L,aN as x,o as E,c as C,u as P,_ as D}from"./index-C7aMxuIB.js";import{D as u,_ as r}from"./index-CEvdaSpc.js";function T(){const h=new URL(""+new URL("index-BqTUXMPq.json",import.meta.url).href,import.meta.url);return y(h.href).then(d=>{const l=JSON.parse(d),a=[];return l.features.forEach(i=>{const{properties:t,geometry:s}=i,o={properties:t,geometry:[]};a.push(o),t.center=t.center&&u.LngLatToPlane(...t.center),t.centroid=t.centroid&&u.LngLatToPlane(...t.centroid),s.type=="MultiPolygon"?s.coordinates.forEach(n=>{n.forEach(c=>{o.geometry.push(c.map(m=>u.LngLatToPlane(...m)))})}):s.coordinates.forEach(n=>o.geometry.push(n.map(c=>u.LngLatToPlane(...c))))}),a})}const k=["id"],O=_({__name:"index",setup(h,{expose:d}){const l=g();let a=w();const i=new r.Layer("中国地图"),t=[];return T().then(s=>{s.forEach(o=>{const n=new r.OverlayGroup(o.properties.name),c=()=>{window.$message.success(`这里是 ${o.properties.name}`)},m=()=>{var e;(e=a.value)==null||e.setFitView(n)};o.geometry.forEach(e=>{const p=new r.Polygon({isShowHandlePoint:!1,value:e});n.addOverlays(p)});const f=o.properties.center;if(f){const e=new r.Point({value:f});e.show.setScales([.9,1e3]);const p=new r.Text({text:o.properties.name,value:f,extraOffset:{x:0,y:20}});p.show.setScales([1.1,1e3]),n.addOverlays([e,p])}const v=Array.from(n.overlays.values());n.overlays.forEach(e=>{e.sharedHoverOverlays=v,e.addEventListener("click",c),e.addEventListener("dblclick",m)}),t.push(n)}),i.addGroup(t)}),L(()=>{a.value=new r(l,{axisConfig:{y:-1,count:2e6},defaultCenter:{bottom:0}}),a.value.setDefaultCenter({left:-(580-a.value.rect.value.width/2)}),a.value.setTheme(x.value.theme),a.value.addLayer(i)}),d({myCanvas:a}),(s,o)=>(E(),C("canvas",{id:P(l),class:"my-canvas"},null,8,k))}}),b=D(O,[["__scopeId","data-v-a0c25272"]]);export{b as default};
