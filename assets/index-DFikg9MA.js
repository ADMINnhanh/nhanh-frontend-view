import{cs as _,d as w,b2 as g,bM as L,F as x,bo as f,p as E,o as C,c as P,u as T,_ as D}from"./index-Do2VL4Ea.js";import{D as u,_ as r}from"./index-BYsnuTmQ.js";function b(){const v=new URL(""+new URL("index-BqTUXMPq.json",import.meta.url).href,import.meta.url);return _(v.href).then(d=>{const l=JSON.parse(d),a=[];return l.features.forEach(i=>{const{properties:t,geometry:n}=i,e={properties:t,geometry:[]};a.push(e),t.center=t.center&&u.LngLatToPlane(...t.center),t.centroid=t.centroid&&u.LngLatToPlane(...t.centroid),n.type=="MultiPolygon"?n.coordinates.forEach(o=>{o.forEach(c=>{e.geometry.push(c.map(m=>u.LngLatToPlane(...m)))})}):n.coordinates.forEach(o=>e.geometry.push(o.map(c=>u.LngLatToPlane(...c))))}),a})}const k=["id"],O=w({__name:"index",setup(v,{expose:d}){const l=g();let a=L();const i=new r.Layer("中国地图"),t=[];return b().then(n=>{n.forEach(e=>{const o=new r.OverlayGroup(e.properties.name),c=()=>{window.$message.success(`这里是 ${e.properties.name}`)},m=()=>{window.$message.success(`这里是 ${e.properties.name}`)};e.geometry.forEach(s=>{const p=new r.Polygon({isShowHandlePoint:!1,value:s});o.addOverlays(p)});const h=e.properties.center;if(h){const s=new r.Point({value:h});s.show.setScales([.9,1e3]);const p=new r.Text({text:e.properties.name,value:h,extraOffset:{x:0,y:20}});p.show.setScales([1.1,1e3]),o.addOverlays([s,p])}const y=Array.from(o.overlays.values());o.overlays.forEach(s=>{s.sharedHoverOverlays=y,s.addEventListener("click",c),s.addEventListener("dblclick",m)}),t.push(o)}),i.addGroup(t)}),x(()=>f.value.theme,n=>{var e;return(e=a.value)==null?void 0:e.setTheme(n)}),E(()=>{a.value=new r(l,{axisConfig:{y:-1,count:2e6},defaultCenter:{bottom:0}}),a.value.setDefaultCenter({left:-(580-a.value.rect.value.width/2)}),a.value.setTheme(f.value.theme),a.value.addLayer(i)}),d({myCanvas:a}),(n,e)=>(C(),P("canvas",{id:T(l),class:"my-canvas"},null,8,k))}}),M=D(O,[["__scopeId","data-v-7421dc68"]]);export{M as default};
