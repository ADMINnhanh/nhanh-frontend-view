var it=Object.defineProperty;var ot=(l,o,t)=>o in l?it(l,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[o]=t;var f=(l,o,t)=>ot(l,typeof o!="symbol"?o+"":o,t);import{p as M,x as j,s as W,v as V,q as F,d as H,y as U,D as rt,L as at,M as ct,h as P,ba as lt,z as q,bb as dt,m as _,N as ht,P as ut,bc as gt,o as z,c as O,aS as S,bd as ft,be as mt,j as tt,bf as yt,aW as pt,b9 as xt,_ as et,aT as Ct,k as wt,I as vt,bg as E,aZ as bt,a as A,w as G,u as v,e as Q,B as K,bh as T,aV as $,aU as It,t as At}from"./index-ll9fNxNT.js";import{A as kt}from"./Add-BdF9MQy1.js";import{N as Bt}from"./a-cRpnocOh.js";const b="0!important",st="-1px!important";function R(l){return V(`${l}-type`,[W("& +",[M("button",{},[V(`${l}-type`,[F("border",{borderLeftWidth:b}),F("state-border",{left:st})])])])])}function L(l){return V(`${l}-type`,[W("& +",[M("button",[V(`${l}-type`,[F("border",{borderTopWidth:b}),F("state-border",{top:st})])])])])}const Vt=M("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[j("vertical",{flexDirection:"row"},[j("rtl",[M("button",[W("&:first-child:not(:last-child)",`
 margin-right: ${b};
 border-top-right-radius: ${b};
 border-bottom-right-radius: ${b};
 `),W("&:last-child:not(:first-child)",`
 margin-left: ${b};
 border-top-left-radius: ${b};
 border-bottom-left-radius: ${b};
 `),W("&:not(:first-child):not(:last-child)",`
 margin-left: ${b};
 margin-right: ${b};
 border-radius: ${b};
 `),R("default"),V("ghost",[R("primary"),R("info"),R("success"),R("warning"),R("error")])])])]),V("vertical",{flexDirection:"column"},[M("button",[W("&:first-child:not(:last-child)",`
 margin-bottom: ${b};
 margin-left: ${b};
 margin-right: ${b};
 border-bottom-left-radius: ${b};
 border-bottom-right-radius: ${b};
 `),W("&:last-child:not(:first-child)",`
 margin-top: ${b};
 margin-left: ${b};
 margin-right: ${b};
 border-top-left-radius: ${b};
 border-top-right-radius: ${b};
 `),W("&:not(:first-child):not(:last-child)",`
 margin: ${b};
 border-radius: ${b};
 `),L("default"),V("ghost",[L("primary"),L("info"),L("success"),L("warning"),L("error")])])])]),St={size:{type:String,default:void 0},vertical:Boolean},Gt=H({name:"ButtonGroup",props:St,setup(l){const{mergedClsPrefixRef:o,mergedRtlRef:t}=U(l);return rt("-button-group",Vt,o),at(lt,l),{rtlEnabled:ct("ButtonGroup",t,o),mergedClsPrefix:o}},render(){const{mergedClsPrefix:l}=this;return P("div",{class:[`${l}-button-group`,this.rtlEnabled&&`${l}-button-group--rtl`,this.vertical&&`${l}-button-group--vertical`],role:"group"},this.$slots)}}),Wt=M("text",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[V("strong",`
 font-weight: var(--n-font-weight-strong);
 `),V("italic",{fontStyle:"italic"}),V("underline",{textDecoration:"underline"}),V("code",`
 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 `)]),Yt=Object.assign(Object.assign({},q.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),Zt=H({name:"Text",props:Yt,setup(l){const{mergedClsPrefixRef:o,inlineThemeDisabled:t}=U(l),e=q("Typography","-text",Wt,dt,l,o),n=_(()=>{const{depth:i,type:r}=l,c=r==="default"?i===void 0?"textColor":`textColor${i}Depth`:ht("textColor",r),{common:{fontWeightStrong:a,fontFamilyMono:m,cubicBezierEaseInOut:y},self:{codeTextColor:d,codeBorderRadius:p,codeColor:C,codeBorder:h,[c]:u}}=e.value;return{"--n-bezier":y,"--n-text-color":u,"--n-font-weight-strong":a,"--n-font-famliy-mono":m,"--n-code-border-radius":p,"--n-code-text-color":d,"--n-code-color":C,"--n-code-border":h}}),s=t?ut("text",_(()=>`${l.type[0]}${l.depth||""}`),n,l):void 0;return{mergedClsPrefix:o,compitableTag:gt(l,["as","tag"]),cssVars:t?void 0:n,themeClass:s==null?void 0:s.themeClass,onRender:s==null?void 0:s.onRender}},render(){var l,o,t;const{mergedClsPrefix:e}=this;(l=this.onRender)===null||l===void 0||l.call(this);const n=[`${e}-text`,this.themeClass,{[`${e}-text--code`]:this.code,[`${e}-text--delete`]:this.delete,[`${e}-text--strong`]:this.strong,[`${e}-text--italic`]:this.italic,[`${e}-text--underline`]:this.underline}],s=(t=(o=this.$slots).default)===null||t===void 0?void 0:t.call(o);return this.code?P("code",{class:n,style:this.cssVars},this.delete?P("del",null,s):s):this.delete?P("del",{class:n,style:this.cssVars},s):P(this.compitableTag||"span",{class:n,style:this.cssVars},s)}}),Rt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Lt=S("rect",{x:"48",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Mt=S("rect",{x:"288",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ht=S("rect",{x:"48",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Pt=S("rect",{x:"288",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Xt=[Lt,Mt,Ht,Pt],Kt=H({name:"GridOutline",render:function(o,t){return z(),O("svg",Rt,Xt)}}),Tt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},$t=S("path",{d:"M261.56 101.28a8 8 0 0 0-11.06 0L66.4 277.15a8 8 0 0 0-2.47 5.79L63.9 448a32 32 0 0 0 32 32H192a16 16 0 0 0 16-16V328a8 8 0 0 1 8-8h80a8 8 0 0 1 8 8v136a16 16 0 0 0 16 16h96.06a32 32 0 0 0 32-32V282.94a8 8 0 0 0-2.47-5.79z",fill:"currentColor"},null,-1),Ft=S("path",{d:"M490.91 244.15l-74.8-71.56V64a16 16 0 0 0-16-16h-48a16 16 0 0 0-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0 0 43 267.56L250.5 69.28a8 8 0 0 1 11.06 0l207.52 198.28a16 16 0 0 0 22.59-.44c6.14-6.36 5.63-16.86-.76-22.97z",fill:"currentColor"},null,-1),zt=[$t,Ft],Ot=H({name:"Home",render:function(o,t){return z(),O("svg",Tt,zt)}}),Nt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Dt=S("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),Et=[Dt],_t=H({name:"Remove",render:function(o,t){return z(),O("svg",Nt,Et)}});function jt(l){return ft()?(mt(l),!0):!1}const Qt=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Jt=Qt?window:void 0;function Ut(l,o={}){const{immediate:t=!0,fpsLimit:e=void 0,window:n=Jt}=o,s=tt(!1),i=e?1e3/e:null;let r=0,c=null;function a(d){if(!s.value||!n)return;r||(r=d);const p=d-r;if(i&&p<i){c=n.requestAnimationFrame(a);return}r=d,l({delta:p,timestamp:d}),c=n.requestAnimationFrame(a)}function m(){!s.value&&n&&(s.value=!0,r=0,c=n.requestAnimationFrame(a))}function y(){s.value=!1,c!=null&&n&&(n.cancelAnimationFrame(c),c=null)}return t&&m(),jt(y),{isActive:yt(s),pause:y,resume:m}}function qt(l){var o;const t=tt(0);if(typeof performance>"u")return t;const e=(o=void 0)!=null?o:10;let n=performance.now(),s=0;return Ut(()=>{if(s+=1,s>=e){const i=performance.now(),r=i-n;t.value=Math.round(1e3/(r/s)),n=i,s=0}}),t}class te{constructor(o){f(this,"canvas");f(this,"ctx");f(this,"rect");f(this,"offset",{x:0,y:0});f(this,"center",{x:0,y:0});f(this,"defaultCenter",{top:void 0,bottom:void 0,left:void 0,right:void 0});f(this,"scale",1);f(this,"percentage",1);f(this,"gridConfig",{count:2,min:75,max:150,size:75});f(this,"cycle",10);f(this,"delta",.02);f(this,"redrawInNextRenderFrame",!1);f(this,"isAuto",!1);f(this,"drawGrid");f(this,"drawPoint");f(this,"drawLine");f(this,"drawPolygon");const t=document.getElementById(o);if(t instanceof HTMLCanvasElement)if(t.getContext){this.canvas=t,this.ctx=t.getContext("2d"),this.rect=t.getBoundingClientRect();const{clientWidth:e,clientHeight:n}=t;[t.width,t.height]=[e,n]}else console.error("canvas-unsupported code here");else console.error("canvas is not HTMLCanvasElement")}updateCenter(){const{canvas:o,rect:t,offset:e,defaultCenter:n}=this;if(!o)return console.error("canvas is not HTMLCanvasElement");const{width:s,height:i}=t,{top:r,bottom:c,left:a,right:m}=n,y={vertical:(h,u)=>{var g;if(h==1/0||h==-1/0)return;if(typeof h=="number")return h;if(["top","left"].includes(h))return 0;if(["bottom","right"].includes(h))return u;if(["middle","center"].includes(h))return u/2;const x=(g=h.match(/^(\d+)%*$/))==null?void 0:g[1];return(x?u*Number(x)/100:Number(h))||void 0},reverse:(h,u)=>{if(h==1/0||h==-1/0)return;if(typeof h=="number")return u-h;const x=y.vertical(h,u);return x?u-x:void 0}},d=(h,u,x)=>{if(h!==void 0){const g=y.vertical(h,x);if(g!==void 0)return g}if(u!==void 0){const g=y.reverse(u,x);if(g!==void 0)return g}return x/2},p=d(r,c,i),C=d(a,m,s);this.center={x:Math.floor(C+e.x),y:Math.floor(p+e.y)}}updateSize(){const{scale:o,cycle:t,delta:e,gridConfig:n}=this;let s=Math.abs(o-1)%(t*e)/e;s=Math.round(o<1?t-s:s),n.size=s/t*(n.max-n.min)+n.min,this.percentage=this.getAxisPointByValue(n.count,0).x/n.min}setScale(o,t){const{canvas:e,rect:n}=this;if(!e||!n)return console.error("canvas is not HTMLCanvasElement");let s,i;o==="center"?(s=n.left+n.width/2,i=n.top+n.height/2):[s,i]=[o.clientX,o.clientY];const r=this.getMousePositionOnAxis({clientX:s,clientY:i}),c=this.getAxisValueByPoint(r.x,r.y);this.scale+=t,this.updateSize();const a=this.getAxisPointByValue(c.xV,c.yV);this.offset.x-=a.x-r.x,this.offset.y-=a.y-r.y}getGridCount(){const{gridConfig:o,scale:t,cycle:e,delta:n}=this;let s=o.count;return t>1?s/=Math.pow(2,Math.floor((t-1)/(e*n))):t<1&&(s*=Math.pow(2,Math.ceil(Math.abs(t-1)/(e*n)))),s}getMousePositionOnAxis(o){const{canvas:t,center:e,rect:n}=this;if(!t)return console.error("canvas is not HTMLCanvasElement");const{clientX:s,clientY:i}=o,{left:r,top:c}=n,a=s-r-e.x,m=i-c-e.y;return{x:a,y:m}}getAxisValueByPoint(o,t){const{gridConfig:e}=this,n=this.getGridCount(),s=o/e.size*n,i=t/e.size*n;return{xV:s,yV:i}}getAxisPointByValue(o,t){const{gridConfig:e}=this,n=this.getGridCount(),s=o/n*e.size,i=t/n*e.size;return{x:s,y:i}}getMaxMinValue(o){o=o||this.rect;const{x:t,y:e}=this.getMousePositionOnAxis({clientX:o.left,clientY:o.top}),{xV:n,yV:s}=this.getAxisValueByPoint(t,e),{x:i,y:r}=this.getMousePositionOnAxis({clientX:o.right,clientY:o.bottom}),{xV:c,yV:a}=this.getAxisValueByPoint(i,r);return{minXV:n,minYV:s,maxXV:c,maxYV:a}}destroy(){this.canvas=void 0,this.ctx=void 0}}let ee=class extends te{constructor(t){super(t);f(this,"theme","light");f(this,"style",{light:{background:"#fff",text:{color:"#222",secondary:"#909399",size:12,family:"微软雅黑",bold:!0}},dark:{background:"#000",text:{color:"#aeaeae",secondary:"#8c8c8c",size:12,family:"微软雅黑",bold:!0}}});this.initStyle(),this.clearScreen()}initStyle(){const{canvas:t,ctx:e,theme:n}=this;if(!t||!e)return console.error("ctx is not CanvasRenderingContext2D");t.classList.add("_nhanh_canvas");const s=this.style[n];e.font=`${s.text.bold?"bold":""} ${s.text.size}px ${s.text.family}`}clearScreen(){const{ctx:t,theme:e,rect:n}=this;if(!t)return console.error("ctx is not CanvasRenderingContext2D");const{width:s,height:i}=n;t.fillStyle=this.style[e].background,t.fillRect(0,0,s,i)}addStyle(t){this.style={...this.style,...t},this.initStyle()}};class se extends ee{constructor(t){super(t);f(this,"resizeObserver");f(this,"startCreationOnGrid");f(this,"startCreationBelowGrid");f(this,"rely",[this.center.x,this.center.y,this.scale].join());f(this,"isRecalculate",!1);f(this,"measureRedrawPerformance",pe(()=>this.redraw(),[[1,"#F56C6C"],[.5,"#E6A23C"],[0,"#67C23A"]]));this.canvas&&(this.resizeObserver=new ResizeObserver(pt(()=>{this.rect=this.canvas.getBoundingClientRect();const{clientWidth:e,clientHeight:n}=this.canvas;[this.canvas.width,this.canvas.height]=[e,n],this.redrawOnce()},100)),this.resizeObserver.observe(this.canvas))}addFunctionsToZIndexs(t){const e={};return t.forEach(([n,s])=>{e[n]=[...e[n]||[],s]}),e}redraw(){var a,m,y;const{canvas:t,center:e,scale:n,rect:s}=this;if(!t||!s)return console.error("canvas is not HTMLCanvasElement");this.updateCenter();const i=[e.x,e.y,n].join();this.isRecalculate=this.rely!==i,this.rely=i,this.clearScreen(),(a=this.startCreationBelowGrid)==null||a.call(this),(m=this.drawGrid)==null||m.drawAxisAndGrid();const r=this.startCreationOnGrid,c=this.addFunctionsToZIndexs(this.drawPoint.fetchDrawFunctions().concat(this.drawLine.fetchDrawFunctions()).concat(Array.isArray(r)?r:[]));Object.keys(c).sort().forEach(d=>{c[d].forEach(C=>C())}),typeof this.startCreationOnGrid=="function"&&((y=this.startCreationOnGrid)==null||y.call(this)),this.isRecalculate=!1}redrawOnce(t){this.isAuto&&!t&&(this.isAuto=!1),this.redrawInNextRenderFrame||(this.redrawInNextRenderFrame=!0,requestAnimationFrame(()=>{this.redrawInNextRenderFrame=!1,this.measureRedrawPerformance()}))}drawText(t,e,n,s){const{ctx:i,theme:r}=this;if(!i)return console.error("ctx is not CanvasRenderingContext2D");const c=this.style[r],{background:a}=c;i.font=`${c.text.bold?"bold":""} ${c.text.size}px ${c.text.family}`,i.strokeStyle=a,i.strokeText(t,e,n),i.fillStyle=c.text[s?"secondary":"color"],i.fillText(t,e,n)}toggleGrid(t){const e=(()=>{if(typeof t=="object"){const{grid:n={main:!0,secondary:!0},axis:s=!0,axisText:i=!0}=t;return{grid:n,axis:s,axisText:i}}return typeof t=="boolean"?{grid:{main:t,secondary:t},axis:t,axisText:t}:(t=!(this.drawGrid.show.axis||this.drawGrid.show.axisText||this.drawGrid.show.grid.main||this.drawGrid.show.grid.secondary),{grid:{main:t,secondary:t},axis:t,axisText:t})})();this.drawGrid.show=e,this.redrawOnce()}destroy(){var t;super.destroy(),(t=this.resizeObserver)==null||t.disconnect()}}let ne=class extends se{constructor(t){super(t);f(this,"mouseInCanvas",!1);f(this,"mouseIsDown",!1);f(this,"mouseLastPosition",{x:0,y:0});f(this,"unBind");f(this,"lastPressedKey",{key:"",keyupTime:0,dblclick:!1});this.initEvent()}initEvent(){const{canvas:t}=this;if(!t)return console.error("canvas is not HTMLCanvasElement");const e=[{type:"click",handler:this.click.bind(this)},{type:"contextmenu",handler:this.contextmenu.bind(this)},{type:"mouseenter",handler:this.mouseenter.bind(this)},{type:"mouseleave",handler:this.mouseleave.bind(this)},{type:"keydown",handler:this.keydown.bind(this),target:window},{type:"keyup",handler:this.keyup.bind(this),target:window},{type:"wheel",handler:this.wheel.bind(this)},{type:"mousedown",handler:this.mousedown.bind(this)},{type:"mouseup",handler:this.mouseup.bind(this),target:window},{type:"mousemove",handler:this.mousemove.bind(this),target:window}];e.forEach(({type:n,handler:s,target:i=t})=>{i.addEventListener(n,s)}),this.unBind=()=>{e.forEach(({type:n,handler:s,target:i=t})=>{i.removeEventListener(n,s)})}}click(t){console.log("mouseclick")}contextmenu(t){t.preventDefault(),console.log("mousecontextmenu")}mouseenter(t){this.mouseInCanvas=!0}mouseleave(t){this.mouseInCanvas=!1}getStep(t){const{lastPressedKey:e}=this;return e.dblclick?4:e.key===t&&Date.now()-e.keyupTime<300?(e.dblclick=!0,4):1}keydown(t){const{mouseInCanvas:e,offset:n,delta:s}=this;if(e){const i=t.key,r=this.getStep(i);switch(i){case"ArrowUp":n.y-=r;break;case"ArrowDown":n.y+=r;break;case"ArrowLeft":n.x-=r;break;case"ArrowRight":n.x+=r;break;case"+":this.setScale("center",s);break;case"-":this.setScale("center",-s);break}["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","+","-"].includes(i)&&this.redrawOnce()}}keyup(t){const{mouseInCanvas:e,lastPressedKey:n}=this;if(e){const s=t.key;n.key=s,n.keyupTime=Date.now(),n.dblclick=!1}}wheel(t){const{delta:e}=this;this.setScale(t,t.deltaY<0?e:-e),this.redrawOnce()}mousedown(t){this.mouseIsDown=!0;const{clientX:e,clientY:n}=t;this.mouseLastPosition={x:e,y:n}}mouseup(t){this.mouseIsDown=!1}mousemove(t){const{mouseIsDown:e,offset:n,mouseLastPosition:s}=this;if(e){const{clientX:i,clientY:r}=t;n.x+=i-s.x,n.y+=r-s.y,this.redrawOnce(),this.mouseLastPosition={x:i,y:r}}}destroy(){var t;super.destroy(),(t=this.unBind)==null||t.call(this)}};class ie extends ne{reset(){this.isAuto=!0;const o=300,t={offset:{...this.offset},scale:this.scale-1};xt(e=>{!this.isAuto||!this.canvas||(e===1?(this.offset={x:0,y:0},this.scale=1,this.updateSize(),this.isAuto=!1):e>0&&(e=1-e,this.offset={x:t.offset.x*e,y:t.offset.y*e},this.scale=1+t.scale*e,this.updateSize()),this.redrawOnce(!0))},o)}zoom(o){const{canvas:t,rect:e}=this;if(!t||!e)return console.error("canvas is not HTMLCanvasElement");this.setScale("center",o)}zoomIn(){this.zoom(this.delta)}zoomOut(){this.zoom(-this.delta)}setTheme(o){o in this.style&&(this.theme=o),this.redrawOnce()}}let oe=class{constructor(){f(this,"style",{light:{axis:"#222",grid:"#666",innerGrid:"#e5e5e5"},dark:{axis:"#aeaeae",grid:"#666",innerGrid:"#272727"}})}addStyle(o){this.style={...this.style,...o}}};class re extends oe{constructor(t){super();f(this,"canvas");f(this,"show",{grid:{main:!0,secondary:!0},axis:!0,axisText:!0});this.canvas=t}drawAxisAndGrid(){this.canvas&&((this.show.grid.main||this.show.grid.secondary)&&this.drawGrid(),this.show.axis&&this.drawAxis(),this.show.axisText&&this.drawAxisText())}drawGrid(){const t=this.canvas,{ctx:e,rect:n,center:s,gridConfig:i,theme:r}=t;if(!e)return console.error("ctx is not CanvasRenderingContext2D");const{width:c,height:a}=n,m=this.style[r]||this.style.light,y=i.size,d=y/5,p=(u,x,g)=>{e.lineWidth=1,e.strokeStyle=g,e.beginPath(),e.moveTo(...u),e.lineTo(...x),e.stroke()},C=(u,x)=>{const g=s.x%u>0?s.x%u:u+s.x%u;for(let w=0;w*u+g<=c;w++)p([w*u+g,0],[w*u+g,a],x)},h=(u,x)=>{const g=s.y%u>0?s.y%u:u+s.y%u;for(let w=0;w*u+g<=a;w++)p([0,w*u+g],[c,w*u+g],x)};this.show.grid.secondary&&(C(d,m.innerGrid),h(d,m.innerGrid)),this.show.grid.main&&(C(y,m.grid),h(y,m.grid))}drawAxis(){const t=this.canvas,{ctx:e,rect:n,center:s,theme:i}=t;if(!e)return console.error("ctx is not CanvasRenderingContext2D");const{width:r,height:c}=n,a=this.style[i]||this.style.light,m=(p,C)=>{e.strokeStyle=a.axis,e.lineWidth=2,e.beginPath(),e.moveTo(...p),e.lineTo(...C),e.stroke()},y=()=>{s.y>=0&&s.y<=c&&m([0,s.y],[r,s.y])},d=()=>{s.x>=0&&s.x<=r&&m([s.x,0],[s.x,c])};y(),d()}drawAxisText(){const t=this.canvas,{ctx:e,rect:n,center:s,gridConfig:i,style:r,theme:c}=t;if(!e)return console.error("ctx is not CanvasRenderingContext2D");const{width:a,height:m}=n,y=u=>Math.ceil(e.measureText(u).width),d=4,p=r[c].text.size;{const u=y("0"),x=s.x<d||s.x>a+u+d,g=s.y<-(d+p)||s.y>m+p+d;!x&&!g&&t.drawText("0",s.x-u-d,s.y+p+d)}const C=t.getGridCount(),h=i.size;{let u=s.y+p+d;u=Math.max(Math.min(u,m-d),d+p);const x=s.y>m||s.y<0;let g=s.x>0?s.x%h:s.x<0?h+s.x%h:0,w=t.getAxisValueByPoint(g-s.x,0).xV;for(;g<=a;){const I=y(String(w));w!==0&&t.drawText(String(w),g-I/2,u,x),g+=h,w+=C}}{const u=s.x>a||s.x<0;let x=s.y>0?s.y%h:s.y<0?h+s.y%h:0,g=t.getAxisValueByPoint(0,x-s.y).yV;for(;x<=m;){const w=y(String(g));let I=s.x-w-d;I=Math.max(Math.min(I,a-w-d),d),g!==0&&t.drawText(String(g),I,x+p/2,u),x+=h,g+=C}}}}const ae=new URL("data:text/javascript;base64,ZnVuY3Rpb24gSXNWYWxpZChhcnIpIHsKICByZXR1cm4gKAogICAgQXJyYXkuaXNBcnJheShhcnIpICYmCiAgICB0eXBlb2YgYXJyWzBdID09PSAibnVtYmVyIiAmJgogICAgdHlwZW9mIGFyclsxXSA9PT0gIm51bWJlciIgJiYKICAgIGlzRmluaXRlKGFyclswXSkgJiYKICAgIGlzRmluaXRlKGFyclsxXSkKICApOwp9CgovKiog6YCa6L+H5Z2Q5qCH6L205LiK55qE54K5IOiOt+WPluWdkOagh+i9tOS4iueahOWAvCAqLwpmdW5jdGlvbiBnZXRBeGlzVmFsdWVCeVBvaW50KHgsIHksIGdyaWRDb25maWcsIGNvdW50KSB7CiAgY29uc3QgeFYgPSAoeCAvIGdyaWRDb25maWcuc2l6ZSkgKiBjb3VudDsKICBjb25zdCB5ViA9ICh5IC8gZ3JpZENvbmZpZy5zaXplKSAqIGNvdW50OwogIHJldHVybiB7IHhWLCB5ViB9Owp9Ci8qKiDpgJrov4flnZDmoIfovbTkuIrnmoTlgLwg6I635Y+W5Z2Q5qCH6L205LiK55qE54K5ICovCmZ1bmN0aW9uIGdldEF4aXNQb2ludEJ5VmFsdWUoeFYsIHlWLCBncmlkQ29uZmlnLCBjb3VudCkgewogIGNvbnN0IHggPSAoeFYgLyBjb3VudCkgKiBncmlkQ29uZmlnLnNpemU7CiAgY29uc3QgeSA9ICh5ViAvIGNvdW50KSAqIGdyaWRDb25maWcuc2l6ZTsKICByZXR1cm4geyB4LCB5IH07Cn0KCi8qKiDop6PmnpDngrnkvY0gKi8KZnVuY3Rpb24gQW5hbHl6ZVRoZVBvaW50KHBvaW50TGlzdCwgY29uZmlnKSB7CiAgbGV0IHsgbWF4UmFkaXVzLCBncmlkQ29uZmlnLCBjb3VudCwgY2VudGVyLCBwZXJjZW50YWdlIH0gPSBjb25maWc7CgogIGNvbnN0IHBvaW50TWFwID0gbmV3IE1hcCgpOwoKICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50TGlzdC5sZW5ndGg7IGkrKykgewogICAgY29uc3QgaXRlbSA9IHBvaW50TGlzdFtpXTsKICAgIGxldCB7IGxvY2F0aW9uLCB2YWx1ZSwgekluZGV4ID0gMCwgc2hvdyA9IHRydWUsIHN0eWxlIH0gPSBpdGVtOwogICAgaWYgKHN0eWxlKSBtYXhSYWRpdXMgPSBNYXRoLm1heChzdHlsZS5yYWRpdXMgKyBzdHlsZS53aWR0aCwgbWF4UmFkaXVzKTsKICAgIGNvbnN0IFtpc1ZhbHVlLCBpc0xvY2F0aW9uXSA9IFtJc1ZhbGlkKHZhbHVlKSwgSXNWYWxpZChsb2NhdGlvbildOwogICAgaWYgKCFpc1ZhbHVlICYmICFpc0xvY2F0aW9uKSByZXR1cm47CiAgICBpZiAoaXNWYWx1ZSAmJiAhaXNMb2NhdGlvbikgewogICAgICBjb25zdCBsb2MgPSBnZXRBeGlzUG9pbnRCeVZhbHVlKHZhbHVlWzBdLCB2YWx1ZVsxXSwgZ3JpZENvbmZpZywgY291bnQpOwogICAgICBsb2NhdGlvbiA9IFtsb2MueCwgbG9jLnldOwogICAgfSBlbHNlIGlmICghaXNWYWx1ZSAmJiBpc0xvY2F0aW9uKSB7CiAgICAgIGNvbnN0IHZhbCA9IGdldEF4aXNWYWx1ZUJ5UG9pbnQoCiAgICAgICAgbG9jYXRpb25bMF0sCiAgICAgICAgbG9jYXRpb25bMV0sCiAgICAgICAgZ3JpZENvbmZpZywKICAgICAgICBjb3VudAogICAgICApOwogICAgICB2YWx1ZSA9IFt2YWwueFYsIHZhbC55Vl07CiAgICB9CiAgICBsZXQgW3gsIHldID0gbG9jYXRpb247CiAgICB4ID0gY2VudGVyLnggKyB4ICogcGVyY2VudGFnZTsKICAgIHkgPSBjZW50ZXIueSArIHkgKiBwZXJjZW50YWdlOwogICAgY29uc3QgZHluYW1pY0xvY2F0aW9uID0gW3gsIHldOwoKICAgIC8qKiDmlLbpm4YgKi8gewogICAgICAvKiogdmFsdWVbMF0g5aSn5LqO562J5LqOIHggKi8KICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IodmFsdWVbMF0gLyBjb3VudCkgKiBjb3VudDsKICAgICAgLyoqIHZhbHVlWzFdIOWkp+S6juetieS6jiB5ICovCiAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKHZhbHVlWzFdIC8gY291bnQpICogY291bnQ7CgogICAgICBjb25zdCB4TWFwID0gcG9pbnRNYXAuZ2V0KHpJbmRleCkgfHwgbmV3IE1hcCgpOwogICAgICBjb25zdCB5TWFwID0geE1hcC5nZXQoeCkgfHwgbmV3IE1hcCgpOwogICAgICBjb25zdCBsaXN0ID0geU1hcC5nZXQoeSkgfHwgW107CiAgICAgIGxpc3QucHVzaCh7CiAgICAgICAgbG9jYXRpb24sCiAgICAgICAgZHluYW1pY0xvY2F0aW9uLAogICAgICAgIHZhbHVlLAogICAgICAgIHpJbmRleCwKICAgICAgICBzaG93LAogICAgICAgIHN0eWxlLAogICAgICB9KTsKICAgICAgeU1hcC5zZXQoeSwgbGlzdCk7CiAgICAgIHhNYXAuc2V0KHgsIHlNYXApOwogICAgICBwb2ludE1hcC5zZXQoekluZGV4LCB4TWFwKTsKICAgIH0KICB9CgogIHJldHVybiBwb2ludE1hcDsKfQoKc2VsZi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTsKICBjb25zdCB7IHR5cGUsIGNvbmZpZywgbGlzdCB9ID0gZGF0YTsKCiAgbGV0IHQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICBsZXQgcmVzdWx0OwogIGlmICh0eXBlID09ICJwb2ludCIpIHJlc3VsdCA9IEFuYWx5emVUaGVQb2ludChsaXN0LCBjb25maWcpOwogIGNvbnNvbGUubG9nKCJ3b3JrZXIuanMg6ICX5pe277yaIiwgcGVyZm9ybWFuY2Uubm93KCkgLSB0ICsgIiBtcyIpOwoKICBzZWxmLnBvc3RNZXNzYWdlKHJlc3VsdCk7Cn07Cg==",import.meta.url);function ce(l,o){const t=new Worker(ae);t.postMessage(l),t.onmessage=e=>o==null?void 0:o(e.data)}let le=class{constructor(){f(this,"style",{light:{radius:4,fill:"#6042a6",width:12,stroke:"#6042a680"},dark:{radius:4,fill:"#5faaff",width:12,stroke:"#5faaff70"}})}addStyle(o){this.style={...this.style,...o}}},de=class extends le{constructor(t){super();f(this,"canvas");f(this,"show",!0);f(this,"pointMap",new Map);f(this,"angle",2*Math.PI);f(this,"maxRadius",16);f(this,"pointCount",0);f(this,"pointSimplifyCount",5e3);f(this,"simplify",!1);f(this,"pointList",[]);this.canvas=t}drawSinglePoint(t,e){const{ctx:n,theme:s}=this.canvas;if(!n)return console.error("ctx is not CanvasRenderingContext2D");const{width:i,stroke:r,fill:c,radius:a}=e||this.style[s]||this.style.light;n.lineWidth=i,this.simplify||(n.strokeStyle=r),n.fillStyle=c,n.beginPath(),n.arc(t[0],t[1],a,0,this.angle),n.fill(),this.simplify||n.stroke()}drawMultiplePoints(t){if(this.show)for(let e=0;e<t.length;e++){const{show:n,dynamicLocation:s,style:i}=t[e];if(!n)return;this.drawSinglePoint(s,i)}}addPoints(t){const e=this.canvas;this.pointList.length==0&&Promise.resolve().then(()=>{const{center:n,percentage:s,gridConfig:i}=e,r=this.maxRadius,c=i.count,a=[],m=2e4;for(let y=0;y<this.pointList.length;y+=m)a.push(this.pointList.slice(y,y+m));a.forEach(y=>{ce({type:"point",list:y,config:{maxRadius:r,count:c,gridConfig:i,percentage:s,center:n}},d=>{d&&(d.forEach((p,C)=>{if(this.pointMap.has(C)){const h=this.pointMap.get(C);p.forEach((u,x)=>{if(h.has(x)){const g=h.get(x);u.forEach((w,I)=>{if(g.has(I)){const Z=g.get(I);g.set(I,Z.concat(w))}else g.set(I,w)})}else h.set(x,u)})}else this.pointMap.set(C,p)}),e.redrawOnce())})}),this.pointList=[]}),this.pointList=this.pointList.concat(t)}fetchDrawFunctions(){const{show:t,style:e}=this,n=this.canvas,{ctx:s,center:i,theme:r,percentage:c,isRecalculate:a,rect:m,gridConfig:y}=n;if(!s||!t)return[];const d=y.count;this.pointCount=0;const p=e[r]||e.light;this.maxRadius=Math.max(p.radius+p.width,this.maxRadius);const C={left:m.left-this.maxRadius,right:m.right+this.maxRadius,top:m.top-this.maxRadius,bottom:m.bottom+this.maxRadius},h=n.getMaxMinValue(C);h.minXV=Math.floor(h.minXV/d)*d,h.minYV=Math.floor(h.minYV/d)*d,h.maxXV=Math.ceil(h.maxXV/d)*d,h.maxYV=Math.ceil(h.maxYV/d)*d;const u=[];return this.pointMap.forEach((x,g)=>{const w=[];x.forEach((I,Z)=>{Z<h.minXV||Z+d>h.maxXV||I.forEach((k,X)=>{X<h.minYV||X+d>h.maxYV||k.forEach(B=>{const{location:Y,show:nt}=B;if(nt){if(a){let[N,D]=Y;N=i.x+N*c,D=i.y+D*c,B.dynamicLocation=[N,D]}w.push(B)}})})}),this.pointCount+=w.length,u.push([g,()=>this.drawMultiplePoints(w)])}),this.simplify=this.pointCount>this.pointSimplifyCount,console.log(`%c本次需要绘制点位数量：${this.pointCount}
%c本次是否简化绘制：${this.simplify}`,"color:"+(this.pointCount>5e4?"#F56C6C":this.pointCount>1e4?"#E6A23C":"#67C23A"),"color:"+(this.simplify?"#F56C6C":"#67C23A")),u}clearAllPoints(){this.pointMap.clear()}};function he(l){return Array.isArray(l)&&typeof l[0]=="number"&&typeof l[1]=="number"&&isFinite(l[0])&&isFinite(l[1])}function J(l){return Array.isArray(l)&&l.every(he)}let ue=class{constructor(){f(this,"style",{light:{color:"#c74440",width:4,dash:!1,dashGap:[5,10],dashOffset:0,cap:"round",join:"round",point:{radius:4,stroke:"#c7444080",width:12,fill:"#c74440"}},dark:{color:"#7751b7",width:4,dash:!1,dashGap:[5,10],dashOffset:0,cap:"round",join:"round",point:{radius:4,stroke:"#7751b780",width:12,fill:"#7751b7"}}})}addStyle(o){this.style={...this.style,...o}}};class ge extends ue{constructor(t){super();f(this,"canvas");f(this,"show",!0);f(this,"lineMap",new Map);this.canvas=t}drawLine(t,e){const{ctx:n,theme:s}=this.canvas;if(!n)return console.error("ctx is not CanvasRenderingContext2D");const{width:i,color:r,dash:c,dashGap:a,dashOffset:m,cap:y,join:d}=e||this.style[s]||this.style.light;n.setLineDash(c?a:[]),n.lineDashOffset=m,n.lineCap=y,n.lineJoin=d,n.lineWidth=i,n.strokeStyle=r,n.beginPath(),t.forEach((p,C)=>{n[C==0?"moveTo":"lineTo"](p[0],p[1])}),n.stroke()}drawInfiniteStraightLine(t){var x;const{ctx:e,theme:n,rect:s,drawPoint:i}=this.canvas;if(!e||!s)return console.error("Canvas上下文丢失");const{dynamicLocation:r,style:c,value:a}=t;if(!r||!a)return console.error("坐标数据缺失");const[m,y]=r.map(g=>[g[0],g[1]]),d=[y[0]-m[0],y[1]-m[1]];if(d[0]===0&&d[1]===0)return console.error("重合点无法确定方向");const p=(c==null?void 0:c.point)||((x=this.style[n])==null?void 0:x.point)||this.style.light.point;i.drawSinglePoint(m,p),i.drawSinglePoint(y,p);const C=(g,w)=>{const[I,Z]=g,[k,X]=w;let B=1/0;if(k!==0){const Y=k>0?(s.width-I)/k:-I/k;Y>0&&(B=Math.min(B,Y))}if(k!==0){const Y=k>0?(s.width-I)/k:-I/k;Y>0&&(B=Math.min(B,Y))}return B===1/0?g:[I+k*B,Z+X*B]},h=C(m,[-d[0],-d[1]]),u=C(y,d);this.drawLine([h,u],t.style)}drawLines(t){const{show:e,canvas:n}=this,{ctx:s,center:i,percentage:r,isRecalculate:c}=n;if(!s)return console.error("ctx is not CanvasRenderingContext2D");e&&t.forEach(a=>{const{show:m,infinite:y,location:d}=a;m&&(c&&(a.dynamicLocation=d==null?void 0:d.map(p=>{let[C,h]=p;return C=i.x+C*r,h=i.y+h*r,[C,h]})),y?this.drawInfiniteStraightLine(a):this.drawLine(a.dynamicLocation,a.style))})}addLines(t){const e=this.canvas,{center:n,percentage:s}=e;[t].flat().forEach(i=>{let{location:r,value:c,zIndex:a=0,show:m=!0,style:y,infinite:d}=i;const[p,C]=[J(c),J(r)];if(!p&&!C)return;p&&!C?r=c.map(x=>{const g=e.getAxisPointByValue(x[0],x[1]);return[g.x,g.y]}):!p&&C&&(c=c.map(x=>{const g=e.getAxisValueByPoint(x[0],x[1]);return[g.xV,g.yV]}));const h=r.map(x=>{let[g,w]=x;return g=n.x+g*s,w=n.y+w*s,[g,w]}),u=(this.lineMap.get(a)||[]).concat({location:r,dynamicLocation:h,value:c,zIndex:a,show:m,style:y,infinite:d&&(r==null?void 0:r.length)==2});this.lineMap.set(a,u)}),e.redrawOnce()}fetchDrawFunctions(){const{show:t,canvas:e}=this,{ctx:n,center:s,percentage:i,isRecalculate:r}=e;return!n||!t?[]:Array.from(this.lineMap.keys()).map(a=>[a,()=>this.drawLines(this.lineMap.get(a))])}clearAllLines(){this.lineMap.clear()}}class fe{constructor(){f(this,"style",{light:{radius:4,stroke:"#6042a680",width:12,fill:"#6042a6"},dark:{radius:4,stroke:"#5faaff70",width:12,fill:"#5faaff"}})}addStyle(o){this.style={...this.style,...o}}}class me extends fe{constructor(t){super();f(this,"canvas");f(this,"show",!0);f(this,"pointMap",new Map);this.canvas=t}drawPoints(t){const e=this.canvas,{ctx:n,center:s,theme:i,percentage:r}=e;if(!n)return console.error("ctx is not CanvasRenderingContext2D");this.show&&t.forEach(c=>{const{location:a,show:m}=c;if(m){const{width:y,stroke:d,fill:p,radius:C}=c.style||this.style[i]||this.style.light,[h,u]=a;n.lineWidth=y,n.strokeStyle=d,n.fillStyle=p,n.beginPath(),n.arc(s.x+h*r,s.y+u*r,C,0,2*Math.PI),n.stroke(),n.fill()}})}isValid(t){return Array.isArray(t)&&typeof t[0]=="number"&&typeof t[1]=="number"&&isFinite(t[0])&&isFinite(t[1])}addPoint(t){const e=this.canvas;[t].flat().forEach(n=>{let{location:s,value:i,zIndex:r=0,show:c=!0,style:a}=n;const[m,y]=[this.isValid(i),this.isValid(s)];if(!m&&!y)return;if(m&&!y){const p=e.getAxisPointByValue(...i);s=[p.x,p.y]}else if(!m&&y){const p=e.getAxisValueByPoint(...s);i=[p.xV,p.yV]}const d=(this.pointMap.get(r)||[]).concat({location:s,value:i,zIndex:r,show:c,style:a});this.pointMap.set(r,d)}),this.canvas.redrawOnce()}fetchDrawFunctions(){return Array.from(this.pointMap.keys()).map(e=>[e,()=>this.drawPoints(this.pointMap.get(e))])}clearPoint(){this.pointMap.clear()}}class ye extends ie{constructor(o){super(o),this.drawGrid=new re(this),this.drawPoint=new de(this),this.drawLine=new ge(this),this.drawPolygon=new me(this),this.updateCenter()}destroy(){super.destroy()}}function pe(l,o){if(typeof l!="function")throw new Error("The first argument must be a function.");if(!Array.isArray(o))throw new Error("The second argument must be an array.");let t=[],e=10,n=0;const s=(i,r)=>{for(const[c,a]of r)if(i>=c)return a;return"black"};return function(...i){const r=performance.now(),c=l(...i),a=performance.now()-r;t.push(a),t.length>e&&t.shift(),n=t.reduce((d,p)=>d+p,0)/t.length||0;const m=s(a,o),y=s(n,o);return console.log(`%c单次耗时：${a.toFixed(2)}ms
%c平均耗时（${t.length}次）：${n.toFixed(2)}ms`,`color: ${m}; padding: 2px 0;`,`color: ${y}; padding: 2px 0;`),c}}const xe={};function Ce(l,o){return null}const we=et(xe,[["render",Ce]]),ve={class:"graphing-equations"},be=["id"],Ie={class:"button-box"},Ae=H({__name:"index",setup(l){const o=qt(),t=Ct("canvas-");let e;const n=_(()=>{const i=E.value.theme;return{color:i==="dark"?"#666":"#ededed","text-color":i==="dark"?"#ededed":"#666",style:{"--n-color-hover":i==="dark"?"rgba(126, 126, 126, 1)":"#fff"}}});wt(()=>E.value.theme,i=>e.setTheme(i));const s=new Image(200,300);return s.src="https://fastly.picsum.photos/id/440/200/300.jpg?hmac=3Nx5MHMCVguEcZQ1M3RnSrCpHNn9sabFI5y6aYzvceQ",s.onload=()=>{e==null||e.redrawOnce()},vt(()=>{e=new ye(t),e.setTheme(E.value.theme);const i=Array.from({length:1e4*5}).map((r,c)=>({value:[Math.random()*100-50,Math.random()*100-50]}));e.drawPoint.addPoints(i)}),bt(()=>{e.destroy()}),(i,r)=>(z(),O("div",ve,[S("nav",null,[A(v(Bt),{href:"https://www.desmos.com/calculator?lang=zh-CN",target:"_blank"},{default:G(()=>[Q(" 希望达到的目标！ desmos ")]),_:1}),A(we)]),S("canvas",{id:v(t)},null,8,be),S("div",Ie,[A(v(It),{vertical:""},{default:G(()=>[A(v(Gt),{vertical:""},{default:G(()=>[A(v(K),T(n.value,{onClick:r[0]||(r[0]=c=>{var a;return(a=v(e))==null?void 0:a.zoomIn()})}),{icon:G(()=>[A(v($),{component:v(kt)},null,8,["component"])]),_:1},16),A(v(K),T(n.value,{onClick:r[1]||(r[1]=c=>{var a;return(a=v(e))==null?void 0:a.zoomOut()})}),{icon:G(()=>[A(v($),{component:v(_t)},null,8,["component"])]),_:1},16)]),_:1}),A(v(K),T(n.value,{onClick:r[2]||(r[2]=c=>{var a;return(a=v(e))==null?void 0:a.reset()})}),{icon:G(()=>[A(v($),{component:v(Ot)},null,8,["component"])]),_:1},16),A(v(K),T(n.value,{onClick:r[3]||(r[3]=c=>{var a;return(a=v(e))==null?void 0:a.toggleGrid()})}),{icon:G(()=>[A(v($),{component:v(Kt)},null,8,["component"])]),_:1},16)]),_:1}),A(v(Zt),{class:"fps",type:v(o)>60?"success":v(o)>30?"warning":"error"},{default:G(()=>[Q(At(v(o)),1)]),_:1},8,["type"])])]))}}),Me=et(Ae,[["__scopeId","data-v-7041f3be"]]);export{Me as default};
