var tt=Object.defineProperty;var et=(h,s,t)=>s in h?tt(h,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[s]=t;var u=(h,s,t)=>et(h,typeof s!="symbol"?s+"":s,t);import{p as V,x as H,s as R,v as $,q as z,d as O,y as q,D as nt,L as st,M as ot,h as E,ba as it,z as K,bb as rt,m as j,N as at,P as ct,bc as lt,o as I,c as F,aS as L,bd as dt,be as ht,j as U,bf as ut,bg as ft,bh as mt,aW as pt,b9 as gt,_ as Z,aT as xt,k as yt,I as wt,bi as N,aZ as vt,a as k,w as T,u as v,e as W,B as G,bj as B,aV as D,aU as bt,t as Ct}from"./index-Cb5SV8kk.js";import{A as kt}from"./Add-CgxHXoPv.js";import{N as Mt}from"./a-CQSSIOyC.js";const b="0!important",Q="-1px!important";function A(h){return $(`${h}-type`,[R("& +",[V("button",{},[$(`${h}-type`,[z("border",{borderLeftWidth:b}),z("state-border",{left:Q})])])])])}function _(h){return $(`${h}-type`,[R("& +",[V("button",[$(`${h}-type`,[z("border",{borderTopWidth:b}),z("state-border",{top:Q})])])])])}const $t=V("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[H("vertical",{flexDirection:"row"},[H("rtl",[V("button",[R("&:first-child:not(:last-child)",`
 margin-right: ${b};
 border-top-right-radius: ${b};
 border-bottom-right-radius: ${b};
 `),R("&:last-child:not(:first-child)",`
 margin-left: ${b};
 border-top-left-radius: ${b};
 border-bottom-left-radius: ${b};
 `),R("&:not(:first-child):not(:last-child)",`
 margin-left: ${b};
 margin-right: ${b};
 border-radius: ${b};
 `),A("default"),$("ghost",[A("primary"),A("info"),A("success"),A("warning"),A("error")])])])]),$("vertical",{flexDirection:"column"},[V("button",[R("&:first-child:not(:last-child)",`
 margin-bottom: ${b};
 margin-left: ${b};
 margin-right: ${b};
 border-bottom-left-radius: ${b};
 border-bottom-right-radius: ${b};
 `),R("&:last-child:not(:first-child)",`
 margin-top: ${b};
 margin-left: ${b};
 margin-right: ${b};
 border-top-left-radius: ${b};
 border-top-right-radius: ${b};
 `),R("&:not(:first-child):not(:last-child)",`
 margin: ${b};
 border-radius: ${b};
 `),_("default"),$("ghost",[_("primary"),_("info"),_("success"),_("warning"),_("error")])])])]),St={size:{type:String,default:void 0},vertical:Boolean},Lt=O({name:"ButtonGroup",props:St,setup(h){const{mergedClsPrefixRef:s,mergedRtlRef:t}=q(h);return nt("-button-group",$t,s),st(it,h),{rtlEnabled:ot("ButtonGroup",t,s),mergedClsPrefix:s}},render(){const{mergedClsPrefix:h}=this;return E("div",{class:[`${h}-button-group`,this.rtlEnabled&&`${h}-button-group--rtl`,this.vertical&&`${h}-button-group--vertical`],role:"group"},this.$slots)}}),Tt=V("text",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[$("strong",`
 font-weight: var(--n-font-weight-strong);
 `),$("italic",{fontStyle:"italic"}),$("underline",{textDecoration:"underline"}),$("code",`
 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 `)]),Rt=Object.assign(Object.assign({},K.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),Pt=O({name:"Text",props:Rt,setup(h){const{mergedClsPrefixRef:s,inlineThemeDisabled:t}=q(h),n=K("Typography","-text",Tt,rt,h,s),e=j(()=>{const{depth:i,type:c}=h,r=c==="default"?i===void 0?"textColor":`textColor${i}Depth`:at("textColor",c),{common:{fontWeightStrong:a,fontFamilyMono:f,cubicBezierEaseInOut:l},self:{codeTextColor:p,codeBorderRadius:m,codeColor:y,codeBorder:d,[r]:g}}=n.value;return{"--n-bezier":l,"--n-text-color":g,"--n-font-weight-strong":a,"--n-font-famliy-mono":f,"--n-code-border-radius":m,"--n-code-text-color":p,"--n-code-color":y,"--n-code-border":d}}),o=t?ct("text",j(()=>`${h.type[0]}${h.depth||""}`),e,h):void 0;return{mergedClsPrefix:s,compitableTag:lt(h,["as","tag"]),cssVars:t?void 0:e,themeClass:o==null?void 0:o.themeClass,onRender:o==null?void 0:o.onRender}},render(){var h,s,t;const{mergedClsPrefix:n}=this;(h=this.onRender)===null||h===void 0||h.call(this);const e=[`${n}-text`,this.themeClass,{[`${n}-text--code`]:this.code,[`${n}-text--delete`]:this.delete,[`${n}-text--strong`]:this.strong,[`${n}-text--italic`]:this.italic,[`${n}-text--underline`]:this.underline}],o=(t=(s=this.$slots).default)===null||t===void 0?void 0:t.call(s);return this.code?E("code",{class:e,style:this.cssVars},this.delete?E("del",null,o):o):this.delete?E("del",{class:e,style:this.cssVars},o):E(this.compitableTag||"span",{class:e,style:this.cssVars},o)}}),At={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},_t=L("rect",{x:"48",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Vt=L("rect",{x:"288",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ot=L("rect",{x:"48",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Et=L("rect",{x:"288",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Gt=[_t,Vt,Ot,Et],Bt=O({name:"GridOutline",render:function(s,t){return I(),F("svg",At,Gt)}}),Dt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},zt=L("path",{d:"M261.56 101.28a8 8 0 0 0-11.06 0L66.4 277.15a8 8 0 0 0-2.47 5.79L63.9 448a32 32 0 0 0 32 32H192a16 16 0 0 0 16-16V328a8 8 0 0 1 8-8h80a8 8 0 0 1 8 8v136a16 16 0 0 0 16 16h96.06a32 32 0 0 0 32-32V282.94a8 8 0 0 0-2.47-5.79z",fill:"currentColor"},null,-1),It=L("path",{d:"M490.91 244.15l-74.8-71.56V64a16 16 0 0 0-16-16h-48a16 16 0 0 0-16 16v32l-57.92-55.38C272.77 35.14 264.71 32 256 32c-8.68 0-16.72 3.14-22.14 8.63l-212.7 203.5c-6.22 6-7 15.87-1.34 22.37A16 16 0 0 0 43 267.56L250.5 69.28a8 8 0 0 1 11.06 0l207.52 198.28a16 16 0 0 0 22.59-.44c6.14-6.36 5.63-16.86-.76-22.97z",fill:"currentColor"},null,-1),Ft=[zt,It],Yt=O({name:"Home",render:function(s,t){return I(),F("svg",Dt,Ft)}}),Xt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Nt=L("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),jt=[Nt],Ht=O({name:"Remove",render:function(s,t){return I(),F("svg",Xt,jt)}});function Wt(h){return dt()?(ht(h),!0):!1}const qt=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Kt=qt?window:void 0;function Ut(h,s={}){const{immediate:t=!0,fpsLimit:n=void 0,window:e=Kt}=s,o=U(!1),i=n?1e3/n:null;let c=0,r=null;function a(p){if(!o.value||!e)return;c||(c=p);const m=p-c;if(i&&m<i){r=e.requestAnimationFrame(a);return}c=p,h({delta:m,timestamp:p}),r=e.requestAnimationFrame(a)}function f(){!o.value&&e&&(o.value=!0,c=0,r=e.requestAnimationFrame(a))}function l(){o.value=!1,r!=null&&e&&(e.cancelAnimationFrame(r),r=null)}return t&&f(),Wt(l),{isActive:ut(o),pause:l,resume:f}}function Zt(h){var s;const t=U(0);if(typeof performance>"u")return t;const n=(s=void 0)!=null?s:10;let e=performance.now(),o=0;return Ut(()=>{if(o+=1,o>=n){const i=performance.now(),c=i-e;t.value=Math.round(1e3/(c/o)),e=i,o=0}}),t}class Qt{constructor(s){u(this,"canvas");u(this,"ctx");u(this,"rect");u(this,"offset",{x:0,y:0});u(this,"center",{x:0,y:0});u(this,"defaultCenter",{top:void 0,bottom:void 0,left:void 0,right:void 0});u(this,"scale",1);u(this,"percentage",1);u(this,"gridConfig",{count:2,min:75,max:125,size:75});u(this,"cycle",10);u(this,"delta",.02);u(this,"redrawInNextRenderFrame",!1);u(this,"isAuto",!1);u(this,"drawGrid");u(this,"drawPoint");u(this,"drawLine");u(this,"drawPolygon");const t=document.getElementById(s);if(t instanceof HTMLCanvasElement)if(t.getContext){this.canvas=t,this.ctx=t.getContext("2d"),this.rect=t.getBoundingClientRect();const{clientWidth:n,clientHeight:e}=t;[t.width,t.height]=[n,e]}else console.error("canvas-unsupported code here");else console.error("canvas is not HTMLCanvasElement")}updateCenter(){const{canvas:s,rect:t,offset:n,defaultCenter:e}=this;if(!s)return console.error("canvas is not HTMLCanvasElement");const{width:o,height:i}=t,{top:c,bottom:r,left:a,right:f}=e,l={vertical:(d,g)=>{var w;if(d==1/0||d==-1/0)return;if(typeof d=="number")return d;if(["top","left"].includes(d))return 0;if(["bottom","right"].includes(d))return g;if(["middle","center"].includes(d))return g/2;const x=(w=d.match(/^(\d+)%*$/))==null?void 0:w[1];return(x?g*Number(x)/100:Number(d))||void 0},reverse:(d,g)=>{if(d==1/0||d==-1/0)return;if(typeof d=="number")return g-d;const x=l.vertical(d,g);return x?g-x:void 0}},p=(d,g,x)=>{if(d!==void 0){const w=l.vertical(d,x);if(w!==void 0)return w}if(g!==void 0){const w=l.reverse(g,x);if(w!==void 0)return w}return x/2},m=p(c,r,i),y=p(a,f,o);this.center={x:Math.floor(y+n.x),y:Math.floor(m+n.y)}}updateSize(){const{scale:s,cycle:t,delta:n,gridConfig:e}=this;let o=Math.abs(s-1)%(t*n)/n;o=Math.round(s<1?t-o:o),e.size=o/t*(e.max-e.min)+e.min,this.percentage=this.getAxisPointByValue(e.count,0).x/e.min}setScale(s,t){const{canvas:n,rect:e}=this;if(!n||!e)return console.error("canvas is not HTMLCanvasElement");let o,i;s==="center"?(o=e.left+e.width/2,i=e.top+e.height/2):[o,i]=[s.clientX,s.clientY];const c=this.getMousePositionOnAxis({clientX:o,clientY:i}),r=this.getAxisValueByPoint(c.x,c.y);this.scale+=t,this.updateSize();const a=this.getAxisPointByValue(r.xV,r.yV);this.offset.x-=a.x-c.x,this.offset.y-=a.y-c.y}getGridCount(){const{gridConfig:s,scale:t,cycle:n,delta:e}=this;let o=s.count;return t>1?o/=Math.pow(2,Math.floor((t-1)/(n*e))):t<1&&(o*=Math.pow(2,Math.ceil(Math.abs(t-1)/(n*e)))),o}getMousePositionOnAxis(s){const{canvas:t,center:n,rect:e}=this;if(!t)return console.error("canvas is not HTMLCanvasElement");const{clientX:o,clientY:i}=s,{left:c,top:r}=e,a=o-c-n.x,f=i-r-n.y;return{x:a,y:f}}getAxisValueByPoint(s,t){const{gridConfig:n}=this,e=this.getGridCount(),o=s/n.size*e,i=t/n.size*e;return{xV:o,yV:i}}getAxisPointByValue(s,t){const{gridConfig:n}=this,e=this.getGridCount(),o=s/e*n.size,i=t/e*n.size;return{x:o,y:i}}getMaxMinValue(s){s=s||this.rect;const{x:t,y:n}=this.getMousePositionOnAxis({clientX:s.left,clientY:s.top}),{xV:e,yV:o}=this.getAxisValueByPoint(t,n),{x:i,y:c}=this.getMousePositionOnAxis({clientX:s.right,clientY:s.bottom}),{xV:r,yV:a}=this.getAxisValueByPoint(i,c);return{minXV:e,minYV:o,maxXV:r,maxYV:a}}destroy(){this.canvas=void 0,this.ctx=void 0}}class Jt extends Qt{constructor(t){super(t);u(this,"theme","light");u(this,"style",{light:{background:"#fff",text:{color:"#222",secondary:"#909399",size:12,family:"微软雅黑",bold:!0},grid:{axis:"#222",grid:"#666",innerGrid:"#e5e5e5"},point:{radius:4,fill:"#d03050",width:12,stroke:"#d0305080"},line:{color:"#f0a020",width:4,dash:!1,dashGap:[5,10],dashOffset:0,cap:"round",join:"round",point:{radius:4,stroke:"#f0a02080",width:12,fill:"#f0a020"}},polygon:{fill:"#18a05830",stroke:"#18a058",width:1,dash:!1,dashGap:[5,10],dashOffset:0}},dark:{background:"#000",text:{color:"#aeaeae",secondary:"#8c8c8c",size:12,family:"微软雅黑",bold:!0},grid:{axis:"#aeaeae",grid:"#666",innerGrid:"#454545"},point:{radius:4,fill:"#e88080",width:12,stroke:"#e8808070"},line:{color:"#f2c97d",width:4,dash:!1,dashGap:[5,10],dashOffset:0,cap:"round",join:"round",point:{radius:4,stroke:"#f2c97d80",width:12,fill:"#f2c97d"}},polygon:{fill:"#63e2b730",stroke:"#63e2b7",width:1,dash:!1,dashGap:[5,10],dashOffset:0}}});this.initStyle(),this.clearScreen()}initStyle(){const{canvas:t,ctx:n,theme:e}=this;if(!t||!n)return console.error("ctx is not CanvasRenderingContext2D");t.classList.add("_nhanh_canvas");const o=this.style[e];n.font=`${o.text.bold?"bold":""} ${o.text.size}px ${o.text.family}`}clearScreen(){const{ctx:t,theme:n,rect:e}=this;if(!t)return console.error("ctx is not CanvasRenderingContext2D");const{width:o,height:i}=e;t.fillStyle=this.style[n].background,t.fillRect(0,0,o,i)}setStyle(t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const e=ft(this.style[n]||this.style[this.theme]);mt(e,t[n]),this.style[n]=e}this.initStyle()}setTheme(t){t in this.style&&(this.theme=t)}}class te extends Jt{constructor(t){super(t);u(this,"resizeObserver");u(this,"startCreationOnGrid");u(this,"startCreationBelowGrid");u(this,"rely",[this.center.x,this.center.y,this.scale].join());u(this,"isRecalculate",!1);u(this,"measureRedrawPerformance",le(()=>this.redraw(),[[1,"#F56C6C"],[.5,"#E6A23C"],[0,"#67C23A"]]));this.canvas&&(this.resizeObserver=new ResizeObserver(pt(()=>{this.rect=this.canvas.getBoundingClientRect();const{clientWidth:n,clientHeight:e}=this.canvas;[this.canvas.width,this.canvas.height]=[n,e],this.redrawOnce()},200)),this.resizeObserver.observe(this.canvas))}addFunctionsToZIndexs(t){const n={};return t.forEach(([e,o])=>{n[e]=[...n[e]||[],o]}),n}redraw(){var a,f,l;const{canvas:t,center:n,scale:e,rect:o}=this;if(!t||!o)return console.error("canvas is not HTMLCanvasElement");this.updateCenter();const i=[n.x,n.y,e].join();this.isRecalculate=this.rely!==i,this.rely=i,this.clearScreen(),(a=this.startCreationBelowGrid)==null||a.call(this),(f=this.drawGrid)==null||f.drawAxisAndGrid();const c=this.startCreationOnGrid,r=this.addFunctionsToZIndexs(this.drawPoint.fetchDrawFunctions().concat(this.drawLine.fetchDrawFunctions()).concat(Array.isArray(c)?c:[]));Object.keys(r).sort().forEach(p=>{r[p].forEach(y=>y())}),typeof this.startCreationOnGrid=="function"&&((l=this.startCreationOnGrid)==null||l.call(this)),this.isRecalculate=!1}redrawOnce(t){this.isAuto&&!t&&(this.isAuto=!1),this.redrawInNextRenderFrame||(this.redrawInNextRenderFrame=!0,requestAnimationFrame(()=>{this.redrawInNextRenderFrame=!1,this.measureRedrawPerformance()}))}drawText(t,n,e,o){const{ctx:i,theme:c}=this;if(!i)return console.error("ctx is not CanvasRenderingContext2D");const r=this.style[c],{background:a}=r;i.font=`${r.text.bold?"bold":""} ${r.text.size}px ${r.text.family}`,i.strokeStyle=a,i.strokeText(t,n,e),i.fillStyle=r.text[o?"secondary":"color"],i.fillText(t,n,e)}toggleGrid(t){const n=(()=>{if(typeof t=="object"){const{grid:e={main:!0,secondary:!0},axis:o=!0,axisText:i=!0}=t;return{grid:e,axis:o,axisText:i}}return typeof t=="boolean"?{grid:{main:t,secondary:t},axis:t,axisText:t}:(t=!(this.drawGrid.show.axis||this.drawGrid.show.axisText||this.drawGrid.show.grid.main||this.drawGrid.show.grid.secondary),{grid:{main:t,secondary:t},axis:t,axisText:t})})();this.drawGrid.show=n,this.redrawOnce()}destroy(){var t;super.destroy(),(t=this.resizeObserver)==null||t.disconnect()}}let ee=class extends te{constructor(t){super(t);u(this,"mouseInCanvas",!1);u(this,"mouseIsDown",!1);u(this,"mouseLastPosition",{x:0,y:0});u(this,"unBind");u(this,"lastPressedKey",{key:"",keyupTime:0,dblclick:!1});this.initEvent()}initEvent(){const{canvas:t}=this;if(!t)return console.error("canvas is not HTMLCanvasElement");const n=[{type:"click",handler:this.click.bind(this)},{type:"contextmenu",handler:this.contextmenu.bind(this)},{type:"mouseenter",handler:this.mouseenter.bind(this)},{type:"mouseleave",handler:this.mouseleave.bind(this)},{type:"keydown",handler:this.keydown.bind(this),target:window},{type:"keyup",handler:this.keyup.bind(this),target:window},{type:"wheel",handler:this.wheel.bind(this)},{type:"mousedown",handler:this.mousedown.bind(this)},{type:"mouseup",handler:this.mouseup.bind(this),target:window},{type:"mousemove",handler:this.mousemove.bind(this),target:window}];n.forEach(({type:e,handler:o,target:i=t})=>{i.addEventListener(e,o)}),this.unBind=()=>{n.forEach(({type:e,handler:o,target:i=t})=>{i.removeEventListener(e,o)})}}click(t){console.log("mouseclick")}contextmenu(t){t.preventDefault(),console.log("mousecontextmenu")}mouseenter(t){this.mouseInCanvas=!0}mouseleave(t){this.mouseInCanvas=!1}getStep(t){const{lastPressedKey:n}=this;return n.dblclick?4:n.key===t&&Date.now()-n.keyupTime<300?(n.dblclick=!0,4):1}keydown(t){const{mouseInCanvas:n,offset:e,delta:o}=this;if(n){const i=t.key,c=this.getStep(i);switch(i){case"ArrowUp":e.y-=c;break;case"ArrowDown":e.y+=c;break;case"ArrowLeft":e.x-=c;break;case"ArrowRight":e.x+=c;break;case"+":this.setScale("center",o);break;case"-":this.setScale("center",-o);break}["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","+","-"].includes(i)&&this.redrawOnce()}}keyup(t){const{mouseInCanvas:n,lastPressedKey:e}=this;if(n){const o=t.key;e.key=o,e.keyupTime=Date.now(),e.dblclick=!1}}wheel(t){const{delta:n}=this;this.setScale(t,t.deltaY<0?n:-n),this.redrawOnce()}mousedown(t){this.mouseIsDown=!0;const{clientX:n,clientY:e}=t;this.mouseLastPosition={x:n,y:e}}mouseup(t){this.mouseIsDown=!1}mousemove(t){const{mouseIsDown:n,offset:e,mouseLastPosition:o}=this;if(n){const{clientX:i,clientY:c}=t;e.x+=i-o.x,e.y+=c-o.y,this.redrawOnce(),this.mouseLastPosition={x:i,y:c}}}destroy(){var t;super.destroy(),(t=this.unBind)==null||t.call(this)}};class ne extends ee{reset(){this.isAuto=!0;const s=300,t={offset:{...this.offset},scale:this.scale-1};gt(n=>{!this.isAuto||!this.canvas||(n===1?(this.offset={x:0,y:0},this.scale=1,this.updateSize(),this.isAuto=!1):n>0&&(n=1-n,this.offset={x:t.offset.x*n,y:t.offset.y*n},this.scale=1+t.scale*n,this.updateSize()),this.redrawOnce(!0))},s)}zoom(s){const{canvas:t,rect:n}=this;if(!t||!n)return console.error("canvas is not HTMLCanvasElement");this.setScale("center",s)}zoomIn(){this.zoom(this.delta)}zoomOut(){this.zoom(-this.delta)}setStyle(s){super.setStyle(s),this.redrawOnce()}setTheme(s){super.setTheme(s),this.redrawOnce()}}class se{constructor(s){u(this,"canvas");u(this,"show",{grid:{main:!0,secondary:!0},axis:!0,axisText:!0});this.canvas=s}drawAxisAndGrid(){this.canvas&&((this.show.grid.main||this.show.grid.secondary)&&this.drawGrid(),this.show.axis&&this.drawAxis(),this.show.axisText&&this.drawAxisText())}color(){const{theme:s,style:t}=this.canvas;return(t[s]||t.light).grid}drawGrid(){const s=this.canvas,{ctx:t,rect:n,center:e,gridConfig:o}=s;if(!t)return console.error("ctx is not CanvasRenderingContext2D");const{width:i,height:c}=n,r=this.color(),a=o.size,f=a/5;console.log(a,f),t.lineWidth=1;const l=(m,y)=>{const d=e.x%m>0?e.x%m:m+e.x%m;t.strokeStyle=y,t.beginPath();for(let g=0;g*m+d<=i;g++)t.moveTo(g*m+d,0),t.lineTo(g*m+d,c);t.stroke()},p=(m,y)=>{const d=e.y%m>0?e.y%m:m+e.y%m;t.strokeStyle=y,t.beginPath();for(let g=0;g*m+d<=c;g++)t.moveTo(0,g*m+d),t.lineTo(i,g*m+d);t.stroke()};this.show.grid.secondary&&(l(f,r.innerGrid),p(f,r.innerGrid)),this.show.grid.main&&(l(a,r.grid),p(a,r.grid))}drawAxis(){const s=this.canvas,{ctx:t,rect:n,center:e}=s;if(!t)return console.error("ctx is not CanvasRenderingContext2D");const{width:o,height:i}=n,c=this.color();t.lineWidth=2,t.strokeStyle=c.axis;const r=()=>{e.y>=0&&e.y<=i&&(t.beginPath(),t.moveTo(0,e.y),t.lineTo(o,e.y),t.stroke())},a=()=>{e.x>=0&&e.x<=o&&(t.beginPath(),t.moveTo(e.x,0),t.lineTo(e.x,i),t.stroke())};r(),a()}drawAxisText(){const s=this.canvas,{ctx:t,rect:n,center:e,gridConfig:o,style:i,theme:c}=s;if(!t)return console.error("ctx is not CanvasRenderingContext2D");const{width:r,height:a}=n,f=d=>Math.ceil(t.measureText(d).width),l=4,p=i[c].text.size;{const d=f("0"),g=e.x<l||e.x>r+d+l,x=e.y<-(l+p)||e.y>a+p+l;!g&&!x&&s.drawText("0",e.x-d-l,e.y+p+l)}const m=s.getGridCount(),y=o.size;{let d=e.y+p+l;d=Math.max(Math.min(d,a-l),l+p);const g=e.y>a||e.y<0;let x=e.x>0?e.x%y:e.x<0?y+e.x%y:0,w=s.getAxisValueByPoint(x-e.x,0).xV;for(;x<=r;){const C=f(String(w));w!==0&&s.drawText(String(w),x-C/2,d,g),x+=y,w+=m}}{const d=e.x>r||e.x<0;let g=e.y>0?e.y%y:e.y<0?y+e.y%y:0,x=s.getAxisValueByPoint(0,g-e.y).yV;for(;g<=a;){const w=f(String(x));let C=e.x-w-l;C=Math.max(Math.min(C,r-w-l),l),x!==0&&s.drawText(String(x),C,g+p/2,d),g+=y,x+=m}}}}const oe=new URL(""+new URL("worker-tw2oddNB.js",import.meta.url).href,import.meta.url);function J(h,s){const t=new Worker(oe);t.postMessage(h),t.onmessage=n=>s(n.data)}class ie{constructor(s){u(this,"canvas");u(this,"show",!0);u(this,"pointMap",new Map);u(this,"angle",2*Math.PI);u(this,"maxRadius",16);u(this,"pointCount",0);u(this,"pointSimplifyCount",5e3);u(this,"simplify",!1);u(this,"pointList",[]);this.canvas=s}color(){const{theme:s,style:t}=this.canvas;return(t[s]||t.light).point}drawSinglePoint(s,t){const n=this.canvas.ctx;if(!n)return console.error("ctx is not CanvasRenderingContext2D");const{width:e,stroke:o,fill:i,radius:c}=t||this.color();n.lineWidth=e,this.simplify||(n.strokeStyle=o),n.fillStyle=i,n.beginPath(),n.arc(s[0],s[1],c,0,this.angle),n.fill(),this.simplify||n.stroke()}drawMultiplePoints(s){if(this.show)for(let t=0;t<s.length;t++){const{show:n,dynamicLocation:e,style:o}=s[t];n&&this.drawSinglePoint(e,o)}}addPoints(s){const t=this.canvas;this.pointList.length==0&&Promise.resolve().then(()=>{const{center:n,percentage:e,gridConfig:o}=t,i=this.maxRadius,c=[],r=2e4;for(let a=0;a<this.pointList.length;a+=r)c.push(this.pointList.slice(a,a+r));c.forEach(a=>{J({type:"point",list:a,config:{maxRadius:i,gridConfig:o,percentage:e,center:n}},f=>{if(f){const{pointMap:l,maxRadius:p}=f;this.maxRadius=Math.max(this.maxRadius,p),l.forEach((m,y)=>{if(this.pointMap.has(y)){const d=this.pointMap.get(y);m.forEach((g,x)=>{if(d.has(x)){const w=d.get(x);g.forEach((C,S)=>{if(w.has(S)){const M=w.get(S);w.set(S,M.concat(C))}else w.set(S,C)})}else d.set(x,g)})}else this.pointMap.set(y,m)}),t.redrawOnce()}})}),this.pointList=[]}),this.pointList=this.pointList.concat(s)}fetchDrawFunctions(){const s=this.canvas,{ctx:t,center:n,percentage:e,isRecalculate:o,rect:i,gridConfig:c}=s;if(!t||!this.show)return[];const r=c.count;this.pointCount=0;const a=this.color();this.maxRadius=Math.max(a.radius+a.width,this.maxRadius);const f={left:i.left-this.maxRadius,right:i.right+this.maxRadius,top:i.top-this.maxRadius,bottom:i.bottom+this.maxRadius},l=s.getMaxMinValue(f);l.minXV=Math.floor(l.minXV/r)*r,l.minYV=Math.floor(l.minYV/r)*r,l.maxXV=Math.ceil(l.maxXV/r)*r,l.maxYV=Math.ceil(l.maxYV/r)*r;const p=[];return this.pointMap.forEach((m,y)=>{const d=[];m.forEach((g,x)=>{x<l.minXV||x+r>l.maxXV||g.forEach((w,C)=>{C<l.minYV||C+r>l.maxYV||w.forEach(S=>{const{location:M,show:P}=S;if(P){if(o){let[Y,X]=M;Y=n.x+Y*e,X=n.y+X*e,S.dynamicLocation=[Y,X]}d.push(S)}})})}),this.pointCount+=d.length,p.push([y,()=>this.drawMultiplePoints(d)])}),this.simplify=this.pointCount>this.pointSimplifyCount,console.log(`%c本次需要绘制点位数量：${this.pointCount}
%c本次是否简化绘制：${this.simplify}`,"color:"+(this.pointCount>5e4?"#F56C6C":this.pointCount>1e4?"#E6A23C":"#67C23A"),"color:"+(this.simplify?"#F56C6C":"#67C23A")),p}clearAllPoints(){this.pointMap.clear()}}class re{constructor(s){u(this,"canvas");u(this,"show",!0);u(this,"lineMap",new Map);u(this,"lineList",[]);this.canvas=s}color(){const{theme:s,style:t}=this.canvas;return(t[s]||t.light).line}drawLine(s,t){var l;const n=(l=this.canvas)==null?void 0:l.ctx;if(!n)return console.error("ctx is not CanvasRenderingContext2D");const{width:e,color:o,dash:i,dashGap:c,dashOffset:r,cap:a,join:f}=t||this.color();n.setLineDash(i?c:[]),n.lineDashOffset=r,n.lineCap=a,n.lineJoin=f,n.lineWidth=e,n.strokeStyle=o,n.beginPath(),s.forEach((p,m)=>{n[m==0?"moveTo":"lineTo"](p[0],p[1])}),n.stroke()}drawInfiniteStraightLine(s){const{ctx:t,rect:n,drawPoint:e}=this.canvas;if(!t||!n)return console.error("Canvas上下文丢失");const{dynamicLocation:o,style:i,value:c}=s;if(!o||!c)return console.error("坐标数据缺失");const[r,a]=o.map(d=>[d[0],d[1]]),f=[a[0]-r[0],a[1]-r[1]];if(f[0]===0&&f[1]===0)return console.error("重合点无法确定方向");const l=(i==null?void 0:i.point)||this.color().point;e.drawSinglePoint(r,l),e.drawSinglePoint(a,l);const p=(d,g)=>{const[x,w]=d,[C,S]=g;let M=1/0;if(C!==0){const P=C>0?(n.width-x)/C:-x/C;P>0&&(M=Math.min(M,P))}if(C!==0){const P=C>0?(n.width-x)/C:-x/C;P>0&&(M=Math.min(M,P))}return M===1/0?d:[x+C*M,w+S*M]},m=p(r,[-f[0],-f[1]]),y=p(a,f);this.drawLine([m,y],s.style)}drawLines(s){const{show:t,canvas:n}=this,{ctx:e,center:o,percentage:i,isRecalculate:c}=n;if(!e)return console.error("ctx is not CanvasRenderingContext2D");if(t)for(let r=0;r<s.length;r++){const a=s[r],{show:f,infinite:l,location:p}=a;if(!f)return;c&&(a.dynamicLocation=p==null?void 0:p.map(m=>{let[y,d]=m;return y=o.x+y*i,d=o.y+d*i,[y,d]})),l?this.drawInfiniteStraightLine(a):this.drawLine(a.dynamicLocation,a.style)}}addLines(s){const t=this.canvas;this.lineList.length==0&&Promise.resolve().then(()=>{const{center:n,percentage:e,gridConfig:o}=t;o.count;const i=[],c=1e3;for(let r=0;r<this.lineList.length;r+=c)i.push(this.lineList.slice(r,r+c));i.forEach(r=>{J({type:"line",list:r,config:{gridConfig:o,percentage:e,center:n}},a=>{a&&(a.forEach((f,l)=>{this.lineMap.has(l)?this.lineMap.set(l,this.lineMap.get(l).concat(f)):this.lineMap.set(l,f)}),t.redrawOnce())})}),this.lineList=[]}),this.lineList=this.lineList.concat(s)}fetchDrawFunctions(){const{show:s,canvas:t}=this,{ctx:n}=t;return!n||!s?[]:Array.from(this.lineMap.keys()).map(o=>[o,()=>this.drawLines(this.lineMap.get(o))])}clearAllLines(){this.lineMap.clear()}}class ae{constructor(s){u(this,"canvas");u(this,"show",!0);u(this,"polygonMap",new Map);u(this,"polygonList",[]);this.canvas=s}color(){const{theme:s,style:t}=this.canvas;return(t[s]||t.light).polygon}addLines(s){const t=this.canvas;this.polygonList.length==0&&Promise.resolve().then(()=>{const{center:n,percentage:e,gridConfig:o}=t;o.count;const i=[],c=1e3;for(let r=0;r<this.polygonList.length;r+=c)i.push(this.polygonList.slice(r,r+c));this.polygonList=[]}),this.polygonList=this.polygonList.concat(s)}}class ce extends ne{constructor(s){super(s),this.drawGrid=new se(this),this.drawPoint=new ie(this),this.drawLine=new re(this),this.drawPolygon=new ae(this),this.updateCenter()}destroy(){super.destroy()}}function le(h,s){if(typeof h!="function")throw new Error("The first argument must be a function.");if(!Array.isArray(s))throw new Error("The second argument must be an array.");let t=[],n=10,e=0;const o=(i,c)=>{for(const[r,a]of c)if(i>=r)return a;return"black"};return function(...i){const c=performance.now(),r=h(...i),a=performance.now()-c;t.push(a),t.length>n&&t.shift(),e=t.reduce((p,m)=>p+m,0)/t.length||0;const f=o(a,s),l=o(e,s);return console.log(`%c单次耗时：${a.toFixed(2)}ms
%c平均耗时（${t.length}次）：${e.toFixed(2)}ms`,`color: ${f}; padding: 2px 0;`,`color: ${l}; padding: 2px 0;`),r}}const de={};function he(h,s){return null}const ue=Z(de,[["render",he]]),fe={class:"graphing-equations"},me=["id"],pe={class:"button-box"},ge=O({__name:"index",setup(h){const s=Zt(),t=xt("canvas-");let n;const e=j(()=>{const i=N.value.theme;return{color:i==="dark"?"#666":"#ededed","text-color":i==="dark"?"#ededed":"#666",style:{"--n-color-hover":i==="dark"?"rgba(126, 126, 126, 1)":"#fff"}}});yt(()=>N.value.theme,i=>n.setTheme(i));const o=new Image(200,300);return o.src="https://fastly.picsum.photos/id/440/200/300.jpg?hmac=3Nx5MHMCVguEcZQ1M3RnSrCpHNn9sabFI5y6aYzvceQ",o.onload=()=>{n==null||n.redrawOnce()},wt(()=>{n=new ce(t),n.setTheme(N.value.theme)}),vt(()=>{n.destroy()}),(i,c)=>(I(),F("div",fe,[L("nav",null,[k(v(Mt),{href:"https://www.desmos.com/calculator?lang=zh-CN",target:"_blank"},{default:T(()=>[W(" 希望达到的目标！ desmos ")]),_:1}),k(ue)]),L("canvas",{id:v(t)},null,8,me),L("div",pe,[k(v(bt),{vertical:""},{default:T(()=>[k(v(Lt),{vertical:""},{default:T(()=>[k(v(G),B(e.value,{onClick:c[0]||(c[0]=r=>{var a;return(a=v(n))==null?void 0:a.zoomIn()})}),{icon:T(()=>[k(v(D),{component:v(kt)},null,8,["component"])]),_:1},16),k(v(G),B(e.value,{onClick:c[1]||(c[1]=r=>{var a;return(a=v(n))==null?void 0:a.zoomOut()})}),{icon:T(()=>[k(v(D),{component:v(Ht)},null,8,["component"])]),_:1},16)]),_:1}),k(v(G),B(e.value,{onClick:c[2]||(c[2]=r=>{var a;return(a=v(n))==null?void 0:a.reset()})}),{icon:T(()=>[k(v(D),{component:v(Yt)},null,8,["component"])]),_:1},16),k(v(G),B(e.value,{onClick:c[3]||(c[3]=r=>{var a;return(a=v(n))==null?void 0:a.toggleGrid()})}),{icon:T(()=>[k(v(D),{component:v(Bt)},null,8,["component"])]),_:1},16)]),_:1}),k(v(Pt),{class:"fps",type:v(s)>60?"success":v(s)>30?"warning":"error"},{default:T(()=>[W(Ct(v(s)),1)]),_:1},8,["type"])])]))}}),Ce=Z(ge,[["__scopeId","data-v-130c84da"]]);export{Ce as default};
