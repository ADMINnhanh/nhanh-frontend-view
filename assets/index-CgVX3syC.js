import{m as Tt,k as z,bo as Ze,bp as je,bq as qe,br as Je,bs as He,bt as ot,bu as Qe,d as ye,J as ge,a9 as at,a8 as st,z as le,n as Kt,q as Ge,V as Jt,bv as ft,bw as jt,bx as Mt,by as Ht,aj as Cr,Q as pe,p as Y,an as tn,ap as he,R as fe,ax as Sr,v as Pt,x as Xe,bz as rn,K as Qt,E as be,U as Wt,C as Rr,X as At,F as Ot,aA as nn,a0 as Vt,aH as on,aB as an,aC as sn,aD as ln,au as un,aE as cn,aF as dn,I as nt,B as Be,D as zr,aq as hn,ar as fn,W as pn,bA as mn,aw as vt,a5 as et,$ as De,bB as Br,bC as Ar,bD as Er,bE as Ir,bF as gn,bm as vn,Y as bn,bG as yn,bH as Dr,ag as wn,ad as _n,bI as sr,ao as xn,bJ as kn,bK as Cn,Z as St,at as lr,o as $e,c as it,aM as Te,aP as er,aW as Rt,aX as Tr,bL as ur,bM as wt,av as Sn,ah as Rn,a as ze,w as Se,u as de,aY as zn,e as Le,aS as Ft,bN as Bn,bO as An,bP as En,aR as Lt,aU as In,t as Nt,bj as Dn,bQ as Tn,_ as Pn}from"./index-0eR8rf1o.js";import{N as Pr,E as On}from"./Input-CsNQ-GB8.js";import{N as Un}from"./InputGroup-CRc95vwl.js";import{u as Fn}from"./use-locale-u8nGuLbf.js";import{N as Ln}from"./a-BZMIrnxL.js";import{N as Nn,D as $n,a as jn}from"./Image-QkNWt_FW.js";import{d as Mn}from"./download-C2161hUv.js";import{S as Hn}from"./Scrollbar-CUM-NfoG.js";import{N as Wn}from"./Switch-BqltzzjQ.js";import"./Suffix-DYHC_l41.js";function Or(e,m,r){m/=100,r/=100;const u=m*Math.min(r,1-r)+r;return[e,u?(2-2*r/u)*100:0,u*100]}function zt(e,m,r){m/=100,r/=100;const u=r-r*m/2,s=Math.min(u,1-u);return[e,s?(r-u)/s*100:0,u*100]}function We(e,m,r){m/=100,r/=100;let u=(s,n=(s+e/60)%6)=>r-r*m*Math.max(Math.min(n,4-n,1),0);return[u(5)*255,u(3)*255,u(1)*255]}function Zt(e,m,r){e/=255,m/=255,r/=255;let u=Math.max(e,m,r),s=u-Math.min(e,m,r),n=s&&(u==e?(m-r)/s:u==m?2+(r-e)/s:4+(e-m)/s);return[60*(n<0?n+6:n),u&&s/u*100,u*100]}function qt(e,m,r){e/=255,m/=255,r/=255;let u=Math.max(e,m,r),s=u-Math.min(e,m,r),n=1-Math.abs(u+u-s-1),i=s&&(u==e?(m-r)/s:u==m?2+(r-e)/s:4+(e-m)/s);return[60*(i<0?i+6:i),n?s/n*100:0,(u+u-s)*50]}function Gt(e,m,r){m/=100,r/=100;let u=m*Math.min(r,1-r),s=(n,i=(n+e/30)%12)=>r-u*Math.max(Math.min(i-3,9-i,1),-1);return[s(0)*255,s(8)*255,s(4)*255]}const Vn=Tt("attach",z("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},z("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},z("g",{fill:"currentColor","fill-rule":"nonzero"},z("path",{d:"M3.25735931,8.70710678 L7.85355339,4.1109127 C8.82986412,3.13460197 10.4127766,3.13460197 11.3890873,4.1109127 C12.365398,5.08722343 12.365398,6.67013588 11.3890873,7.64644661 L6.08578644,12.9497475 C5.69526215,13.3402718 5.06209717,13.3402718 4.67157288,12.9497475 C4.28104858,12.5592232 4.28104858,11.9260582 4.67157288,11.5355339 L9.97487373,6.23223305 C10.1701359,6.0369709 10.1701359,5.72038841 9.97487373,5.52512627 C9.77961159,5.32986412 9.4630291,5.32986412 9.26776695,5.52512627 L3.96446609,10.8284271 C3.18341751,11.6094757 3.18341751,12.8758057 3.96446609,13.6568542 C4.74551468,14.4379028 6.01184464,14.4379028 6.79289322,13.6568542 L12.0961941,8.35355339 C13.4630291,6.98671837 13.4630291,4.77064094 12.0961941,3.40380592 C10.7293591,2.0369709 8.51328163,2.0369709 7.14644661,3.40380592 L2.55025253,8 C2.35499039,8.19526215 2.35499039,8.51184464 2.55025253,8.70710678 C2.74551468,8.90236893 3.06209717,8.90236893 3.25735931,8.70710678 Z"}))))),Zn=Tt("trash",z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},z("path",{d:"M432,144,403.33,419.74A32,32,0,0,1,371.55,448H140.46a32,32,0,0,1-31.78-28.26L80,144",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),z("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),z("line",{x1:"312",y1:"240",x2:"200",y2:"352",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),z("line",{x1:"312",y1:"352",x2:"200",y2:"240",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),qn=Tt("cancel",z("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},z("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},z("g",{fill:"currentColor","fill-rule":"nonzero"},z("path",{d:"M2.58859116,2.7156945 L2.64644661,2.64644661 C2.82001296,2.47288026 3.08943736,2.45359511 3.2843055,2.58859116 L3.35355339,2.64644661 L8,7.293 L12.6464466,2.64644661 C12.8417088,2.45118446 13.1582912,2.45118446 13.3535534,2.64644661 C13.5488155,2.84170876 13.5488155,3.15829124 13.3535534,3.35355339 L8.707,8 L13.3535534,12.6464466 C13.5271197,12.820013 13.5464049,13.0894374 13.4114088,13.2843055 L13.3535534,13.3535534 C13.179987,13.5271197 12.9105626,13.5464049 12.7156945,13.4114088 L12.6464466,13.3535534 L8,8.707 L3.35355339,13.3535534 C3.15829124,13.5488155 2.84170876,13.5488155 2.64644661,13.3535534 C2.45118446,13.1582912 2.45118446,12.8417088 2.64644661,12.6464466 L7.293,8 L2.64644661,3.35355339 C2.47288026,3.17998704 2.45359511,2.91056264 2.58859116,2.7156945 L2.64644661,2.64644661 L2.58859116,2.7156945 Z"}))))),Gn=Tt("retry",z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},z("path",{d:"M320,146s24.36-12-64-12A160,160,0,1,0,416,294",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-miterlimit: 10; stroke-width: 32px;"}),z("polyline",{points:"256 58 336 138 256 218",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"})));function Xn(e,m){switch(e[0]){case"hex":return m?"#000000FF":"#000000";case"rgb":return m?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return m?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return m?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return"#000000"}function pt(e){return e===null?null:/^ *#/.test(e)?"hex":e.includes("rgb")?"rgb":e.includes("hsl")?"hsl":e.includes("hsv")?"hsv":null}function Yn(e){return e=Math.round(e),e>=360?359:e<0?0:e}function Kn(e){return e=Math.round(e*100)/100,e>1?1:e<0?0:e}const Jn={rgb:{hex(e){return Ze(je(e))},hsl(e){const[m,r,u,s]=je(e);return qe([...qt(m,r,u),s])},hsv(e){const[m,r,u,s]=je(e);return Je([...Zt(m,r,u),s])}},hex:{rgb(e){return He(je(e))},hsl(e){const[m,r,u,s]=je(e);return qe([...qt(m,r,u),s])},hsv(e){const[m,r,u,s]=je(e);return Je([...Zt(m,r,u),s])}},hsl:{hex(e){const[m,r,u,s]=ot(e);return Ze([...Gt(m,r,u),s])},rgb(e){const[m,r,u,s]=ot(e);return He([...Gt(m,r,u),s])},hsv(e){const[m,r,u,s]=ot(e);return Je([...Or(m,r,u),s])}},hsv:{hex(e){const[m,r,u,s]=Qe(e);return Ze([...We(m,r,u),s])},rgb(e){const[m,r,u,s]=Qe(e);return He([...We(m,r,u),s])},hsl(e){const[m,r,u,s]=Qe(e);return qe([...zt(m,r,u),s])}}};function Ur(e,m,r){return r=r||pt(e),r?r===m?e:Jn[r][m](e):null}const tt="12px",Qn=12,Ye="6px",ei=6,ti="linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",ri=ye({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(e){const m=ge(null);function r(n){m.value&&(at("mousemove",document,u),at("mouseup",document,s),u(n))}function u(n){const{value:i}=m;if(!i)return;const{width:t,left:a}=i.getBoundingClientRect(),c=Yn((n.clientX-a-ei)/(t-Qn)*360);e.onUpdateHue(c)}function s(){var n;st("mousemove",document,u),st("mouseup",document,s),(n=e.onComplete)===null||n===void 0||n.call(e)}return{railRef:m,handleMouseDown:r}},render(){const{clsPrefix:e}=this;return z("div",{class:`${e}-color-picker-slider`,style:{height:tt,borderRadius:Ye}},z("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:ti,height:tt,borderRadius:Ye,position:"relative"},onMousedown:this.handleMouseDown},z("div",{style:{position:"absolute",left:Ye,right:Ye,top:0,bottom:0}},z("div",{class:`${e}-color-picker-handle`,style:{left:`calc((${this.hue}%) / 359 * 100 - ${Ye})`,borderRadius:Ye,width:tt,height:tt}},z("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:`hsl(${this.hue}, 100%, 50%)`,borderRadius:Ye,width:tt,height:tt}})))))}}),ht="12px",ni=12,Ke="6px",ii=ye({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(e){const m=ge(null);function r(n){!m.value||!e.rgba||(at("mousemove",document,u),at("mouseup",document,s),u(n))}function u(n){const{value:i}=m;if(!i)return;const{width:t,left:a}=i.getBoundingClientRect(),c=(n.clientX-a)/(t-ni);e.onUpdateAlpha(Kn(c))}function s(){var n;st("mousemove",document,u),st("mouseup",document,s),(n=e.onComplete)===null||n===void 0||n.call(e)}return{railRef:m,railBackgroundImage:le(()=>{const{rgba:n}=e;return n?`linear-gradient(to right, rgba(${n[0]}, ${n[1]}, ${n[2]}, 0) 0%, rgba(${n[0]}, ${n[1]}, ${n[2]}, 1) 100%)`:""}),handleMouseDown:r}},render(){const{clsPrefix:e}=this;return z("div",{class:`${e}-color-picker-slider`,ref:"railRef",style:{height:ht,borderRadius:Ke},onMousedown:this.handleMouseDown},z("div",{style:{borderRadius:Ke,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},z("div",{class:`${e}-color-picker-checkboard`}),z("div",{class:`${e}-color-picker-slider__image`,style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&z("div",{style:{position:"absolute",left:Ke,right:Ke,top:0,bottom:0}},z("div",{class:`${e}-color-picker-handle`,style:{left:`calc(${this.alpha*100}% - ${Ke})`,borderRadius:Ke,width:ht,height:ht}},z("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:He(this.rgba),borderRadius:Ke,width:ht,height:ht}}))))}}),_t="12px",xt="6px",oi=ye({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(e){const m=ge(null);function r(n){m.value&&(at("mousemove",document,u),at("mouseup",document,s),u(n))}function u(n){const{value:i}=m;if(!i)return;const{width:t,height:a,left:c,bottom:p}=i.getBoundingClientRect(),v=(p-n.clientY)/a,_=(n.clientX-c)/t,f=100*(_>1?1:_<0?0:_),y=100*(v>1?1:v<0?0:v);e.onUpdateSV(f,y)}function s(){var n;st("mousemove",document,u),st("mouseup",document,s),(n=e.onComplete)===null||n===void 0||n.call(e)}return{palleteRef:m,handleColor:le(()=>{const{rgba:n}=e;return n?`rgb(${n[0]}, ${n[1]}, ${n[2]})`:""}),handleMouseDown:r}},render(){const{clsPrefix:e}=this;return z("div",{class:`${e}-color-picker-pallete`,onMousedown:this.handleMouseDown,ref:"palleteRef"},z("div",{class:`${e}-color-picker-pallete__layer`,style:{backgroundImage:`linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`}}),z("div",{class:`${e}-color-picker-pallete__layer ${e}-color-picker-pallete__layer--shadowed`,style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&z("div",{class:`${e}-color-picker-handle`,style:{width:_t,height:_t,borderRadius:xt,left:`calc(${this.displayedSv[0]}% - ${xt})`,bottom:`calc(${this.displayedSv[1]}% - ${xt})`}},z("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:this.handleColor,borderRadius:xt,width:_t,height:_t}})))}}),tr=Kt("n-color-picker");function ai(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),255)):!1}function si(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),360)):!1}function li(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),100)):!1}function ui(e){const m=e.trim();return/^#[0-9a-fA-F]+$/.test(m)?[4,5,7,9].includes(m.length):!1}function ci(e){return/^\d{1,3}\.?\d*%$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e)/100,100)):!1}const di={paddingSmall:"0 4px"},cr=ye({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(e){const m=ge(""),{themeRef:r}=Ge(tr,null);Jt(()=>{m.value=u()});function u(){const{value:i}=e;if(i===null)return"";const{label:t}=e;return t==="HEX"?i:t==="A"?`${Math.floor(i*100)}%`:String(Math.floor(i))}function s(i){m.value=i}function n(i){let t,a;switch(e.label){case"HEX":a=ui(i),a&&e.onUpdateValue(i),m.value=u();break;case"H":t=si(i),t===!1?m.value=u():e.onUpdateValue(t);break;case"S":case"L":case"V":t=li(i),t===!1?m.value=u():e.onUpdateValue(t);break;case"A":t=ci(i),t===!1?m.value=u():e.onUpdateValue(t);break;case"R":case"G":case"B":t=ai(i),t===!1?m.value=u():e.onUpdateValue(t);break}}return{mergedTheme:r,inputValue:m,handleInputChange:n,handleInputUpdateValue:s}},render(){const{mergedTheme:e}=this;return z(Pr,{size:"small",placeholder:this.label,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,builtinThemeOverrides:di,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:this.label==="A"?"flex-grow: 1.25;":""})}}),hi=ye({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup(e){return{handleUnitUpdateValue(m,r){const{showAlpha:u}=e;if(e.mode==="hex"){e.onUpdateValue((u?Ze:ft)(r));return}let s;switch(e.valueArr===null?s=[0,0,0,0]:s=Array.from(e.valueArr),e.mode){case"hsv":s[m]=r,e.onUpdateValue((u?Je:Ht)(s));break;case"rgb":s[m]=r,e.onUpdateValue((u?He:Mt)(s));break;case"hsl":s[m]=r,e.onUpdateValue((u?qe:jt)(s));break}}}},render(){const{clsPrefix:e,modes:m}=this;return z("div",{class:`${e}-color-picker-input`},z("div",{class:`${e}-color-picker-input__mode`,onClick:this.onUpdateMode,style:{cursor:m.length===1?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),z(Un,null,{default:()=>{const{mode:r,valueArr:u,showAlpha:s}=this;if(r==="hex"){let n=null;try{n=u===null?null:(s?Ze:ft)(u)}catch{}return z(cr,{label:"HEX",showAlpha:s,value:n,onUpdateValue:i=>{this.handleUnitUpdateValue(0,i)}})}return(r+(s?"a":"")).split("").map((n,i)=>z(cr,{label:n.toUpperCase(),value:u===null?null:u[i],onUpdateValue:t=>{this.handleUnitUpdateValue(i,t)}}))}}))}}),fi=ye({name:"ColorPickerTrigger",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(e){const{colorPickerSlots:m,renderLabelRef:r}=Ge(tr,null);return()=>{const{hsla:u,value:s,clsPrefix:n,onClick:i,disabled:t}=e,a=m.label||r.value;return z("div",{class:[`${n}-color-picker-trigger`,t&&`${n}-color-picker-trigger--disabled`],onClick:t?void 0:i},z("div",{class:`${n}-color-picker-trigger__fill`},z("div",{class:`${n}-color-picker-checkboard`}),z("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:u?qe(u):""}}),s&&u?z("div",{class:`${n}-color-picker-trigger__value`,style:{color:u[2]>50||u[3]<.5?"black":"white"}},a?a(s):s):null))}}});function pi(e,m){if(m==="hsv"){const[r,u,s,n]=Qe(e);return He([...We(r,u,s),n])}return e}function mi(e){const m=document.createElement("canvas").getContext("2d");return m?(m.fillStyle=e,m.fillStyle):"#000000"}const gi=ye({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(e){const m=le(()=>e.swatches.map(n=>{const i=pt(n);return{value:n,mode:i,legalValue:pi(n,i)}}));function r(n){const{mode:i}=e;let{value:t,mode:a}=n;return a||(a="hex",/^[a-zA-Z]+$/.test(t)?t=mi(t):(Cr("color-picker",`color ${t} in swatches is invalid.`),t="#000000")),a===i?t:Ur(t,i,a)}function u(n){e.onUpdateColor(r(n))}function s(n,i){n.key==="Enter"&&u(i)}return{parsedSwatchesRef:m,handleSwatchSelect:u,handleSwatchKeyDown:s}},render(){const{clsPrefix:e}=this;return z("div",{class:`${e}-color-picker-swatches`},this.parsedSwatchesRef.map(m=>z("div",{class:`${e}-color-picker-swatch`,tabindex:0,onClick:()=>{this.handleSwatchSelect(m)},onKeydown:r=>{this.handleSwatchKeyDown(r,m)}},z("div",{class:`${e}-color-picker-swatch__fill`,style:{background:m.legalValue}}))))}}),vi=ye({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:e=>{const m=pt(e);return!!(!e||m&&m!=="hsv")}},onUpdateColor:{type:Function,required:!0}},setup(e){function m(r){var u;const s=r.target.value;(u=e.onUpdateColor)===null||u===void 0||u.call(e,Ur(s.toUpperCase(),e.mode,"hex")),r.stopPropagation()}return{handleChange:m}},render(){const{clsPrefix:e}=this;return z("div",{class:`${e}-color-picker-preview__preview`},z("span",{class:`${e}-color-picker-preview__fill`,style:{background:this.color||"#000000"}}),z("input",{class:`${e}-color-picker-preview__input`,type:"color",value:this.color,onChange:this.handleChange}))}}),bi=pe([Y("color-picker",`
 display: inline-block;
 box-sizing: border-box;
 height: var(--n-height);
 font-size: var(--n-font-size);
 width: 100%;
 position: relative;
 `),Y("color-picker-panel",`
 margin: 4px 0;
 width: 240px;
 font-size: var(--n-panel-font-size);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition:
 box-shadow .3s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 `,[tn(),Y("input",`
 text-align: center;
 `)]),Y("color-picker-checkboard",`
 background: white; 
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[pe("&::after",`
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 12px 12px;
 background-position: 0 0, 0 6px, 6px -6px, -6px 0px;
 background-repeat: repeat;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),Y("color-picker-slider",`
 margin-bottom: 8px;
 position: relative;
 box-sizing: border-box;
 `,[he("image",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `),pe("&::after",`
 content: "";
 position: absolute;
 border-radius: inherit;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 pointer-events: none;
 `)]),Y("color-picker-handle",`
 z-index: 1;
 box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);
 position: absolute;
 background-color: white;
 overflow: hidden;
 `,[he("fill",`
 box-sizing: border-box;
 border: 2px solid white;
 `)]),Y("color-picker-pallete",`
 height: 180px;
 position: relative;
 margin-bottom: 8px;
 cursor: crosshair;
 `,[he("layer",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[fe("shadowed",`
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 `)])]),Y("color-picker-preview",`
 display: flex;
 `,[he("sliders",`
 flex: 1 0 auto;
 `),he("preview",`
 position: relative;
 height: 30px;
 width: 30px;
 margin: 0 0 8px 6px;
 border-radius: 50%;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 overflow: hidden;
 `),he("fill",`
 display: block;
 width: 30px;
 height: 30px;
 `),he("input",`
 position: absolute;
 top: 0;
 left: 0;
 width: 30px;
 height: 30px;
 opacity: 0;
 z-index: 1;
 `)]),Y("color-picker-input",`
 display: flex;
 align-items: center;
 `,[Y("input",`
 flex-grow: 1;
 flex-basis: 0;
 `),he("mode",`
 width: 72px;
 text-align: center;
 `)]),Y("color-picker-control",`
 padding: 12px;
 `),Y("color-picker-action",`
 display: flex;
 margin-top: -4px;
 border-top: 1px solid var(--n-divider-color);
 padding: 8px 12px;
 justify-content: flex-end;
 `,[Y("button","margin-left: 8px;")]),Y("color-picker-trigger",`
 border: var(--n-border);
 height: 100%;
 box-sizing: border-box;
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 cursor: pointer;
 `,[he("value",`
 white-space: nowrap;
 position: relative;
 `),he("fill",`
 border-radius: var(--n-border-radius);
 position: absolute;
 display: flex;
 align-items: center;
 justify-content: center;
 left: 4px;
 right: 4px;
 top: 4px;
 bottom: 4px;
 `),fe("disabled","cursor: not-allowed"),Y("color-picker-checkboard",`
 border-radius: var(--n-border-radius);
 `,[pe("&::after",`
 --n-block-size: calc((var(--n-height) - 8px) / 3);
 background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);
 background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; 
 `)])]),Y("color-picker-swatches",`
 display: grid;
 grid-gap: 8px;
 flex-wrap: wrap;
 position: relative;
 grid-template-columns: repeat(auto-fill, 18px);
 margin-top: 10px;
 `,[Y("color-picker-swatch",`
 width: 18px;
 height: 18px;
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 8px 8px;
 background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;
 background-repeat: repeat;
 `,[he("fill",`
 position: relative;
 width: 100%;
 height: 100%;
 border-radius: 3px;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 cursor: pointer;
 `),pe("&:focus",`
 outline: none;
 `,[he("fill",[pe("&::after",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 background: inherit;
 filter: blur(2px);
 content: "";
 `)])])])])]),yi=Object.assign(Object.assign({},Xe.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:Vt.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,onClear:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),wi=ye({name:"ColorPicker",props:yi,setup(e,{slots:m}){const r=ge(null);let u=null;const s=Sr(e),{mergedSizeRef:n,mergedDisabledRef:i}=s,{localeRef:t}=Fn("global"),{mergedClsPrefixRef:a,namespaceRef:c,inlineThemeDisabled:p}=Pt(e),v=Xe("ColorPicker","-color-picker",bi,rn,e,a);Qt(tr,{themeRef:v,renderLabelRef:be(e,"renderLabel"),colorPickerSlots:m});const _=ge(e.defaultShow),f=Wt(be(e,"show"),_);function y(h){const{onUpdateShow:R,"onUpdate:show":L}=e;R&&nt(R,h),L&&nt(L,h),_.value=h}const{defaultValue:d}=e,b=ge(d===void 0?Xn(e.modes,e.showAlpha):d),g=Wt(be(e,"value"),b),w=ge([g.value]),S=ge(0),A=le(()=>pt(g.value)),{modes:C}=e,D=ge(pt(g.value)||C[0]||"rgb");function I(){const{modes:h}=e,{value:R}=D,L=h.findIndex(N=>N===R);~L?D.value=h[(L+1)%h.length]:D.value="rgb"}let H,B,j,X,k,U,l,F;const K=le(()=>{const{value:h}=g;if(!h)return null;switch(A.value){case"hsv":return Qe(h);case"hsl":return[H,B,j,F]=ot(h),[...Or(H,B,j),F];case"rgb":case"hex":return[k,U,l,F]=je(h),[...Zt(k,U,l),F]}}),M=le(()=>{const{value:h}=g;if(!h)return null;switch(A.value){case"rgb":case"hex":return je(h);case"hsv":return[H,B,X,F]=Qe(h),[...We(H,B,X),F];case"hsl":return[H,B,j,F]=ot(h),[...Gt(H,B,j),F]}}),te=le(()=>{const{value:h}=g;if(!h)return null;switch(A.value){case"hsl":return ot(h);case"hsv":return[H,B,X,F]=Qe(h),[...zt(H,B,X),F];case"rgb":case"hex":return[k,U,l,F]=je(h),[...qt(k,U,l),F]}}),Z=le(()=>{switch(D.value){case"rgb":case"hex":return M.value;case"hsv":return K.value;case"hsl":return te.value}}),ne=ge(0),O=ge(1),T=ge([0,0]);function re(h,R){const{value:L}=K,N=ne.value,E=L?L[3]:1;T.value=[h,R];const{showAlpha:W}=e;switch(D.value){case"hsv":oe((W?Je:Ht)([N,h,R,E]),"cursor");break;case"hsl":oe((W?qe:jt)([...zt(N,h,R),E]),"cursor");break;case"rgb":oe((W?He:Mt)([...We(N,h,R),E]),"cursor");break;case"hex":oe((W?Ze:ft)([...We(N,h,R),E]),"cursor");break}}function J(h){ne.value=h;const{value:R}=K;if(!R)return;const[,L,N,E]=R,{showAlpha:W}=e;switch(D.value){case"hsv":oe((W?Je:Ht)([h,L,N,E]),"cursor");break;case"rgb":oe((W?He:Mt)([...We(h,L,N),E]),"cursor");break;case"hex":oe((W?Ze:ft)([...We(h,L,N),E]),"cursor");break;case"hsl":oe((W?qe:jt)([...zt(h,L,N),E]),"cursor");break}}function G(h){switch(D.value){case"hsv":[H,B,X]=K.value,oe(Je([H,B,X,h]),"cursor");break;case"rgb":[k,U,l]=M.value,oe(He([k,U,l,h]),"cursor");break;case"hex":[k,U,l]=M.value,oe(Ze([k,U,l,h]),"cursor");break;case"hsl":[H,B,j]=te.value,oe(qe([H,B,j,h]),"cursor");break}O.value=h}function oe(h,R){R==="cursor"?u=h:u=null;const{nTriggerFormChange:L,nTriggerFormInput:N}=s,{onUpdateValue:E,"onUpdate:value":W}=e;E&&nt(E,h),W&&nt(W,h),L(),N(),b.value=h}function Ce(h){oe(h,"input"),zr(ie)}function ie(h=!0){const{value:R}=g;if(R){const{nTriggerFormChange:L,nTriggerFormInput:N}=s,{onComplete:E}=e;E&&E(R);const{value:W}=w,{value:q}=S;h&&(W.splice(q+1,W.length,R),S.value=q+1),L(),N()}}function ue(){const{value:h}=S;h-1<0||(oe(w.value[h-1],"input"),ie(!1),S.value=h-1)}function xe(){const{value:h}=S;h<0||h+1>=w.value.length||(oe(w.value[h+1],"input"),ie(!1),S.value=h+1)}function we(){oe(null,"input");const{onClear:h}=e;h&&h(),y(!1)}function Ae(){const{value:h}=g,{onConfirm:R}=e;R&&R(h),y(!1)}const Re=le(()=>S.value>=1),o=le(()=>{const{value:h}=w;return h.length>1&&S.value<h.length-1});Rr(f,h=>{h||(w.value=[g.value],S.value=0)}),Jt(()=>{if(!(u&&u===g.value)){const{value:h}=K;h&&(ne.value=h[0],O.value=h[3],T.value=[h[1],h[2]])}u=null});const $=le(()=>{const{value:h}=n,{common:{cubicBezierEaseInOut:R},self:{textColor:L,color:N,panelFontSize:E,boxShadow:W,border:q,borderRadius:V,dividerColor:ee,[At("height",h)]:me,[At("fontSize",h)]:se}}=v.value;return{"--n-bezier":R,"--n-text-color":L,"--n-color":N,"--n-panel-font-size":E,"--n-font-size":se,"--n-box-shadow":W,"--n-border":q,"--n-border-radius":V,"--n-height":me,"--n-divider-color":ee}}),P=p?Ot("color-picker",le(()=>n.value[0]),$,e):void 0;function x(){var h;const{value:R}=M,{value:L}=ne,{internalActions:N,modes:E,actions:W}=e,{value:q}=v,{value:V}=a;return z("div",{class:[`${V}-color-picker-panel`,P==null?void 0:P.themeClass.value],onDragstart:ee=>{ee.preventDefault()},style:p?void 0:$.value},z("div",{class:`${V}-color-picker-control`},z(oi,{clsPrefix:V,rgba:R,displayedHue:L,displayedSv:T.value,onUpdateSV:re,onComplete:ie}),z("div",{class:`${V}-color-picker-preview`},z("div",{class:`${V}-color-picker-preview__sliders`},z(ri,{clsPrefix:V,hue:L,onUpdateHue:J,onComplete:ie}),e.showAlpha?z(ii,{clsPrefix:V,rgba:R,alpha:O.value,onUpdateAlpha:G,onComplete:ie}):null),e.showPreview?z(vi,{clsPrefix:V,mode:D.value,color:M.value&&ft(M.value),onUpdateColor:ee=>{oe(ee,"input")}}):null),z(hi,{clsPrefix:V,showAlpha:e.showAlpha,mode:D.value,modes:E,onUpdateMode:I,value:g.value,valueArr:Z.value,onUpdateValue:Ce}),((h=e.swatches)===null||h===void 0?void 0:h.length)&&z(gi,{clsPrefix:V,mode:D.value,swatches:e.swatches,onUpdateColor:ee=>{oe(ee,"input")}})),W!=null&&W.length?z("div",{class:`${V}-color-picker-action`},W.includes("confirm")&&z(Be,{size:"small",onClick:Ae,theme:q.peers.Button,themeOverrides:q.peerOverrides.Button},{default:()=>t.value.confirm}),W.includes("clear")&&z(Be,{size:"small",onClick:we,disabled:!g.value,theme:q.peers.Button,themeOverrides:q.peerOverrides.Button},{default:()=>t.value.clear})):null,m.action?z("div",{class:`${V}-color-picker-action`},{default:m.action}):N?z("div",{class:`${V}-color-picker-action`},N.includes("undo")&&z(Be,{size:"small",onClick:ue,disabled:!Re.value,theme:q.peers.Button,themeOverrides:q.peerOverrides.Button},{default:()=>t.value.undo}),N.includes("redo")&&z(Be,{size:"small",onClick:xe,disabled:!o.value,theme:q.peers.Button,themeOverrides:q.peerOverrides.Button},{default:()=>t.value.redo})):null)}return{mergedClsPrefix:a,namespace:c,selfRef:r,hsla:te,rgba:M,mergedShow:f,mergedDisabled:i,isMounted:nn(),adjustedTo:Vt(e),mergedValue:g,handleTriggerClick(){y(!0)},handleClickOutside(h){var R;!((R=r.value)===null||R===void 0)&&R.contains(on(h))||y(!1)},renderPanel:x,cssVars:p?void 0:$,themeClass:P==null?void 0:P.themeClass,onRender:P==null?void 0:P.onRender}},render(){const{$slots:e,mergedClsPrefix:m,onRender:r}=this;return r==null||r(),z("div",{class:[this.themeClass,`${m}-color-picker`],ref:"selfRef",style:this.cssVars},z(an,null,{default:()=>[z(sn,null,{default:()=>z(fi,{clsPrefix:m,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick},{label:e.label})}),z(ln,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===Vt.tdkey,to:this.adjustedTo},{default:()=>z(un,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?cn(this.renderPanel(),[[dn,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}}),_i=pe([Y("list",`
 --n-merged-border-color: var(--n-border-color);
 --n-merged-color: var(--n-color);
 --n-merged-color-hover: var(--n-color-hover);
 margin: 0;
 font-size: var(--n-font-size);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 padding: 0;
 list-style-type: none;
 color: var(--n-text-color);
 background-color: var(--n-merged-color);
 `,[fe("show-divider",[Y("list-item",[pe("&:not(:last-child)",[he("divider",`
 background-color: var(--n-merged-border-color);
 `)])])]),fe("clickable",[Y("list-item",`
 cursor: pointer;
 `)]),fe("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `),fe("hoverable",[Y("list-item",`
 border-radius: var(--n-border-radius);
 `,[pe("&:hover",`
 background-color: var(--n-merged-color-hover);
 `,[he("divider",`
 background-color: transparent;
 `)])])]),fe("bordered, hoverable",[Y("list-item",`
 padding: 12px 20px;
 `),he("header, footer",`
 padding: 12px 20px;
 `)]),he("header, footer",`
 padding: 12px 0;
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
 `,[pe("&:not(:last-child)",`
 border-bottom: 1px solid var(--n-merged-border-color);
 `)]),Y("list-item",`
 position: relative;
 padding: 12px 0; 
 box-sizing: border-box;
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[he("prefix",`
 margin-right: 20px;
 flex: 0;
 `),he("suffix",`
 margin-left: 20px;
 flex: 0;
 `),he("main",`
 flex: 1;
 `),he("divider",`
 height: 1px;
 position: absolute;
 bottom: 0;
 left: 0;
 right: 0;
 background-color: transparent;
 transition: background-color .3s var(--n-bezier);
 pointer-events: none;
 `)])]),hn(Y("list",`
 --n-merged-color-hover: var(--n-color-hover-modal);
 --n-merged-color: var(--n-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `)),fn(Y("list",`
 --n-merged-color-hover: var(--n-color-hover-popover);
 --n-merged-color: var(--n-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `))]),xi=Object.assign(Object.assign({},Xe.props),{size:{type:String,default:"medium"},bordered:Boolean,clickable:Boolean,hoverable:Boolean,showDivider:{type:Boolean,default:!0}}),Fr=Kt("n-list"),ki=ye({name:"List",props:xi,setup(e){const{mergedClsPrefixRef:m,inlineThemeDisabled:r,mergedRtlRef:u}=Pt(e),s=pn("List",u,m),n=Xe("List","-list",_i,mn,e,m);Qt(Fr,{showDividerRef:be(e,"showDivider"),mergedClsPrefixRef:m});const i=le(()=>{const{common:{cubicBezierEaseInOut:a},self:{fontSize:c,textColor:p,color:v,colorModal:_,colorPopover:f,borderColor:y,borderColorModal:d,borderColorPopover:b,borderRadius:g,colorHover:w,colorHoverModal:S,colorHoverPopover:A}}=n.value;return{"--n-font-size":c,"--n-bezier":a,"--n-text-color":p,"--n-color":v,"--n-border-radius":g,"--n-border-color":y,"--n-border-color-modal":d,"--n-border-color-popover":b,"--n-color-modal":_,"--n-color-popover":f,"--n-color-hover":w,"--n-color-hover-modal":S,"--n-color-hover-popover":A}}),t=r?Ot("list",void 0,i,e):void 0;return{mergedClsPrefix:m,rtlEnabled:s,cssVars:r?void 0:i,themeClass:t==null?void 0:t.themeClass,onRender:t==null?void 0:t.onRender}},render(){var e;const{$slots:m,mergedClsPrefix:r,onRender:u}=this;return u==null||u(),z("ul",{class:[`${r}-list`,this.rtlEnabled&&`${r}-list--rtl`,this.bordered&&`${r}-list--bordered`,this.showDivider&&`${r}-list--show-divider`,this.hoverable&&`${r}-list--hoverable`,this.clickable&&`${r}-list--clickable`,this.themeClass],style:this.cssVars},m.header?z("div",{class:`${r}-list__header`},m.header()):null,(e=m.default)===null||e===void 0?void 0:e.call(m),m.footer?z("div",{class:`${r}-list__footer`},m.footer()):null)}}),Ci=ye({name:"ListItem",setup(){const e=Ge(Fr,null);return e||vt("list-item","`n-list-item` must be placed in `n-list`."),{showDivider:e.showDividerRef,mergedClsPrefix:e.mergedClsPrefixRef}},render(){const{$slots:e,mergedClsPrefix:m}=this;return z("li",{class:`${m}-list-item`},e.prefix?z("div",{class:`${m}-list-item__prefix`},e.prefix()):null,e.default?z("div",{class:`${m}-list-item__main`},e):null,e.suffix?z("div",{class:`${m}-list-item__suffix`},e.suffix()):null,this.showDivider&&z("div",{class:`${m}-list-item__divider`}))}}),Si=pe([Y("progress",{display:"inline-block"},[Y("progress-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 `),fe("line",`
 width: 100%;
 display: block;
 `,[Y("progress-content",`
 display: flex;
 align-items: center;
 `,[Y("progress-graph",{flex:1})]),Y("progress-custom-content",{marginLeft:"14px"}),Y("progress-icon",`
 width: 30px;
 padding-left: 14px;
 height: var(--n-icon-size-line);
 line-height: var(--n-icon-size-line);
 font-size: var(--n-icon-size-line);
 `,[fe("as-text",`
 color: var(--n-text-color-line-outer);
 text-align: center;
 width: 40px;
 font-size: var(--n-font-size);
 padding-left: 4px;
 transition: color .3s var(--n-bezier);
 `)])]),fe("circle, dashboard",{width:"120px"},[Y("progress-custom-content",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `),Y("progress-text",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: inherit;
 font-size: var(--n-font-size-circle);
 color: var(--n-text-color-circle);
 font-weight: var(--n-font-weight-circle);
 transition: color .3s var(--n-bezier);
 white-space: nowrap;
 `),Y("progress-icon",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: var(--n-icon-color);
 font-size: var(--n-icon-size-circle);
 `)]),fe("multiple-circle",`
 width: 200px;
 color: inherit;
 `,[Y("progress-text",`
 font-weight: var(--n-font-weight-circle);
 color: var(--n-text-color-circle);
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 transition: color .3s var(--n-bezier);
 `)]),Y("progress-content",{position:"relative"}),Y("progress-graph",{position:"relative"},[Y("progress-graph-circle",[pe("svg",{verticalAlign:"bottom"}),Y("progress-graph-circle-fill",`
 stroke: var(--n-fill-color);
 transition:
 opacity .3s var(--n-bezier),
 stroke .3s var(--n-bezier),
 stroke-dasharray .3s var(--n-bezier);
 `,[fe("empty",{opacity:0})]),Y("progress-graph-circle-rail",`
 transition: stroke .3s var(--n-bezier);
 overflow: hidden;
 stroke: var(--n-rail-color);
 `)]),Y("progress-graph-line",[fe("indicator-inside",[Y("progress-graph-line-rail",`
 height: 16px;
 line-height: 16px;
 border-radius: 10px;
 `,[Y("progress-graph-line-fill",`
 height: inherit;
 border-radius: 10px;
 `),Y("progress-graph-line-indicator",`
 background: #0000;
 white-space: nowrap;
 text-align: right;
 margin-left: 14px;
 margin-right: 14px;
 height: inherit;
 font-size: 12px;
 color: var(--n-text-color-line-inner);
 transition: color .3s var(--n-bezier);
 `)])]),fe("indicator-inside-label",`
 height: 16px;
 display: flex;
 align-items: center;
 `,[Y("progress-graph-line-rail",`
 flex: 1;
 transition: background-color .3s var(--n-bezier);
 `),Y("progress-graph-line-indicator",`
 background: var(--n-fill-color);
 font-size: 12px;
 transform: translateZ(0);
 display: flex;
 vertical-align: middle;
 height: 16px;
 line-height: 16px;
 padding: 0 10px;
 border-radius: 10px;
 position: absolute;
 white-space: nowrap;
 color: var(--n-text-color-line-inner);
 transition:
 right .2s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `)]),Y("progress-graph-line-rail",`
 position: relative;
 overflow: hidden;
 height: var(--n-rail-height);
 border-radius: 5px;
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 `,[Y("progress-graph-line-fill",`
 background: var(--n-fill-color);
 position: relative;
 border-radius: 5px;
 height: inherit;
 width: 100%;
 max-width: 0%;
 transition:
 background-color .3s var(--n-bezier),
 max-width .2s var(--n-bezier);
 `,[fe("processing",[pe("&::after",`
 content: "";
 background-image: var(--n-line-bg-processing);
 animation: progress-processing-animation 2s var(--n-bezier) infinite;
 `)])])])])])]),pe("@keyframes progress-processing-animation",`
 0% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 100%;
 opacity: 1;
 }
 66% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 100% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 `)]),Ri={success:z(Br,null),error:z(Ar,null),warning:z(Er,null),info:z(Ir,null)},zi=ye({name:"ProgressLine",props:{clsPrefix:{type:String,required:!0},percentage:{type:Number,default:0},railColor:String,railStyle:[String,Object],fillColor:String,status:{type:String,required:!0},indicatorPlacement:{type:String,required:!0},indicatorTextColor:String,unit:{type:String,default:"%"},processing:{type:Boolean,required:!0},showIndicator:{type:Boolean,required:!0},height:[String,Number],railBorderRadius:[String,Number],fillBorderRadius:[String,Number]},setup(e,{slots:m}){const r=le(()=>et(e.height)),u=le(()=>e.railBorderRadius!==void 0?et(e.railBorderRadius):e.height!==void 0?et(e.height,{c:.5}):""),s=le(()=>e.fillBorderRadius!==void 0?et(e.fillBorderRadius):e.railBorderRadius!==void 0?et(e.railBorderRadius):e.height!==void 0?et(e.height,{c:.5}):"");return()=>{const{indicatorPlacement:n,railColor:i,railStyle:t,percentage:a,unit:c,indicatorTextColor:p,status:v,showIndicator:_,fillColor:f,processing:y,clsPrefix:d}=e;return z("div",{class:`${d}-progress-content`,role:"none"},z("div",{class:`${d}-progress-graph`,"aria-hidden":!0},z("div",{class:[`${d}-progress-graph-line`,{[`${d}-progress-graph-line--indicator-${n}`]:!0}]},z("div",{class:`${d}-progress-graph-line-rail`,style:[{backgroundColor:i,height:r.value,borderRadius:u.value},t]},z("div",{class:[`${d}-progress-graph-line-fill`,y&&`${d}-progress-graph-line-fill--processing`],style:{maxWidth:`${e.percentage}%`,backgroundColor:f,height:r.value,lineHeight:r.value,borderRadius:s.value}},n==="inside"?z("div",{class:`${d}-progress-graph-line-indicator`,style:{color:p}},m.default?m.default():`${a}${c}`):null)))),_&&n==="outside"?z("div",null,m.default?z("div",{class:`${d}-progress-custom-content`,style:{color:p},role:"none"},m.default()):v==="default"?z("div",{role:"none",class:`${d}-progress-icon ${d}-progress-icon--as-text`,style:{color:p}},a,c):z("div",{class:`${d}-progress-icon`,"aria-hidden":!0},z(De,{clsPrefix:d},{default:()=>Ri[v]}))):null)}}}),Bi={success:z(Br,null),error:z(Ar,null),warning:z(Er,null),info:z(Ir,null)},Ai=ye({name:"ProgressCircle",props:{clsPrefix:{type:String,required:!0},status:{type:String,required:!0},strokeWidth:{type:Number,required:!0},fillColor:String,railColor:String,railStyle:[String,Object],percentage:{type:Number,default:0},offsetDegree:{type:Number,default:0},showIndicator:{type:Boolean,required:!0},indicatorTextColor:String,unit:String,viewBoxWidth:{type:Number,required:!0},gapDegree:{type:Number,required:!0},gapOffsetDegree:{type:Number,default:0}},setup(e,{slots:m}){function r(u,s,n){const{gapDegree:i,viewBoxWidth:t,strokeWidth:a}=e,c=50,p=0,v=c,_=0,f=2*c,y=50+a/2,d=`M ${y},${y} m ${p},${v}
      a ${c},${c} 0 1 1 ${_},${-f}
      a ${c},${c} 0 1 1 ${-_},${f}`,b=Math.PI*2*c,g={stroke:n,strokeDasharray:`${u/100*(b-i)}px ${t*8}px`,strokeDashoffset:`-${i/2}px`,transformOrigin:s?"center":void 0,transform:s?`rotate(${s}deg)`:void 0};return{pathString:d,pathStyle:g}}return()=>{const{fillColor:u,railColor:s,strokeWidth:n,offsetDegree:i,status:t,percentage:a,showIndicator:c,indicatorTextColor:p,unit:v,gapOffsetDegree:_,clsPrefix:f}=e,{pathString:y,pathStyle:d}=r(100,0,s),{pathString:b,pathStyle:g}=r(a,i,u),w=100+n;return z("div",{class:`${f}-progress-content`,role:"none"},z("div",{class:`${f}-progress-graph`,"aria-hidden":!0},z("div",{class:`${f}-progress-graph-circle`,style:{transform:_?`rotate(${_}deg)`:void 0}},z("svg",{viewBox:`0 0 ${w} ${w}`},z("g",null,z("path",{class:`${f}-progress-graph-circle-rail`,d:y,"stroke-width":n,"stroke-linecap":"round",fill:"none",style:d})),z("g",null,z("path",{class:[`${f}-progress-graph-circle-fill`,a===0&&`${f}-progress-graph-circle-fill--empty`],d:b,"stroke-width":n,"stroke-linecap":"round",fill:"none",style:g}))))),c?z("div",null,m.default?z("div",{class:`${f}-progress-custom-content`,role:"none"},m.default()):t!=="default"?z("div",{class:`${f}-progress-icon`,"aria-hidden":!0},z(De,{clsPrefix:f},{default:()=>Bi[t]})):z("div",{class:`${f}-progress-text`,style:{color:p},role:"none"},z("span",{class:`${f}-progress-text__percentage`},a),z("span",{class:`${f}-progress-text__unit`},v))):null)}}});function dr(e,m,r=100){return`m ${r/2} ${r/2-e} a ${e} ${e} 0 1 1 0 ${2*e} a ${e} ${e} 0 1 1 0 -${2*e}`}const Ei=ye({name:"ProgressMultipleCircle",props:{clsPrefix:{type:String,required:!0},viewBoxWidth:{type:Number,required:!0},percentage:{type:Array,default:[0]},strokeWidth:{type:Number,required:!0},circleGap:{type:Number,required:!0},showIndicator:{type:Boolean,required:!0},fillColor:{type:Array,default:()=>[]},railColor:{type:Array,default:()=>[]},railStyle:{type:Array,default:()=>[]}},setup(e,{slots:m}){const r=le(()=>e.percentage.map((s,n)=>`${Math.PI*s/100*(e.viewBoxWidth/2-e.strokeWidth/2*(1+2*n)-e.circleGap*n)*2}, ${e.viewBoxWidth*8}`));return()=>{const{viewBoxWidth:u,strokeWidth:s,circleGap:n,showIndicator:i,fillColor:t,railColor:a,railStyle:c,percentage:p,clsPrefix:v}=e;return z("div",{class:`${v}-progress-content`,role:"none"},z("div",{class:`${v}-progress-graph`,"aria-hidden":!0},z("div",{class:`${v}-progress-graph-circle`},z("svg",{viewBox:`0 0 ${u} ${u}`},p.map((_,f)=>z("g",{key:f},z("path",{class:`${v}-progress-graph-circle-rail`,d:dr(u/2-s/2*(1+2*f)-n*f,s,u),"stroke-width":s,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:a[f]},c[f]]}),z("path",{class:[`${v}-progress-graph-circle-fill`,_===0&&`${v}-progress-graph-circle-fill--empty`],d:dr(u/2-s/2*(1+2*f)-n*f,s,u),"stroke-width":s,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:r.value[f],strokeDashoffset:0,stroke:t[f]}})))))),i&&m.default?z("div",null,z("div",{class:`${v}-progress-text`},m.default())):null)}}}),Ii=Object.assign(Object.assign({},Xe.props),{processing:Boolean,type:{type:String,default:"line"},gapDegree:Number,gapOffsetDegree:Number,status:{type:String,default:"default"},railColor:[String,Array],railStyle:[String,Array],color:[String,Array],viewBoxWidth:{type:Number,default:100},strokeWidth:{type:Number,default:7},percentage:[Number,Array],unit:{type:String,default:"%"},showIndicator:{type:Boolean,default:!0},indicatorPosition:{type:String,default:"outside"},indicatorPlacement:{type:String,default:"outside"},indicatorTextColor:String,circleGap:{type:Number,default:1},height:Number,borderRadius:[String,Number],fillBorderRadius:[String,Number],offsetDegree:Number}),Di=ye({name:"Progress",props:Ii,setup(e){const m=le(()=>e.indicatorPlacement||e.indicatorPosition),r=le(()=>{if(e.gapDegree||e.gapDegree===0)return e.gapDegree;if(e.type==="dashboard")return 75}),{mergedClsPrefixRef:u,inlineThemeDisabled:s}=Pt(e),n=Xe("Progress","-progress",Si,gn,e,u),i=le(()=>{const{status:a}=e,{common:{cubicBezierEaseInOut:c},self:{fontSize:p,fontSizeCircle:v,railColor:_,railHeight:f,iconSizeCircle:y,iconSizeLine:d,textColorCircle:b,textColorLineInner:g,textColorLineOuter:w,lineBgProcessing:S,fontWeightCircle:A,[At("iconColor",a)]:C,[At("fillColor",a)]:D}}=n.value;return{"--n-bezier":c,"--n-fill-color":D,"--n-font-size":p,"--n-font-size-circle":v,"--n-font-weight-circle":A,"--n-icon-color":C,"--n-icon-size-circle":y,"--n-icon-size-line":d,"--n-line-bg-processing":S,"--n-rail-color":_,"--n-rail-height":f,"--n-text-color-circle":b,"--n-text-color-line-inner":g,"--n-text-color-line-outer":w}}),t=s?Ot("progress",le(()=>e.status[0]),i,e):void 0;return{mergedClsPrefix:u,mergedIndicatorPlacement:m,gapDeg:r,cssVars:s?void 0:i,themeClass:t==null?void 0:t.themeClass,onRender:t==null?void 0:t.onRender}},render(){const{type:e,cssVars:m,indicatorTextColor:r,showIndicator:u,status:s,railColor:n,railStyle:i,color:t,percentage:a,viewBoxWidth:c,strokeWidth:p,mergedIndicatorPlacement:v,unit:_,borderRadius:f,fillBorderRadius:y,height:d,processing:b,circleGap:g,mergedClsPrefix:w,gapDeg:S,gapOffsetDegree:A,themeClass:C,$slots:D,onRender:I}=this;return I==null||I(),z("div",{class:[C,`${w}-progress`,`${w}-progress--${e}`,`${w}-progress--${s}`],style:m,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,role:e==="circle"||e==="line"||e==="dashboard"?"progressbar":"none"},e==="circle"||e==="dashboard"?z(Ai,{clsPrefix:w,status:s,showIndicator:u,indicatorTextColor:r,railColor:n,fillColor:t,railStyle:i,offsetDegree:this.offsetDegree,percentage:a,viewBoxWidth:c,strokeWidth:p,gapDegree:S===void 0?e==="dashboard"?75:0:S,gapOffsetDegree:A,unit:_},D):e==="line"?z(zi,{clsPrefix:w,status:s,showIndicator:u,indicatorTextColor:r,railColor:n,fillColor:t,railStyle:i,percentage:a,processing:b,indicatorPlacement:v,unit:_,fillBorderRadius:y,railBorderRadius:f,height:d},D):e==="multiple-circle"?z(Ei,{clsPrefix:w,strokeWidth:p,railColor:n,fillColor:t,railStyle:i,viewBoxWidth:c,percentage:a,showIndicator:u,circleGap:g},D):null)}}),lt=Kt("n-upload"),Lr="__UPLOAD_DRAGGER__",Ti=ye({name:"UploadDragger",[Lr]:!0,setup(e,{slots:m}){const r=Ge(lt,null);return r||vt("upload-dragger","`n-upload-dragger` must be placed inside `n-upload`."),()=>{const{mergedClsPrefixRef:{value:u},mergedDisabledRef:{value:s},maxReachedRef:{value:n}}=r;return z("div",{class:[`${u}-upload-dragger`,(s||n)&&`${u}-upload-dragger--disabled`]},m)}}});var Xt=function(e,m,r,u){function s(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function t(p){try{c(u.next(p))}catch(v){i(v)}}function a(p){try{c(u.throw(p))}catch(v){i(v)}}function c(p){p.done?n(p.value):s(p.value).then(t,a)}c((u=u.apply(e,m||[])).next())})};function Nr(e){return e.includes("image/")}function hr(e=""){const m=e.split("/"),u=m[m.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(u)||[""])[0]}const fr=/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i,$r=e=>{if(e.type)return Nr(e.type);const m=hr(e.name||"");if(fr.test(m))return!0;const r=e.thumbnailUrl||e.url||"",u=hr(r);return!!(/^data:image\//.test(r)||fr.test(u))};function Pi(e){return Xt(this,void 0,void 0,function*(){return yield new Promise(m=>{if(!e.type||!Nr(e.type)){m("");return}m(window.URL.createObjectURL(e))})})}const Oi=vn&&window.FileReader&&window.File;function Ui(e){return e.isDirectory}function Fi(e){return e.isFile}function Li(e,m){return Xt(this,void 0,void 0,function*(){const r=[];function u(s){return Xt(this,void 0,void 0,function*(){for(const n of s)if(n){if(m&&Ui(n)){const i=n.createReader();try{const t=yield new Promise((a,c)=>{i.readEntries(a,c)});yield u(t)}catch{}}else if(Fi(n))try{const i=yield new Promise((t,a)=>{n.file(t,a)});r.push({file:i,entry:n,source:"dnd"})}catch{}}})}return yield u(e),r})}function mt(e){const{id:m,name:r,percentage:u,status:s,url:n,file:i,thumbnailUrl:t,type:a,fullPath:c,batchId:p}=e;return{id:m,name:r,percentage:u??null,status:s,url:n??null,file:i??null,thumbnailUrl:t??null,type:a??null,fullPath:c??null,batchId:p??null}}function Ni(e,m,r){return e=e.toLowerCase(),m=m.toLocaleLowerCase(),r=r.toLocaleLowerCase(),r.split(",").map(s=>s.trim()).filter(Boolean).some(s=>{if(s.startsWith(".")){if(e.endsWith(s))return!0}else if(s.includes("/")){const[n,i]=m.split("/"),[t,a]=s.split("/");if((t==="*"||n&&t&&t===n)&&(a==="*"||i&&a&&a===i))return!0}else return!0;return!1})}const jr=ye({name:"UploadTrigger",props:{abstract:Boolean},setup(e,{slots:m}){const r=Ge(lt,null);r||vt("upload-trigger","`n-upload-trigger` must be placed inside `n-upload`.");const{mergedClsPrefixRef:u,mergedDisabledRef:s,maxReachedRef:n,listTypeRef:i,dragOverRef:t,openOpenFileDialog:a,draggerInsideRef:c,handleFileAddition:p,mergedDirectoryDndRef:v,triggerClassRef:_,triggerStyleRef:f}=r,y=le(()=>i.value==="image-card");function d(){s.value||n.value||a()}function b(A){A.preventDefault(),t.value=!0}function g(A){A.preventDefault(),t.value=!0}function w(A){A.preventDefault(),t.value=!1}function S(A){var C;if(A.preventDefault(),!c.value||s.value||n.value){t.value=!1;return}const D=(C=A.dataTransfer)===null||C===void 0?void 0:C.items;D!=null&&D.length?Li(Array.from(D).map(I=>I.webkitGetAsEntry()),v.value).then(I=>{p(I)}).finally(()=>{t.value=!1}):t.value=!1}return()=>{var A;const{value:C}=u;return e.abstract?(A=m.default)===null||A===void 0?void 0:A.call(m,{handleClick:d,handleDrop:S,handleDragOver:b,handleDragEnter:g,handleDragLeave:w}):z("div",{class:[`${C}-upload-trigger`,(s.value||n.value)&&`${C}-upload-trigger--disabled`,y.value&&`${C}-upload-trigger--image-card`,_.value],style:f.value,onClick:d,onDrop:S,onDragover:b,onDragenter:g,onDragleave:w},y.value?z(Ti,null,{default:()=>bn(m.default,()=>[z(De,{clsPrefix:C},{default:()=>z(yn,null)})])}):m)}}}),$i=ye({name:"UploadProgress",props:{show:Boolean,percentage:{type:Number,required:!0},status:{type:String,required:!0}},setup(){return{mergedTheme:Ge(lt).mergedThemeRef}},render(){return z(Dr,null,{default:()=>this.show?z(Di,{type:"line",showIndicator:!1,percentage:this.percentage,status:this.status,height:2,theme:this.mergedTheme.peers.Progress,themeOverrides:this.mergedTheme.peerOverrides.Progress}):null})}}),ji=z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},z("g",{fill:"none"},z("path",{d:"M21.75 3A3.25 3.25 0 0 1 25 6.25v15.5A3.25 3.25 0 0 1 21.75 25H6.25A3.25 3.25 0 0 1 3 21.75V6.25A3.25 3.25 0 0 1 6.25 3h15.5zm.583 20.4l-7.807-7.68a.75.75 0 0 0-.968-.07l-.084.07l-7.808 7.68c.183.065.38.1.584.1h15.5c.204 0 .4-.035.583-.1l-7.807-7.68l7.807 7.68zM21.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v15.5c0 .208.036.408.103.593l7.82-7.692a2.25 2.25 0 0 1 3.026-.117l.129.117l7.82 7.692c.066-.185.102-.385.102-.593V6.25a1.75 1.75 0 0 0-1.75-1.75zm-3.25 3a2.5 2.5 0 1 1 0 5a2.5 2.5 0 0 1 0-5zm0 1.5a1 1 0 1 0 0 2a1 1 0 0 0 0-2z",fill:"currentColor"}))),Mi=z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},z("g",{fill:"none"},z("path",{d:"M6.4 2A2.4 2.4 0 0 0 4 4.4v19.2A2.4 2.4 0 0 0 6.4 26h15.2a2.4 2.4 0 0 0 2.4-2.4V11.578c0-.729-.29-1.428-.805-1.944l-6.931-6.931A2.4 2.4 0 0 0 14.567 2H6.4zm-.9 2.4a.9.9 0 0 1 .9-.9H14V10a2 2 0 0 0 2 2h6.5v11.6a.9.9 0 0 1-.9.9H6.4a.9.9 0 0 1-.9-.9V4.4zm16.44 6.1H16a.5.5 0 0 1-.5-.5V4.06l6.44 6.44z",fill:"currentColor"})));var Hi=function(e,m,r,u){function s(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function t(p){try{c(u.next(p))}catch(v){i(v)}}function a(p){try{c(u.throw(p))}catch(v){i(v)}}function c(p){p.done?n(p.value):s(p.value).then(t,a)}c((u=u.apply(e,m||[])).next())})};const kt={paddingMedium:"0 3px",heightMedium:"24px",iconSizeMedium:"18px"},Wi=ye({name:"UploadFile",props:{clsPrefix:{type:String,required:!0},file:{type:Object,required:!0},listType:{type:String,required:!0},index:{type:Number,required:!0}},setup(e){const m=Ge(lt),r=ge(null),u=ge(""),s=le(()=>{const{file:C}=e;return C.status==="finished"?"success":C.status==="error"?"error":"info"}),n=le(()=>{const{file:C}=e;if(C.status==="error")return"error"}),i=le(()=>{const{file:C}=e;return C.status==="uploading"}),t=le(()=>{if(!m.showCancelButtonRef.value)return!1;const{file:C}=e;return["uploading","pending","error"].includes(C.status)}),a=le(()=>{if(!m.showRemoveButtonRef.value)return!1;const{file:C}=e;return["finished"].includes(C.status)}),c=le(()=>{if(!m.showDownloadButtonRef.value)return!1;const{file:C}=e;return["finished"].includes(C.status)}),p=le(()=>{if(!m.showRetryButtonRef.value)return!1;const{file:C}=e;return["error"].includes(C.status)}),v=wn(()=>u.value||e.file.thumbnailUrl||e.file.url),_=le(()=>{if(!m.showPreviewButtonRef.value)return!1;const{file:{status:C},listType:D}=e;return["finished"].includes(C)&&v.value&&D==="image-card"});function f(){m.submit(e.file.id)}function y(C){C.preventDefault();const{file:D}=e;["finished","pending","error"].includes(D.status)?b(D):["uploading"].includes(D.status)?w(D):Cr("upload","The button clicked type is unknown.")}function d(C){C.preventDefault(),g(e.file)}function b(C){const{xhrMap:D,doChange:I,onRemoveRef:{value:H},mergedFileListRef:{value:B}}=m;Promise.resolve(H?H({file:Object.assign({},C),fileList:B,index:e.index}):!0).then(j=>{if(j===!1)return;const X=Object.assign({},C,{status:"removed"});D.delete(C.id),I(X,void 0,{remove:!0})})}function g(C){const{onDownloadRef:{value:D}}=m;Promise.resolve(D?D(Object.assign({},C)):!0).then(I=>{I!==!1&&Mn(C.url,C.name)})}function w(C){const{xhrMap:D}=m,I=D.get(C.id);I==null||I.abort(),b(Object.assign({},C))}function S(C){const{onPreviewRef:{value:D}}=m;if(D)D(e.file,{event:C});else if(e.listType==="image-card"){const{value:I}=r;if(!I)return;I.click()}}const A=()=>Hi(this,void 0,void 0,function*(){const{listType:C}=e;C!=="image"&&C!=="image-card"||m.shouldUseThumbnailUrlRef.value(e.file)&&(u.value=yield m.getFileThumbnailUrlResolver(e.file))});return Jt(()=>{A()}),{mergedTheme:m.mergedThemeRef,progressStatus:s,buttonType:n,showProgress:i,disabled:m.mergedDisabledRef,showCancelButton:t,showRemoveButton:a,showDownloadButton:c,showRetryButton:p,showPreviewButton:_,mergedThumbnailUrl:v,shouldUseThumbnailUrl:m.shouldUseThumbnailUrlRef,renderIcon:m.renderIconRef,imageRef:r,handleRemoveOrCancelClick:y,handleDownloadClick:d,handleRetryClick:f,handlePreviewClick:S}},render(){const{clsPrefix:e,mergedTheme:m,listType:r,file:u,renderIcon:s}=this;let n;const i=r==="image";i||r==="image-card"?n=!this.shouldUseThumbnailUrl(u)||!this.mergedThumbnailUrl?z("span",{class:`${e}-upload-file-info__thumbnail`},s?s(u):$r(u)?z(De,{clsPrefix:e},{default:()=>ji}):z(De,{clsPrefix:e},{default:()=>Mi})):z("a",{rel:"noopener noreferer",target:"_blank",href:u.url||void 0,class:`${e}-upload-file-info__thumbnail`,onClick:this.handlePreviewClick},r==="image-card"?z(Nn,{src:this.mergedThumbnailUrl||void 0,previewSrc:u.url||void 0,alt:u.name,ref:"imageRef"}):z("img",{src:this.mergedThumbnailUrl||void 0,alt:u.name})):n=z("span",{class:`${e}-upload-file-info__thumbnail`},s?s(u):z(De,{clsPrefix:e},{default:()=>z(Vn,null)}));const a=z($i,{show:this.showProgress,percentage:u.percentage||0,status:this.progressStatus}),c=r==="text"||r==="image";return z("div",{class:[`${e}-upload-file`,`${e}-upload-file--${this.progressStatus}-status`,u.url&&u.status!=="error"&&r!=="image-card"&&`${e}-upload-file--with-url`,`${e}-upload-file--${r}-type`]},z("div",{class:`${e}-upload-file-info`},n,z("div",{class:`${e}-upload-file-info__name`},c&&(u.url&&u.status!=="error"?z("a",{rel:"noopener noreferer",target:"_blank",href:u.url||void 0,onClick:this.handlePreviewClick},u.name):z("span",{onClick:this.handlePreviewClick},u.name)),i&&a),z("div",{class:[`${e}-upload-file-info__action`,`${e}-upload-file-info__action--${r}-type`]},this.showPreviewButton?z(Be,{key:"preview",quaternary:!0,type:this.buttonType,onClick:this.handlePreviewClick,theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,builtinThemeOverrides:kt},{icon:()=>z(De,{clsPrefix:e},{default:()=>z(On,null)})}):null,(this.showRemoveButton||this.showCancelButton)&&!this.disabled&&z(Be,{key:"cancelOrTrash",theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,quaternary:!0,builtinThemeOverrides:kt,type:this.buttonType,onClick:this.handleRemoveOrCancelClick},{icon:()=>z(_n,null,{default:()=>this.showRemoveButton?z(De,{clsPrefix:e,key:"trash"},{default:()=>z(Zn,null)}):z(De,{clsPrefix:e,key:"cancel"},{default:()=>z(qn,null)})})}),this.showRetryButton&&!this.disabled&&z(Be,{key:"retry",quaternary:!0,type:this.buttonType,onClick:this.handleRetryClick,theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,builtinThemeOverrides:kt},{icon:()=>z(De,{clsPrefix:e},{default:()=>z(Gn,null)})}),this.showDownloadButton?z(Be,{key:"download",quaternary:!0,type:this.buttonType,onClick:this.handleDownloadClick,theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,builtinThemeOverrides:kt},{icon:()=>z(De,{clsPrefix:e},{default:()=>z($n,null)})}):null)),!i&&a)}}),Vi=ye({name:"UploadFileList",setup(e,{slots:m}){const r=Ge(lt,null);r||vt("upload-file-list","`n-upload-file-list` must be placed inside `n-upload`.");const{abstractRef:u,mergedClsPrefixRef:s,listTypeRef:n,mergedFileListRef:i,fileListClassRef:t,fileListStyleRef:a,cssVarsRef:c,themeClassRef:p,maxReachedRef:v,showTriggerRef:_,imageGroupPropsRef:f}=r,y=le(()=>n.value==="image-card"),d=()=>i.value.map((g,w)=>z(Wi,{clsPrefix:s.value,key:g.id,file:g,index:w,listType:n.value})),b=()=>y.value?z(jn,Object.assign({},f.value),{default:d}):z(Dr,{group:!0},{default:d});return()=>{const{value:g}=s,{value:w}=u;return z("div",{class:[`${g}-upload-file-list`,y.value&&`${g}-upload-file-list--grid`,w?p==null?void 0:p.value:void 0,t.value],style:[w&&c?c.value:"",a.value]},b(),_.value&&!v.value&&y.value&&z(jr,null,m))}}}),Zi=pe([Y("upload","width: 100%;",[fe("dragger-inside",[Y("upload-trigger",`
 display: block;
 `)]),fe("drag-over",[Y("upload-dragger",`
 border: var(--n-dragger-border-hover);
 `)])]),Y("upload-dragger",`
 cursor: pointer;
 box-sizing: border-box;
 width: 100%;
 text-align: center;
 border-radius: var(--n-border-radius);
 padding: 24px;
 opacity: 1;
 transition:
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-dragger-color);
 border: var(--n-dragger-border);
 `,[pe("&:hover",`
 border: var(--n-dragger-border-hover);
 `),fe("disabled",`
 cursor: not-allowed;
 `)]),Y("upload-trigger",`
 display: inline-block;
 box-sizing: border-box;
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[pe("+",[Y("upload-file-list","margin-top: 8px;")]),fe("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `),fe("image-card",`
 width: 96px;
 height: 96px;
 `,[Y("base-icon",`
 font-size: 24px;
 `),Y("upload-dragger",`
 padding: 0;
 height: 100%;
 width: 100%;
 display: flex;
 align-items: center;
 justify-content: center;
 `)])]),Y("upload-file-list",`
 line-height: var(--n-line-height);
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[pe("a, img","outline: none;"),fe("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `,[Y("upload-file","cursor: not-allowed;")]),fe("grid",`
 display: grid;
 grid-template-columns: repeat(auto-fill, 96px);
 grid-gap: 8px;
 margin-top: 0;
 `),Y("upload-file",`
 display: block;
 box-sizing: border-box;
 cursor: default;
 padding: 0px 12px 0 6px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `,[sr(),Y("progress",[sr({foldPadding:!0})]),pe("&:hover",`
 background-color: var(--n-item-color-hover);
 `,[Y("upload-file-info",[he("action",`
 opacity: 1;
 `)])]),fe("image-type",`
 border-radius: var(--n-border-radius);
 text-decoration: underline;
 text-decoration-color: #0000;
 `,[Y("upload-file-info",`
 padding-top: 0px;
 padding-bottom: 0px;
 width: 100%;
 height: 100%;
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 6px 0;
 `,[Y("progress",`
 padding: 2px 0;
 margin-bottom: 0;
 `),he("name",`
 padding: 0 8px;
 `),he("thumbnail",`
 width: 32px;
 height: 32px;
 font-size: 28px;
 display: flex;
 justify-content: center;
 align-items: center;
 `,[pe("img",`
 width: 100%;
 `)])])]),fe("text-type",[Y("progress",`
 box-sizing: border-box;
 padding-bottom: 6px;
 margin-bottom: 6px;
 `)]),fe("image-card-type",`
 position: relative;
 width: 96px;
 height: 96px;
 border: var(--n-item-border-image-card);
 border-radius: var(--n-border-radius);
 padding: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: border-color .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 overflow: hidden;
 `,[Y("progress",`
 position: absolute;
 left: 8px;
 bottom: 8px;
 right: 8px;
 width: unset;
 `),Y("upload-file-info",`
 padding: 0;
 width: 100%;
 height: 100%;
 `,[he("thumbnail",`
 width: 100%;
 height: 100%;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 font-size: 36px;
 `,[pe("img",`
 width: 100%;
 `)])]),pe("&::before",`
 position: absolute;
 z-index: 1;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 opacity: 0;
 transition: opacity .2s var(--n-bezier);
 content: "";
 `),pe("&:hover",[pe("&::before","opacity: 1;"),Y("upload-file-info",[he("thumbnail","opacity: .12;")])])]),fe("error-status",[pe("&:hover",`
 background-color: var(--n-item-color-hover-error);
 `),Y("upload-file-info",[he("name","color: var(--n-item-text-color-error);"),he("thumbnail","color: var(--n-item-text-color-error);")]),fe("image-card-type",`
 border: var(--n-item-border-image-card-error);
 `)]),fe("with-url",`
 cursor: pointer;
 `,[Y("upload-file-info",[he("name",`
 color: var(--n-item-text-color-success);
 text-decoration-color: var(--n-item-text-color-success);
 `,[pe("a",`
 text-decoration: underline;
 `)])])]),Y("upload-file-info",`
 position: relative;
 padding-top: 6px;
 padding-bottom: 6px;
 display: flex;
 flex-wrap: nowrap;
 `,[he("thumbnail",`
 font-size: 18px;
 opacity: 1;
 transition: opacity .2s var(--n-bezier);
 color: var(--n-item-icon-color);
 `,[Y("base-icon",`
 margin-right: 2px;
 vertical-align: middle;
 transition: color .3s var(--n-bezier);
 `)]),he("action",`
 padding-top: inherit;
 padding-bottom: inherit;
 position: absolute;
 right: 0;
 top: 0;
 bottom: 0;
 width: 80px;
 display: flex;
 align-items: center;
 transition: opacity .2s var(--n-bezier);
 justify-content: flex-end;
 opacity: 0;
 `,[Y("button",[pe("&:not(:last-child)",{marginRight:"4px"}),Y("base-icon",[pe("svg",[xn()])])]),fe("image-type",`
 position: relative;
 max-width: 80px;
 width: auto;
 `),fe("image-card-type",`
 z-index: 2;
 position: absolute;
 width: 100%;
 height: 100%;
 left: 0;
 right: 0;
 bottom: 0;
 top: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 `)]),he("name",`
 color: var(--n-item-text-color);
 flex: 1;
 display: flex;
 justify-content: center;
 text-overflow: ellipsis;
 overflow: hidden;
 flex-direction: column;
 text-decoration-color: #0000;
 font-size: var(--n-font-size);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier); 
 `,[pe("a",`
 color: inherit;
 text-decoration: underline;
 `)])])])]),Y("upload-file-input",`
 display: none;
 width: 0;
 height: 0;
 opacity: 0;
 `)]);var pr=function(e,m,r,u){function s(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function t(p){try{c(u.next(p))}catch(v){i(v)}}function a(p){try{c(u.throw(p))}catch(v){i(v)}}function c(p){p.done?n(p.value):s(p.value).then(t,a)}c((u=u.apply(e,m||[])).next())})};function qi(e,m,r){const{doChange:u,xhrMap:s}=e;let n=0;function i(a){var c;let p=Object.assign({},m,{status:"error",percentage:n});s.delete(m.id),p=mt(((c=e.onError)===null||c===void 0?void 0:c.call(e,{file:p,event:a}))||p),u(p,a)}function t(a){var c;if(e.isErrorState){if(e.isErrorState(r)){i(a);return}}else if(r.status<200||r.status>=300){i(a);return}let p=Object.assign({},m,{status:"finished",percentage:n});s.delete(m.id),p=mt(((c=e.onFinish)===null||c===void 0?void 0:c.call(e,{file:p,event:a}))||p),u(p,a)}return{handleXHRLoad:t,handleXHRError:i,handleXHRAbort(a){const c=Object.assign({},m,{status:"removed",file:null,percentage:n});s.delete(m.id),u(c,a)},handleXHRProgress(a){const c=Object.assign({},m,{status:"uploading"});if(a.lengthComputable){const p=Math.ceil(a.loaded/a.total*100);c.percentage=p,n=p}u(c,a)}}}function Gi(e){const{inst:m,file:r,data:u,headers:s,withCredentials:n,action:i,customRequest:t}=e,{doChange:a}=e.inst;let c=0;t({file:r,data:u,headers:s,withCredentials:n,action:i,onProgress(p){const v=Object.assign({},r,{status:"uploading"}),_=p.percent;v.percentage=_,c=_,a(v)},onFinish(){var p;let v=Object.assign({},r,{status:"finished",percentage:c});v=mt(((p=m.onFinish)===null||p===void 0?void 0:p.call(m,{file:v}))||v),a(v)},onError(){var p;let v=Object.assign({},r,{status:"error",percentage:c});v=mt(((p=m.onError)===null||p===void 0?void 0:p.call(m,{file:v}))||v),a(v)}})}function Xi(e,m,r){const u=qi(e,m,r);r.onabort=u.handleXHRAbort,r.onerror=u.handleXHRError,r.onload=u.handleXHRLoad,r.upload&&(r.upload.onprogress=u.handleXHRProgress)}function Mr(e,m){return typeof e=="function"?e({file:m}):e||{}}function Yi(e,m,r){const u=Mr(m,r);u&&Object.keys(u).forEach(s=>{e.setRequestHeader(s,u[s])})}function Ki(e,m,r){const u=Mr(m,r);u&&Object.keys(u).forEach(s=>{e.append(s,u[s])})}function Ji(e,m,r,{method:u,action:s,withCredentials:n,responseType:i,headers:t,data:a}){const c=new XMLHttpRequest;c.responseType=i,e.xhrMap.set(r.id,c),c.withCredentials=n;const p=new FormData;if(Ki(p,a,r),r.file!==null&&p.append(m,r.file),Xi(e,r,c),s!==void 0){c.open(u.toUpperCase(),s),Yi(c,t,r),c.send(p);const v=Object.assign({},r,{status:"uploading"});e.doChange(v)}}const Qi=Object.assign(Object.assign({},Xe.props),{name:{type:String,default:"file"},accept:String,action:String,customRequest:Function,directory:Boolean,directoryDnd:{type:Boolean,default:void 0},method:{type:String,default:"POST"},multiple:Boolean,showFileList:{type:Boolean,default:!0},data:[Object,Function],headers:[Object,Function],withCredentials:Boolean,responseType:{type:String,default:""},disabled:{type:Boolean,default:void 0},onChange:Function,onRemove:Function,onFinish:Function,onError:Function,onBeforeUpload:Function,isErrorState:Function,onDownload:Function,defaultUpload:{type:Boolean,default:!0},fileList:Array,"onUpdate:fileList":[Function,Array],onUpdateFileList:[Function,Array],fileListClass:String,fileListStyle:[String,Object],defaultFileList:{type:Array,default:()=>[]},showCancelButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showDownloadButton:Boolean,showRetryButton:{type:Boolean,default:!0},showPreviewButton:{type:Boolean,default:!0},listType:{type:String,default:"text"},onPreview:Function,shouldUseThumbnailUrl:{type:Function,default:e=>Oi?$r(e):!1},createThumbnailUrl:Function,abstract:Boolean,max:Number,showTrigger:{type:Boolean,default:!0},imageGroupProps:Object,inputProps:Object,triggerClass:String,triggerStyle:[String,Object],renderIcon:Function}),eo=ye({name:"Upload",props:Qi,setup(e){e.abstract&&e.listType==="image-card"&&vt("upload","when the list-type is image-card, abstract is not supported.");const{mergedClsPrefixRef:m,inlineThemeDisabled:r}=Pt(e),u=Xe("Upload","-upload",Zi,kn,e,m),s=Sr(e),n=ge(e.defaultFileList),i=be(e,"fileList"),t=ge(null),a={value:!1},c=ge(!1),p=new Map,v=Wt(i,n),_=le(()=>v.value.map(mt)),f=le(()=>{const{max:B}=e;return B!==void 0?_.value.length>=B:!1});function y(){var B;(B=t.value)===null||B===void 0||B.click()}function d(B){const j=B.target;S(j.files?Array.from(j.files).map(X=>({file:X,entry:null,source:"input"})):null,B),j.value=""}function b(B){const{"onUpdate:fileList":j,onUpdateFileList:X}=e;j&&nt(j,B),X&&nt(X,B),n.value=B}const g=le(()=>e.multiple||e.directory),w=(B,j,X={append:!1,remove:!1})=>{const{append:k,remove:U}=X,l=Array.from(_.value),F=l.findIndex(K=>K.id===B.id);if(k||U||~F){k?l.push(B):U?l.splice(F,1):l.splice(F,1,B);const{onChange:K}=e;K&&K({file:B,fileList:l,event:j}),b(l)}};function S(B,j){if(!B||B.length===0)return;const{onBeforeUpload:X}=e;B=g.value?B:[B[0]];const{max:k,accept:U}=e;B=B.filter(({file:F,source:K})=>K==="dnd"&&(U!=null&&U.trim())?Ni(F.name,F.type,U):!0),k&&(B=B.slice(0,k-_.value.length));const l=lr();Promise.all(B.map(F=>pr(this,[F],void 0,function*({file:K,entry:M}){var te;const Z={id:lr(),batchId:l,name:K.name,status:"pending",percentage:0,file:K,url:null,type:K.type,thumbnailUrl:null,fullPath:(te=M==null?void 0:M.fullPath)!==null&&te!==void 0?te:`/${K.webkitRelativePath||K.name}`};return!X||(yield X({file:Z,fileList:_.value}))!==!1?Z:null}))).then(F=>pr(this,void 0,void 0,function*(){let K=Promise.resolve();F.forEach(M=>{K=K.then(zr).then(()=>{M&&w(M,j,{append:!0})})}),yield K})).then(()=>{e.defaultUpload&&A()})}function A(B){const{method:j,action:X,withCredentials:k,headers:U,data:l,name:F}=e,K=B!==void 0?_.value.filter(te=>te.id===B):_.value,M=B!==void 0;K.forEach(te=>{const{status:Z}=te;(Z==="pending"||Z==="error"&&M)&&(e.customRequest?Gi({inst:{doChange:w,xhrMap:p,onFinish:e.onFinish,onError:e.onError},file:te,action:X,withCredentials:k,headers:U,data:l,customRequest:e.customRequest}):Ji({doChange:w,xhrMap:p,onFinish:e.onFinish,onError:e.onError,isErrorState:e.isErrorState},F,te,{method:j,action:X,withCredentials:k,responseType:e.responseType,headers:U,data:l}))})}function C(B){var j;if(B.thumbnailUrl)return B.thumbnailUrl;const{createThumbnailUrl:X}=e;return X?(j=X(B.file,B))!==null&&j!==void 0?j:B.url||"":B.url?B.url:B.file?Pi(B.file):""}const D=le(()=>{const{common:{cubicBezierEaseInOut:B},self:{draggerColor:j,draggerBorder:X,draggerBorderHover:k,itemColorHover:U,itemColorHoverError:l,itemTextColorError:F,itemTextColorSuccess:K,itemTextColor:M,itemIconColor:te,itemDisabledOpacity:Z,lineHeight:ne,borderRadius:O,fontSize:T,itemBorderImageCardError:re,itemBorderImageCard:J}}=u.value;return{"--n-bezier":B,"--n-border-radius":O,"--n-dragger-border":X,"--n-dragger-border-hover":k,"--n-dragger-color":j,"--n-font-size":T,"--n-item-color-hover":U,"--n-item-color-hover-error":l,"--n-item-disabled-opacity":Z,"--n-item-icon-color":te,"--n-item-text-color":M,"--n-item-text-color-error":F,"--n-item-text-color-success":K,"--n-line-height":ne,"--n-item-border-image-card-error":re,"--n-item-border-image-card":J}}),I=r?Ot("upload",void 0,D,e):void 0;Qt(lt,{mergedClsPrefixRef:m,mergedThemeRef:u,showCancelButtonRef:be(e,"showCancelButton"),showDownloadButtonRef:be(e,"showDownloadButton"),showRemoveButtonRef:be(e,"showRemoveButton"),showRetryButtonRef:be(e,"showRetryButton"),onRemoveRef:be(e,"onRemove"),onDownloadRef:be(e,"onDownload"),mergedFileListRef:_,triggerClassRef:be(e,"triggerClass"),triggerStyleRef:be(e,"triggerStyle"),shouldUseThumbnailUrlRef:be(e,"shouldUseThumbnailUrl"),renderIconRef:be(e,"renderIcon"),xhrMap:p,submit:A,doChange:w,showPreviewButtonRef:be(e,"showPreviewButton"),onPreviewRef:be(e,"onPreview"),getFileThumbnailUrlResolver:C,listTypeRef:be(e,"listType"),dragOverRef:c,openOpenFileDialog:y,draggerInsideRef:a,handleFileAddition:S,mergedDisabledRef:s.mergedDisabledRef,maxReachedRef:f,fileListClassRef:be(e,"fileListClass"),fileListStyleRef:be(e,"fileListStyle"),abstractRef:be(e,"abstract"),acceptRef:be(e,"accept"),cssVarsRef:r?void 0:D,themeClassRef:I==null?void 0:I.themeClass,onRender:I==null?void 0:I.onRender,showTriggerRef:be(e,"showTrigger"),imageGroupPropsRef:be(e,"imageGroupProps"),mergedDirectoryDndRef:le(()=>{var B;return(B=e.directoryDnd)!==null&&B!==void 0?B:e.directory})});const H={clear:()=>{n.value=[]},submit:A,openOpenFileDialog:y};return Object.assign({mergedClsPrefix:m,draggerInsideRef:a,inputElRef:t,mergedTheme:u,dragOver:c,mergedMultiple:g,cssVars:r?void 0:D,themeClass:I==null?void 0:I.themeClass,onRender:I==null?void 0:I.onRender,handleFileInputChange:d},H)},render(){var e,m;const{draggerInsideRef:r,mergedClsPrefix:u,$slots:s,directory:n,onRender:i}=this;if(s.default&&!this.abstract){const a=s.default()[0];!((e=a==null?void 0:a.type)===null||e===void 0)&&e[Lr]&&(r.value=!0)}const t=z("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:"file",class:`${u}-upload-file-input`,accept:this.accept,multiple:this.mergedMultiple,onChange:this.handleFileInputChange,webkitdirectory:n||void 0,directory:n||void 0}));return this.abstract?z(St,null,(m=s.default)===null||m===void 0?void 0:m.call(s),z(Cn,{to:"body"},t)):(i==null||i(),z("div",{class:[`${u}-upload`,r.value&&`${u}-upload--dragger-inside`,this.dragOver&&`${u}-upload--drag-over`,this.themeClass],style:this.cssVars},t,this.showTrigger&&this.listType!=="image-card"&&z(jr,null,s),this.showFileList&&z(Vi,null,s)))}}),to={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ro=Te("path",{d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),no=Te("path",{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z",fill:"currentColor"},null,-1),io=Te("path",{d:"M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z",fill:"currentColor"},null,-1),oo=[ro,no,io],ao=ye({name:"CreateOutline",render:function(m,r){return $e(),it("svg",to,oo)}}),so={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},lo=Te("path",{d:"M432 144l-28.67 275.74A32 32 0 0 1 371.55 448H140.46a32 32 0 0 1-31.78-28.26L80 144",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),uo=Te("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),co=Te("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M312 240L200 352"},null,-1),ho=Te("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M312 352L200 240"},null,-1),fo=[lo,uo,co,ho],po=ye({name:"TrashBinOutline",render:function(m,r){return $e(),it("svg",so,fo)}});function gt(e,m){let r=!1;const{x:u,y:s}=e,n=m.length;for(let i=0,t=n-1;i<n;t=i++){const a=m[i].x,c=m[i].y,p=m[t].x,v=m[t].y;c>s!=v>s&&u<(p-a)*(s-c)/(v-c)+a&&(r=!r)}return r}const Hr=ge(),ke={x:0,y:0};let Ie=1,rt=.1,mr=4,gr=rt,Wr=.4;const Ve=ge([{name:"头盔",color:"#18a058"},{name:"口罩",color:"#f0a020"},{name:"飞机",color:"#2080f0"}]);let Me=[];const ae=ge(),Bt=ge(!1);let Q,Ne=7;const Vr=ge();function rr(){const e=Me.map(m=>({name:m.name,...m.points}));Q&&e.push({name:Q.name,...Q.points}),Vr.value=e}let ve;const Et=new Image;function Zr(e,m){const{naturalWidth:r,naturalHeight:u}=Et,s=r/u,i=e/m<=s,t=i?e:m*s,a=i?e/s:m,c=i?0:(e-t)/2,p=i?(m-a)/2:0;return{width:Ie*t,height:Ie*a,left:Ie*c+ke.x,top:Ie*p+ke.y}}function Yt(e,m,r,u){const{ctx:s,left:n,top:i,width:t,height:a}=ve,c=18*Ie,p=5*Ie;s.font=c+"px serif";let v=s.measureText(r);s.fillStyle=u,s.fillRect(n+e*t,i+m*a-(c+2*p),v.width+2*p,c+2*p),s.fillStyle="white",s.textBaseline="bottom",s.fillText(r,n+e*t+p,i+m*a-p)}function mo(){const{ctx:e,left:m,top:r,width:u,height:s}=ve;function n(i,t,a,c,p){e.fillStyle=p+(255*Wr).toString(16).split(".")[0],e.fillRect(i,t,a,c),e.strokeStyle=p,e.strokeRect(i,t,a,c)}if(Me.forEach(i=>{n(m+i.points.x*u,r+i.points.y*s,i.points.w*u,i.points.h*s,i.color),Yt(i.points.x,i.points.y,i.name,i.color)}),ae.value&&ae.value.points.length>1){const i=Math.min(ae.value.points[0].x,ae.value.points[1].x),t=Math.min(ae.value.points[0].y,ae.value.points[1].y),a=Math.max(ae.value.points[0].x,ae.value.points[1].x)-i,c=Math.max(ae.value.points[0].y,ae.value.points[1].y)-t;n(m+i*u,r+t*s,a*u,c*s,ae.value.color),Yt(i,t,ae.value.name,ae.value.color)}}function It(){Q&&(Me.push(Q),Q=void 0)}function qr(){if(!Q)return;const{left:e,top:m,width:r,height:u}=ve,{x:s,y:n,w:i,h:t}=Q.points;return[{x:s,y:n,type:"left-top"},{x:s+i/2,y:n,type:"center-top"},{x:s+i,y:n,type:"right-top"},{x:s+i,y:n+t/2,type:"right-center"},{x:s+i,y:n+t,type:"right-bottom"},{x:s+i/2,y:n+t,type:"center-bottom"},{x:s,y:n+t,type:"left-bottom"},{x:s,y:n+t/2,type:"left-center"}].map(({x:c,y:p,type:v})=>({x:c*r+e,y:p*u+m,type:v}))}function Gr(e,m){const r=qr();if(!r)return;const{dom:u}=ve,{x:s,y:n}=u.getBoundingClientRect();function i(t){const a=t.x+s,c=t.y+n;return[{x:a-Ne,y:c-Ne},{x:a+Ne,y:c-Ne},{x:a+Ne,y:c+Ne},{x:a-Ne,y:c+Ne}]}return r.find(t=>gt({x:e,y:m},i(t)))}function go(){if(!Q)return;const{ctx:e,left:m,top:r,width:u,height:s}=ve,{points:n,color:i}=Q,t=m+n.x*u,a=r+n.y*s,c=n.w*u,p=n.h*s;e.fillStyle=i+(255*Wr).toString(16).split(".")[0],e.fillRect(t,a,c,p),e.strokeStyle="white",e.strokeRect(t,a,c,p),Yt(n.x,n.y,Q.name,Q.color);const v=qr();v==null||v.forEach(({x:_,y:f})=>{e.strokeStyle=i,e.beginPath(),e.arc(_,f,Ne,0,2*Math.PI),e.stroke(),e.fillStyle="white",e.fill()})}function vo(){const{clientWidth:e,clientHeight:m,ctx:r}=ve,{left:u,top:s,width:n,height:i}=Zr(e,m);r.drawImage(Et,u,s,n,i)}function Pe(){const e=Hr.value,m=e.getContext("2d");if(!e||!m)return;const{clientWidth:r,clientHeight:u}=e;e.width=r,e.height=u;const{x:s,y:n}=e.getBoundingClientRect(),{left:i,top:t,width:a,height:c}=Zr(r,u);m.clearRect(ke.x,ke.y,r+ke.x,u+ke.y),ve={dom:e,ctx:m,clientWidth:r,clientHeight:u,x:s,y:n,left:i,top:t,width:a,height:c},vo(),mo(),go()}let nr=!1,ir=!1,ce,Ue={};function Xr(e){if(!ve)return;const{clientX:m,clientY:r}=e,{left:u,top:s,width:n,height:i,x:t,y:a}=ve;return{x:(m-(t+u))/n,y:(r-(a+s))/i}}function Dt(e){const{left:m,top:r,width:u,height:s}=ve,n=m+e.points.x*u,i=r+e.points.y*s,t=e.points.w*u,a=e.points.h*s;return[{x:n,y:i},{x:n+t,y:i},{x:n+t,y:i+a},{x:n,y:i+a}]}const vr=function(){const e=ur(()=>window.$message.warning(`放大到最大值了！ ${mr} 倍`),200),m=ur(()=>window.$message.warning(`缩小到最小值了！ ${gr} 倍`),200);return function(r){if(!ve)return;const{x:u,y:s}=ve,{deltaY:n,clientX:i,clientY:t}=r;function a(){const p=u+ke.x,v=s+ke.y,_=i-p,f=t-v,y=n>0?-rt:rt,d=Ie-y,b=_/d*y,g=f/d*y;i<p?ke.x+=b:i>p&&(ke.x-=b),t<v?ke.y+=g:t>v&&(ke.y-=g),Pe()}function c(){var p;if(n<0&&Ie>=mr)e();else if(n>0&&Ie<=gr)m();else{const v=((p=rt.toString().split(".")[1])==null?void 0:p.length)||0,_=n>0?-rt:rt;Ie=Number((Ie+_).toFixed(v)),a()}}c()}}();function br(e){const{clientX:m,clientY:r}=e;if(!(!ve||nr)){if(ae.value){const u=Xr(e);if(u===void 0)return;if(ae.value.points.length===0)ae.value.points[0]=u;else{const s=Math.min(ae.value.points[0].x,u.x),n=Math.min(ae.value.points[0].y,u.y),i=Math.max(ae.value.points[0].x,u.x)-s,t=Math.max(ae.value.points[0].y,u.y)-n;if(Me.push({id:er(),name:ae.value.name,color:ae.value.color,points:{x:s,y:n,w:i,h:t}}),rr(),Bt.value){const a=ae.value;ae.value={name:a.name,color:a.color,points:[]}}else ae.value=void 0}Pe()}else if(!ce){const{x:u,y:s}=ve;if(Q&&gt({x:m-u,y:r-s},Dt(Q)))It(),Pe();else{const i=[...Me];i.sort((a,c)=>a.points.w*a.points.h-c.points.w*c.points.h);const t=i.find(a=>gt({x:m-u,y:r-s},Dt(a)));It(),t&&(Me=Me.filter(a=>a.id!==t.id),Q=t),Pe()}}}}function yr(e){const{clientX:m,clientY:r}=e;if(!ve)return;const{x:u,y:s,dom:n}=ve;if(Q){const i=Gr(m,r),t=Q&&gt({x:m-u,y:r-s},Dt(Q));(i||t)&&(ce=i?i.type:"box",Ue={x:m,y:r},t&&!i&&(n.style.cursor="move"))}else ae.value||(ir=!0)}function wr(){if(Ue={},ir=!1,requestAnimationFrame(()=>{ce=void 0,nr=!1}),!ve)return;const{dom:e}=ve;e.style.cursor="inherit"}const Yr={"left-top":"nwse-resize","center-top":"ns-resize","right-top":"nesw-resize","right-center":"ew-resize","right-bottom":"nwse-resize","center-bottom":"ns-resize","left-bottom":"nesw-resize","left-center":"ew-resize"};function bo(e,m){if(!ce)return;const{x:r,y:u}=Ue;if(r===void 0||u===void 0||!Q)return;const{width:s,height:n,dom:i}=ve,t={x:(e-r)/s,y:(m-u)/n};if(Ue={x:e,y:m},ce=="left-top"){Q.points.x+=t.x,Q.points.y+=t.y,Q.points.w+=-t.x,Q.points.h+=-t.y;const a=Q.points.w<0,c=Q.points.h<0;a&&c?ce="right-bottom":a?ce="right-top":c&&(ce="left-bottom")}else if(ce=="center-top")Q.points.y+=t.y,Q.points.h+=-t.y,Q.points.h<0&&(ce="center-bottom");else if(ce=="right-top"){Q.points.y+=t.y,Q.points.w+=t.x,Q.points.h+=-t.y;const a=Q.points.w<0,c=Q.points.h<0;a&&c?ce="left-bottom":a?ce="left-top":c&&(ce="right-bottom")}else if(ce=="right-center")Q.points.w+=t.x,Q.points.w<0&&(ce="left-center");else if(ce=="right-bottom"){Q.points.w+=t.x,Q.points.h+=t.y;const a=Q.points.w<0,c=Q.points.h<0;a&&c?ce="left-top":a?ce="left-bottom":c&&(ce="right-top")}else if(ce=="center-bottom")Q.points.h+=t.y,Q.points.h<0&&(ce="center-top");else if(ce=="left-bottom"){Q.points.x+=t.x,Q.points.w+=-t.x,Q.points.h+=t.y;const a=Q.points.w<0,c=Q.points.h<0;a&&c?ce="right-top":a?ce="right-bottom":c&&(ce="left-top")}else ce=="left-center"?(Q.points.x+=t.x,Q.points.w+=-t.x,Q.points.w<0&&(ce="right-center")):ce=="box"&&(Q.points.x+=t.x,Q.points.y+=t.y);ce!="box"&&(i.style.cursor=Yr[ce]),Q.points.w<0&&(Q.points.x+=Q.points.w,Q.points.w=-Q.points.w),Q.points.h<0&&(Q.points.y+=Q.points.h,Q.points.h=-Q.points.h),rr(),Pe()}function _r(e){const{clientX:m,clientY:r}=e;if(ve){if(ir)Ue.x!==void 0&&Ue.y!==void 0&&(nr=!0,ke.x+=m-Ue.x,ke.y+=r-Ue.y,Pe()),Ue.x=m,Ue.y=r;else if(ae.value!==void 0&&ae.value.points.length>0){const u=Xr(e);if(u===void 0)return;ae.value.points[1]=u,Pe()}else if(Q)if(ce)bo(m,r);else{const{x:u,y:s,dom:n}=ve,i=Gr(m,r),t=gt({x:m-u,y:r-s},Dt(Q));i||t?n.style.cursor=i?Yr[i.type]:"move":n.style.cursor="inherit"}}}function xr(e){if(ve&&e.key==="Delete"){const m=!!ae.value,r=!!Q;ae.value=void 0,Q=void 0,r&&rr(),(m||r)&&Pe()}}function kr(e){if(ve)if(e.preventDefault(),ae.value){const m=ae.value.points.length>0;ae.value=void 0,m&&Pe()}else Q&&(It(),Pe())}function yo(e){const m=Ve.value[e];!ve||!m||(ae.value={...m,points:[]},Q&&It())}function $t(e){if(Me=[],Q=void 0,ae.value=void 0,e){const{src:m}=e;Et.src=m,Me=e.boxList.map(r=>{const u=Ve.value.find(n=>n.name===r.name);if(!u)return;const s={...r};return delete s.name,{id:er(),name:r.name,color:u.color,points:s}}).filter(Boolean),Et.onload=function(){Ie=1,ke.x=0,ke.y=0,Pe()}}else if(ve){const{ctx:m,clientWidth:r,clientHeight:u}=ve;m.clearRect(ke.x,ke.y,r+ke.x,u+ke.y)}}function wo(){const e="0123456789ABCDEF";let m="#";for(let r=0;r<6;r++)m+=e[Math.floor(Math.random()*16)];return m}function _o(e){return()=>z(Tr,null,{default:()=>z(e)})}function xo(){const e=ge(wo()),m=ge("你好啊你好");window.$dialog.create({icon:_o(ao),title:"添加方框类别",content:()=>z(Rt,{vertical:!0},()=>[z(Pr,{label:"类别名称",value:m.value,onUpdateValue:r=>m.value=r}),z(wi,{modes:["hex"],"show-alpha":!1,label:"类别颜色",value:e.value,onUpdateValue:r=>e.value=r})]),positiveText:"添加",negativeText:"取消",onPositiveClick:()=>{Ve.value.push({name:m.value,color:e.value})}})}const ko=""+new URL("1-D6MQjZe8.avif",import.meta.url).href,Co=""+new URL("2-BR1XFc7x.avif",import.meta.url).href;function Ct(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,m){(function(r){e.exports=r()})(function(){return function r(u,s,n){function i(c,p){if(!s[c]){if(!u[c]){var v=typeof Ct=="function"&&Ct;if(!p&&v)return v(c,!0);if(t)return t(c,!0);var _=new Error("Cannot find module '"+c+"'");throw _.code="MODULE_NOT_FOUND",_}var f=s[c]={exports:{}};u[c][0].call(f.exports,function(y){var d=u[c][1][y];return i(d||y)},f,f.exports,r,u,s,n)}return s[c].exports}for(var t=typeof Ct=="function"&&Ct,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(r,u,s){var n=r("./utils"),i=r("./support"),t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(a){for(var c,p,v,_,f,y,d,b=[],g=0,w=a.length,S=w,A=n.getTypeOf(a)!=="string";g<a.length;)S=w-g,v=A?(c=a[g++],p=g<w?a[g++]:0,g<w?a[g++]:0):(c=a.charCodeAt(g++),p=g<w?a.charCodeAt(g++):0,g<w?a.charCodeAt(g++):0),_=c>>2,f=(3&c)<<4|p>>4,y=1<S?(15&p)<<2|v>>6:64,d=2<S?63&v:64,b.push(t.charAt(_)+t.charAt(f)+t.charAt(y)+t.charAt(d));return b.join("")},s.decode=function(a){var c,p,v,_,f,y,d=0,b=0,g="data:";if(a.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var w,S=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===t.charAt(64)&&S--,a.charAt(a.length-2)===t.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=i.uint8array?new Uint8Array(0|S):new Array(0|S);d<a.length;)c=t.indexOf(a.charAt(d++))<<2|(_=t.indexOf(a.charAt(d++)))>>4,p=(15&_)<<4|(f=t.indexOf(a.charAt(d++)))>>2,v=(3&f)<<6|(y=t.indexOf(a.charAt(d++))),w[b++]=c,f!==64&&(w[b++]=p),y!==64&&(w[b++]=v);return w}},{"./support":30,"./utils":32}],2:[function(r,u,s){var n=r("./external"),i=r("./stream/DataWorker"),t=r("./stream/Crc32Probe"),a=r("./stream/DataLengthProbe");function c(p,v,_,f,y){this.compressedSize=p,this.uncompressedSize=v,this.crc32=_,this.compression=f,this.compressedContent=y}c.prototype={getContentWorker:function(){var p=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),v=this;return p.on("end",function(){if(this.streamInfo.data_length!==v.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(p,v,_){return p.pipe(new t).pipe(new a("uncompressedSize")).pipe(v.compressWorker(_)).pipe(new a("compressedSize")).withStreamInfo("compression",v)},u.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,u,s){var n=r("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},s.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,u,s){var n=r("./utils"),i=function(){for(var t,a=[],c=0;c<256;c++){t=c;for(var p=0;p<8;p++)t=1&t?3988292384^t>>>1:t>>>1;a[c]=t}return a}();u.exports=function(t,a){return t!==void 0&&t.length?n.getTypeOf(t)!=="string"?function(c,p,v,_){var f=i,y=_+v;c^=-1;for(var d=_;d<y;d++)c=c>>>8^f[255&(c^p[d])];return-1^c}(0|a,t,t.length,0):function(c,p,v,_){var f=i,y=_+v;c^=-1;for(var d=_;d<y;d++)c=c>>>8^f[255&(c^p.charCodeAt(d))];return-1^c}(0|a,t,t.length,0):0}},{"./utils":32}],5:[function(r,u,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(r,u,s){var n=null;n=typeof Promise<"u"?Promise:r("lie"),u.exports={Promise:n}},{lie:37}],7:[function(r,u,s){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=r("pako"),t=r("./utils"),a=r("./stream/GenericWorker"),c=n?"uint8array":"array";function p(v,_){a.call(this,"FlateWorker/"+v),this._pako=null,this._pakoAction=v,this._pakoOptions=_,this.meta={}}s.magic="\b\0",t.inherits(p,a),p.prototype.processChunk=function(v){this.meta=v.meta,this._pako===null&&this._createPako(),this._pako.push(t.transformTo(c,v.data),!1)},p.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var v=this;this._pako.onData=function(_){v.push({data:_,meta:v.meta})}},s.compressWorker=function(v){return new p("Deflate",v)},s.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,u,s){function n(f,y){var d,b="";for(d=0;d<y;d++)b+=String.fromCharCode(255&f),f>>>=8;return b}function i(f,y,d,b,g,w){var S,A,C=f.file,D=f.compression,I=w!==c.utf8encode,H=t.transformTo("string",w(C.name)),B=t.transformTo("string",c.utf8encode(C.name)),j=C.comment,X=t.transformTo("string",w(j)),k=t.transformTo("string",c.utf8encode(j)),U=B.length!==C.name.length,l=k.length!==j.length,F="",K="",M="",te=C.dir,Z=C.date,ne={crc32:0,compressedSize:0,uncompressedSize:0};y&&!d||(ne.crc32=f.crc32,ne.compressedSize=f.compressedSize,ne.uncompressedSize=f.uncompressedSize);var O=0;y&&(O|=8),I||!U&&!l||(O|=2048);var T=0,re=0;te&&(T|=16),g==="UNIX"?(re=798,T|=function(G,oe){var Ce=G;return G||(Ce=oe?16893:33204),(65535&Ce)<<16}(C.unixPermissions,te)):(re=20,T|=function(G){return 63&(G||0)}(C.dosPermissions)),S=Z.getUTCHours(),S<<=6,S|=Z.getUTCMinutes(),S<<=5,S|=Z.getUTCSeconds()/2,A=Z.getUTCFullYear()-1980,A<<=4,A|=Z.getUTCMonth()+1,A<<=5,A|=Z.getUTCDate(),U&&(K=n(1,1)+n(p(H),4)+B,F+="up"+n(K.length,2)+K),l&&(M=n(1,1)+n(p(X),4)+k,F+="uc"+n(M.length,2)+M);var J="";return J+=`
\0`,J+=n(O,2),J+=D.magic,J+=n(S,2),J+=n(A,2),J+=n(ne.crc32,4),J+=n(ne.compressedSize,4),J+=n(ne.uncompressedSize,4),J+=n(H.length,2),J+=n(F.length,2),{fileRecord:v.LOCAL_FILE_HEADER+J+H+F,dirRecord:v.CENTRAL_FILE_HEADER+n(re,2)+J+n(X.length,2)+"\0\0\0\0"+n(T,4)+n(b,4)+H+F+X}}var t=r("../utils"),a=r("../stream/GenericWorker"),c=r("../utf8"),p=r("../crc32"),v=r("../signature");function _(f,y,d,b){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=d,this.encodeFileName=b,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}t.inherits(_,a),_.prototype.push=function(f){var y=f.meta.percent||0,d=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,a.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:d?(y+100*(d-b-1))/d:100}}))},_.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var y=this.streamFiles&&!f.file.dir;if(y){var d=i(f,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(f){this.accumulate=!1;var y=this.streamFiles&&!f.file.dir,d=i(f,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),y)this.push({data:function(b){return v.DATA_DESCRIPTOR+n(b.crc32,4)+n(b.compressedSize,4)+n(b.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var f=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var d=this.bytesWritten-f,b=function(g,w,S,A,C){var D=t.transformTo("string",C(A));return v.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(g,2)+n(g,2)+n(w,4)+n(S,4)+n(D.length,2)+D}(this.dirRecords.length,d,f,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(f){this._sources.push(f);var y=this;return f.on("data",function(d){y.processChunk(d)}),f.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),f.on("error",function(d){y.error(d)}),this},_.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(f){var y=this._sources;if(!a.prototype.error.call(this,f))return!1;for(var d=0;d<y.length;d++)try{y[d].error(f)}catch{}return!0},_.prototype.lock=function(){a.prototype.lock.call(this);for(var f=this._sources,y=0;y<f.length;y++)f[y].lock()},u.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,u,s){var n=r("../compressions"),i=r("./ZipFileWorker");s.generateWorker=function(t,a,c){var p=new i(a.streamFiles,c,a.platform,a.encodeFileName),v=0;try{t.forEach(function(_,f){v++;var y=function(w,S){var A=w||S,C=n[A];if(!C)throw new Error(A+" is not a valid compression method !");return C}(f.options.compression,a.compression),d=f.options.compressionOptions||a.compressionOptions||{},b=f.dir,g=f.date;f._compressWorker(y,d).withStreamInfo("file",{name:_,dir:b,date:g,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(p)}),p.entriesCount=v}catch(_){p.error(_)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,u,s){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new n;for(var t in this)typeof this[t]!="function"&&(i[t]=this[t]);return i}}(n.prototype=r("./object")).loadAsync=r("./load"),n.support=r("./support"),n.defaults=r("./defaults"),n.version="3.10.1",n.loadAsync=function(i,t){return new n().loadAsync(i,t)},n.external=r("./external"),u.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,u,s){var n=r("./utils"),i=r("./external"),t=r("./utf8"),a=r("./zipEntries"),c=r("./stream/Crc32Probe"),p=r("./nodejsUtils");function v(_){return new i.Promise(function(f,y){var d=_.decompressed.getContentWorker().pipe(new c);d.on("error",function(b){y(b)}).on("end",function(){d.streamInfo.crc32!==_.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}u.exports=function(_,f){var y=this;return f=n.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:t.utf8decode}),p.isNode&&p.isStream(_)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",_,!0,f.optimizedBinaryString,f.base64).then(function(d){var b=new a(f);return b.load(d),b}).then(function(d){var b=[i.Promise.resolve(d)],g=d.files;if(f.checkCRC32)for(var w=0;w<g.length;w++)b.push(v(g[w]));return i.Promise.all(b)}).then(function(d){for(var b=d.shift(),g=b.files,w=0;w<g.length;w++){var S=g[w],A=S.fileNameStr,C=n.resolve(S.fileNameStr);y.file(C,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:f.createFolders}),S.dir||(y.file(C).unsafeOriginalName=A)}return b.zipComment.length&&(y.comment=b.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,u,s){var n=r("../utils"),i=r("../stream/GenericWorker");function t(a,c){i.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(c)}n.inherits(t,i),t.prototype._bindStream=function(a){var c=this;(this._stream=a).pause(),a.on("data",function(p){c.push({data:p,meta:{percent:0}})}).on("error",function(p){c.isPaused?this.generatedError=p:c.error(p)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},t.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},t.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},u.exports=t},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,u,s){var n=r("readable-stream").Readable;function i(t,a,c){n.call(this,a),this._helper=t;var p=this;t.on("data",function(v,_){p.push(v)||p._helper.pause(),c&&c(_)}).on("error",function(v){p.emit("error",v)}).on("end",function(){p.push(null)})}r("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},u.exports=i},{"../utils":32,"readable-stream":16}],14:[function(r,u,s){u.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,i);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,i)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var i=new Buffer(n);return i.fill(0),i},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(r,u,s){function n(C,D,I){var H,B=t.getTypeOf(D),j=t.extend(I||{},p);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(C=g(C)),j.createFolders&&(H=b(C))&&w.call(this,H,!0);var X=B==="string"&&j.binary===!1&&j.base64===!1;I&&I.binary!==void 0||(j.binary=!X),(D instanceof v&&D.uncompressedSize===0||j.dir||!D||D.length===0)&&(j.base64=!1,j.binary=!0,D="",j.compression="STORE",B="string");var k=null;k=D instanceof v||D instanceof a?D:y.isNode&&y.isStream(D)?new d(C,D):t.prepareContent(C,D,j.binary,j.optimizedBinaryString,j.base64);var U=new _(C,k,j);this.files[C]=U}var i=r("./utf8"),t=r("./utils"),a=r("./stream/GenericWorker"),c=r("./stream/StreamHelper"),p=r("./defaults"),v=r("./compressedObject"),_=r("./zipObject"),f=r("./generate"),y=r("./nodejsUtils"),d=r("./nodejs/NodejsStreamInputAdapter"),b=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var D=C.lastIndexOf("/");return 0<D?C.substring(0,D):""},g=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},w=function(C,D){return D=D!==void 0?D:p.createFolders,C=g(C),this.files[C]||n.call(this,C,null,{dir:!0,createFolders:D}),this.files[C]};function S(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var D,I,H;for(D in this.files)H=this.files[D],(I=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&C(I,H)},filter:function(C){var D=[];return this.forEach(function(I,H){C(I,H)&&D.push(H)}),D},file:function(C,D,I){if(arguments.length!==1)return C=this.root+C,n.call(this,C,D,I),this;if(S(C)){var H=C;return this.filter(function(j,X){return!X.dir&&H.test(j)})}var B=this.files[this.root+C];return B&&!B.dir?B:null},folder:function(C){if(!C)return this;if(S(C))return this.filter(function(B,j){return j.dir&&C.test(B)});var D=this.root+C,I=w.call(this,D),H=this.clone();return H.root=I.name,H},remove:function(C){C=this.root+C;var D=this.files[C];if(D||(C.slice(-1)!=="/"&&(C+="/"),D=this.files[C]),D&&!D.dir)delete this.files[C];else for(var I=this.filter(function(B,j){return j.name.slice(0,C.length)===C}),H=0;H<I.length;H++)delete this.files[I[H].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var D,I={};try{if((I=t.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");t.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var H=I.comment||this.comment||"";D=f.generateWorker(this,I,H)}catch(B){(D=new a("error")).error(B)}return new c(D,I.type||"string",I.mimeType)},generateAsync:function(C,D){return this.generateInternalStream(C).accumulate(D)},generateNodeStream:function(C,D){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(D)}};u.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,u,s){u.exports=r("stream")},{stream:void 0}],17:[function(r,u,s){var n=r("./DataReader");function i(t){n.call(this,t);for(var a=0;a<this.data.length;a++)t[a]=255&t[a]}r("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var a=t.charCodeAt(0),c=t.charCodeAt(1),p=t.charCodeAt(2),v=t.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===a&&this.data[_+1]===c&&this.data[_+2]===p&&this.data[_+3]===v)return _-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var a=t.charCodeAt(0),c=t.charCodeAt(1),p=t.charCodeAt(2),v=t.charCodeAt(3),_=this.readData(4);return a===_[0]&&c===_[1]&&p===_[2]&&v===_[3]},i.prototype.readData=function(t){if(this.checkOffset(t),t===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,a},u.exports=i},{"../utils":32,"./DataReader":18}],18:[function(r,u,s){var n=r("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var a,c=0;for(this.checkOffset(t),a=this.index+t-1;a>=this.index;a--)c=(c<<8)+this.byteAt(a);return this.index+=t,c},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},u.exports=i},{"../utils":32}],19:[function(r,u,s){var n=r("./Uint8ArrayReader");function i(t){n.call(this,t)}r("../utils").inherits(i,n),i.prototype.readData=function(t){this.checkOffset(t);var a=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,a},u.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,u,s){var n=r("./DataReader");function i(t){n.call(this,t)}r("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var a=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,a},u.exports=i},{"../utils":32,"./DataReader":18}],21:[function(r,u,s){var n=r("./ArrayReader");function i(t){n.call(this,t)}r("../utils").inherits(i,n),i.prototype.readData=function(t){if(this.checkOffset(t),t===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,a},u.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(r,u,s){var n=r("../utils"),i=r("../support"),t=r("./ArrayReader"),a=r("./StringReader"),c=r("./NodeBufferReader"),p=r("./Uint8ArrayReader");u.exports=function(v){var _=n.getTypeOf(v);return n.checkSupport(_),_!=="string"||i.uint8array?_==="nodebuffer"?new c(v):i.uint8array?new p(n.transformTo("uint8array",v)):new t(n.transformTo("array",v)):new a(v)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,u,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,u,s){var n=r("./GenericWorker"),i=r("../utils");function t(a){n.call(this,"ConvertWorker to "+a),this.destType=a}i.inherits(t,n),t.prototype.processChunk=function(a){this.push({data:i.transformTo(this.destType,a.data),meta:a.meta})},u.exports=t},{"../utils":32,"./GenericWorker":28}],25:[function(r,u,s){var n=r("./GenericWorker"),i=r("../crc32");function t(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(t,n),t.prototype.processChunk=function(a){this.streamInfo.crc32=i(a.data,this.streamInfo.crc32||0),this.push(a)},u.exports=t},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,u,s){var n=r("../utils"),i=r("./GenericWorker");function t(a){i.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}n.inherits(t,i),t.prototype.processChunk=function(a){if(a){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+a.data.length}i.prototype.processChunk.call(this,a)},u.exports=t},{"../utils":32,"./GenericWorker":28}],27:[function(r,u,s){var n=r("../utils"),i=r("./GenericWorker");function t(a){i.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(p){c.dataIsReady=!0,c.data=p,c.max=p&&p.length||0,c.type=n.getTypeOf(p),c.isPaused||c._tickAndRepeat()},function(p){c.error(p)})}n.inherits(t,i),t.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},t.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},t.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},t.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,c);break;case"uint8array":a=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":a=this.data.slice(this.index,c)}return this.index=c,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},u.exports=t},{"../utils":32,"./GenericWorker":28}],28:[function(r,u,s){function n(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,t){return this._listeners[i].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,t){if(this._listeners[i])for(var a=0;a<this._listeners[i].length;a++)this._listeners[i][a].call(this,t)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var t=this;return i.on("data",function(a){t.processChunk(a)}),i.on("end",function(){t.end()}),i.on("error",function(a){t.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,t){return this.extraStreamInfo[i]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},u.exports=n},{}],29:[function(r,u,s){var n=r("../utils"),i=r("./ConvertWorker"),t=r("./GenericWorker"),a=r("../base64"),c=r("../support"),p=r("../external"),v=null;if(c.nodestream)try{v=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(y,d){return new p.Promise(function(b,g){var w=[],S=y._internalType,A=y._outputType,C=y._mimeType;y.on("data",function(D,I){w.push(D),d&&d(I)}).on("error",function(D){w=[],g(D)}).on("end",function(){try{var D=function(I,H,B){switch(I){case"blob":return n.newBlob(n.transformTo("arraybuffer",H),B);case"base64":return a.encode(H);default:return n.transformTo(I,H)}}(A,function(I,H){var B,j=0,X=null,k=0;for(B=0;B<H.length;B++)k+=H[B].length;switch(I){case"string":return H.join("");case"array":return Array.prototype.concat.apply([],H);case"uint8array":for(X=new Uint8Array(k),B=0;B<H.length;B++)X.set(H[B],j),j+=H[B].length;return X;case"nodebuffer":return Buffer.concat(H);default:throw new Error("concat : unsupported type '"+I+"'")}}(S,w),C);b(D)}catch(I){g(I)}w=[]}).resume()})}function f(y,d,b){var g=d;switch(d){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=d,this._mimeType=b,n.checkSupport(g),this._worker=y.pipe(new i(g)),y.lock()}catch(w){this._worker=new t("error"),this._worker.error(w)}}f.prototype={accumulate:function(y){return _(this,y)},on:function(y,d){var b=this;return y==="data"?this._worker.on(y,function(g){d.call(b,g.data,g.meta)}):this._worker.on(y,function(){n.delay(d,arguments,b)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new v(this,{objectMode:this._outputType!=="nodebuffer"},y)}},u.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,u,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var n=new ArrayBuffer(0);try{s.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),s.blob=i.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!r("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(r,u,s){for(var n=r("./utils"),i=r("./support"),t=r("./nodejsUtils"),a=r("./stream/GenericWorker"),c=new Array(256),p=0;p<256;p++)c[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;c[254]=c[254]=1;function v(){a.call(this,"utf-8 decode"),this.leftOver=null}function _(){a.call(this,"utf-8 encode")}s.utf8encode=function(f){return i.nodebuffer?t.newBufferFrom(f,"utf-8"):function(y){var d,b,g,w,S,A=y.length,C=0;for(w=0;w<A;w++)(64512&(b=y.charCodeAt(w)))==55296&&w+1<A&&(64512&(g=y.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(g-56320),w++),C+=b<128?1:b<2048?2:b<65536?3:4;for(d=i.uint8array?new Uint8Array(C):new Array(C),w=S=0;S<C;w++)(64512&(b=y.charCodeAt(w)))==55296&&w+1<A&&(64512&(g=y.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(g-56320),w++),b<128?d[S++]=b:(b<2048?d[S++]=192|b>>>6:(b<65536?d[S++]=224|b>>>12:(d[S++]=240|b>>>18,d[S++]=128|b>>>12&63),d[S++]=128|b>>>6&63),d[S++]=128|63&b);return d}(f)},s.utf8decode=function(f){return i.nodebuffer?n.transformTo("nodebuffer",f).toString("utf-8"):function(y){var d,b,g,w,S=y.length,A=new Array(2*S);for(d=b=0;d<S;)if((g=y[d++])<128)A[b++]=g;else if(4<(w=c[g]))A[b++]=65533,d+=w-1;else{for(g&=w===2?31:w===3?15:7;1<w&&d<S;)g=g<<6|63&y[d++],w--;1<w?A[b++]=65533:g<65536?A[b++]=g:(g-=65536,A[b++]=55296|g>>10&1023,A[b++]=56320|1023&g)}return A.length!==b&&(A.subarray?A=A.subarray(0,b):A.length=b),n.applyFromCharCode(A)}(f=n.transformTo(i.uint8array?"uint8array":"array",f))},n.inherits(v,a),v.prototype.processChunk=function(f){var y=n.transformTo(i.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var d=y;(y=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),y.set(d,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var b=function(w,S){var A;for((S=S||w.length)>w.length&&(S=w.length),A=S-1;0<=A&&(192&w[A])==128;)A--;return A<0||A===0?S:A+c[w[A]]>S?A:S}(y),g=y;b!==y.length&&(i.uint8array?(g=y.subarray(0,b),this.leftOver=y.subarray(b,y.length)):(g=y.slice(0,b),this.leftOver=y.slice(b,y.length))),this.push({data:s.utf8decode(g),meta:f.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=v,n.inherits(_,a),_.prototype.processChunk=function(f){this.push({data:s.utf8encode(f.data),meta:f.meta})},s.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,u,s){var n=r("./support"),i=r("./base64"),t=r("./nodejsUtils"),a=r("./external");function c(d){return d}function p(d,b){for(var g=0;g<d.length;++g)b[g]=255&d.charCodeAt(g);return b}r("setimmediate"),s.newBlob=function(d,b){s.checkSupport("blob");try{return new Blob([d],{type:b})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(d),g.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(d,b,g){var w=[],S=0,A=d.length;if(A<=g)return String.fromCharCode.apply(null,d);for(;S<A;)b==="array"||b==="nodebuffer"?w.push(String.fromCharCode.apply(null,d.slice(S,Math.min(S+g,A)))):w.push(String.fromCharCode.apply(null,d.subarray(S,Math.min(S+g,A)))),S+=g;return w.join("")},stringifyByChar:function(d){for(var b="",g=0;g<d.length;g++)b+=String.fromCharCode(d[g]);return b},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,t.allocBuffer(1)).length===1}catch{return!1}}()}};function _(d){var b=65536,g=s.getTypeOf(d),w=!0;if(g==="uint8array"?w=v.applyCanBeUsed.uint8array:g==="nodebuffer"&&(w=v.applyCanBeUsed.nodebuffer),w)for(;1<b;)try{return v.stringifyByChunk(d,g,b)}catch{b=Math.floor(b/2)}return v.stringifyByChar(d)}function f(d,b){for(var g=0;g<d.length;g++)b[g]=d[g];return b}s.applyFromCharCode=_;var y={};y.string={string:c,array:function(d){return p(d,new Array(d.length))},arraybuffer:function(d){return y.string.uint8array(d).buffer},uint8array:function(d){return p(d,new Uint8Array(d.length))},nodebuffer:function(d){return p(d,t.allocBuffer(d.length))}},y.array={string:_,array:c,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return t.newBufferFrom(d)}},y.arraybuffer={string:function(d){return _(new Uint8Array(d))},array:function(d){return f(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:c,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return t.newBufferFrom(new Uint8Array(d))}},y.uint8array={string:_,array:function(d){return f(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:c,nodebuffer:function(d){return t.newBufferFrom(d)}},y.nodebuffer={string:_,array:function(d){return f(d,new Array(d.length))},arraybuffer:function(d){return y.nodebuffer.uint8array(d).buffer},uint8array:function(d){return f(d,new Uint8Array(d.length))},nodebuffer:c},s.transformTo=function(d,b){if(b=b||"",!d)return b;s.checkSupport(d);var g=s.getTypeOf(b);return y[g][d](b)},s.resolve=function(d){for(var b=d.split("/"),g=[],w=0;w<b.length;w++){var S=b[w];S==="."||S===""&&w!==0&&w!==b.length-1||(S===".."?g.pop():g.push(S))}return g.join("/")},s.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":n.nodebuffer&&t.isBuffer(d)?"nodebuffer":n.uint8array&&d instanceof Uint8Array?"uint8array":n.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(d){if(!n[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(d){var b,g,w="";for(g=0;g<(d||"").length;g++)w+="\\x"+((b=d.charCodeAt(g))<16?"0":"")+b.toString(16).toUpperCase();return w},s.delay=function(d,b,g){setImmediate(function(){d.apply(g||null,b||[])})},s.inherits=function(d,b){function g(){}g.prototype=b.prototype,d.prototype=new g},s.extend=function(){var d,b,g={};for(d=0;d<arguments.length;d++)for(b in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],b)&&g[b]===void 0&&(g[b]=arguments[d][b]);return g},s.prepareContent=function(d,b,g,w,S){return a.Promise.resolve(b).then(function(A){return n.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new a.Promise(function(C,D){var I=new FileReader;I.onload=function(H){C(H.target.result)},I.onerror=function(H){D(H.target.error)},I.readAsArrayBuffer(A)}):A}).then(function(A){var C=s.getTypeOf(A);return C?(C==="arraybuffer"?A=s.transformTo("uint8array",A):C==="string"&&(S?A=i.decode(A):g&&w!==!0&&(A=function(D){return p(D,n.uint8array?new Uint8Array(D.length):new Array(D.length))}(A))),A):a.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,u,s){var n=r("./reader/readerFor"),i=r("./utils"),t=r("./signature"),a=r("./zipEntry"),c=r("./support");function p(v){this.files=[],this.loadOptions=v}p.prototype={checkSignature:function(v){if(!this.reader.readAndCheckSignature(v)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(_)+", expected "+i.pretty(v)+")")}},isSignature:function(v,_){var f=this.reader.index;this.reader.setIndex(v);var y=this.reader.readString(4)===_;return this.reader.setIndex(f),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var v=this.reader.readData(this.zipCommentLength),_=c.uint8array?"uint8array":"array",f=i.transformTo(_,v);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var v,_,f,y=this.zip64EndOfCentralSize-44;0<y;)v=this.reader.readInt(2),_=this.reader.readInt(4),f=this.reader.readData(_),this.zip64ExtensibleData[v]={id:v,length:_,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var v,_;for(v=0;v<this.files.length;v++)_=this.files[v],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(t.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var v;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(t.CENTRAL_FILE_HEADER);)(v=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(v);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var v=this.reader.lastIndexOfSignature(t.CENTRAL_DIRECTORY_END);if(v<0)throw this.isSignature(0,t.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(v);var _=v;if(this.checkSignature(t.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(v=this.reader.lastIndexOfSignature(t.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(v),this.checkSignature(t.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,t.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(t.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(t.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var y=_-f;if(0<y)this.isSignature(_,t.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(v){this.reader=n(v)},load:function(v){this.prepareReader(v),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},u.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,u,s){var n=r("./reader/readerFor"),i=r("./utils"),t=r("./compressedObject"),a=r("./crc32"),c=r("./utf8"),p=r("./compressions"),v=r("./support");function _(f,y){this.options=f,this.loadOptions=y}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var y,d;if(f.skip(22),this.fileNameLength=f.readInt(2),d=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(b){for(var g in p)if(Object.prototype.hasOwnProperty.call(p,g)&&p[g].magic===b)return p[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new t(this.compressedSize,this.uncompressedSize,this.crc32,y,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var y=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(y),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var y,d,b,g=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<g;)y=f.readInt(2),d=f.readInt(2),b=f.readData(d),this.extraFields[y]={id:y,length:d,value:b};f.setIndex(g)},handleUTF8:function(){var f=v.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var d=i.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var g=i.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var y=n(f.value);return y.readInt(1)!==1||a(this.fileName)!==y.readInt(4)?null:c.utf8decode(y.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var y=n(f.value);return y.readInt(1)!==1||a(this.fileComment)!==y.readInt(4)?null:c.utf8decode(y.readData(f.length-5))}return null}},u.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,u,s){function n(y,d,b){this.name=y,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=d,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var i=r("./stream/StreamHelper"),t=r("./stream/DataWorker"),a=r("./utf8"),c=r("./compressedObject"),p=r("./stream/GenericWorker");n.prototype={internalStream:function(y){var d=null,b="string";try{if(!y)throw new Error("No output type specified.");var g=(b=y.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),d=this._decompressWorker();var w=!this._dataBinary;w&&!g&&(d=d.pipe(new a.Utf8EncodeWorker)),!w&&g&&(d=d.pipe(new a.Utf8DecodeWorker))}catch(S){(d=new p("error")).error(S)}return new i(d,b,"")},async:function(y,d){return this.internalStream(y).accumulate(d)},nodeStream:function(y,d){return this.internalStream(y||"nodebuffer").toNodejsStream(d)},_compressWorker:function(y,d){if(this._data instanceof c&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new a.Utf8EncodeWorker)),c.createWorkerFrom(b,y,d)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof p?this._data:new t(this._data)}};for(var v=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<v.length;f++)n.prototype[v[f]]=_;u.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,u,s){(function(n){var i,t,a=n.MutationObserver||n.WebKitMutationObserver;if(a){var c=0,p=new a(y),v=n.document.createTextNode("");p.observe(v,{characterData:!0}),i=function(){v.data=c=++c%2}}else if(n.setImmediate||n.MessageChannel===void 0)i="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var d=n.document.createElement("script");d.onreadystatechange=function(){y(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},n.document.documentElement.appendChild(d)}:function(){setTimeout(y,0)};else{var _=new n.MessageChannel;_.port1.onmessage=y,i=function(){_.port2.postMessage(0)}}var f=[];function y(){var d,b;t=!0;for(var g=f.length;g;){for(b=f,f=[],d=-1;++d<g;)b[d]();g=f.length}t=!1}u.exports=function(d){f.push(d)!==1||t||i()}}).call(this,typeof wt<"u"?wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,u,s){var n=r("immediate");function i(){}var t={},a=["REJECTED"],c=["FULFILLED"],p=["PENDING"];function v(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,g!==i&&d(this,g)}function _(g,w,S){this.promise=g,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function f(g,w,S){n(function(){var A;try{A=w(S)}catch(C){return t.reject(g,C)}A===g?t.reject(g,new TypeError("Cannot resolve promise with itself")):t.resolve(g,A)})}function y(g){var w=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof w=="function")return function(){w.apply(g,arguments)}}function d(g,w){var S=!1;function A(I){S||(S=!0,t.reject(g,I))}function C(I){S||(S=!0,t.resolve(g,I))}var D=b(function(){w(C,A)});D.status==="error"&&A(D.value)}function b(g,w){var S={};try{S.value=g(w),S.status="success"}catch(A){S.status="error",S.value=A}return S}(u.exports=v).prototype.finally=function(g){if(typeof g!="function")return this;var w=this.constructor;return this.then(function(S){return w.resolve(g()).then(function(){return S})},function(S){return w.resolve(g()).then(function(){throw S})})},v.prototype.catch=function(g){return this.then(null,g)},v.prototype.then=function(g,w){if(typeof g!="function"&&this.state===c||typeof w!="function"&&this.state===a)return this;var S=new this.constructor(i);return this.state!==p?f(S,this.state===c?g:w,this.outcome):this.queue.push(new _(S,g,w)),S},_.prototype.callFulfilled=function(g){t.resolve(this.promise,g)},_.prototype.otherCallFulfilled=function(g){f(this.promise,this.onFulfilled,g)},_.prototype.callRejected=function(g){t.reject(this.promise,g)},_.prototype.otherCallRejected=function(g){f(this.promise,this.onRejected,g)},t.resolve=function(g,w){var S=b(y,w);if(S.status==="error")return t.reject(g,S.value);var A=S.value;if(A)d(g,A);else{g.state=c,g.outcome=w;for(var C=-1,D=g.queue.length;++C<D;)g.queue[C].callFulfilled(w)}return g},t.reject=function(g,w){g.state=a,g.outcome=w;for(var S=-1,A=g.queue.length;++S<A;)g.queue[S].callRejected(w);return g},v.resolve=function(g){return g instanceof this?g:t.resolve(new this(i),g)},v.reject=function(g){var w=new this(i);return t.reject(w,g)},v.all=function(g){var w=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=g.length,A=!1;if(!S)return this.resolve([]);for(var C=new Array(S),D=0,I=-1,H=new this(i);++I<S;)B(g[I],I);return H;function B(j,X){w.resolve(j).then(function(k){C[X]=k,++D!==S||A||(A=!0,t.resolve(H,C))},function(k){A||(A=!0,t.reject(H,k))})}},v.race=function(g){var w=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=g.length,A=!1;if(!S)return this.resolve([]);for(var C=-1,D=new this(i);++C<S;)I=g[C],w.resolve(I).then(function(H){A||(A=!0,t.resolve(D,H))},function(H){A||(A=!0,t.reject(D,H))});var I;return D}},{immediate:36}],38:[function(r,u,s){var n={};(0,r("./lib/utils/common").assign)(n,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),u.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,u,s){var n=r("./zlib/deflate"),i=r("./utils/common"),t=r("./utils/strings"),a=r("./zlib/messages"),c=r("./zlib/zstream"),p=Object.prototype.toString,v=0,_=-1,f=0,y=8;function d(g){if(!(this instanceof d))return new d(g);this.options=i.assign({level:_,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},g||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var S=n.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(S!==v)throw new Error(a[S]);if(w.header&&n.deflateSetHeader(this.strm,w.header),w.dictionary){var A;if(A=typeof w.dictionary=="string"?t.string2buf(w.dictionary):p.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(S=n.deflateSetDictionary(this.strm,A))!==v)throw new Error(a[S]);this._dict_set=!0}}function b(g,w){var S=new d(w);if(S.push(g,!0),S.err)throw S.msg||a[S.err];return S.result}d.prototype.push=function(g,w){var S,A,C=this.strm,D=this.options.chunkSize;if(this.ended)return!1;A=w===~~w?w:w===!0?4:0,typeof g=="string"?C.input=t.string2buf(g):p.call(g)==="[object ArrayBuffer]"?C.input=new Uint8Array(g):C.input=g,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new i.Buf8(D),C.next_out=0,C.avail_out=D),(S=n.deflate(C,A))!==1&&S!==v)return this.onEnd(S),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(t.buf2binstring(i.shrinkBuf(C.output,C.next_out))):this.onData(i.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&S!==1);return A===4?(S=n.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===v):A!==2||(this.onEnd(v),!(C.avail_out=0))},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===v&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Deflate=d,s.deflate=b,s.deflateRaw=function(g,w){return(w=w||{}).raw=!0,b(g,w)},s.gzip=function(g,w){return(w=w||{}).gzip=!0,b(g,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,u,s){var n=r("./zlib/inflate"),i=r("./utils/common"),t=r("./utils/strings"),a=r("./zlib/constants"),c=r("./zlib/messages"),p=r("./zlib/zstream"),v=r("./zlib/gzheader"),_=Object.prototype.toString;function f(d){if(!(this instanceof f))return new f(d);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},d||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||d&&d.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var g=n.inflateInit2(this.strm,b.windowBits);if(g!==a.Z_OK)throw new Error(c[g]);this.header=new v,n.inflateGetHeader(this.strm,this.header)}function y(d,b){var g=new f(b);if(g.push(d,!0),g.err)throw g.msg||c[g.err];return g.result}f.prototype.push=function(d,b){var g,w,S,A,C,D,I=this.strm,H=this.options.chunkSize,B=this.options.dictionary,j=!1;if(this.ended)return!1;w=b===~~b?b:b===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof d=="string"?I.input=t.binstring2buf(d):_.call(d)==="[object ArrayBuffer]"?I.input=new Uint8Array(d):I.input=d,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new i.Buf8(H),I.next_out=0,I.avail_out=H),(g=n.inflate(I,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&B&&(D=typeof B=="string"?t.string2buf(B):_.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,g=n.inflateSetDictionary(this.strm,D)),g===a.Z_BUF_ERROR&&j===!0&&(g=a.Z_OK,j=!1),g!==a.Z_STREAM_END&&g!==a.Z_OK)return this.onEnd(g),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&g!==a.Z_STREAM_END&&(I.avail_in!==0||w!==a.Z_FINISH&&w!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=t.utf8border(I.output,I.next_out),A=I.next_out-S,C=t.buf2string(I.output,S),I.next_out=A,I.avail_out=H-A,A&&i.arraySet(I.output,I.output,S,A,0),this.onData(C)):this.onData(i.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(j=!0)}while((0<I.avail_in||I.avail_out===0)&&g!==a.Z_STREAM_END);return g===a.Z_STREAM_END&&(w=a.Z_FINISH),w===a.Z_FINISH?(g=n.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===a.Z_OK):w!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(I.avail_out=0))},f.prototype.onData=function(d){this.chunks.push(d)},f.prototype.onEnd=function(d){d===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},s.Inflate=f,s.inflate=y,s.inflateRaw=function(d,b){return(b=b||{}).raw=!0,y(d,b)},s.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,u,s){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var p=c.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var v in p)p.hasOwnProperty(v)&&(a[v]=p[v])}}return a},s.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var i={arraySet:function(a,c,p,v,_){if(c.subarray&&a.subarray)a.set(c.subarray(p,p+v),_);else for(var f=0;f<v;f++)a[_+f]=c[p+f]},flattenChunks:function(a){var c,p,v,_,f,y;for(c=v=0,p=a.length;c<p;c++)v+=a[c].length;for(y=new Uint8Array(v),c=_=0,p=a.length;c<p;c++)f=a[c],y.set(f,_),_+=f.length;return y}},t={arraySet:function(a,c,p,v,_){for(var f=0;f<v;f++)a[_+f]=c[p+f]},flattenChunks:function(a){return[].concat.apply([],a)}};s.setTyped=function(a){a?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,i)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,t))},s.setTyped(n)},{}],42:[function(r,u,s){var n=r("./common"),i=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t=!1}for(var a=new n.Buf8(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function p(v,_){if(_<65537&&(v.subarray&&t||!v.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(v,_));for(var f="",y=0;y<_;y++)f+=String.fromCharCode(v[y]);return f}a[254]=a[254]=1,s.string2buf=function(v){var _,f,y,d,b,g=v.length,w=0;for(d=0;d<g;d++)(64512&(f=v.charCodeAt(d)))==55296&&d+1<g&&(64512&(y=v.charCodeAt(d+1)))==56320&&(f=65536+(f-55296<<10)+(y-56320),d++),w+=f<128?1:f<2048?2:f<65536?3:4;for(_=new n.Buf8(w),d=b=0;b<w;d++)(64512&(f=v.charCodeAt(d)))==55296&&d+1<g&&(64512&(y=v.charCodeAt(d+1)))==56320&&(f=65536+(f-55296<<10)+(y-56320),d++),f<128?_[b++]=f:(f<2048?_[b++]=192|f>>>6:(f<65536?_[b++]=224|f>>>12:(_[b++]=240|f>>>18,_[b++]=128|f>>>12&63),_[b++]=128|f>>>6&63),_[b++]=128|63&f);return _},s.buf2binstring=function(v){return p(v,v.length)},s.binstring2buf=function(v){for(var _=new n.Buf8(v.length),f=0,y=_.length;f<y;f++)_[f]=v.charCodeAt(f);return _},s.buf2string=function(v,_){var f,y,d,b,g=_||v.length,w=new Array(2*g);for(f=y=0;f<g;)if((d=v[f++])<128)w[y++]=d;else if(4<(b=a[d]))w[y++]=65533,f+=b-1;else{for(d&=b===2?31:b===3?15:7;1<b&&f<g;)d=d<<6|63&v[f++],b--;1<b?w[y++]=65533:d<65536?w[y++]=d:(d-=65536,w[y++]=55296|d>>10&1023,w[y++]=56320|1023&d)}return p(w,y)},s.utf8border=function(v,_){var f;for((_=_||v.length)>v.length&&(_=v.length),f=_-1;0<=f&&(192&v[f])==128;)f--;return f<0||f===0?_:f+a[v[f]]>_?f:_}},{"./common":41}],43:[function(r,u,s){u.exports=function(n,i,t,a){for(var c=65535&n|0,p=n>>>16&65535|0,v=0;t!==0;){for(t-=v=2e3<t?2e3:t;p=p+(c=c+i[a++]|0)|0,--v;);c%=65521,p%=65521}return c|p<<16|0}},{}],44:[function(r,u,s){u.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,u,s){var n=function(){for(var i,t=[],a=0;a<256;a++){i=a;for(var c=0;c<8;c++)i=1&i?3988292384^i>>>1:i>>>1;t[a]=i}return t}();u.exports=function(i,t,a,c){var p=n,v=c+a;i^=-1;for(var _=c;_<v;_++)i=i>>>8^p[255&(i^t[_])];return-1^i}},{}],46:[function(r,u,s){var n,i=r("../utils/common"),t=r("./trees"),a=r("./adler32"),c=r("./crc32"),p=r("./messages"),v=0,_=4,f=0,y=-2,d=-1,b=4,g=2,w=8,S=9,A=286,C=30,D=19,I=2*A+1,H=15,B=3,j=258,X=j+B+1,k=42,U=113,l=1,F=2,K=3,M=4;function te(o,$){return o.msg=p[$],$}function Z(o){return(o<<1)-(4<o?9:0)}function ne(o){for(var $=o.length;0<=--$;)o[$]=0}function O(o){var $=o.state,P=$.pending;P>o.avail_out&&(P=o.avail_out),P!==0&&(i.arraySet(o.output,$.pending_buf,$.pending_out,P,o.next_out),o.next_out+=P,$.pending_out+=P,o.total_out+=P,o.avail_out-=P,$.pending-=P,$.pending===0&&($.pending_out=0))}function T(o,$){t._tr_flush_block(o,0<=o.block_start?o.block_start:-1,o.strstart-o.block_start,$),o.block_start=o.strstart,O(o.strm)}function re(o,$){o.pending_buf[o.pending++]=$}function J(o,$){o.pending_buf[o.pending++]=$>>>8&255,o.pending_buf[o.pending++]=255&$}function G(o,$){var P,x,h=o.max_chain_length,R=o.strstart,L=o.prev_length,N=o.nice_match,E=o.strstart>o.w_size-X?o.strstart-(o.w_size-X):0,W=o.window,q=o.w_mask,V=o.prev,ee=o.strstart+j,me=W[R+L-1],se=W[R+L];o.prev_length>=o.good_match&&(h>>=2),N>o.lookahead&&(N=o.lookahead);do if(W[(P=$)+L]===se&&W[P+L-1]===me&&W[P]===W[R]&&W[++P]===W[R+1]){R+=2,P++;do;while(W[++R]===W[++P]&&W[++R]===W[++P]&&W[++R]===W[++P]&&W[++R]===W[++P]&&W[++R]===W[++P]&&W[++R]===W[++P]&&W[++R]===W[++P]&&W[++R]===W[++P]&&R<ee);if(x=j-(ee-R),R=ee-j,L<x){if(o.match_start=$,N<=(L=x))break;me=W[R+L-1],se=W[R+L]}}while(($=V[$&q])>E&&--h!=0);return L<=o.lookahead?L:o.lookahead}function oe(o){var $,P,x,h,R,L,N,E,W,q,V=o.w_size;do{if(h=o.window_size-o.lookahead-o.strstart,o.strstart>=V+(V-X)){for(i.arraySet(o.window,o.window,V,V,0),o.match_start-=V,o.strstart-=V,o.block_start-=V,$=P=o.hash_size;x=o.head[--$],o.head[$]=V<=x?x-V:0,--P;);for($=P=V;x=o.prev[--$],o.prev[$]=V<=x?x-V:0,--P;);h+=V}if(o.strm.avail_in===0)break;if(L=o.strm,N=o.window,E=o.strstart+o.lookahead,W=h,q=void 0,q=L.avail_in,W<q&&(q=W),P=q===0?0:(L.avail_in-=q,i.arraySet(N,L.input,L.next_in,q,E),L.state.wrap===1?L.adler=a(L.adler,N,q,E):L.state.wrap===2&&(L.adler=c(L.adler,N,q,E)),L.next_in+=q,L.total_in+=q,q),o.lookahead+=P,o.lookahead+o.insert>=B)for(R=o.strstart-o.insert,o.ins_h=o.window[R],o.ins_h=(o.ins_h<<o.hash_shift^o.window[R+1])&o.hash_mask;o.insert&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[R+B-1])&o.hash_mask,o.prev[R&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=R,R++,o.insert--,!(o.lookahead+o.insert<B)););}while(o.lookahead<X&&o.strm.avail_in!==0)}function Ce(o,$){for(var P,x;;){if(o.lookahead<X){if(oe(o),o.lookahead<X&&$===v)return l;if(o.lookahead===0)break}if(P=0,o.lookahead>=B&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+B-1])&o.hash_mask,P=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),P!==0&&o.strstart-P<=o.w_size-X&&(o.match_length=G(o,P)),o.match_length>=B)if(x=t._tr_tally(o,o.strstart-o.match_start,o.match_length-B),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=B){for(o.match_length--;o.strstart++,o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+B-1])&o.hash_mask,P=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart,--o.match_length!=0;);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+1])&o.hash_mask;else x=t._tr_tally(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(x&&(T(o,!1),o.strm.avail_out===0))return l}return o.insert=o.strstart<B-1?o.strstart:B-1,$===_?(T(o,!0),o.strm.avail_out===0?K:M):o.last_lit&&(T(o,!1),o.strm.avail_out===0)?l:F}function ie(o,$){for(var P,x,h;;){if(o.lookahead<X){if(oe(o),o.lookahead<X&&$===v)return l;if(o.lookahead===0)break}if(P=0,o.lookahead>=B&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+B-1])&o.hash_mask,P=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=B-1,P!==0&&o.prev_length<o.max_lazy_match&&o.strstart-P<=o.w_size-X&&(o.match_length=G(o,P),o.match_length<=5&&(o.strategy===1||o.match_length===B&&4096<o.strstart-o.match_start)&&(o.match_length=B-1)),o.prev_length>=B&&o.match_length<=o.prev_length){for(h=o.strstart+o.lookahead-B,x=t._tr_tally(o,o.strstart-1-o.prev_match,o.prev_length-B),o.lookahead-=o.prev_length-1,o.prev_length-=2;++o.strstart<=h&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+B-1])&o.hash_mask,P=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),--o.prev_length!=0;);if(o.match_available=0,o.match_length=B-1,o.strstart++,x&&(T(o,!1),o.strm.avail_out===0))return l}else if(o.match_available){if((x=t._tr_tally(o,0,o.window[o.strstart-1]))&&T(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return l}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(x=t._tr_tally(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<B-1?o.strstart:B-1,$===_?(T(o,!0),o.strm.avail_out===0?K:M):o.last_lit&&(T(o,!1),o.strm.avail_out===0)?l:F}function ue(o,$,P,x,h){this.good_length=o,this.max_lazy=$,this.nice_length=P,this.max_chain=x,this.func=h}function xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*I),this.dyn_dtree=new i.Buf16(2*(2*C+1)),this.bl_tree=new i.Buf16(2*(2*D+1)),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(H+1),this.heap=new i.Buf16(2*A+1),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*A+1),ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function we(o){var $;return o&&o.state?(o.total_in=o.total_out=0,o.data_type=g,($=o.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?k:U,o.adler=$.wrap===2?0:1,$.last_flush=v,t._tr_init($),f):te(o,y)}function Ae(o){var $=we(o);return $===f&&function(P){P.window_size=2*P.w_size,ne(P.head),P.max_lazy_match=n[P.level].max_lazy,P.good_match=n[P.level].good_length,P.nice_match=n[P.level].nice_length,P.max_chain_length=n[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=B-1,P.match_available=0,P.ins_h=0}(o.state),$}function Re(o,$,P,x,h,R){if(!o)return y;var L=1;if($===d&&($=6),x<0?(L=0,x=-x):15<x&&(L=2,x-=16),h<1||S<h||P!==w||x<8||15<x||$<0||9<$||R<0||b<R)return te(o,y);x===8&&(x=9);var N=new xe;return(o.state=N).strm=o,N.wrap=L,N.gzhead=null,N.w_bits=x,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=h+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+B-1)/B),N.window=new i.Buf8(2*N.w_size),N.head=new i.Buf16(N.hash_size),N.prev=new i.Buf16(N.w_size),N.lit_bufsize=1<<h+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new i.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=$,N.strategy=R,N.method=P,Ae(o)}n=[new ue(0,0,0,0,function(o,$){var P=65535;for(P>o.pending_buf_size-5&&(P=o.pending_buf_size-5);;){if(o.lookahead<=1){if(oe(o),o.lookahead===0&&$===v)return l;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;var x=o.block_start+P;if((o.strstart===0||o.strstart>=x)&&(o.lookahead=o.strstart-x,o.strstart=x,T(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-X&&(T(o,!1),o.strm.avail_out===0))return l}return o.insert=0,$===_?(T(o,!0),o.strm.avail_out===0?K:M):(o.strstart>o.block_start&&(T(o,!1),o.strm.avail_out),l)}),new ue(4,4,8,4,Ce),new ue(4,5,16,8,Ce),new ue(4,6,32,32,Ce),new ue(4,4,16,16,ie),new ue(8,16,32,32,ie),new ue(8,16,128,128,ie),new ue(8,32,128,256,ie),new ue(32,128,258,1024,ie),new ue(32,258,258,4096,ie)],s.deflateInit=function(o,$){return Re(o,$,w,15,8,0)},s.deflateInit2=Re,s.deflateReset=Ae,s.deflateResetKeep=we,s.deflateSetHeader=function(o,$){return o&&o.state?o.state.wrap!==2?y:(o.state.gzhead=$,f):y},s.deflate=function(o,$){var P,x,h,R;if(!o||!o.state||5<$||$<0)return o?te(o,y):y;if(x=o.state,!o.output||!o.input&&o.avail_in!==0||x.status===666&&$!==_)return te(o,o.avail_out===0?-5:y);if(x.strm=o,P=x.last_flush,x.last_flush=$,x.status===k)if(x.wrap===2)o.adler=0,re(x,31),re(x,139),re(x,8),x.gzhead?(re(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),re(x,255&x.gzhead.time),re(x,x.gzhead.time>>8&255),re(x,x.gzhead.time>>16&255),re(x,x.gzhead.time>>24&255),re(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),re(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(re(x,255&x.gzhead.extra.length),re(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(o.adler=c(o.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(re(x,0),re(x,0),re(x,0),re(x,0),re(x,0),re(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),re(x,3),x.status=U);else{var L=w+(x.w_bits-8<<4)<<8;L|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(L|=32),L+=31-L%31,x.status=U,J(x,L),x.strstart!==0&&(J(x,o.adler>>>16),J(x,65535&o.adler)),o.adler=1}if(x.status===69)if(x.gzhead.extra){for(h=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>h&&(o.adler=c(o.adler,x.pending_buf,x.pending-h,h)),O(o),h=x.pending,x.pending!==x.pending_buf_size));)re(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>h&&(o.adler=c(o.adler,x.pending_buf,x.pending-h,h)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){h=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>h&&(o.adler=c(o.adler,x.pending_buf,x.pending-h,h)),O(o),h=x.pending,x.pending===x.pending_buf_size)){R=1;break}R=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,re(x,R)}while(R!==0);x.gzhead.hcrc&&x.pending>h&&(o.adler=c(o.adler,x.pending_buf,x.pending-h,h)),R===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){h=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>h&&(o.adler=c(o.adler,x.pending_buf,x.pending-h,h)),O(o),h=x.pending,x.pending===x.pending_buf_size)){R=1;break}R=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,re(x,R)}while(R!==0);x.gzhead.hcrc&&x.pending>h&&(o.adler=c(o.adler,x.pending_buf,x.pending-h,h)),R===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&O(o),x.pending+2<=x.pending_buf_size&&(re(x,255&o.adler),re(x,o.adler>>8&255),o.adler=0,x.status=U)):x.status=U),x.pending!==0){if(O(o),o.avail_out===0)return x.last_flush=-1,f}else if(o.avail_in===0&&Z($)<=Z(P)&&$!==_)return te(o,-5);if(x.status===666&&o.avail_in!==0)return te(o,-5);if(o.avail_in!==0||x.lookahead!==0||$!==v&&x.status!==666){var N=x.strategy===2?function(E,W){for(var q;;){if(E.lookahead===0&&(oe(E),E.lookahead===0)){if(W===v)return l;break}if(E.match_length=0,q=t._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++,q&&(T(E,!1),E.strm.avail_out===0))return l}return E.insert=0,W===_?(T(E,!0),E.strm.avail_out===0?K:M):E.last_lit&&(T(E,!1),E.strm.avail_out===0)?l:F}(x,$):x.strategy===3?function(E,W){for(var q,V,ee,me,se=E.window;;){if(E.lookahead<=j){if(oe(E),E.lookahead<=j&&W===v)return l;if(E.lookahead===0)break}if(E.match_length=0,E.lookahead>=B&&0<E.strstart&&(V=se[ee=E.strstart-1])===se[++ee]&&V===se[++ee]&&V===se[++ee]){me=E.strstart+j;do;while(V===se[++ee]&&V===se[++ee]&&V===se[++ee]&&V===se[++ee]&&V===se[++ee]&&V===se[++ee]&&V===se[++ee]&&V===se[++ee]&&ee<me);E.match_length=j-(me-ee),E.match_length>E.lookahead&&(E.match_length=E.lookahead)}if(E.match_length>=B?(q=t._tr_tally(E,1,E.match_length-B),E.lookahead-=E.match_length,E.strstart+=E.match_length,E.match_length=0):(q=t._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++),q&&(T(E,!1),E.strm.avail_out===0))return l}return E.insert=0,W===_?(T(E,!0),E.strm.avail_out===0?K:M):E.last_lit&&(T(E,!1),E.strm.avail_out===0)?l:F}(x,$):n[x.level].func(x,$);if(N!==K&&N!==M||(x.status=666),N===l||N===K)return o.avail_out===0&&(x.last_flush=-1),f;if(N===F&&($===1?t._tr_align(x):$!==5&&(t._tr_stored_block(x,0,0,!1),$===3&&(ne(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),O(o),o.avail_out===0))return x.last_flush=-1,f}return $!==_?f:x.wrap<=0?1:(x.wrap===2?(re(x,255&o.adler),re(x,o.adler>>8&255),re(x,o.adler>>16&255),re(x,o.adler>>24&255),re(x,255&o.total_in),re(x,o.total_in>>8&255),re(x,o.total_in>>16&255),re(x,o.total_in>>24&255)):(J(x,o.adler>>>16),J(x,65535&o.adler)),O(o),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?f:1)},s.deflateEnd=function(o){var $;return o&&o.state?($=o.state.status)!==k&&$!==69&&$!==73&&$!==91&&$!==103&&$!==U&&$!==666?te(o,y):(o.state=null,$===U?te(o,-3):f):y},s.deflateSetDictionary=function(o,$){var P,x,h,R,L,N,E,W,q=$.length;if(!o||!o.state||(R=(P=o.state).wrap)===2||R===1&&P.status!==k||P.lookahead)return y;for(R===1&&(o.adler=a(o.adler,$,q,0)),P.wrap=0,q>=P.w_size&&(R===0&&(ne(P.head),P.strstart=0,P.block_start=0,P.insert=0),W=new i.Buf8(P.w_size),i.arraySet(W,$,q-P.w_size,P.w_size,0),$=W,q=P.w_size),L=o.avail_in,N=o.next_in,E=o.input,o.avail_in=q,o.next_in=0,o.input=$,oe(P);P.lookahead>=B;){for(x=P.strstart,h=P.lookahead-(B-1);P.ins_h=(P.ins_h<<P.hash_shift^P.window[x+B-1])&P.hash_mask,P.prev[x&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=x,x++,--h;);P.strstart=x,P.lookahead=B-1,oe(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=B-1,P.match_available=0,o.next_in=N,o.input=E,o.avail_in=L,P.wrap=R,f},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,u,s){u.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,u,s){u.exports=function(n,i){var t,a,c,p,v,_,f,y,d,b,g,w,S,A,C,D,I,H,B,j,X,k,U,l,F;t=n.state,a=n.next_in,l=n.input,c=a+(n.avail_in-5),p=n.next_out,F=n.output,v=p-(i-n.avail_out),_=p+(n.avail_out-257),f=t.dmax,y=t.wsize,d=t.whave,b=t.wnext,g=t.window,w=t.hold,S=t.bits,A=t.lencode,C=t.distcode,D=(1<<t.lenbits)-1,I=(1<<t.distbits)-1;e:do{S<15&&(w+=l[a++]<<S,S+=8,w+=l[a++]<<S,S+=8),H=A[w&D];t:for(;;){if(w>>>=B=H>>>24,S-=B,(B=H>>>16&255)===0)F[p++]=65535&H;else{if(!(16&B)){if(!(64&B)){H=A[(65535&H)+(w&(1<<B)-1)];continue t}if(32&B){t.mode=12;break e}n.msg="invalid literal/length code",t.mode=30;break e}j=65535&H,(B&=15)&&(S<B&&(w+=l[a++]<<S,S+=8),j+=w&(1<<B)-1,w>>>=B,S-=B),S<15&&(w+=l[a++]<<S,S+=8,w+=l[a++]<<S,S+=8),H=C[w&I];r:for(;;){if(w>>>=B=H>>>24,S-=B,!(16&(B=H>>>16&255))){if(!(64&B)){H=C[(65535&H)+(w&(1<<B)-1)];continue r}n.msg="invalid distance code",t.mode=30;break e}if(X=65535&H,S<(B&=15)&&(w+=l[a++]<<S,(S+=8)<B&&(w+=l[a++]<<S,S+=8)),f<(X+=w&(1<<B)-1)){n.msg="invalid distance too far back",t.mode=30;break e}if(w>>>=B,S-=B,(B=p-v)<X){if(d<(B=X-B)&&t.sane){n.msg="invalid distance too far back",t.mode=30;break e}if(U=g,(k=0)===b){if(k+=y-B,B<j){for(j-=B;F[p++]=g[k++],--B;);k=p-X,U=F}}else if(b<B){if(k+=y+b-B,(B-=b)<j){for(j-=B;F[p++]=g[k++],--B;);if(k=0,b<j){for(j-=B=b;F[p++]=g[k++],--B;);k=p-X,U=F}}}else if(k+=b-B,B<j){for(j-=B;F[p++]=g[k++],--B;);k=p-X,U=F}for(;2<j;)F[p++]=U[k++],F[p++]=U[k++],F[p++]=U[k++],j-=3;j&&(F[p++]=U[k++],1<j&&(F[p++]=U[k++]))}else{for(k=p-X;F[p++]=F[k++],F[p++]=F[k++],F[p++]=F[k++],2<(j-=3););j&&(F[p++]=F[k++],1<j&&(F[p++]=F[k++]))}break}}break}}while(a<c&&p<_);a-=j=S>>3,w&=(1<<(S-=j<<3))-1,n.next_in=a,n.next_out=p,n.avail_in=a<c?c-a+5:5-(a-c),n.avail_out=p<_?_-p+257:257-(p-_),t.hold=w,t.bits=S}},{}],49:[function(r,u,s){var n=r("../utils/common"),i=r("./adler32"),t=r("./crc32"),a=r("./inffast"),c=r("./inftrees"),p=1,v=2,_=0,f=-2,y=1,d=852,b=592;function g(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(k){var U;return k&&k.state?(U=k.state,k.total_in=k.total_out=U.total=0,k.msg="",U.wrap&&(k.adler=1&U.wrap),U.mode=y,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new n.Buf32(d),U.distcode=U.distdyn=new n.Buf32(b),U.sane=1,U.back=-1,_):f}function A(k){var U;return k&&k.state?((U=k.state).wsize=0,U.whave=0,U.wnext=0,S(k)):f}function C(k,U){var l,F;return k&&k.state?(F=k.state,U<0?(l=0,U=-U):(l=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?f:(F.window!==null&&F.wbits!==U&&(F.window=null),F.wrap=l,F.wbits=U,A(k))):f}function D(k,U){var l,F;return k?(F=new w,(k.state=F).window=null,(l=C(k,U))!==_&&(k.state=null),l):f}var I,H,B=!0;function j(k){if(B){var U;for(I=new n.Buf32(512),H=new n.Buf32(32),U=0;U<144;)k.lens[U++]=8;for(;U<256;)k.lens[U++]=9;for(;U<280;)k.lens[U++]=7;for(;U<288;)k.lens[U++]=8;for(c(p,k.lens,0,288,I,0,k.work,{bits:9}),U=0;U<32;)k.lens[U++]=5;c(v,k.lens,0,32,H,0,k.work,{bits:5}),B=!1}k.lencode=I,k.lenbits=9,k.distcode=H,k.distbits=5}function X(k,U,l,F){var K,M=k.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new n.Buf8(M.wsize)),F>=M.wsize?(n.arraySet(M.window,U,l-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(F<(K=M.wsize-M.wnext)&&(K=F),n.arraySet(M.window,U,l-F,K,M.wnext),(F-=K)?(n.arraySet(M.window,U,l-F,F,0),M.wnext=F,M.whave=M.wsize):(M.wnext+=K,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=K))),0}s.inflateReset=A,s.inflateReset2=C,s.inflateResetKeep=S,s.inflateInit=function(k){return D(k,15)},s.inflateInit2=D,s.inflate=function(k,U){var l,F,K,M,te,Z,ne,O,T,re,J,G,oe,Ce,ie,ue,xe,we,Ae,Re,o,$,P,x,h=0,R=new n.Buf8(4),L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return f;(l=k.state).mode===12&&(l.mode=13),te=k.next_out,K=k.output,ne=k.avail_out,M=k.next_in,F=k.input,Z=k.avail_in,O=l.hold,T=l.bits,re=Z,J=ne,$=_;e:for(;;)switch(l.mode){case y:if(l.wrap===0){l.mode=13;break}for(;T<16;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}if(2&l.wrap&&O===35615){R[l.check=0]=255&O,R[1]=O>>>8&255,l.check=t(l.check,R,2,0),T=O=0,l.mode=2;break}if(l.flags=0,l.head&&(l.head.done=!1),!(1&l.wrap)||(((255&O)<<8)+(O>>8))%31){k.msg="incorrect header check",l.mode=30;break}if((15&O)!=8){k.msg="unknown compression method",l.mode=30;break}if(T-=4,o=8+(15&(O>>>=4)),l.wbits===0)l.wbits=o;else if(o>l.wbits){k.msg="invalid window size",l.mode=30;break}l.dmax=1<<o,k.adler=l.check=1,l.mode=512&O?10:12,T=O=0;break;case 2:for(;T<16;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}if(l.flags=O,(255&l.flags)!=8){k.msg="unknown compression method",l.mode=30;break}if(57344&l.flags){k.msg="unknown header flags set",l.mode=30;break}l.head&&(l.head.text=O>>8&1),512&l.flags&&(R[0]=255&O,R[1]=O>>>8&255,l.check=t(l.check,R,2,0)),T=O=0,l.mode=3;case 3:for(;T<32;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}l.head&&(l.head.time=O),512&l.flags&&(R[0]=255&O,R[1]=O>>>8&255,R[2]=O>>>16&255,R[3]=O>>>24&255,l.check=t(l.check,R,4,0)),T=O=0,l.mode=4;case 4:for(;T<16;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}l.head&&(l.head.xflags=255&O,l.head.os=O>>8),512&l.flags&&(R[0]=255&O,R[1]=O>>>8&255,l.check=t(l.check,R,2,0)),T=O=0,l.mode=5;case 5:if(1024&l.flags){for(;T<16;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}l.length=O,l.head&&(l.head.extra_len=O),512&l.flags&&(R[0]=255&O,R[1]=O>>>8&255,l.check=t(l.check,R,2,0)),T=O=0}else l.head&&(l.head.extra=null);l.mode=6;case 6:if(1024&l.flags&&(Z<(G=l.length)&&(G=Z),G&&(l.head&&(o=l.head.extra_len-l.length,l.head.extra||(l.head.extra=new Array(l.head.extra_len)),n.arraySet(l.head.extra,F,M,G,o)),512&l.flags&&(l.check=t(l.check,F,G,M)),Z-=G,M+=G,l.length-=G),l.length))break e;l.length=0,l.mode=7;case 7:if(2048&l.flags){if(Z===0)break e;for(G=0;o=F[M+G++],l.head&&o&&l.length<65536&&(l.head.name+=String.fromCharCode(o)),o&&G<Z;);if(512&l.flags&&(l.check=t(l.check,F,G,M)),Z-=G,M+=G,o)break e}else l.head&&(l.head.name=null);l.length=0,l.mode=8;case 8:if(4096&l.flags){if(Z===0)break e;for(G=0;o=F[M+G++],l.head&&o&&l.length<65536&&(l.head.comment+=String.fromCharCode(o)),o&&G<Z;);if(512&l.flags&&(l.check=t(l.check,F,G,M)),Z-=G,M+=G,o)break e}else l.head&&(l.head.comment=null);l.mode=9;case 9:if(512&l.flags){for(;T<16;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}if(O!==(65535&l.check)){k.msg="header crc mismatch",l.mode=30;break}T=O=0}l.head&&(l.head.hcrc=l.flags>>9&1,l.head.done=!0),k.adler=l.check=0,l.mode=12;break;case 10:for(;T<32;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}k.adler=l.check=g(O),T=O=0,l.mode=11;case 11:if(l.havedict===0)return k.next_out=te,k.avail_out=ne,k.next_in=M,k.avail_in=Z,l.hold=O,l.bits=T,2;k.adler=l.check=1,l.mode=12;case 12:if(U===5||U===6)break e;case 13:if(l.last){O>>>=7&T,T-=7&T,l.mode=27;break}for(;T<3;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}switch(l.last=1&O,T-=1,3&(O>>>=1)){case 0:l.mode=14;break;case 1:if(j(l),l.mode=20,U!==6)break;O>>>=2,T-=2;break e;case 2:l.mode=17;break;case 3:k.msg="invalid block type",l.mode=30}O>>>=2,T-=2;break;case 14:for(O>>>=7&T,T-=7&T;T<32;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}if((65535&O)!=(O>>>16^65535)){k.msg="invalid stored block lengths",l.mode=30;break}if(l.length=65535&O,T=O=0,l.mode=15,U===6)break e;case 15:l.mode=16;case 16:if(G=l.length){if(Z<G&&(G=Z),ne<G&&(G=ne),G===0)break e;n.arraySet(K,F,M,G,te),Z-=G,M+=G,ne-=G,te+=G,l.length-=G;break}l.mode=12;break;case 17:for(;T<14;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}if(l.nlen=257+(31&O),O>>>=5,T-=5,l.ndist=1+(31&O),O>>>=5,T-=5,l.ncode=4+(15&O),O>>>=4,T-=4,286<l.nlen||30<l.ndist){k.msg="too many length or distance symbols",l.mode=30;break}l.have=0,l.mode=18;case 18:for(;l.have<l.ncode;){for(;T<3;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}l.lens[L[l.have++]]=7&O,O>>>=3,T-=3}for(;l.have<19;)l.lens[L[l.have++]]=0;if(l.lencode=l.lendyn,l.lenbits=7,P={bits:l.lenbits},$=c(0,l.lens,0,19,l.lencode,0,l.work,P),l.lenbits=P.bits,$){k.msg="invalid code lengths set",l.mode=30;break}l.have=0,l.mode=19;case 19:for(;l.have<l.nlen+l.ndist;){for(;ue=(h=l.lencode[O&(1<<l.lenbits)-1])>>>16&255,xe=65535&h,!((ie=h>>>24)<=T);){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}if(xe<16)O>>>=ie,T-=ie,l.lens[l.have++]=xe;else{if(xe===16){for(x=ie+2;T<x;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}if(O>>>=ie,T-=ie,l.have===0){k.msg="invalid bit length repeat",l.mode=30;break}o=l.lens[l.have-1],G=3+(3&O),O>>>=2,T-=2}else if(xe===17){for(x=ie+3;T<x;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}T-=ie,o=0,G=3+(7&(O>>>=ie)),O>>>=3,T-=3}else{for(x=ie+7;T<x;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}T-=ie,o=0,G=11+(127&(O>>>=ie)),O>>>=7,T-=7}if(l.have+G>l.nlen+l.ndist){k.msg="invalid bit length repeat",l.mode=30;break}for(;G--;)l.lens[l.have++]=o}}if(l.mode===30)break;if(l.lens[256]===0){k.msg="invalid code -- missing end-of-block",l.mode=30;break}if(l.lenbits=9,P={bits:l.lenbits},$=c(p,l.lens,0,l.nlen,l.lencode,0,l.work,P),l.lenbits=P.bits,$){k.msg="invalid literal/lengths set",l.mode=30;break}if(l.distbits=6,l.distcode=l.distdyn,P={bits:l.distbits},$=c(v,l.lens,l.nlen,l.ndist,l.distcode,0,l.work,P),l.distbits=P.bits,$){k.msg="invalid distances set",l.mode=30;break}if(l.mode=20,U===6)break e;case 20:l.mode=21;case 21:if(6<=Z&&258<=ne){k.next_out=te,k.avail_out=ne,k.next_in=M,k.avail_in=Z,l.hold=O,l.bits=T,a(k,J),te=k.next_out,K=k.output,ne=k.avail_out,M=k.next_in,F=k.input,Z=k.avail_in,O=l.hold,T=l.bits,l.mode===12&&(l.back=-1);break}for(l.back=0;ue=(h=l.lencode[O&(1<<l.lenbits)-1])>>>16&255,xe=65535&h,!((ie=h>>>24)<=T);){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}if(ue&&!(240&ue)){for(we=ie,Ae=ue,Re=xe;ue=(h=l.lencode[Re+((O&(1<<we+Ae)-1)>>we)])>>>16&255,xe=65535&h,!(we+(ie=h>>>24)<=T);){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}O>>>=we,T-=we,l.back+=we}if(O>>>=ie,T-=ie,l.back+=ie,l.length=xe,ue===0){l.mode=26;break}if(32&ue){l.back=-1,l.mode=12;break}if(64&ue){k.msg="invalid literal/length code",l.mode=30;break}l.extra=15&ue,l.mode=22;case 22:if(l.extra){for(x=l.extra;T<x;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}l.length+=O&(1<<l.extra)-1,O>>>=l.extra,T-=l.extra,l.back+=l.extra}l.was=l.length,l.mode=23;case 23:for(;ue=(h=l.distcode[O&(1<<l.distbits)-1])>>>16&255,xe=65535&h,!((ie=h>>>24)<=T);){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}if(!(240&ue)){for(we=ie,Ae=ue,Re=xe;ue=(h=l.distcode[Re+((O&(1<<we+Ae)-1)>>we)])>>>16&255,xe=65535&h,!(we+(ie=h>>>24)<=T);){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}O>>>=we,T-=we,l.back+=we}if(O>>>=ie,T-=ie,l.back+=ie,64&ue){k.msg="invalid distance code",l.mode=30;break}l.offset=xe,l.extra=15&ue,l.mode=24;case 24:if(l.extra){for(x=l.extra;T<x;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}l.offset+=O&(1<<l.extra)-1,O>>>=l.extra,T-=l.extra,l.back+=l.extra}if(l.offset>l.dmax){k.msg="invalid distance too far back",l.mode=30;break}l.mode=25;case 25:if(ne===0)break e;if(G=J-ne,l.offset>G){if((G=l.offset-G)>l.whave&&l.sane){k.msg="invalid distance too far back",l.mode=30;break}oe=G>l.wnext?(G-=l.wnext,l.wsize-G):l.wnext-G,G>l.length&&(G=l.length),Ce=l.window}else Ce=K,oe=te-l.offset,G=l.length;for(ne<G&&(G=ne),ne-=G,l.length-=G;K[te++]=Ce[oe++],--G;);l.length===0&&(l.mode=21);break;case 26:if(ne===0)break e;K[te++]=l.length,ne--,l.mode=21;break;case 27:if(l.wrap){for(;T<32;){if(Z===0)break e;Z--,O|=F[M++]<<T,T+=8}if(J-=ne,k.total_out+=J,l.total+=J,J&&(k.adler=l.check=l.flags?t(l.check,K,J,te-J):i(l.check,K,J,te-J)),J=ne,(l.flags?O:g(O))!==l.check){k.msg="incorrect data check",l.mode=30;break}T=O=0}l.mode=28;case 28:if(l.wrap&&l.flags){for(;T<32;){if(Z===0)break e;Z--,O+=F[M++]<<T,T+=8}if(O!==(4294967295&l.total)){k.msg="incorrect length check",l.mode=30;break}T=O=0}l.mode=29;case 29:$=1;break e;case 30:$=-3;break e;case 31:return-4;case 32:default:return f}return k.next_out=te,k.avail_out=ne,k.next_in=M,k.avail_in=Z,l.hold=O,l.bits=T,(l.wsize||J!==k.avail_out&&l.mode<30&&(l.mode<27||U!==4))&&X(k,k.output,k.next_out,J-k.avail_out)?(l.mode=31,-4):(re-=k.avail_in,J-=k.avail_out,k.total_in+=re,k.total_out+=J,l.total+=J,l.wrap&&J&&(k.adler=l.check=l.flags?t(l.check,K,J,k.next_out-J):i(l.check,K,J,k.next_out-J)),k.data_type=l.bits+(l.last?64:0)+(l.mode===12?128:0)+(l.mode===20||l.mode===15?256:0),(re==0&&J===0||U===4)&&$===_&&($=-5),$)},s.inflateEnd=function(k){if(!k||!k.state)return f;var U=k.state;return U.window&&(U.window=null),k.state=null,_},s.inflateGetHeader=function(k,U){var l;return k&&k.state&&2&(l=k.state).wrap?((l.head=U).done=!1,_):f},s.inflateSetDictionary=function(k,U){var l,F=U.length;return k&&k.state?(l=k.state).wrap!==0&&l.mode!==11?f:l.mode===11&&i(1,U,F,0)!==l.check?-3:X(k,U,F,F)?(l.mode=31,-4):(l.havedict=1,_):f},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,u,s){var n=r("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],t=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];u.exports=function(p,v,_,f,y,d,b,g){var w,S,A,C,D,I,H,B,j,X=g.bits,k=0,U=0,l=0,F=0,K=0,M=0,te=0,Z=0,ne=0,O=0,T=null,re=0,J=new n.Buf16(16),G=new n.Buf16(16),oe=null,Ce=0;for(k=0;k<=15;k++)J[k]=0;for(U=0;U<f;U++)J[v[_+U]]++;for(K=X,F=15;1<=F&&J[F]===0;F--);if(F<K&&(K=F),F===0)return y[d++]=20971520,y[d++]=20971520,g.bits=1,0;for(l=1;l<F&&J[l]===0;l++);for(K<l&&(K=l),k=Z=1;k<=15;k++)if(Z<<=1,(Z-=J[k])<0)return-1;if(0<Z&&(p===0||F!==1))return-1;for(G[1]=0,k=1;k<15;k++)G[k+1]=G[k]+J[k];for(U=0;U<f;U++)v[_+U]!==0&&(b[G[v[_+U]]++]=U);if(I=p===0?(T=oe=b,19):p===1?(T=i,re-=257,oe=t,Ce-=257,256):(T=a,oe=c,-1),k=l,D=d,te=U=O=0,A=-1,C=(ne=1<<(M=K))-1,p===1&&852<ne||p===2&&592<ne)return 1;for(;;){for(H=k-te,j=b[U]<I?(B=0,b[U]):b[U]>I?(B=oe[Ce+b[U]],T[re+b[U]]):(B=96,0),w=1<<k-te,l=S=1<<M;y[D+(O>>te)+(S-=w)]=H<<24|B<<16|j|0,S!==0;);for(w=1<<k-1;O&w;)w>>=1;if(w!==0?(O&=w-1,O+=w):O=0,U++,--J[k]==0){if(k===F)break;k=v[_+b[U]]}if(K<k&&(O&C)!==A){for(te===0&&(te=K),D+=l,Z=1<<(M=k-te);M+te<F&&!((Z-=J[M+te])<=0);)M++,Z<<=1;if(ne+=1<<M,p===1&&852<ne||p===2&&592<ne)return 1;y[A=O&C]=K<<24|M<<16|D-d|0}}return O!==0&&(y[D+O]=k-te<<24|64<<16|0),g.bits=K,0}},{"../utils/common":41}],51:[function(r,u,s){u.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,u,s){var n=r("../utils/common"),i=0,t=1;function a(h){for(var R=h.length;0<=--R;)h[R]=0}var c=0,p=29,v=256,_=v+1+p,f=30,y=19,d=2*_+1,b=15,g=16,w=7,S=256,A=16,C=17,D=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(_+2));a(X);var k=new Array(2*f);a(k);var U=new Array(512);a(U);var l=new Array(256);a(l);var F=new Array(p);a(F);var K,M,te,Z=new Array(f);function ne(h,R,L,N,E){this.static_tree=h,this.extra_bits=R,this.extra_base=L,this.elems=N,this.max_length=E,this.has_stree=h&&h.length}function O(h,R){this.dyn_tree=h,this.max_code=0,this.stat_desc=R}function T(h){return h<256?U[h]:U[256+(h>>>7)]}function re(h,R){h.pending_buf[h.pending++]=255&R,h.pending_buf[h.pending++]=R>>>8&255}function J(h,R,L){h.bi_valid>g-L?(h.bi_buf|=R<<h.bi_valid&65535,re(h,h.bi_buf),h.bi_buf=R>>g-h.bi_valid,h.bi_valid+=L-g):(h.bi_buf|=R<<h.bi_valid&65535,h.bi_valid+=L)}function G(h,R,L){J(h,L[2*R],L[2*R+1])}function oe(h,R){for(var L=0;L|=1&h,h>>>=1,L<<=1,0<--R;);return L>>>1}function Ce(h,R,L){var N,E,W=new Array(b+1),q=0;for(N=1;N<=b;N++)W[N]=q=q+L[N-1]<<1;for(E=0;E<=R;E++){var V=h[2*E+1];V!==0&&(h[2*E]=oe(W[V]++,V))}}function ie(h){var R;for(R=0;R<_;R++)h.dyn_ltree[2*R]=0;for(R=0;R<f;R++)h.dyn_dtree[2*R]=0;for(R=0;R<y;R++)h.bl_tree[2*R]=0;h.dyn_ltree[2*S]=1,h.opt_len=h.static_len=0,h.last_lit=h.matches=0}function ue(h){8<h.bi_valid?re(h,h.bi_buf):0<h.bi_valid&&(h.pending_buf[h.pending++]=h.bi_buf),h.bi_buf=0,h.bi_valid=0}function xe(h,R,L,N){var E=2*R,W=2*L;return h[E]<h[W]||h[E]===h[W]&&N[R]<=N[L]}function we(h,R,L){for(var N=h.heap[L],E=L<<1;E<=h.heap_len&&(E<h.heap_len&&xe(R,h.heap[E+1],h.heap[E],h.depth)&&E++,!xe(R,N,h.heap[E],h.depth));)h.heap[L]=h.heap[E],L=E,E<<=1;h.heap[L]=N}function Ae(h,R,L){var N,E,W,q,V=0;if(h.last_lit!==0)for(;N=h.pending_buf[h.d_buf+2*V]<<8|h.pending_buf[h.d_buf+2*V+1],E=h.pending_buf[h.l_buf+V],V++,N===0?G(h,E,R):(G(h,(W=l[E])+v+1,R),(q=I[W])!==0&&J(h,E-=F[W],q),G(h,W=T(--N),L),(q=H[W])!==0&&J(h,N-=Z[W],q)),V<h.last_lit;);G(h,S,R)}function Re(h,R){var L,N,E,W=R.dyn_tree,q=R.stat_desc.static_tree,V=R.stat_desc.has_stree,ee=R.stat_desc.elems,me=-1;for(h.heap_len=0,h.heap_max=d,L=0;L<ee;L++)W[2*L]!==0?(h.heap[++h.heap_len]=me=L,h.depth[L]=0):W[2*L+1]=0;for(;h.heap_len<2;)W[2*(E=h.heap[++h.heap_len]=me<2?++me:0)]=1,h.depth[E]=0,h.opt_len--,V&&(h.static_len-=q[2*E+1]);for(R.max_code=me,L=h.heap_len>>1;1<=L;L--)we(h,W,L);for(E=ee;L=h.heap[1],h.heap[1]=h.heap[h.heap_len--],we(h,W,1),N=h.heap[1],h.heap[--h.heap_max]=L,h.heap[--h.heap_max]=N,W[2*E]=W[2*L]+W[2*N],h.depth[E]=(h.depth[L]>=h.depth[N]?h.depth[L]:h.depth[N])+1,W[2*L+1]=W[2*N+1]=E,h.heap[1]=E++,we(h,W,1),2<=h.heap_len;);h.heap[--h.heap_max]=h.heap[1],function(se,Ee){var ut,Oe,ct,_e,bt,Ut,Fe=Ee.dyn_tree,or=Ee.max_code,Jr=Ee.stat_desc.static_tree,Qr=Ee.stat_desc.has_stree,en=Ee.stat_desc.extra_bits,ar=Ee.stat_desc.extra_base,dt=Ee.stat_desc.max_length,yt=0;for(_e=0;_e<=b;_e++)se.bl_count[_e]=0;for(Fe[2*se.heap[se.heap_max]+1]=0,ut=se.heap_max+1;ut<d;ut++)dt<(_e=Fe[2*Fe[2*(Oe=se.heap[ut])+1]+1]+1)&&(_e=dt,yt++),Fe[2*Oe+1]=_e,or<Oe||(se.bl_count[_e]++,bt=0,ar<=Oe&&(bt=en[Oe-ar]),Ut=Fe[2*Oe],se.opt_len+=Ut*(_e+bt),Qr&&(se.static_len+=Ut*(Jr[2*Oe+1]+bt)));if(yt!==0){do{for(_e=dt-1;se.bl_count[_e]===0;)_e--;se.bl_count[_e]--,se.bl_count[_e+1]+=2,se.bl_count[dt]--,yt-=2}while(0<yt);for(_e=dt;_e!==0;_e--)for(Oe=se.bl_count[_e];Oe!==0;)or<(ct=se.heap[--ut])||(Fe[2*ct+1]!==_e&&(se.opt_len+=(_e-Fe[2*ct+1])*Fe[2*ct],Fe[2*ct+1]=_e),Oe--)}}(h,R),Ce(W,me,h.bl_count)}function o(h,R,L){var N,E,W=-1,q=R[1],V=0,ee=7,me=4;for(q===0&&(ee=138,me=3),R[2*(L+1)+1]=65535,N=0;N<=L;N++)E=q,q=R[2*(N+1)+1],++V<ee&&E===q||(V<me?h.bl_tree[2*E]+=V:E!==0?(E!==W&&h.bl_tree[2*E]++,h.bl_tree[2*A]++):V<=10?h.bl_tree[2*C]++:h.bl_tree[2*D]++,W=E,me=(V=0)===q?(ee=138,3):E===q?(ee=6,3):(ee=7,4))}function $(h,R,L){var N,E,W=-1,q=R[1],V=0,ee=7,me=4;for(q===0&&(ee=138,me=3),N=0;N<=L;N++)if(E=q,q=R[2*(N+1)+1],!(++V<ee&&E===q)){if(V<me)for(;G(h,E,h.bl_tree),--V!=0;);else E!==0?(E!==W&&(G(h,E,h.bl_tree),V--),G(h,A,h.bl_tree),J(h,V-3,2)):V<=10?(G(h,C,h.bl_tree),J(h,V-3,3)):(G(h,D,h.bl_tree),J(h,V-11,7));W=E,me=(V=0)===q?(ee=138,3):E===q?(ee=6,3):(ee=7,4)}}a(Z);var P=!1;function x(h,R,L,N){J(h,(c<<1)+(N?1:0),3),function(E,W,q,V){ue(E),re(E,q),re(E,~q),n.arraySet(E.pending_buf,E.window,W,q,E.pending),E.pending+=q}(h,R,L)}s._tr_init=function(h){P||(function(){var R,L,N,E,W,q=new Array(b+1);for(E=N=0;E<p-1;E++)for(F[E]=N,R=0;R<1<<I[E];R++)l[N++]=E;for(l[N-1]=E,E=W=0;E<16;E++)for(Z[E]=W,R=0;R<1<<H[E];R++)U[W++]=E;for(W>>=7;E<f;E++)for(Z[E]=W<<7,R=0;R<1<<H[E]-7;R++)U[256+W++]=E;for(L=0;L<=b;L++)q[L]=0;for(R=0;R<=143;)X[2*R+1]=8,R++,q[8]++;for(;R<=255;)X[2*R+1]=9,R++,q[9]++;for(;R<=279;)X[2*R+1]=7,R++,q[7]++;for(;R<=287;)X[2*R+1]=8,R++,q[8]++;for(Ce(X,_+1,q),R=0;R<f;R++)k[2*R+1]=5,k[2*R]=oe(R,5);K=new ne(X,I,v+1,_,b),M=new ne(k,H,0,f,b),te=new ne(new Array(0),B,0,y,w)}(),P=!0),h.l_desc=new O(h.dyn_ltree,K),h.d_desc=new O(h.dyn_dtree,M),h.bl_desc=new O(h.bl_tree,te),h.bi_buf=0,h.bi_valid=0,ie(h)},s._tr_stored_block=x,s._tr_flush_block=function(h,R,L,N){var E,W,q=0;0<h.level?(h.strm.data_type===2&&(h.strm.data_type=function(V){var ee,me=4093624447;for(ee=0;ee<=31;ee++,me>>>=1)if(1&me&&V.dyn_ltree[2*ee]!==0)return i;if(V.dyn_ltree[18]!==0||V.dyn_ltree[20]!==0||V.dyn_ltree[26]!==0)return t;for(ee=32;ee<v;ee++)if(V.dyn_ltree[2*ee]!==0)return t;return i}(h)),Re(h,h.l_desc),Re(h,h.d_desc),q=function(V){var ee;for(o(V,V.dyn_ltree,V.l_desc.max_code),o(V,V.dyn_dtree,V.d_desc.max_code),Re(V,V.bl_desc),ee=y-1;3<=ee&&V.bl_tree[2*j[ee]+1]===0;ee--);return V.opt_len+=3*(ee+1)+5+5+4,ee}(h),E=h.opt_len+3+7>>>3,(W=h.static_len+3+7>>>3)<=E&&(E=W)):E=W=L+5,L+4<=E&&R!==-1?x(h,R,L,N):h.strategy===4||W===E?(J(h,2+(N?1:0),3),Ae(h,X,k)):(J(h,4+(N?1:0),3),function(V,ee,me,se){var Ee;for(J(V,ee-257,5),J(V,me-1,5),J(V,se-4,4),Ee=0;Ee<se;Ee++)J(V,V.bl_tree[2*j[Ee]+1],3);$(V,V.dyn_ltree,ee-1),$(V,V.dyn_dtree,me-1)}(h,h.l_desc.max_code+1,h.d_desc.max_code+1,q+1),Ae(h,h.dyn_ltree,h.dyn_dtree)),ie(h),N&&ue(h)},s._tr_tally=function(h,R,L){return h.pending_buf[h.d_buf+2*h.last_lit]=R>>>8&255,h.pending_buf[h.d_buf+2*h.last_lit+1]=255&R,h.pending_buf[h.l_buf+h.last_lit]=255&L,h.last_lit++,R===0?h.dyn_ltree[2*L]++:(h.matches++,R--,h.dyn_ltree[2*(l[L]+v+1)]++,h.dyn_dtree[2*T(R)]++),h.last_lit===h.lit_bufsize-1},s._tr_align=function(h){J(h,2,3),G(h,S,X),function(R){R.bi_valid===16?(re(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):8<=R.bi_valid&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)}(h)}},{"../utils/common":41}],53:[function(r,u,s){u.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,u,s){(function(n){(function(i,t){if(!i.setImmediate){var a,c,p,v,_=1,f={},y=!1,d=i.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(i);b=b&&b.setTimeout?b:i,a={}.toString.call(i.process)==="[object process]"?function(A){process.nextTick(function(){w(A)})}:function(){if(i.postMessage&&!i.importScripts){var A=!0,C=i.onmessage;return i.onmessage=function(){A=!1},i.postMessage("","*"),i.onmessage=C,A}}()?(v="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",S,!1):i.attachEvent("onmessage",S),function(A){i.postMessage(v+A,"*")}):i.MessageChannel?((p=new MessageChannel).port1.onmessage=function(A){w(A.data)},function(A){p.port2.postMessage(A)}):d&&"onreadystatechange"in d.createElement("script")?(c=d.documentElement,function(A){var C=d.createElement("script");C.onreadystatechange=function(){w(A),C.onreadystatechange=null,c.removeChild(C),C=null},c.appendChild(C)}):function(A){setTimeout(w,0,A)},b.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var C=new Array(arguments.length-1),D=0;D<C.length;D++)C[D]=arguments[D+1];var I={callback:A,args:C};return f[_]=I,a(_),_++},b.clearImmediate=g}function g(A){delete f[A]}function w(A){if(y)setTimeout(w,0,A);else{var C=f[A];if(C){y=!0;try{(function(D){var I=D.callback,H=D.args;switch(H.length){case 0:I();break;case 1:I(H[0]);break;case 2:I(H[0],H[1]);break;case 3:I(H[0],H[1],H[2]);break;default:I.apply(t,H)}})(C)}finally{g(A),y=!1}}}}function S(A){A.source===i&&typeof A.data=="string"&&A.data.indexOf(v)===0&&w(+A.data.slice(v.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof wt<"u"?wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Kr);var So=Kr.exports;const Ro=Sn(So),zo={class:"content"},Bo={class:"info"},Ao=["src"],Eo=ye({__name:"index",setup(e){const m=ge([{src:ko,boxList:[{name:"头盔",x:.15,y:.15,w:.15,h:.15},{name:"口罩",x:.35,y:.45,w:.25,h:.25}]},{src:Co,boxList:[]}]),r=ge(0);Rr(Vr,a=>{m.value.length>=r.value&&(m.value[r.value].boxList=a)});function u(a){a!==r.value&&(a!==void 0&&(r.value=a),requestAnimationFrame(()=>$t(m.value[r.value])))}u();function s(a){const c=a[0];if(!c||!c.file)return;const p=URL.createObjectURL(c.file);m.value.push({src:p,boxList:[]})}function n(a){m.value.splice(a,1),m.value.length==0?(r.value=0,$t()):a==r.value&&(r.value=Math.max(0,r.value-1),$t(m.value[r.value]))}function i(a){Ve.value=Ve.value.filter(c=>c.name!==a),m.value.forEach(c=>{c.boxList=c.boxList.filter(p=>p.name!==a)}),u()}async function t(){const a="yolo8FormatAnnotator";if(An(a,"导出中..."),m.value.length==0)return window.$message.warning("没有图片可导出~");const c=new Ro,p=c.folder("images"),v=c.folder("annotations");if(!p||!v)return window.$message.warning("图片导出失败~");const _=Ve.value.map(f=>f.name);c.file("names.txt",`names: ["${_.join('", "')}"]`);for(const f of m.value)try{const d=await(await fetch(f.src)).blob(),b=er();p.file(b+"."+d.type.split("/")[1],d);const g=f.boxList.map(w=>{const{name:S,x:A,y:C,w:D,h:I}=w;return`${_.findIndex(H=>H===S)} ${A} ${C} ${D} ${I}`}).join(`
`);v.file(b+".txt",g)}catch(y){console.error(`Error fetching image at ${f.src}: ${y}`)}c.generateAsync({type:"blob"}).then(function(f){const y=URL.createObjectURL(f),d=document.createElement("a");d.href=y,d.download="yolo8FormatAnnotator.zip",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(y)}).finally(()=>En(a))}return window.addEventListener("mousemove",_r),window.addEventListener("mouseup",wr),window.addEventListener("keydown",xr),Rn(()=>{window.removeEventListener("mousemove",_r),window.removeEventListener("mouseup",wr),window.removeEventListener("keydown",xr)}),(a,c)=>($e(),it("div",zo,[Te("div",Bo,[ze(de(Ln),{href:"https://github.com/ultralytics/ultralytics",target:"_blank"},{default:Se(()=>[Le(" ultralytics YOLO Vision ")]),_:1}),ze(de(Be),{onClick:de(xo)},{default:Se(()=>[Le("添加标签")]),_:1},8,["onClick"]),ze(de(Rt),null,{default:Se(()=>[($e(!0),it(St,null,Ft(de(Ve),p=>($e(),Lt(de(In),{key:p.name,closable:"",bordered:!1,class:"box-tag",color:{color:p.color,textColor:"#fff"},onClose:v=>i(p.name)},{default:Se(()=>[Le(Nt(p.name),1)]),_:2},1032,["color","onClose"]))),128))]),_:1}),ze(de(Rt),null,{default:Se(()=>[ze(de(eo),{multiple:"",accept:"image/*","show-file-list":!1,"file-list":[],"onUpdate:fileList":s},{default:Se(()=>[ze(de(Be),null,{default:Se(()=>[Le("添加图片")]),_:1})]),_:1}),ze(de(Be),{onClick:t},{default:Se(()=>[Le("导出")]),_:1})]),_:1}),ze(de(Hn),{class:"file-list"},{default:Se(()=>[ze(de(ki),{hoverable:"",clickable:""},{default:Se(()=>[($e(!0),it(St,null,Ft(m.value,(p,v)=>($e(),Lt(de(Ci),{key:p.src,class:Dn([v==r.value&&"active"]),onClick:_=>u(v)},{default:Se(()=>[Te("img",{src:p.src,alt:""},null,8,Ao),Le(" 标注个数："+Nt(p.boxList.length)+" ",1),ze(de(Be),{onClick:Tn(_=>n(v),["stop"])},{default:Se(()=>[ze(de(Tr),{size:"20",component:de(po)},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),Te("div",{class:"canvas-box",style:zn({"pointer-events":m.value.length>0?"auto":"none"})},[Te("canvas",{ref_key:"canvas",ref:Hr,onWheel:c[0]||(c[0]=(...p)=>de(vr)&&de(vr)(...p)),onMousedown:c[1]||(c[1]=(...p)=>de(yr)&&de(yr)(...p)),onContextmenu:c[2]||(c[2]=(...p)=>de(kr)&&de(kr)(...p)),onClick:c[3]||(c[3]=(...p)=>de(br)&&de(br)(...p))},null,544),ze(de(Rt),null,{default:Se(()=>[ze(de(Wn),{value:de(Bt),"onUpdate:value":c[4]||(c[4]=p=>Bn(Bt)?Bt.value=p:null),size:"large"},{checked:Se(()=>[Le(" 连续创建")]),unchecked:Se(()=>[Le(" 单个创建 ")]),_:1},8,["value"]),($e(!0),it(St,null,Ft(de(Ve),(p,v)=>{var _;return $e(),Lt(de(Be),{key:p.color,onClick:f=>de(yo)(v),color:p.color,secondary:((_=de(ae))==null?void 0:_.name)!==p.name},{default:Se(()=>[Le(Nt(p.name),1)]),_:2},1032,["onClick","color","secondary"])}),128))]),_:1})],4)]))}}),jo=Pn(Eo,[["__scopeId","data-v-e1d7303e"]]);export{jo as default};
